SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("2Pp2AIeo",["GlDbwxoG","s_Igk1Yn"],(async(e,t)=>{var i=t.i`${e.Z}a,button{background:0 0;border-radius:inherit;color:inherit;border:none;padding:0;margin:inherit;font:inherit;cursor:pointer;outline:inherit;display:inherit;width:inherit;height:inherit;text-decoration:none}a:focus-visible,button:focus-visible{outline:2px solid var(--color-global-focus)}`;class r extends e.R{constructor(){super(...arguments),this.disabled=!1,this.selected=!1}renderLeadingContent(){return t.x`<slot name="leading"></slot> `}renderTrailingContent(){return t.x`<slot name="trailing"></slot> `}handleDisabledLinkClick(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}render(){const e=t.x`${this.renderLeadingContent()} <slot></slot> ${this.renderTrailingContent()}`;return this.href?t.x`<a href="${this.href}" aria-disabled="${this.disabled?"true":"false"}" aria-pressed="${this.selected}" @click="${this.handleDisabledLinkClick}">${e}</a>`:t.x`<button ?disabled="${this.disabled}" aria-pressed="${this.selected}"> ${e} </button>`}}r.styles=i,e._([e.n({type:Boolean})],r.prototype,"disabled",void 0),e._([e.n({type:Boolean,reflect:!0})],r.prototype,"selected",void 0),e._([e.n({type:String})],r.prototype,"href",void 0);var n=t.i`${e.Z}:host{display:inline-flex;border:1px solid transparent;cursor:pointer}.container{display:inherit;align-items:center}slot:not([name]){display:inline-flex;line-height:var(--rem16);font-size:var(--rem12)}`;class s extends r{}return s.styles=[r.styles,n],{R:s}}));
SML.di("./Baruuhvw.js",import.meta.url,"Baruuhvw");SML.di("./7wh8_1jK.js",import.meta.url,"7wh8_1jK");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DtcD-j6p.js",import.meta.url,"DtcD-j6p");SML.di("./DzMpUNmB.js",import.meta.url,"DzMpUNmB");SML.di("./C-d7BR1A.js",import.meta.url,"C-d7BR1A");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");SML.di("./DK2EuOAl.js",import.meta.url,"DK2EuOAl");SML.di("./B4wbfaco.js",import.meta.url,"B4wbfaco");SML.di("./BHW1DH4B.js",import.meta.url,"BHW1DH4B");SML.di("./B5aCBAWI.js",import.meta.url,"B5aCBAWI");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./FagDXDzk.js",import.meta.url,"FagDXDzk");
SML.dm("5gAfgEzX",["GlDbwxoG","s_Igk1Yn","DtcD-j6p","DzMpUNmB","C-d7BR1A","D-MAMWlw","DRM-oTYq","Baruuhvw","7wh8_1jK","DK2EuOAl","B4wbfaco","BHW1DH4B","B5aCBAWI","CC2wUKE8","FagDXDzk"],(async(e,a,n,t,r,s,i)=>{const o=a.s;let d=class extends o{constructor(){super(...arguments),this.contentId="",this.isSnoozed=!1,this.reportReason="",this.pubsub=new e.m(this),this.onPostUpdateAction=e=>{if(e.postId!==this.contentId)return;const{action:a}=e;switch(a){case s.a.snoozeReporter:this.isSnoozed=!0;break;case s.a.unsnoozeReporter:this.isSnoozed=!1}},this.onCommentUpdateAction=e=>{if(e.commentId!==this.contentId)return;const{action:a}=e;switch(a){case r.C.snoozeReporter:this.isSnoozed=!0;break;case r.C.unsnoozeReporter:this.isSnoozed=!1}}}connectedCallback(){super.connectedCallback(),i.h(this.contentId)?this.pubsub.subscribe(e.T.PostUpdated,this.onPostUpdateAction):this.pubsub.subscribe(e.T.CommentUpdated,this.onCommentUpdateAction)}renderReportOverflowMenu(){const r="Snooze reporter",s="Pause reports from this user for 7 days",i="Un-snooze reporter",o="Receive reports from this user again";return a.x` <mod-dropdown-closer> <faceplate-dropdown-menu @click="${e=>e.stopPropagation()}" position="bottom-end"> ${e.Y({appearance:"plain",size:e.a7.ExtraSmall,children:n.o({size:a.I.ExtraSmall})})} <faceplate-menu slot="menu"> ${t.l({label:this.isSnoozed?i:r,description:this.isSnoozed?o:s,leadingIcon:a.ai({size:a.I.Small}),onClick:this.toggleSnooze})} </faceplate-menu> </faceplate-dropdown-menu> </mod-dropdown-closer> `}sendTrackingEvent(a,n,t){const r=t?"snoozereports":"unsnoozereports",s=i.h(a)?"post":"comment",o=i.h(a)?a:null,d=i.h(a)?null:a,l=e.b({source:"moderator",action:r,noun:s},{...(o && {post:{id:o}}),...(d && {comment:{id:d}}),...(n && {action_info:{reason:n}})});e.f(this,l)}showToast({success:a,isSnoozed:n}){const t="Reports from these users will be paused",r="Reports from these users will be resumed",s="Failed to update reports",i=a?n?t:r:s,o=a?e.X.info:e.X.error,d=e.c("faceplate-alert",{level:o,message:i});this.dispatchEvent(d)}async updateReportState(a){try{const{data:n}=await e.B({operation:e.C.UpdateReportState,variables:{input:{itemId:this.contentId,reportText:this.reportReason,isSnoozed:a}}});return n?.updateReport?.ok??!1}catch(e){return!1}}async toggleSnooze(a){const n=!this.isSnoozed;this.sendTrackingEvent(this.contentId,this.reportReason,n);const t=await this.updateReportState(n);t&&(n?i.h(this.contentId)?this.pubsub.publish(e.T.PostUpdated,{postId:this.contentId,action:s.a.snoozeReporter,value:!0}):this.pubsub.publish(e.T.CommentUpdated,{commentId:this.contentId,action:r.C.snoozeReporter,value:!0}):i.h(this.contentId)?this.pubsub.publish(e.T.PostUpdated,{postId:this.contentId,action:s.a.unsnoozeReporter,value:!0}):this.pubsub.publish(e.T.CommentUpdated,{commentId:this.contentId,action:r.C.unsnoozeReporter,value:!0})),this.showToast({success:t,isSnoozed:this.isSnoozed})}render(){const n={"flex items-center m-0 p-0":!0,"bg-secondary-background":this.isSnoozed};return a.x`<li class="${e.H(n)}"> <slot name="${a.l(this.isSnoozed?"snoozed":void 0)}" class="flex-auto block"></slot> ${this.renderReportOverflowMenu()} </li> `}};d.styles=[e.t],e._([e.n({type:String,attribute:"content-id"})],d.prototype,"contentId",void 0),e._([e.n({type:Boolean,attribute:"is-snoozed"})],d.prototype,"isSnoozed",void 0),e._([e.n({type:String,attribute:"report-reason"})],d.prototype,"reportReason",void 0),d=e._([e.e("user-report-summary")],d)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./hMhijB38.js",import.meta.url,"hMhijB38");
SML.dm("6vFpI7Hj",["GlDbwxoG","CC2wUKE8","s_Igk1Yn","hMhijB38"],(async(t,e,r,E)=>{const s=e.W(r.s);let a=class extends s{constructor(){super(...arguments),this.id="",this.subreddit=""}pageIndexChangedCallback(e){super.pageIndexChangedCallback(e);const r=this.pageIndex>e?E.G.Forward:E.G.Backward;t.f(this,E.g(this,r))}};t._([t.n({type:String})],a.prototype,"id",void 0),t._([t.n({type:String})],a.prototype,"subreddit",void 0),a=t._([t.e("shreddit-gallery-listener")],a)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./C-d7BR1A.js",import.meta.url,"C-d7BR1A");SML.di("./FagDXDzk.js",import.meta.url,"FagDXDzk");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("7wh8_1jK",["GlDbwxoG","C-d7BR1A","FagDXDzk","D-MAMWlw","s_Igk1Yn"],(async(t,s,e,o,r)=>{let i=class extends r.s{constructor(){super(...arguments),this.status=e.R.Reported,this.pubsub=new t.m(this),this.handlePostUpdate=({postId:t,action:s,value:r})=>{t===this.thingId&&s===o.a.ignoreReports&&(this.status=r?e.R.Ignored:e.R.Dismissed)},this.handleCommentUpdate=({commentId:t,action:o,value:r})=>{t===this.thingId&&o===s.C.ignoreReports&&(this.status=r?e.R.Ignored:e.R.Dismissed)}}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(t.T.PostUpdated,this.handlePostUpdate),this.pubsub.subscribe(t.T.CommentUpdated,this.handleCommentUpdate)}getStyle(){return r.o({"--list-icon-color":this.status===e.R.Reported?"var(--shreddit-color-mods-reported-onBackground)":"var(--color-secondary-onBackground)"})}render(){return this.status===e.R.Reported?r.x`<div class="bg-mods-reported-background hover:bg-mods-reported-background-hover" style="${this.getStyle()}"> <slot></slot> </div>`:r.x`<details class="max-w-fit bg-secondary-background hover:bg-secondary-background-hover" style="${this.getStyle()}"> <summary class="cursor-pointer block list-none" @click="${t=>t.stopPropagation()}"> <slot name="${this.status}"></slot> </summary> <slot></slot> </details>`}};i.styles=[r.i`summary::-webkit-details-marker{display:none}`,t.t],t._([t.n({type:String,attribute:"thing-id"})],i.prototype,"thingId",void 0),t._([t.n({type:String})],i.prototype,"status",void 0),i=t._([t.e("reports-summary-wrapper")],i)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("827J5oU2",["GlDbwxoG","s_Igk1Yn"],(async(t,e)=>{let s=class extends e.s{constructor(){super(...arguments),this.open=!1,this._events=new t.E(this),this._firstUpdate=!0,this.updated=t=>{t.has("open")&&!this._firstUpdate&&(this.open?this._expand():this._collapse()),this._firstUpdate=!1},this._expand=()=>{this._content.style.display="block",this.offsetHeight!==this._content.offsetHeight&&(i(this,this._content.offsetHeight),this._content.style.opacity="1")},this._collapse=()=>{0!==this.offsetHeight&&(i(this,0),this._content.style.opacity="0")},this._onTransitionEnd=()=>{this.open?this.style.height="":(this.open=!1,this._content.style.display="none"),this.style.overflowY="visible"},this._handler=this._events.define("transitionend",this._onTransitionEnd)}connectedCallback(){super.connectedCallback(),this._content=this.querySelector("[faceplate-auto-height-animator-content]"),null!=this._content&&(this.style.transition="height 222ms ease",this._content.style.transition="opacity 222ms ease",this.open||(this.style.height="0px",this._content.style.display="none"),this.setAttribute("connected",""))}createRenderRoot(){return this}};function i(t,e){t.style.height=`${t.offsetHeight}px`,t.style.overflowY="hidden",window.requestAnimationFrame((()=>{t.style.height=`${e}px`}))}return t._([t.n({type:Boolean,reflect:!0})],s.prototype,"open",void 0),s=t._([t.e("faceplate-auto-height-animator")],s),{get FaceplateAutoHeightAnimator(){return s}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");
SML.dm("8qD_qMhm",["GlDbwxoG"],(async e=>{const t={[e.a8.FEED]:e.a9.Feed,[e.a8.FULL_BLEED_VIDEO_FEED]:e.a9.FullBleedVideoFeed,[e.a8.COMMENTS_PAGE]:e.a9.CommentsPage,[e.a8.COMMENT_TREES]:e.a9.CommentTrees,[e.a8.SIDEBARS]:e.a9.Sidebars,[e.a8.TRENDING_DISCOVERY]:e.a9.TrendingDiscovery,[e.a8.TRENDING_SEARCH_RESULT]:e.a9.TrendingSearchResult,[e.a8.BLANK_ONLY]:e.a9.BlankOnly,[e.a8.RELATED_POSTS]:e.a9.ListingBelow};return{m:e=>e&&t[e]||null,s:(e,t={})=>{const{includeFeedChecks:a=!1,includeCommentsPageChecks:n=!1}=t;return e.composedPath().some((e=>{const t=e;if("AD-REMINDER-BUTTON"===t.tagName||"AD-EVENT-STATUS"===t.tagName||"SHREDDIT-POST-OVERFLOW-MENU"===t.tagName||"CLICK-LOCATION-TRACKER"===t.tagName||"SHREDDIT-DYNAMIC-AD-LINK"===t.tagName&&"promoted_label"===t.getAttribute?.("click-location")&&t.hasAttribute?.("promoted-label-experiment"))return!0;if(a){if(t.hasAttribute?.("upvote")||t.hasAttribute?.("downvote")||"comments-action-button"===t.getAttribute?.("name")||t.matches?.("button.toggle__expando-button")||t.matches?.("div#unpacked-actions")||t.matches?.("faceplate-dropdown-menu#defaultActions")||"SHREDDIT-POST-SHARE-BUTTON"===t.tagName)return!0}if(n){if("SHREDDIT-SLIDER-ELEMENT"===t.tagName||"VIDEO"===t.tagName||t.matches?.("img.thumbnail-image-video-toggle")||t.matches?.("button.toggleable-video-player-close-btn")||t.matches?.("button.thumbnail-playback-action-circle"))return!0}return!1}))}}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("8tELWdqF",["s_Igk1Yn"],(async a=>{const{svg:m}=a.g();return{c:a.m(m`<path d="M10 1a9 9 0 00-9 9c0 1.947.79 3.58 1.935 4.957L.231 17.661A.784.784 0 00.785 19H10a9 9 0 009-9 9 9 0 00-9-9zm0 16.2H6.162c-.994.004-1.907.053-3.045.144l-.076-.188a36.981 36.981 0 002.328-2.087l-1.05-1.263C3.297 12.576 2.8 11.331 2.8 10c0-3.97 3.23-7.2 7.2-7.2s7.2 3.23 7.2 7.2-3.23 7.2-7.2 7.2zm5.2-7.2a1.2 1.2 0 11-2.4 0 1.2 1.2 0 012.4 0zm-4 0a1.2 1.2 0 11-2.4 0 1.2 1.2 0 012.4 0zm-4 0a1.2 1.2 0 11-2.4 0 1.2 1.2 0 012.4 0z"></path>`,"0 0 20 20","chat")}}));
SML.dm("9SPCVmFT",[],(async()=>{var r,n;return function(r){r.Slot="slot",r.Wrap="wrap"}(r||(r={})),function(r){r.NSFW="nsfw",r.Spoiler="spoiler",r.NsfwAndSpoiler="nsfwAndSpoiler"}(n||(n={})),{get M(){return r},get R(){return n}}}));

SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./B5aCBAWI.js",import.meta.url,"B5aCBAWI");SML.di("./C38sKiaF.js",import.meta.url,"C38sKiaF");SML.di("./fnKkpEwQ.js",import.meta.url,"fnKkpEwQ");SML.di("./CAd-sfst.js",import.meta.url,"CAd-sfst");SML.di("./C-lRMeGe.js",import.meta.url,"C-lRMeGe");SML.di("./DzMpUNmB.js",import.meta.url,"DzMpUNmB");SML.di("./CGzEIBwW.js",import.meta.url,"CGzEIBwW");SML.di("./DK2EuOAl.js",import.meta.url,"DK2EuOAl");SML.di("./DNASVThB.js",import.meta.url,"DNASVThB");
SML.dm("9ZdgYdsr",["GlDbwxoG","s_Igk1Yn","B5aCBAWI","C38sKiaF","fnKkpEwQ","CAd-sfst","C-lRMeGe","DzMpUNmB","CGzEIBwW","DNASVThB","DK2EuOAl"],(async(e,i,t,s,a,o,n,r,l,h)=>{const p="share-menu-template",u="share-menu-copy-link-option",c="share-menu-crosspost-option",d="share-menu-embed-option",k="share-dropdown-menu",m=({source:i,noun:t})=>e.b({source:i||"share",action:"click",noun:t}),T=({source:e}={})=>m({source:e,noun:"share_crosspost"}),E=({source:e}={})=>m({source:e,noun:"share_profile_crosspost"}),S=()=>e.b({source:"comment",action:"click",noun:"share_as_post"},{action_info:{reason:"share_sheet"}}),I=Symbol("mixins/with-share");const N=(e,i,t)=>{const s=["click","keydown"],a=e.querySelector(`.${i}`);for(const e of s)a?.addEventListener(e,t)};return {C:"comment-share-menu-template",E:d,S:p,W:function(C){if(e.da(C,I))return C;const _=C;class L extends _{constructor(){super(...arguments),this.permalink="",this.sourceId="",this.source=void 0,this.isCrosspostable=!1,this.isEmbeddable=!1,this.disabled=!1,this.isDesktopViewport=!1,this.hideButtonText=!1,this.hideButtonIcon=!1,this.shouldAllowPropagation=!1,this.shareMenuFeatureName=e.az,this.shareMenuTemplateId=p,this.translationLanguage="",this.isShareMenuInitiated=!1,this.showPostAssignModal=t.s,this.isShareDropdownOpened=!1,this.activateShareMenuFeature=()=>{const i={};return this.isCrosspostable&&(i.isCrosspostable=!0,this.sourceId&&(i.postId=this.sourceId)),this.isEmbeddable&&(i.isEmbeddable=!0),e.j({name:this.shareMenuFeatureName,queryParams:i,renderMode:e.P.Contents})},this.isAllowedEvent=e=>!e||(e instanceof PointerEvent||e instanceof MouseEvent||["Enter"," "].includes(e.key)),this.handleMobileShareClick=async e=>{this.isAllowedEvent(e)&&(await this._copyLink())},this.handleDesktopShareClick=async e=>{if(!this.isAllowedEvent(e))return;if(this.isShareMenuInitiated)return;let i=!1;try{i=Boolean(await this.activateShareMenuFeature())}catch(i){return void this.handleCopyLinkClick(e)}const t=document.querySelector(`#${this.shareMenuTemplateId}`)?.content;if(!t)return void this.handleCopyLinkClick(e);const s=this.getShareDropdownMenus();s?.length&&(s.forEach((e=>{if(e.querySelector("faceplate-menu"))return;const s=t.cloneNode(!0);e.appendChild(s),N(e,u,this.handleCopyLinkClick),N(e,c,this.handleCrosspostClick),N(e,d,this.handleEmbedClick),N(e,"klp-copy-link",this.handleKlpCopyLinkClick),N(e,"share-menu-profile-crosspost-option",this.handleProfileCrosspostClick),i&&e.show?.()})),i&&this.handleShareDropdownOpen(),this.isShareMenuInitiated=!0)},this.handleShareDropdownOpen=()=>{this.isShareDropdownOpened||(this.isShareDropdownOpened=!0,e.f(this,(({source:i}={})=>e.b({source:i||"share",action:"view",noun:"custom_share_sheet"}))({source:this.source})))},this.handleShareDropdownClose=()=>{this.isShareDropdownOpened=!1,e.f(this,(({source:i}={})=>e.b({source:i||"share",action:"dismiss",noun:"custom_share_sheet"}))({source:this.source}))},this.getShareDropdownMenus=()=>{const e=this.shadowRoot?.querySelectorAll(`.${k}`);if(e?.length)return e;const i=this.querySelectorAll(`faceplate-dropdown-menu.${k}`);if(i?.length)return i;const t=this.querySelectorAll("slot");for(const e of t){const i=e.assignedElements?.();if(i?.length){const e=Array.from(i).find((e=>e.classList?.contains(k)||e.querySelector(`.${k}`)));if(e)return[e.classList?.contains(k)?e:e.querySelector(`.${k}`)]}}},this.closeShareMenu=()=>{this.getShareDropdownMenus()?.forEach((e=>e.close?.()))},this.handleCopyLinkClick=async i=>{this.shouldAllowPropagation||i?.stopPropagation(),this.isAllowedEvent(i)&&(e.f(this,(({source:e}={})=>m({source:e,noun:"copy_link"}))({source:this.source})),this.closeShareMenu(),await this._copyLink())},this.handleKlpCopyLinkClick=async e=>{this.isAllowedEvent(e)&&(this.closeShareMenu(),await this._copyLink())},this.handleKlpNotUsefulClick=e=>{this.isAllowedEvent(e)&&this._notUseful()},this.handleKlpUsefulClick=e=>{this.isAllowedEvent(e)&&this._useful()},this.handleCrosspostClick=i=>{const t=h.d(this.sourceId)?S:T;this._handlePostComposerClick(i,`${e.dg.CrosspostSourceId}=${this.sourceId}`,t)},this.handleProfileCrosspostClick=async i=>{(await this.showPostAssignModal(this.sourceId))||this._handlePostComposerClick(i,`${e.dg.CrosspostSourceId}=${this.sourceId}&${e.dg.CrosspostTarget}=profile`,E)},this.handleEmbedClick=i=>{i.stopPropagation(),this.isAllowedEvent(i)&&(e.f(this,(({source:e}={})=>m({source:e,noun:"embed"}))({source:this.source})),this.closeShareMenu(),window.open(`https://publish.reddit.com/embed?url=https://www.reddit.com${this.permalink}`,"RedditEmbed"))},this._handlePostComposerClick=(i,t,s)=>{i.stopPropagation(),this.isAllowedEvent(i)&&(e.f(this,s({source:this.source})),this.closeShareMenu(),window.open(`/submit?${t}`,"_blank"))},this._copyLink=async()=>{if(!this.permalink||!location.origin)return;const i={url:this._buildShareUrl(location.origin,this.permalink)};if(l.S.Clipboard===(await l.s(i,this.isDesktopViewport))){const i=e.c("faceplate-alert",{level:e.X.success,message:"Link copied"});this.dispatchEvent(i)}},this._notUseful=()=>{const i=e.c("faceplate-alert",{level:e.X.notice,message:"Thanks for letting us know"});this.dispatchEvent(i)},this._useful=()=>{const i=e.c("faceplate-alert",{level:e.X.notice,message:"Thanks for letting us know"});this.dispatchEvent(i)},this._buildShareUrl=(e,i)=>{const t=i.includes("?"),s=i.includes("tl=");return e+i+this._getShareQueryParams({source:this.source,term:"1",permalinkHasQuery:t,permalinkHasTlQuery:s})},this._getShareQueryParams=({permalinkHasQuery:e=!1,permalinkHasTlQuery:i=!1,source:t="share",term:s})=>{const a=this._getShareUTMParams({source:t,term:s}),o=i?"":this._getShareTranslationLanguageQueryParams();return e?`&${a}${o}`:`?${a}${o}`},this._getShareTranslationLanguageQueryParams=()=>this.translationLanguage?`&share_tl=${this.translationLanguage}`:"",this._getShareUTMParams=({source:i="share",term:t})=>{const s=e.aZ();return`utm_source=${i}&utm_medium=${s}&utm_name=${s}css&utm_term=${t}&utm_content=share_button`},this.renderShareDropdown=({handleShareClick:t,size:o=e.a7.Small,appearance:r="plain",attributes:l={},shareButtonText:h})=>{const p=h||"Share",u="link"===r;return i.x` <faceplate-dropdown-menu class="${k} relative ${u?"inline":""}" position="bottom-start" .onopen="${this.isDesktopViewport?this.handleShareDropdownOpen:void 0}" .onclose="${this.isDesktopViewport?this.handleShareDropdownClose:void 0}"> ${u?s.a({attributes:{onclick:t,onkeydown:t,...l},children:this.hideButtonText?void 0:p,suppressVisitedStyle:!0}):a.c({size:o,appearance:r,attributes:{type:"button",onclick:t,onkeydown:t,...l},leadingIcon:this.hideButtonIcon?void 0:n.s({size:a.I[o],attributes:{className:"icon-share","aria-hidden":"true"}}),screenReaderContent:this.hideButtonText?p:void 0,children:this.hideButtonText?void 0:p})} </faceplate-dropdown-menu>`},this.renderOnlyShareButton=({handleShareClick:t,size:s=e.a7.Small,appearance:n="plain",attributes:r={},showFullButtons:l=!1})=>{const h="Copy link",p="link"===n;return i.x` ${p?i.A:a.c({size:s,appearance:n,attributes:{type:"button",onclick:t,onkeydown:t,...r,className:`${r.className} relative`,"aria-label":h},children:i.x` <span class="justify-center ${l?"flex s:hidden":"flex"}">${o.l({size:i.I.Small})}</span> <span class="${l?"hidden s:flex":"hidden"}"> ${h} </span> `})}`},this.renderOnlyShareMenuItem=({handleShareClick:e,menuSize:i=r.L.Medium})=>{const t="Copy link";return r.l({leadingIcon:o.l(),label:t,size:i,onClick:e})}}}return L[I]=!0,e._([e.n({type:String})],L.prototype,"permalink",void 0),e._([e.n({type:String,attribute:"source-id"})],L.prototype,"sourceId",void 0),e._([e.n({type:String,attribute:"source"})],L.prototype,"source",void 0),e._([e.n({type:Boolean,attribute:"is-crosspostable"})],L.prototype,"isCrosspostable",void 0),e._([e.n({type:Boolean,attribute:"is-embeddable"})],L.prototype,"isEmbeddable",void 0),e._([e.n({type:Boolean})],L.prototype,"disabled",void 0),e._([e.n({type:Boolean,attribute:"is-desktop-viewport"})],L.prototype,"isDesktopViewport",void 0),e._([e.n({type:Boolean,attribute:"hide-button-text"})],L.prototype,"hideButtonText",void 0),e._([e.n({type:Boolean,attribute:"hide-button-icon"})],L.prototype,"hideButtonIcon",void 0),e._([e.n({type:Boolean,attribute:"should-allow-propagation"})],L.prototype,"shouldAllowPropagation",void 0),e._([e.n({type:String,attribute:"share-menu-feature-name"})],L.prototype,"shareMenuFeatureName",void 0),e._([e.n({type:String,attribute:"share-menu-template-id"})],L.prototype,"shareMenuTemplateId",void 0),e._([e.n({type:String,attribute:"translation-language"})],L.prototype,"translationLanguage",void 0),L},a:k,b:u,c};}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");
SML.dm("9zvN-JDO",["GlDbwxoG","s_Igk1Yn","DRM-oTYq"],(async(t,e,i)=>{const s=e.s,o=["allow-forms","allow-orientation-lock","allow-popups","allow-popups-to-escape-sandbox","allow-presentation","allow-same-origin","allow-scripts","allow-top-navigation-by-user-activation"].join(" ");let r=class extends s{constructor(){super(...arguments),this.postId="",this.limitHeight=!1,this.onMessage=t=>{const{data:e}=t;if(!t.source||t.source!==this.iframe?.contentWindow||"tweet-measured"!==e?.action||i.e(e?.id36)!==this.postId)return;this.iframe.height=`${e?.height}px`,this.limitHeight&&e?.height>550?(this.renderRoot?.querySelector(`#${this.postId}-tweet-overflow`)?.classList.remove("hidden"),this?.style.setProperty("height","550px")):this?.style.setProperty("height",`${e?.height+4}px`),this.renderRoot?.querySelector(`#${this.postId}-tweet-loading-placeholder`)?.remove();const s=document.querySelector(`#${this.postId}-post-media-container`),o=s?.querySelector(`#${this.postId}-aspect-ratio`);if(o){const t=this.offsetHeight/this.offsetWidth;o?.style.setProperty("--aspect-ratio",`${t}`);const e=this.offsetHeight-o.offsetHeight;o?.style.setProperty("height",`${e}px`)}}}static get styles(){return[t.t]}connectedCallback(){super.connectedCallback(),window.addEventListener("message",this.onMessage)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("message",this.onMessage)}onIframeLoad(){this.iframe?.contentWindow?.postMessage("twitter-measure-requested","https://www.redditmedia.com")}render(){const t=`${i.f(this.postId)}?responsive=true&is_nightmode=${matchMedia("(prefers-color-scheme: dark)").matches}`;return e.x` <div id="${this.postId}-tweet-loading-placeholder" class="${this.className} bg-neutral-background-weak absolute left-0 right-0 top-0 bottom-0"></div> <div class="overflow-hidden flex justify-center w-100 ${this.limitHeight?"max-h-[550px] ":""}"> <iframe id="${this.postId}-tweet-iframe" scrolling="no" allowfullscreen class="items-center overflow-hidden b-0 border-transparent justify-center bg-neutral-background-weak max-w-[550px] rounded-[14px]" max-width="${"550px"}" width="100%" title="${this.title}" aria-label="Tweet: ${this.title}" src="${t}" sandbox="${o}" @load="${this.onIframeLoad}" allowtransparency="true"></iframe> </div> ${this.limitHeight?e.x`<div id="${this.postId}-tweet-overflow" class="h-[66px] mt-[-66px] w-100 from-[color:var(--color-neutral-background-weak)] bg-gradient-to-t hidden isolate pointer-events-none"></div>`:""} `}};t._([t.n({type:String,attribute:"post-id"})],r.prototype,"postId",void 0),t._([t.n({type:Boolean,attribute:"limit-height"})],r.prototype,"limitHeight",void 0),t._([t.Q("iframe")],r.prototype,"iframe",void 0),r=t._([t.e("shreddit-tweet-embed")],r)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("B1RQKxHJ",["GlDbwxoG","s_Igk1Yn"],(async(t,s)=>{const e=new DOMParser;let i=class extends s.s{constructor(){super(...arguments),this.postId="",this.flairClass="",this.pubsub=new t.m(this),this.onPostFlairChange=t=>{t.postId===this.postId&&this.renderUpdatedFlair(t.updatedHtml)}}connectedCallback(){super.connectedCallback(),requestAnimationFrame((()=>{this.pubsub.subscribe(t.T.PostFlairUpdated,this.onPostFlairChange)}))}renderUpdatedFlair(t){const s=this.shadowRoot?.querySelector("slot")?.assignedElements({flatten:!0})[0];if(!t&&s)return void s.remove();const i=e.parseFromString(t,"text/html").body.firstChild;if(i){if(this.flairClass&&i instanceof HTMLElement){const t=this.flairClass.split(" ").filter((t=>!!t));i.classList.add(...t)}s?s.replaceWith(i):this.appendChild(i)}}render(){return s.x`<slot></slot>`}};i.styles=[t.t],t._([t.n({type:String,attribute:"post-id"})],i.prototype,"postId",void 0),t._([t.n({type:String,attribute:"flair-class"})],i.prototype,"flairClass",void 0),i=t._([t.e("shreddit-post-flair")],i)}));
SML.di("./DNASVThB.js",import.meta.url,"DNASVThB");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./UWmwcM6M.js",import.meta.url,"UWmwcM6M");SML.di("./C-d7BR1A.js",import.meta.url,"C-d7BR1A");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");
SML.dm("B49dh6xU",["DNASVThB","GlDbwxoG","UWmwcM6M","C-d7BR1A","D-MAMWlw"],(async(t,T,E,a,e)=>({g:function(t){return t.closest("[mod-tools-host]")},p:function(o,n,S){switch(t.i(o)){case T.M.Award:n in E.S&&T.p(T.T.AwardOnContentUpdated,{awardOnContentId:o,action:E.S[n],value:S});break;case T.M.Comment:n in a.S&&T.p(T.T.CommentUpdated,{commentId:o,action:a.S[n],value:S});break;case T.M.Post:(e.P.includes(n)||n in e.S)&&T.p(T.T.PostUpdated,{postId:o,action:e.S[n],value:S});break}}})));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("B4wbfaco",["GlDbwxoG","s_Igk1Yn"],(async(e,t)=>{const s=["input","a","faceplate-checkbox-input","faceplate-radio-input","faceplate-switch-input "],i=({collection:e,activeIndex:t})=>{let i=0;for(const o of e){o.tabIndex=i===t?0:-1;for(const e of Array.from(o.children)){const o=e.querySelector(s.join(","));o&&o instanceof HTMLElement&&(o.tabIndex=i===t?0:-1)}i++}};let o=class extends t.s{constructor(){super(...arguments),this.disableAutoFocus=!1,this.ariarole="menu",this.activeIndex=0,this.firstUpdated=()=>{this.prevFocusedElement=document.activeElement,this.hasAttribute("hidden")?this.toggleItemsTabbable(!1):this.openMenu()},this.toggleItemsTabbable=(e=!0,{overrideActiveIndex:t}={})=>{i({collection:this.getFocusableListItems(),activeIndex:t??(e?0:-1)})},this.openMenu=async()=>{const e=this.getFocusableListItems().findIndex((e=>"true"===e.getAttribute("aria-selected")));this.toggleItemsTabbable(!0,{overrideActiveIndex:-1===e?void 0:e}),this.disableAutoFocus||(e>=0&&e!==this.activeIndex&&(this.activeIndex=e),this.getFocusableListItems()[this.activeIndex]?.focus())},this.closeMenu=()=>{this.toggleItemsTabbable(!1)},this.setFocus=e=>{this.getFocusableListItems()[e]?.focus(),this.activeIndex=e},this.onFocusNext=()=>{const e=this.activeIndex===this.getFocusableListItems().length-1?0:this.activeIndex+1;i({collection:this.getFocusableListItems(),activeIndex:e}),this.setFocus(e)},this.onFocusPrev=()=>{const e=0===this.activeIndex?this.getFocusableListItems().length-1:this.activeIndex-1;i({collection:this.getFocusableListItems(),activeIndex:e}),this.setFocus(e)},this.onKeyDown=e=>{switch(e.key){case"Escape":this.prevFocusedElement.focus(),this.onclose&&this.onclose(e);break;case"ArrowDown":case"ArrowRight":this.onFocusNext(),e.preventDefault();break;case"ArrowUp":case"ArrowLeft":this.onFocusPrev(),e.preventDefault()}}}static get styles(){return t.i`:host{background-color:var(--color-neutral-background-strong)}ul{padding:var(--spacing-sm) 0;margin:0}`}getFocusableListItems(){const e="li:not([list-item-group]):not([list-item-header])",t=this.shadowRoot.querySelector("slot"),s=[];for(const i of t.assignedElements({flatten:!0}))i?.matches(e)&&s.push(i),s.push(...Array.from(i.querySelectorAll(e)));return s.map((e=>e.firstElementChild))}render(){return t.x` <ul role="${this.ariarole}" @keydown="${this.onKeyDown}"> <slot></slot> </ul> `}};e._([e.n({type:Boolean,attribute:"disable-auto-focus"})],o.prototype,"disableAutoFocus",void 0),e._([e.n({type:String})],o.prototype,"ariarole",void 0),e._([e.N()],o.prototype,"activeIndex",void 0),o=e._([e.e("faceplate-menu")],o);return{get F(){return o},S:class{constructor(e){this.previousChar="",this.focusedIndex=-1,this.cancelUpdate=!1,this.hasOptionVisualFocus=!1,this.hasSelection=!1,this.searchString="",this.searchTimeoutId=null,this.initializeSelections=()=>{this.options.forEach((e=>{this.makeSelection({selected:e.selected,option:e})}))},this.dispatchChangeEvent=()=>{this.hasSelection=!0,this.host.dispatchEvent(new CustomEvent(`${this.host.nodeName.toLowerCase()}:change`,{composed:!0,bubbles:!0,detail:{target:this.host}}))},this.onBlur=e=>{this.options.includes(e.relatedTarget)||(this.closeDropdownMenu(),this.host.blur())},this.onClick=()=>{(this.host.multiple&&!this.hasOptionVisualFocus||!this.host.multiple)&&this.host.dropdownMenu?.toggle()},this.shouldSelectFocusedOption=()=>{const e=this.host.hasAttribute("autocomplete"),t=!!this.host.readonly;return(e||t)&&!this.hasSelection&&this.hasOptionVisualFocus},this.onMenuClose=()=>{if(this.cancelUpdate||this.shouldSelectFocusedOption()&&this.selectFocusedOption(),this.selectedIndex>=0)this.focusedIndex=this.selectedIndex;else{if(this.host.readonly&&this.cancelUpdate)return;this.visibleOptions[this.focusedIndex]?.visualFocus(!1)}this.hasOptionVisualFocus=!1},this.onMenuOpen=()=>{this.focusedIndex=this.selectedIndex>=0?this.selectedIndex:-1,this.host.readonly&&this.focusedIndex<0&&(this.focusedIndex=0),this.focusedIndex>=0&&this.visuallyFocusOption(this.focusedIndex),this.hasSelection=!1,this.cancelUpdate=!1},this.onFaceplateOptionSelect=e=>{if(e.stopImmediatePropagation(),e.defaultPrevented)return;const t=e,{option:s,selected:i,allowSingleDeselection:o}=t?.detail||{};s&&this.makeSelection({option:s,selected:i,allowSingleDeselection:o})},this.makeSelection=async({selected:e,option:t,allowSingleDeselection:s})=>{this.host.multiple?(t?.dispatchEvent(this.createUpdateEvent(e)),await(t?.updateComplete)):(!s&&e||s)&&(e&&this.singleSelectionCache!==t&&this.singleSelectionCache?.dispatchEvent(this.createUpdateEvent(!1)),t?.selected!==e&&(t?.dispatchEvent(this.createUpdateEvent(e)),await(t?.updateComplete)),e&&(this.singleSelectionCache=t),setTimeout(this.closeDropdownMenu)),this.dispatchChangeEvent(),this.cancelUpdate=!1,this.host.requestUpdate()},this.visuallyFocusNextOption=()=>{this.focusedIndex===this.visibleOptions.length-1&&(this.focusedIndex=-1),this.visuallyFocusOption(++this.focusedIndex),this.hasOptionVisualFocus=!0},this.visuallyFocusPrevOption=()=>{this.focusedIndex<=0&&(this.focusedIndex=this.visibleOptions.length),this.visuallyFocusOption(--this.focusedIndex),this.hasOptionVisualFocus=!0},this.focusNextMatchedOption=e=>{if("number"==typeof this.searchTimeoutId&&window.clearTimeout(this.searchTimeoutId),this.searchTimeoutId=setTimeout((()=>{this.previousChar=this.searchString,this.searchString=""}),500),this.searchString+=e,this.searchString===this.previousChar){let e=this.focusedIndex+1;for(let t=0;t<this.visibleOptions.length;t++){if(e>this.visibleOptions.length-1&&(e=0),this.visibleOptions[e]?.displayText?.toLowerCase().startsWith(this.searchString)){this.visuallyFocusOption(e),this.focusedIndex=e;break}e++}}else{const e=this.visibleOptions.findIndex(((e,t)=>t!==this.focusedIndex&&e.displayText?.toLowerCase().startsWith(this.searchString)));-1!==e&&(this.focusedIndex=e,this.visuallyFocusOption(this.focusedIndex))}this.previousChar=this.searchString},this.selectFocusedOption=()=>{if(this.focusedIndex<0)return;const e=this.visibleOptions[this.focusedIndex];this.makeSelection({selected:!e.selected,option:e})},this.visuallyFocusOption=e=>{this.currentFocusedOption&&this.currentFocusedOption?.visualFocus(!1),this.currentFocusedOption=this.visibleOptions[e],this.currentFocusedOption?.visualFocus(!0),this.currentFocusedOption?.scrollIntoView()},this.openDropdownMenu=()=>{!this.host.disabled&&this.host.dropdownMenu?.hidden&&this.host.dropdownMenu?.show()},this.closeDropdownMenu=()=>{this.host.dropdownMenu?.hidden||this.host.dropdownMenu?.close()},this.handleKeyBindings=e=>{switch(e.key){case"ArrowDown":if(this.host.dropdownMenu?.hidden)return void this.openDropdownMenu();e.altKey||this.visuallyFocusNextOption();break;case"ArrowUp":this.openDropdownMenu(),this.visuallyFocusPrevOption();break;case"Escape":this.cancelUpdate=!0,this.closeDropdownMenu(),e.stopPropagation();break;case"Enter":case"Tab":this.host.dropdownMenu?.hidden||this.selectFocusedOption();break;default:e.key.match("^\\w$")&&(this.openDropdownMenu(),(this.host.multiple||this.host.readonly||this.host.referenceElement instanceof HTMLButtonElement)&&this.focusNextMatchedOption(e.key))}},(this.host=e).addController(this)}async hostConnected(){await this.host.updateComplete,this.resizeObserver=new ResizeObserver((()=>{this.host.style.setProperty("--select-width",`${this.host.getBoundingClientRect().width}px`)})),this.resizeObserver?.observe(this.host),this.host.addEventListener("faceplate-option:select",this.onFaceplateOptionSelect),this.host.addEventListener("keydown",this.handleKeyBindings),this.host.addEventListener("faceplate-dropdown-menu:open",this.onMenuOpen),this.host.addEventListener("faceplate-dropdown-menu:closed",this.onMenuClose),this.host.addEventListener("click",this.onClick),this.host.addEventListener("blur",this.onBlur),this.initializeSelections(),this.host.dropdownMenu&&(this.host.dropdownMenu.triggerEvent=void 0)}hostDisconnected(){this.resizeObserver?.disconnect(),this.host.removeEventListener("keydown",this.handleKeyBindings),this.host.removeEventListener("faceplate-option:select",this.onFaceplateOptionSelect),this.host.removeEventListener("faceplate-dropdown-menu:open",this.onMenuOpen),this.host.removeEventListener("faceplate-dropdown-menu:closed",this.onMenuClose),this.host.removeEventListener("click",this.onClick),this.host.removeEventListener("blur",this.onBlur)}get selectedOptions(){return this.options.filter((e=>e.selected))}get options(){return this.host.options??[]}get selectedIndex(){return this.options.findIndex((e=>e.selected))}get visibleOptions(){return(this.host.options??[]).filter((e=>!e.hasAttribute("hidden")))}get value(){return this.selectedOptions[0]?.value||""}set value(e){if(e===this.value)return;const t=this.options.findIndex((t=>t.value===e));if(-1===t)this.singleSelectionCache?.dispatchEvent(this.createUpdateEvent(!1)),this.singleSelectionCache=null;else{const e=this.options[t];this.makeSelection({selected:t>=0,option:e})}e||this.host.dispatchEvent(this.createClearEvent())}createUpdateEvent(e){return new CustomEvent("faceplate-option:update",{composed:!0,detail:{selected:e}})}createClearEvent(){return new CustomEvent("faceplate-option:clear",{composed:!0,bubbles:!0})}getSelectedOptionsAsStr(){return this.selectedOptions.map((e=>e.displayText)).join(", ").trim()}}}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");
SML.dm("B5aCBAWI",["s_Igk1Yn","GlDbwxoG"],(async(t,e)=>{const i={variantFlipOrder:{start:"sme",middle:"mse",end:"ems"},positionFlipOrder:{top:"tbrl",right:"rltb",bottom:"btrl",left:"lrbt"},position:"bottom",margin:8,padding:0},n=(t,e,n)=>{const{container:o,margin:s,padding:r,position:l,variantFlipOrder:p,positionFlipOrder:a}={container:document.documentElement.getBoundingClientRect(),...i,...n},{left:h,top:c}=e.style;e.style.left="0",e.style.top="0";const u=t.getBoundingClientRect(),d=e.getBoundingClientRect(),m={t:u.top-d.height-s,b:u.bottom+s,r:u.right+s,l:u.left-d.width-s},g={vs:u.left,vm:u.left+u.width/2+-d.width/2,ve:u.left+u.width-d.width,hs:u.top,hm:u.bottom-u.height/2-d.height/2,he:u.bottom-d.height},[f,E="middle"]=l.split("-"),y=a[f],b=p[E],{top:v,left:_,bottom:w,right:S}=o;for(const t of y){const i="t"===t||"b"===t,n=m[t],[o,s]=i?["top","left"]:["left","top"],[l,p]=i?[d.height,d.width]:[d.width,d.height],[a,h]=i?[w,S]:[S,w],[c,u]=i?[v,_]:[_,v];if(!(n<c||n+l+r>a))for(const l of b){const a=g[(i?"v":"h")+l];if(!(a<u||a+p+r>h))return e.style[s]=a-d[s]+"px",e.style[o]=n-d[o]+"px",t+l}}return e.style.left=h,e.style.top=c,null};function o(t,e=50,i={leading:!0,trailing:!0}){i={leading:!0,trailing:!0,...i};let n,o,s,r=null,l=0;const p=function(){l=i.leading?Date.now():0,r=null,s=t.apply(n,o),r||(n=o=null)};return function(...a){const h=Date.now();l||!1!==i.leading||(l=h);const c=e-(h-l);return n=this,o=a,c<=0||c>e?(r&&(clearTimeout(r),r=null),l=h,s=t.apply(n,a),r||(n=o=null)):r||!1===i.trailing||(r=setTimeout(p,c)),s}}const s=["button","link","menuitem","tab","checkbox","combobox","gridcell","application","treeitem"];class r{set popperTrigger(t){this._popperTrigger=t}get popperTrigger(){if(this._popperTrigger)return this._popperTrigger;let t=this.host.shadowRoot?.querySelector("slot[faceplate-popper-trigger]")?.assignedElements()?.[0]??null;let e=0;const i=t=>t instanceof HTMLButtonElement||t instanceof HTMLAnchorElement||s.includes(t?.getAttribute("role")??"");if(i(t))return t;for(;t&&e<5;){if(t=t?.assignedElements?t?.assignedElements()?.[0]??null:t?.children[0]??null,i(t))return t;e++}return null}get popperContent(){return this.host.shadowRoot?.querySelector("[faceplate-popper-content]")?.querySelector("slot")?.assignedElements()?.[0]??null}constructor(e,{containerElement:i=document.documentElement,scrollContainerElement:n=t.ao().scrollContainerElement(),allowCloseByEvent:s=!0,...r}){this.status="closed",this._containerSize=null,this.containerSizeChanged=t=>{if(!this._containerSize)return!0;const e=this._containerSize;return Object.keys(t).some((i=>e[i]!==t[i]))},this.updateAriaStates=async(t=!1)=>{const e="open"===this.currentState.state,i="tooltip"===this.host.shadowRoot?.querySelector("[faceplate-popper-content]")?.getAttribute("role"),n="dialog"===this.host.shadowRoot?.querySelector("[faceplate-popper-content]")?.getAttribute("role"),o=this.popperTrigger,s=this.popperContent,r=!this._options.manualTriggerFocus&&!t&&!n&&"function"==typeof o?.focus;i||(t&&(o?.setAttribute("aria-haspopup",n?"dialog":"true"),s?.setAttribute("hidden","")),e?(s?.removeAttribute("hidden"),this.currentState.animationFinished&&await this.currentState.animationFinished,s?.openMenu?.()):(s?.setAttribute("hidden",""),s?.closeMenu?.(),r&&o?.focus()),o?.setAttribute("aria-expanded",`${e}`))},this.referenceInViewport=o((()=>{const{reference:t=null,containerElement:e=document.documentElement}=this._options;if("open"!==this.status)return!1;if(!t)return!1;const i=t.getBoundingClientRect();return i.top>=0&&i.left>=0&&i.bottom<=(window.innerHeight||e.clientHeight)&&i.right<=(window.innerWidth||e.clientWidth)}),80),this.isOffscreenBottom=o((t=>{const e=t.popper?.getBoundingClientRect(),i=this._options.reference?.getBoundingClientRect();return!!e&&window.innerHeight-(i.bottom+e.height)<16}),80),this.getPosition=t=>{const e=t.position??"bottom";return"open"===this.status?e:this.popper&&this.isOffscreenBottom(t)&&e?.includes("bottom")?e.replace("bottom","top"):t.position},this.reposition=()=>{this.referenceInViewport()?this.updatePopper():this.close()},this.open=async()=>{if(this.popper){if("open"===this.status)return Promise.resolve(null)}else this.initialize();this.popperContent?.removeAttribute("hidden"),this.updateOptions({});const t=this.showElement(this._options.popper,!0);return this.setStatus("open",t),t?.finished??Promise.resolve(null)},this.close=async t=>{if(t&&!this._options.allowCloseByEvent)return Promise.resolve(null);if(t&&(t.preventDefault(),t.stopPropagation()),"open"!==this.status)return Promise.resolve(null);const e=this.hideElement(this._options.popper,!0);return this.setStatus("closed",e),e?.finished??Promise.resolve(null)},this.toggle=async t=>"open"!==this.status?this.open():this.close(t),this.updatePopper=t=>{if(!this.popper)return null;const e=this.actualPosition;let i=null;try{i=this.popper.update(t)}catch(t){return null}const n=p(i);return n!==e&&(this.setActualPosition(n),this.host.requestUpdate()),i},this.setStatus=(t,e)=>{this.status=t,this.statusAnimation=e,this.statusAnimation?.finished.then((()=>{this.updateAriaStates()}))},this.setActualPosition=t=>{this.actualPosition=t},this.handleContainerResize=o((()=>{if("open"!==this.status)return;const t=(this._options.containerElement??document.documentElement).getBoundingClientRect();this.containerSizeChanged(t)&&(this._containerSize=t,this.updatePopper({...this._options,container:t}))}),80),this.getKeyframes=(t,e="show",i)=>{try{return new KeyframeEffect(t,[{visibility:"hidden",opacity:"0"},{visibility:"visible",opacity:"1"}],{fill:"both",direction:"show"===e?"normal":"reverse",duration:i,easing:"ease-in-out"})}catch(i){return()=>{"show"===e?(t.style.visibility="visible",t.style.opacity="1"):(t.style.visibility="hidden",t.style.opacity="0")}}},(this.host=e).addController(this),this._options={...r,containerElement:i,scrollContainerElement:n,allowCloseByEvent:s},this.actualPosition=this._options.position||null}async hostConnected(){await this.host.updateComplete,this.updateAriaStates(!0)}initialize(){this._containerSize=(this._options.containerElement??document.documentElement).getBoundingClientRect(),this.popper=((t,e,i)=>{const o="object"!=typeof t||t instanceof HTMLElement?{reference:t,popper:e,...i}:t;return{update(t=o){const{reference:e,popper:i}=Object.assign(o,t);if(!i||!e)throw new Error("Popper- or reference-element missing.");return n(e,i,o)}}})({...this._options,container:this._containerSize}),this.resizeObserver=new ResizeObserver(this.handleContainerResize),this._options.containerElement&&this.resizeObserver.observe(this._options.containerElement);(this._options.scrollContainerElement??window).addEventListener("scroll",this.reposition),this.replaceElement(void 0,this._options.popper)}hostDisconnected(){this._options.containerElement&&this.resizeObserver?.unobserve(this._options.containerElement);(this._options.scrollContainerElement??window).removeEventListener("scroll",this.reposition)}getOptions(){return this._options}updateOptions({...t}){const e={...this._options,...t},i={...e};this.popper&&(this._containerSize=(e.containerElement??document.documentElement).getBoundingClientRect(),i.container=this._containerSize);const n=i.popperElementKey||"popperElement";!i.popper&&n in this.host&&(i.popper=this.host[n]);const o=i.referenceElementKey||"popperReferenceElement";!i.reference&&o in this.host&&(i.reference=this.host[o]),i.popper!==this._options.popper&&this.replaceElement(this._options.popper,i.popper),i.containerElement!==this._options.containerElement&&(this._options.containerElement&&(this.resizeObserver?.unobserve(this._options.containerElement),this._options.containerElement.removeEventListener("faceplate-close",this.close)),i.containerElement&&(this.resizeObserver?.observe(i.containerElement),i.containerElement.addEventListener("faceplate-close",this.close))),this._options=i,this.updatePopper({...this._options,position:this.getPosition(i)})}get currentState(){return{state:this.status,animationFinished:this.statusAnimation?.finished.then((()=>{}))??Promise.resolve()}}showElement(t,e=!0){if(t)return t.style.display="",this.updatePopper(),l(this.getKeyframes(t,"show",e?150:0))}hideElement(t,e="open"===this.status){if(!t)return;if("closed"===this.status)return void(t.style.display="none");const i=l(this.getKeyframes(t,"hide",e?150:0));return i?.finished.catch((()=>{})).then((()=>{"closed"===this.status&&(t.style.display="none"),i?.cancel()})),i}replaceElement(t,e){t&&(this.hideElement(t,!1),t.removeEventListener("faceplate-close",this.close)),e&&("open"===this.status?this.showElement(e,!1):this.hideElement(e,!1),e.addEventListener("faceplate-close",this.close))}}r.defaultPopperContentStyles=t.i`[faceplate-popper-content]{position:fixed;visibility:hidden;opacity:0}`;const l=t=>{if("function"==typeof t)return t();if(!t.target)return;t.target.getAnimations().forEach((t=>t.cancel()));const e=new Animation(t);return e.play(),e},p=t=>{if(!t)return null;const[e,i]=t,n=e?{t:"top",b:"bottom",l:"left",r:"right"}[e]:null,o=i?{s:"start",m:"middle",e:"end"}[i]:null;return n&&o?`${n}-${o}`:null};let a=e.j;return{P:r,s:async(t,{isEditMode:i=!1,preselectFlairId:n}={})=>{try{return await a({name:e.gd,renderMode:e.P.Contents,queryParams:{postId:t,isEditMode:i?"true":"false",...void 0!==n&&{preselectFlairId:n}}}),!0}catch{return!1}}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");
SML.dm("B5upT-N6",["GlDbwxoG"],(async t=>{class e{constructor(t){this.shouldOverrideId=!1,this.activeIds={},this.update=t=>this.set(t),this.reset=()=>this.clear(),this.getKey=t}get(...t){const e=this.getKey(...t);return this.activeIds[e]?this.activeIds[e]:this.generate(e)}set(t,e){return e?(this.activeIds[t]=e,this.activeIds[t]):this.generate(t)}clear(t){t?delete this.activeIds[t]:this.activeIds={}}getUUID(){return this.shouldOverrideId?"id":t.a2()}generate(t){return this.activeIds[t]=this.getUUID(),this.activeIds[t]}}const s=t=>t,i=new e(((e,s)=>`${s}-${function(e){let s=`[q:${e.query}]`;return e.scope.type!==t.a1.GLOBAL&&(s=`${s}--[scope:${e.scope.type}-${e.scope.path}]`),e.sort&&(s=`${s}--[sort:${e.sort}]`),e.time&&(s=`${s}--[time:${e.time}]`),e.pane&&(s=`${s}--[pane:${e.pane}]`),s}(e)}`));return{S:new e(s),a:new e(s),b:i}}));
SML.di("./DuMDg_pA.js",import.meta.url,"DuMDg_pA");SML.di("./Wj1K4cGE.js",import.meta.url,"Wj1K4cGE");SML.di("./C7Ws8ntA.js",import.meta.url,"C7Ws8ntA");SML.di("./BM-DpnLu.js",import.meta.url,"BM-DpnLu");SML.di("./Be8KYlVI.js",import.meta.url,"Be8KYlVI");SML.di("./Diel-zJV.js",import.meta.url,"Diel-zJV");SML.di("./Dm-LXBi1.js",import.meta.url,"Dm-LXBi1");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");
SML.dm("B6yBL9at",["DuMDg_pA","Wj1K4cGE","C7Ws8ntA","BM-DpnLu","Be8KYlVI","Diel-zJV","Dm-LXBi1","GlDbwxoG"],(async(e,a,n,i,t,r,o,s)=>({b:function(e,a){if(!e?.includes("r/"))return"/";let n=[e,a].filter(Boolean).join("/");return n.startsWith("/")||(n=`/${n}`),n.endsWith("/")||(n=`${n}/`),n},g:function({type:l,iconProps:u}){switch(l){case s.cE.Public:return {label:"Public",description:"Anyone can view, post, and comment to this community",icon:n.b(u),iconSelected:a.b(u)};case s.cE.Restricted:return {label:"Restricted",description:"Anyone can view, but only approved users can contribute",icon:o.s(u),iconSelected:r.s(u)};case s.cE.Private:return {label:"Private",description:"Only approved users can view and contribute",icon:t.l(u),iconSelected:i.l(u)};case s.cE.EmployeesOnly:return {label:"Employee-only",description:"Only employees can view and contribute",icon:e.a(u),iconSelected:e.b(u)};default:return null}},s:"subreddit_about"})));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("B7hVC8R1",["GlDbwxoG","CC2wUKE8"],(async(e,n)=>{const o="click";var t;!function(e){e.LOGIN="login",e.SIGNUP="signup",e.OPEN_APP="open_app",e.GOOGLE_SSO="google_sso",e.APPLE_SSO="apple_sso",e.EMAIL="email",e.CLOSE="close",e.PHONE="phone"}(t||(t={}));function a(e,n){e&&(e.setCustomValidity(""),e.removeAttribute("faceplate-validity")),n?.setMessage("")}async function c(e,n){e&&(await(e._internals.form?.updateComplete),e.value=""),a(e,n)}return{get A(){return t},C:o,D:"desktop_auth_prompt",S:"onboarding",V:"view",X:"xpromo",a:function(o,t,a){return e.b({source:n.ao,action:"resolve",noun:o},{action_info:{reason:a,type:t},...e.gr()})},b:o=>e.b({source:n.ao,action:n.aF,noun:o}),c:()=>e.b({source:e.eN.OTP,action:n.bn,noun:"login_complete"}),d:o=>e.b({source:e.eN.OTP,action:n.bn,noun:"signup_complete"},{action_info:{type:o?"success":"fail"}}),e:c,f:a,g:function(o){return e.b({source:n.ao,action:"report_clone",noun:o})},h:o=>e.b({source:n.cb,action:n.ca,noun:o??"unknown"}),i:()=>e.b({source:n.ao,action:n.cc,noun:"verification_email"}),j:n=>e.b({source:"add_phone_number",action:"submit",noun:"number_verify"},{action_info:{type:n?"success":"fail"}}),k:({type:n,page_type:o,source_name:t})=>e.b({source:"phone_auth_otp",action:"submit",noun:"check_otp"},{action_info:{type:n,page_type:o,source_name:t}}),l:()=>e.b({source:"add_phone_number",action:o,noun:"enter_number"}),m:async function(e,n){e?.removeAttribute("required"),c(e,n),e&&(await e.updateComplete,e.syncInputValidity(!1))},n:()=>e.b({source:"add_phone_number",action:o,noun:"number_verify"}),o:({page_type:n,source_name:t})=>e.b({source:"phone_auth_otp",action:o,noun:"check_otp"},{action_info:{page_type:n,source_name:t}}),p:(n,o)=>e.b({source:n,action:"submit",noun:n===e.eN.EnterPhone?"enter_phone":"otp"},{action_info:{type:o?"success":"fail"}}),q:()=>e.b({source:"remove_phone_number",action:o,noun:"confirm"}),r:function(e){e&&(e.setCustomValidity(""),e.removeAttribute("faceplate-validity"),e.form?.notifyObservers(e))},s:o=>e.b({source:n.ao,action:n.ca,noun:o}),u:()=>e.b({source:"update_phone_number",action:o,noun:"enter_new_phone_number"})}}));
SML.di("./C6mzR4Ia.js",import.meta.url,"C6mzR4Ia");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./U1hr4IL6.js",import.meta.url,"U1hr4IL6");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./DfxFL9aq.js",import.meta.url,"DfxFL9aq");SML.di("./CU4mObWU.js",import.meta.url,"CU4mObWU");
SML.di("./CARPOtl-.js",import.meta.url,"CARPOtl-");SML.di("./BNHQzrNB.js",import.meta.url,"BNHQzrNB");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CZPCygeT.js",import.meta.url,"CZPCygeT");SML.di("./CjqmoMGQ.js",import.meta.url,"CjqmoMGQ");SML.di("./DmGowvJ7.js",import.meta.url,"DmGowvJ7");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./9zvN-JDO.js",import.meta.url,"9zvN-JDO");SML.di("./CMCPq0sv.js",import.meta.url,"CMCPq0sv");SML.di("./I6Px4IX3.js",import.meta.url,"I6Px4IX3");SML.di("./CzlfHowc.js",import.meta.url,"CzlfHowc");SML.di("./JGPlyfIr.js",import.meta.url,"JGPlyfIr");SML.di("./B9vfNp6T.js",import.meta.url,"B9vfNp6T");SML.di("./CYzNna7d.js",import.meta.url,"CYzNna7d");SML.di("./DK2EuOAl.js",import.meta.url,"DK2EuOAl");SML.di("./B4wbfaco.js",import.meta.url,"B4wbfaco");SML.di("./BRT1r9z9.js",import.meta.url,"BRT1r9z9");SML.di("./bZe6Ww5J.js",import.meta.url,"bZe6Ww5J");SML.di("./DopQd8m2.js",import.meta.url,"DopQd8m2");SML.di("./B_EEhXwG.js",import.meta.url,"B_EEhXwG");SML.di("./DpIcjKPf.js",import.meta.url,"DpIcjKPf");SML.di("./ByHkMIPl.js",import.meta.url,"ByHkMIPl");SML.di("./DfxFL9aq.js",import.meta.url,"DfxFL9aq");SML.di("./DCe9eryH.js",import.meta.url,"DCe9eryH");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./DkIqVQPv.js",import.meta.url,"DkIqVQPv");SML.di("./CTwJH_ps.js",import.meta.url,"CTwJH_ps");SML.di("./OimaI6pY.js",import.meta.url,"OimaI6pY");SML.di("./BmAQnYV7.js",import.meta.url,"BmAQnYV7");SML.di("./CLcwsfQZ.js",import.meta.url,"CLcwsfQZ");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");SML.di("./FagDXDzk.js",import.meta.url,"FagDXDzk");SML.di("./DBgqsMtO.js",import.meta.url,"DBgqsMtO");SML.di("./Ccw0cO_g.js",import.meta.url,"Ccw0cO_g");SML.di("./CykCcTkJ.js",import.meta.url,"CykCcTkJ");SML.di("./HYbNa5uQ.js",import.meta.url,"HYbNa5uQ");SML.di("./DAqoOXDQ.js",import.meta.url,"DAqoOXDQ");SML.di("./CsGy0MYm.js",import.meta.url,"CsGy0MYm");SML.di("./BGOkDHmz.js",import.meta.url,"BGOkDHmz");SML.di("./DoY_u8JV.js",import.meta.url,"DoY_u8JV");SML.di("./i17aYwuT.js",import.meta.url,"i17aYwuT");SML.di("./CU4mObWU.js",import.meta.url,"CU4mObWU");SML.di("./D0V62KWA.js",import.meta.url,"D0V62KWA");SML.di("./D6Xs8HU5.js",import.meta.url,"D6Xs8HU5");SML.di("./hMhijB38.js",import.meta.url,"hMhijB38");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");SML.di("./8qD_qMhm.js",import.meta.url,"8qD_qMhm");SML.di("./FEzVvA-C.js",import.meta.url,"FEzVvA-C");SML.di("./DoOFmcQZ.js",import.meta.url,"DoOFmcQZ");SML.di("./DrrjN1Nt.js",import.meta.url,"DrrjN1Nt");SML.di("./B8B7_bfl.js",import.meta.url,"B8B7_bfl");SML.di("./jOi_w9kT.js",import.meta.url,"jOi_w9kT");SML.di("./CKCUSZ1J.js",import.meta.url,"CKCUSZ1J");SML.di("./B5aCBAWI.js",import.meta.url,"B5aCBAWI");SML.di("./BhFZ7wtj.js",import.meta.url,"BhFZ7wtj");SML.di("./C0I_JWye.js",import.meta.url,"C0I_JWye");SML.di("./B9pe2eYY.js",import.meta.url,"B9pe2eYY");SML.di("./DS7BJDdq.js",import.meta.url,"DS7BJDdq");
SML.dm("B83JOyTy",["GlDbwxoG","CARPOtl-","BNHQzrNB","s_Igk1Yn","CZPCygeT","CjqmoMGQ","DmGowvJ7","9zvN-JDO","CMCPq0sv","I6Px4IX3","CzlfHowc","JGPlyfIr","B9vfNp6T","CYzNna7d","DK2EuOAl","B4wbfaco","BRT1r9z9","bZe6Ww5J","DopQd8m2","B_EEhXwG","DpIcjKPf","ByHkMIPl","DfxFL9aq","DCe9eryH","CC2wUKE8","DkIqVQPv","CTwJH_ps","OimaI6pY","BmAQnYV7","CLcwsfQZ","D-MAMWlw","FagDXDzk","DBgqsMtO","Ccw0cO_g","CykCcTkJ","HYbNa5uQ","DAqoOXDQ","CsGy0MYm","BGOkDHmz","DoY_u8JV","i17aYwuT","CU4mObWU","D0V62KWA","D6Xs8HU5","hMhijB38","DRM-oTYq","8qD_qMhm","FEzVvA-C","DoOFmcQZ","DrrjN1Nt","B8B7_bfl","jOi_w9kT","CKCUSZ1J","B5aCBAWI","BhFZ7wtj","C0I_JWye","B9pe2eYY","DS7BJDdq"],(async E=>{SML.di("./Dv3oQtz-.js",import.meta.url,"Dv3oQtz-").then((function(E){return E.f})),SML.di("./Dg8LS6-X.js",import.meta.url,"Dg8LS6-X").then((function(E){return E.f})),SML.di("./Baruuhvw.js",import.meta.url,"Baruuhvw"),E.g()&&SML.di("./BmgxDfP0.js",import.meta.url,"BmgxDfP0")}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");
SML.dm("B8B7_bfl",["GlDbwxoG"],(async e=>{const t=e.gN(),r=function(){const e=new WeakMap;let t=!1;return{get isDirty(){return t},getRegistration:(e,t,r)=>({target:e,key:t,value:r}),register({target:r,key:n,value:i}){const o=e.get(r);if(o&&!o.has(n))o.set(n,i);else{if(o)throw new Error(`Cannot register value for key ${n}; something is already registered!`);e.set(r,new Map([[n,i]]))}t=!0},unregister({target:r,key:n,value:i}){const o=e.get(r);o&&o.get(n)===i&&(o.delete(n),t=!0)},getRegisteredElements(r){const n=e.get(r);return t=!1,n},unregisterAll(r){e.delete(r),t=!0}}}(),n=e.gM("FaceplateForm"),i=n.registerAncestorClass,o=n.connectToAncestor,s=Symbol.for("mixins/form-association");function u(e){return!!e&&s in e.constructor}function a(e){return!!e&&(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement||s in e.constructor)}const c=new Set(["checkbox","radio"]);function l(e){return a(e)&&c.has(e.type)||u(e)&&"checked"in e}const f=new Set(["radio"]);const d="siteRule.value",g="categoryOrRule.value";return{C:g,F:s,R:class{constructor(e){this.bottomScrollIntoViewIfNeeded=e=>{const t=e?.parentElement;if(t&&e){t.clientHeight-(e.offsetTop+e.clientHeight)<0&&e.scrollIntoView()}},this.getHiddenInputValue=e=>this.reportFormEl.querySelector(`form input[type=hidden][name="${e}"]`)?.getAttribute("value")??"",this.setHiddenInputValue=(e,t)=>this.reportFormEl.querySelector(`form input[type=hidden][name="${e}"]`)?.setAttribute("value",t)??"",this.getAllHiddenInputValues=()=>Array.from(this.reportFormEl.querySelectorAll("form input[type=hidden]")).reduce(((e,t)=>{const r=t.getAttribute("name");return r?{...e,[r]:t.getAttribute("value")??""}:e}),{}),this.getComputedValueByRef=e=>{if(e===d){const t=this.getHiddenInputValue(g);return this.getHiddenInputValue(e).includes(t)?this.getHiddenInputValue(e):""}return this.getHiddenInputValue(e)},this.checkCondition=e=>{if("object"==typeof e){const{args:t,$type:r}=e;if("computed"===r&&Array.isArray(t)){const r=t.map((e=>"object"==typeof e&&"ref"===e.$type?this.getComputedValueByRef(e.ref):e));return"neq"===e.function?String(r[0])!==String(r[1]):String(r[0])===String(r[1])}if("ref"===r&&e.ref)return this.getHiddenInputValue(e.ref)}return!1},this.getComputedProp=e=>{if("computed"===e.$type&&"conditionalSelect"===e.function&&e.conditions&&e.values){const t=e.conditions;for(const[r,n]of t.entries())if(!0===n||"boolean"!=typeof n&&this.checkCondition(n))return e.values[r]}return e},this.getText=e=>{if(this.isString(e))return e;const t=this.getComputedProp(e);return this.isString(t)?t:""},this.getAction=e=>this.getComputedProp(e),this.getDisabledCondition=e=>!!this.checkCondition(this.getComputedProp(e)),this.getTextDataRef=e=>{const t=e.conditions?.[0];if(t&&"boolean"!=typeof t){const e=t.args;if(Array.isArray(e)&&!this.isString(e[0]))return e[0].ref}return""},this.getDisabledRef=e=>{const t=e.args;if(t&&Array.isArray(t)&&!this.isString(t[0]))return[t[0].ref];const r=e.values;return r?r.map((e=>e.args[0].ref)):void 0},this.isString=e=>"string"==typeof e,this.performAction=e=>{switch(e.actionType){case"formSubmit":return{formSubmit:!0,data:e.args};case"formClose":return{formClose:!0};case"flow":return"SELF_HARM"===this.getHiddenInputValue(e.args[0].ref)?{openCtlFlow:!0}:void 0;case"openTemplatedUrl":const t=e.args,{urlTemplate:r,placeholders:n}=t;if(t&&r&&n){let e="";return n.forEach((n=>{const i=t[n],o=this.getHiddenInputValue(i.ref);o&&(e=r.replaceAll(`%(${n})s`,o))})),{href:e,formClose:!0}}return{formClose:!0};default:const{value:i,key:o}=e.args;return"ref"===i.$type?(this.setHiddenInputValue(o,this.getHiddenInputValue(i.ref)),{key:o,value:this.getHiddenInputValue(i.ref)}):void 0}},this.reportFormEl=e}},S:d,a:u,b:function(e){return!!e&&(e instanceof HTMLSelectElement||s in e.constructor&&"options"in e)},c:o,d:a,e:function(e){return l(e)&&f.has(e.type)},f:function(e){return null!=e},g:r,h:t,i:l,r:i}}));
SML.dm("B8v3CYv9",[],(async()=>{var e;!function(e){e[e.bold=1]="bold",e[e.italic=2]="italic",e[e.underline=4]="underline",e[e.strikethrough=8]="strikethrough",e[e.subscript=16]="subscript",e[e.superscript=32]="superscript",e[e.monospace=64]="monospace"}(e||(e={}));const i={LEFT:"L",RIGHT:"R",CENTER:"C"};return{A:"gif",B:"blockquote",C:"c/",E:"embed",get F(){return e},H:"hr",I:"img",L:"br",P:"par",R:"raw",S:"spoilertext",T:"table",U:"@",V:"video",a:"p/",b:"emoji",c:"code",d:"h",e:"li",f:"list",g:"u/",h:"r/",i:"link",j:"text",k:i,l:"L",m:"C",n:"R"}}));

SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./FagDXDzk.js",import.meta.url,"FagDXDzk");
SML.dm("B91qGC0A",["GlDbwxoG","D-MAMWlw","s_Igk1Yn","FagDXDzk"],(async(e,t,a)=>{SML.di("./D4xKXo2t.js",import.meta.url,"D4xKXo2t"),SML.di("./BStJq-t0.js",import.meta.url,"BStJq-t0"),SML.di("./DCovP8x6.js",import.meta.url,"DCovP8x6");let i=e.B,o=class extends a.s{static get styles(){return[e.t]}constructor(){super(),this.isUserLoggedIn=!1,this.postId="",this.shouldShowPollCoachmark=!1,this.voteRequestPending=!1,this.isHidden=!1,this.pollCoachmarkRef=e.U(),this.handleInput=e=>{this.selectedOptionId=e.target?.value,this._button?.removeAttribute("disabled")},this.handleShowCoachmark=e=>{e.preventDefault(),this.showPollCoachmark()},this.handleCoachmarkButtonClick=e=>{e.target.closest('[data-action="show-poll-coachmark"]')&&(e.stopPropagation(),this.showPollCoachmark())},this.handleVote=async()=>{if(e.f(this,e.b({source:"post",action:"click",noun:"vote"})),this.isUserLoggedIn)try{this.voteRequestPending=!0;const t=await this.makeVoteRequest();this.voteRequestPending=!1,t?.data?.updatePostPollVoteState?.ok?(this.isHidden=!0,await this.reloadPollPost()):this.handleVoteError(e.b6.QueryBadResponse)}catch(t){this.handleVoteError(e.bs(t))}},this.reloadPollPost=async()=>{e.p(e.T.PostUpdated,{postId:this.postId,action:t.a.updateContent,value:!0})},this._button=this.querySelector("button")}connectedCallback(){super.connectedCallback(),this._button?.addEventListener("click",this.handleVote),this.addEventListener("show-poll-coachmark",this.handleShowCoachmark),this.addEventListener("click",this.handleCoachmarkButtonClick,!0),this.shouldShowPollCoachmark&&this.showPollCoachmark()}disconnectedCallback(){super.disconnectedCallback(),this._button?.removeEventListener("click",this.handleVote),this.removeEventListener("show-poll-coachmark",this.handleShowCoachmark),this.removeEventListener("click",this.handleCoachmarkButtonClick,!0)}redirect(e){window.location.href=e}async makeVoteRequest(){return i({operation:e.C.UpdatePostPollVoteState,variables:{input:{postId:this.postId,optionId:this.selectedOptionId}}})}handleVoteError(t){this.voteRequestPending=!1,this.dispatchEvent(e.c("faceplate-alert",{level:e.X.error,message:"Something went wrong",cause:t}))}showPollCoachmark(){const e=this.querySelector("#poll-legend-anchor"),t=this.pollCoachmarkRef.value;t&&e&&(t.anchor=e,t.show())}render(){return this.isHidden?"":a.x` <slot @input="${this.handleInput}"></slot> ${this.voteRequestPending?a.x` <div class="absolute inset-0 flex justify-center items-center"> ${a.U({attributes:{className:"animate-spin"},size:a.I.Medium})} </div> `:""} <rpl-coachmark ${e.V(this.pollCoachmarkRef)} placement="top-start" appearance="inverted" distance="0"> <rpl-coachmark-card slot="content" appearance="inverted" class="w-[220px] -ml-lg" auto-close> <div slot="title" class="pt-xs pb-2xs"> ${"Who are core contributors?"} </div> <div class="text-12 pb-xs"> ${"Core contributors have visited or contributed to this community consistently in the past month."} </div> ${e.Y({attributes:{slot:"close-button",id:"close-poll-coachmark-button"},leadingIcon:a.c(),appearance:"plainInverted",size:e.a7.Small})} </rpl-coachmark-card> </rpl-coachmark> `;}};return e._([e.aA({context:e.b1}),e.n({attribute:!1})],o.prototype,"isUserLoggedIn",void 0),e._([e.n({type:String,attribute:"post-id"})],o.prototype,"postId",void 0),e._([e.n({attribute:!1})],o.prototype,"selectedOptionId",void 0),e._([e.n({type:Boolean,attribute:"show-poll-coachmark"})],o.prototype,"shouldShowPollCoachmark",void 0),e._([e.N()],o.prototype,"voteRequestPending",void 0),o=e._([e.e("shreddit-post-poll")],o),{get ShredditPostPoll(){return o}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DDVMeV6m.js",import.meta.url,"DDVMeV6m");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("B9LG8aGh",["GlDbwxoG","s_Igk1Yn","DDVMeV6m","CC2wUKE8"],(async(e,t,s,a)=>{let n=class extends t.s{constructor(){super(...arguments),this.id="",this.searchBase=null,this.isExpanded=!1,this.pubsub=new e.m(this),this.handleFlairExpansionStateChanged=e=>{this.isExpanded=e.isExpanded,this.updateExpandedState()},this.handleExpandClick=()=>{this.isExpanded=!this.isExpanded,this.updateExpandedState(),this.searchBase&&this.searchBase.updateFlairExpansionState(this.isExpanded)}}connectedCallback(){super.connectedCallback(),this.isExpanded=!1,this.pubsub.subscribe(e.T.SearchFlairExpansionStateChanged,this.handleFlairExpansionStateChanged),this.searchBase=document.querySelector("reddit-search-large")||document.querySelector("reddit-search-small")}disconnectedCallback(){super.disconnectedCallback();const e=this.shadowRoot?.querySelector('slot[name="expand-button"]');e&&e.removeEventListener("click",this.handleExpandClick)}updateExpandedState(){const e=this.shadowRoot?.querySelector('slot[name="content"]'),t=this.shadowRoot?.querySelector('slot[name="expand-button"]');if(e){e.assignedElements().forEach((e=>{this.isExpanded?(e.classList.add("!max-h-none","!overflow-visible"),e.classList.remove("max-h-[2em]","overflow-hidden")):(e.classList.add("max-h-[2em]","overflow-hidden"),e.classList.remove("!max-h-none","!overflow-visible"))}))}if(t){t.assignedElements().forEach((e=>{this.isExpanded?e.classList.add("hidden"):e.classList.remove("hidden");const t=e.querySelector("button");t&&t.setAttribute("aria-expanded",this.isExpanded.toString())}))}}setupEventListeners(){const e=this.shadowRoot?.querySelector('slot[name="expand-button"]');e&&e.addEventListener("click",this.handleExpandClick)}firstUpdated(){this.setupEventListeners(),this.updateExpandedState()}render(){return t.x` <slot></slot> <slot name="content"></slot> <slot name="expand-button"></slot> `}};e._([e.n({type:String})],n.prototype,"id",void 0),e._([e.N()],n.prototype,"searchBase",void 0),e._([e.N()],n.prototype,"isExpanded",void 0),n=e._([e.e("search-flair-expandable-list")],n);let d=class extends t.s{constructor(){super(...arguments),this.open=!1,this.id="",this.handleClick=()=>{const e=!this.open;this.updateLocalStorage(e),this.open=e,this.toggleHeaderTrackers()}}toggleHeaderTrackers(){this.trackers?.forEach((e=>{e.disabled=!e.disabled}))}updateLocalStorage(t){const s=a.p(e.a0.SearchTypeaheadExpanded)??{};s[this.id]=!!t,a.h(e.a0.SearchTypeaheadExpanded,s)}connectedCallback(){super.connectedCallback(),this.closest("summary")?.addEventListener("click",this.handleClick)}disconnectedCallback(){super.disconnectedCallback(),this.closest("summary")?.removeEventListener("click",this.handleClick)}createRenderRoot(){return this}};e._([e.aU(s.S)],d.prototype,"trackers",void 0),e._([e.n({reflect:!0,type:Boolean,attribute:"open"})],d.prototype,"open",void 0),e._([e.n({type:String})],d.prototype,"id",void 0),d=e._([e.e("search-typeahead-expandable-section")],d)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./B8B7_bfl.js",import.meta.url,"B8B7_bfl");
SML.dm("B9pe2eYY",["GlDbwxoG","s_Igk1Yn","B8B7_bfl"],(async(t,e,i)=>{function n(t){if(i.i(t)&&(t.checked=t.hasAttribute("checked")),i.a(t))t.formResetCallback&&t.formResetCallback();else if(t instanceof HTMLInputElement)t.value=t.getAttribute("value")||"";else if(t instanceof HTMLTextAreaElement)t.value=t.textContent||"";else if(i.b(t))for(const e of t.options)e.selected=e.hasAttribute("selected");else t instanceof HTMLOutputElement&&(t.value=t.defaultValue)}function s(e){const i={};for(const n of e){const[e,s]=n;if(s instanceof File)throw t.ge(e);Object.prototype.hasOwnProperty.call(i,e)?Array.isArray(i[e])?i[e].push(s):i[e]=[i[e],s]:i[e]=s}return i}const a=(t,e=0)=>{if(6!==e)return t instanceof HTMLInputElement||t instanceof HTMLButtonElement?t:t?a(t.parentElement,e+1):void 0};function r(e){let i;document.activeElement&&document.activeElement!==document.body&&(i=t.gf(document.activeElement)),!i&&e&&e.target instanceof Element&&(i=function(t){var e;for(const i of null!==(e=t.composedPath())&&void 0!==e?e:[])if((i instanceof HTMLInputElement||i instanceof HTMLButtonElement)&&"submit"===i.type)return i}(e));const n=i instanceof HTMLButtonElement||i instanceof HTMLInputElement;if(i&&e&&!n&&(i=a(i.parentElement)),i)return(i instanceof HTMLInputElement||i instanceof HTMLButtonElement)&&"submit"===i.type?i:void 0}function o(t){return t instanceof HTMLElement&&Object.prototype.hasOwnProperty.call(t.dataset,"faceplateConstraint")}function l(e,i,n){return t.c("faceplate-alert",{level:t.X.error,message:t.gj("Form submission failed"),meta:null==e?void 0:e.toString(),sourceElement:i,cause:n})}const c={[t.e$.UrlEncoded]:t.gg,[t.e$.JSON]:function(t){return JSON.stringify(s(t))},[t.e$.FormData]:t=>t};let d=class extends e.s{constructor(){super(...arguments),this.accept="text/vnd.reddit.partial+html, application/json",this.enctype=t.e$.UrlEncoded,this.action="",this.disabled=!1,this.method=t.b3.Post,this.target="",this.partialMode=t.P.Append,this.novalidate=!1,this.validationTrigger="focusout",this._events=new t.E(this),this.formSubmissionInProgress=!1,this.rulesDidChange=!1,this.focusedInputForValiditySinceLastSubmit=!1,this._shouldRebuildElements=!0,this._elements={},this._validationObserverCount=0,this._asyncInputOperations=0,this.requester=t.gh,this.encoders=c,this._handleInput=this._events.define("input",(()=>{this._shouldRebuildElements=!0})),this._handleFormSubmit=this._events.define("submit",(t=>{const e=t.target;if(!(e&&e instanceof HTMLFormElement))return;t.preventDefault();const i=r(t);this.submit(e.action,void 0,i)})),this._handleClick=this._events.define("click",(t=>{const e=r(t);e&&(t.preventDefault(),this.submit(this.action,void 0,e))})),this._handleFocusIn=this._events.define("focusin",(t=>{if(i.d(t.target)&&o(t.target))if(this.formSubmissionInProgress){const e=this;t.target.addEventListener("input",(function t(i){var n;e.validateElementAgainstRules(i.target)&&(null===(n=i.target)||void 0===n||n.removeEventListener("input",t))}))}else t.target.setCustomValidity("")})),this.configureValidation=()=>this.addEventListener(this.validationTrigger,(t=>{i.d(t.target)&&(o(t.target)&&this.validateElementAgainstRules(t.target),i.F in t.target.constructor&&t.target.syncInputValidity(),this.notifyObservers(t.target))})),this._handleFaceplateAlert=this._events.define("faceplate-alert",(e=>{const{level:i,name:n,message:s}=e.detail;i===t.X.error&&n&&s&&this.invalidateFieldWithMessage(n,s)&&(e.target.remove(),e.stopPropagation())})),this.register=t=>{this.dispatchEvent(new CustomEvent("_faceplate-register-input",{detail:{target:t}}))},this._handleRegister=this._events.define("_faceplate-register-input",(t=>{var e;t.stopImmediatePropagation(),t.detail.register&&(null===(e=t.detail)||void 0===e||e.register(this)),this._shouldRebuildElements=!0;const{target:i}=t.detail;i.syncInputValidity(!1),this.notifyObservers(i)}))}updated(t){t.has("validationTrigger")&&(t.get("validationTrigger")&&this.removeEventListener(t.get("validationTrigger"),this.configureValidation),this.configureValidation())}get canSubmit(){return!(this.disabled||this.formSubmissionInProgress||this._asyncInputOperations>0)}get elements(){if(this._shouldRebuildElements){this._elements={};for(const t of this.recognizedInputs()){const{name:e}=t;if(e)if(e in this._elements){const n=this._elements[e];let s;Array.isArray(n)?(s=n,n.push(t)):(s=[n,t],s.value=i.e(n)&&n.checked?n.value:"",this._elements[e]=s),i.e(t)&&t.checked&&(s.value=t.value)}else this._elements[t.name]=t}this._shouldRebuildElements=!1}return this._elements}static get styles(){return e.i`:host{display:block;margin-bottom:1rem}`}render(){return e.x` <slot></slot> `}addEventListener(t,e,i){super.addEventListener(t,e,i),"_faceplate-validation-change"===t&&(this._validationObserverCount+=1)}removeEventListener(t,e,i){super.removeEventListener(t,e,i),"_faceplate-validation-change"===t&&(this._validationObserverCount-=1)}async disableUntil(t){this._asyncInputOperations+=1;try{await t}finally{this._asyncInputOperations-=1}}notifyObservers(e){if(this._validationObserverCount){const i=t.gi("_faceplate-validation-change",{bubbles:!0,cancelable:!1,composed:!1,detail:{input:e,message:e.validationMessage,name:e.name}});this.dispatchEvent(i)}}invalidateFieldWithMessage(t,e){const n=this.querySelector(`[name="${t}"]`);return!!i.d(n)&&(n.setCustomValidity(e),n.setAttribute("faceplate-dirty",""),this.notifyObservers(n),e&&n.addEventListener("input",(function t(){n.setCustomValidity(""),n.removeEventListener("input",t)})),e&&!this.focusedInputForValiditySinceLastSubmit&&(this.focusedInputForValiditySinceLastSubmit=!0,this.reportFieldValidity(n)),!0)}reportFieldValidity(e){const i=e.reportValidity();if(!i&&null===e.offsetParent){const i=t.c("faceplate-alert",{level:t.X.error,message:t.gj("Validation error on hidden input"),meta:`"${e.name}": ${e.validationMessage}`,sourceElement:this.tagName,cause:"faceplate-form-input-validation-failure"});this.dispatchEvent(i)}return i}get targetElement(){return this.target&&document.querySelector(this.target)||this}get isValid(){let t=!0;const e=r(),n=!(this.novalidate||e&&e.hasAttribute("formnovalidate"));for(const e of this.recognizedInputs())if(i.d(e)){if(e.disabled)continue;if(e.matches(":disabled"))continue;if(n&&(this.validateElementAgainstRules(e),!e.checkValidity())){t=!1;break}}return t}async submit(e=this.action,i,n){var s,a,r,o;if(!this.canSubmit)return;this.formSubmissionInProgress=!0,this.focusedInputForValiditySinceLastSubmit=!1;try{const h=t.c("faceplate-submit");if(this.dispatchEvent(h),h.defaultPrevented)return;const p=this.buildRequest(i,n);if(!p)return;if("dialog"===p.method){const t=this.closest("faceplate-dialog");if(!t)throw new Error("Unable to find parent faceplate-dialog element to close with form submission");return t.close(p.body)}let f=this.enctype;if(n&&n.hasAttribute("formenctype")&&(f=n.getAttribute("formenctype")),"log"===p.method){const t=this.encoders[f];return console.log(t?t(p.body):p.body)}n&&n.hasAttribute("formaction")&&(e=n.getAttribute("formaction"));const m={enctype:f,encoders:this.encoders,credentials:this.credentials};try{for(var c,d=!0,u=t.gk(this.requester(e,p,m));!(s=(c=await u.next()).done);){o=c.value,d=!1;try{const t=o;if("faceplate-error"===t.type){const e=l(t.detail,this.tagName,"faceplate-form-fetch-failure");this.dispatchEvent(e);break}if(this.dispatchEvent(t),"faceplate-response"===t.type){await this.handleResponse(t.detail.response);break}}finally{d=!0}}}catch(t){a={error:t}}finally{try{d||s||!(r=u.return)||await r.call(u)}finally{if(a)throw a.error}}}catch(t){const e=l(t,this.tagName,"faceplate-form-submission-uncaught-error");this.dispatchEvent(e)}finally{return void(this.formSubmissionInProgress=!1)}}validateElementAgainstRules(e){var n;if(!o(e))return!0;if(this.rulesDidChange){const e=t.c("faceplate-form-constraints-changed");this.dispatchEvent(e),this.rulesDidChange=!1}e.setCustomValidity("");const s=i.g.getRegisteredElements(this);if(!s)return!0;const a=null===(n=e.dataset.faceplateConstraint)||void 0===n?void 0:n.split(" ");if(!a||!a.length)return!0;for(const t of a){const i=s.get(t);if(!i){console.warn(`Skipping validation against unknown rule "${t}"`);continue}const n=e.value;if(null!==n&&!i.validate(n))return e.setCustomValidity(i.message),!1}return!0}*elementsIterator(){yield*this.recognizedInputs()}recognizedInputs(){let t=new Set;for(const e of[...this.querySelectorAll("*")].filter(i.d))t.add(e);const e=this.querySelectorAll("output");for(let i=0;i<e.length;i++)t.add(e[i]);const n=i.h.getRegisteredElements(this);return n&&(t=new Set([...t,...n])),t}reset(){for(const t of this.recognizedInputs())n(t)}buildRequest(e,n){const s=new FormData;!n&&arguments.length<3&&(n=r());const a=!(this.novalidate||n&&n.hasAttribute("formnovalidate"));for(const t of this.recognizedInputs())if(i.d(t)){if(t.disabled)continue;if(t.matches(":disabled"))continue;if(a&&(this.validateElementAgainstRules(t),!this.reportFieldValidity(t)))return null;if(i.i(t)&&!t.checked)continue;const{name:e,value:n}=t;if(null===n)continue;if(n instanceof FormData){for(const t of n)s.append(t[0],t[1]);continue}if(!e)continue;if(i.b(t)&&t.multiple)for(const i of t.options)i.selected&&s.append(e,i.value);else if(t instanceof HTMLInputElement&&"file"===t.type){const i=t.files;if(i)for(const t of i)s.append(e,t)}else s.append(e,n)}if(e)for(const t of e)s.append(t.name,t.value);let o=this.method;return n&&(n.name&&n.value&&s.append(n.name,n.value),n.hasAttribute("formmethod")&&(o=t.gl(n.getAttribute("formmethod")))),{body:s,method:o.toLowerCase(),headers:{Accept:this.accept}}}async handleResponse(e){const i=t.cY(e);if("text/vnd.reddit.partial+html"===i){const i=await e.text(),n=this.targetElement;t.aG(i,n,this.partialMode)}else if("application/json"===i&&e.status>=400){const i=await e.json();if("object"==typeof(n=i)&&n&&Object.prototype.hasOwnProperty.call(n,"title")&&Object.prototype.hasOwnProperty.call(n,"message")){const n=t.c("faceplate-alert",{level:t.X.error,name:i.title,message:t.gj("Form responded with error"),meta:i.message,sourceElement:this.tagName,cause:`faceplate-form-response-error-${e.status}`});this.dispatchEvent(n)}}else"text/html"===i&&e.redirected&&(window.location.href=e.url);var n}};return t._([t.n({type:String})],d.prototype,"accept",void 0),t._([t.n({type:String})],d.prototype,"enctype",void 0),t._([t.n({type:String})],d.prototype,"action",void 0),t._([t.n({type:Boolean,reflect:!0})],d.prototype,"disabled",void 0),t._([t.n({converter:t.gl,reflect:!0})],d.prototype,"method",void 0),t._([t.n({type:String})],d.prototype,"target",void 0),t._([t.n({type:String,attribute:"partial-mode"})],d.prototype,"partialMode",void 0),t._([t.n({type:String})],d.prototype,"novalidate",void 0),t._([t.n({type:String})],d.prototype,"credentials",void 0),t._([t.n({type:String,attribute:"validation-trigger"})],d.prototype,"validationTrigger",void 0),d=t._([t.e("faceplate-form")],d),i.r(d),{C:class{get active(){return this.duration>0}get timeRemaining(){return`${Math.floor(this.duration/6e4)}:${Math.ceil(this.duration%6e4/1e3).toString().padStart(2,"0")}`}get secondsRemaining(){return Math.ceil(this.duration/1e3).toString()}constructor(t){this.duration=0,this.interval=0,this.update=()=>{this.duration=this.duration-this.interval,this.duration<=0&&this.reset(),this.host.requestUpdate()},this.host=t,this.host.addController(this)}hostDisconnected(){this.reset()}reset(){clearInterval(this.timeout),this.duration=0,this.interval=0}start(t,e=1e3){this.reset(),this.duration=t,this.interval=e,this.timeout=setInterval(this.update,this.interval),this.host.requestUpdate()}},get F(){return d},c:s}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("B9vfNp6T",["GlDbwxoG","s_Igk1Yn","CC2wUKE8"],(async(e,t,o)=>{const s=t.s;let n=class extends s{constructor(){super(...arguments),this.commentComposer=null,this.addCommentButton=null,this._events=new e.E(this),this.handleCommentPost=this._events.define(o.b$,(()=>{const e=this.querySelector("#empty-comments-banner");e&&(e.classList.add("hidden"),e.ariaHidden="true")})),this.handleCommentSearchToggle=e=>{this.commentComposer?.classList.toggle("hidden",e.detail.isHidden),this.addCommentButton?.classList.toggle("hidden",e.detail.isHidden)}}firstUpdated(){this.commentComposer=this.querySelector(`${e.cb.commentComposerHost}`),this.addCommentButton=this.querySelector(e.cb.addCommentButton)}render(){return t.x` <faceplate-tracker source="post_detail" action="view" noun="comment_body_header"> <slot @pdp-comment-search-toggle="${this.handleCommentSearchToggle}"> </slot> </faceplate-tracker> `}};return n=e._([e.e("comment-body-header")],n),{get CommentBodyHeader(){return n}}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("B9x9AfW9",["s_Igk1Yn"],(async a=>{const{svg:t}=a.g();return{n:a.m(t`<path d="M10 10.9H4.68V9.1H9.1V4.68h1.8V10c0 .5-.4.9-.9.9z"></path><path d="M13.3 16.39c-.99.51-2.11.81-3.3.81-3.97 0-7.2-3.23-7.2-7.2S6.03 2.8 10 2.8c3.22 0 5.96 2.13 6.87 5.06.05.02.11.03.16.05.33.14.63.33.88.58l1.07 1.07C18.75 4.8 14.82 1 10 1s-9 4.03-9 9a9 9 0 009 9c1.17 0 2.28-.23 3.3-.63v-1.98z"></path><path d="M19.64 12.76l-3-3a.915.915 0 00-1.27 0l-3 3a.9.9 0 000 1.27.9.9 0 001.27 0l1.46-1.46v6.03c0 .5.4.9.9.9s.9-.4.9-.9v-6.03l1.46 1.46c.18.18.41.26.64.26.23 0 .46-.09.64-.26a.9.9 0 000-1.27z"></path>`,"0 0 20 20","new",!0)}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("BA_-Y74k",["GlDbwxoG","s_Igk1Yn","DRM-oTYq","CC2wUKE8"],(async(e,t,i)=>{var a=t.i`.image-caption-container-collapsed{background:rgba(0,0,0,.6)}.image-caption-container-expanded{background:rgba(0,0,0,.8)}.text-primary-blue{color:#629fff}`;let o=class extends t.s{constructor(){super(...arguments),this.imageCaption="",this.outboundUrl="",this.shortenedUrl="",this.imageIndex="",this.isMore=!0,this.shouldShowMoreLessButton=()=>{const e=this.shadowRoot?.querySelector("figCaption")?.querySelector(`#gallery-image-caption-text-${this.imageIndex}`);if((e?.scrollWidth||0)>(e?.clientWidth||0)||(e?.scrollHeight||0)>(e?.clientHeight||0)){const e=this.shadowRoot?.querySelector("figCaption")?.querySelector(`#caption-more-button-${this.imageIndex}`);e?.classList?.remove(i.C),e?.classList?.add(i.w)}}}static get styles(){return[e.t,a]}getTruncateTextOverFlow(){return this.outboundUrl?"truncate":"line-clamp-2"}showMoreLessButtonText(){return this.isMore?"more":"less";}updateCaptionContainer(){const e=this.shadowRoot?.querySelector("figCaption"),t=e?.querySelector(`#gallery-image-caption-container-${this.imageIndex}`),i=e?.querySelector(`#gallery-image-caption-text-container-${this.imageIndex}`),a=e?.querySelector(`#gallery-image-caption-text-${this.imageIndex}`);this.isMore?(i?.classList?.remove("overflow-auto"),a?.classList?.add(this.getTruncateTextOverFlow()),t?.classList?.remove("image-caption-container-expanded"),t?.classList?.add("image-caption-container-collapsed")):(i?.classList?.add("overflow-auto"),a?.classList?.remove(this.getTruncateTextOverFlow()),t?.classList?.remove("image-caption-container-collapsed"),t?.classList?.add("image-caption-container-expanded"))}handleMoreLessButtonClicked(e){e.stopPropagation(),e.preventDefault(),this.isMore=!this.isMore,this.updateCaptionContainer();const t=this.shadowRoot?.querySelector("figCaption")?.querySelector(`#caption-more-button-${this.imageIndex}`),i=t?.querySelector(`#caption-more-button-text-${this.imageIndex}`);i&&(i.textContent=this.showMoreLessButtonText())}showMoreLessButton(){return t.x`${e.Y({appearance:"primary",size:e.a7.Small,attributes:{className:"text-primary-blue not-italic font-bold text-12 flex items-end bg-transparent\n            hover:bg-transparent focus:bg-transparent active:bg-transparent visited:bg-transparent\n            hidden rounded-none",onclick:this.handleMoreLessButtonClicked,id:`caption-more-button-${this.imageIndex}`},children:t.x` <div class="w-full"> <span id="caption-more-button-text-${this.imageIndex}">${this.showMoreLessButtonText()} </span> </div>`})}`}firstUpdated(){this.shouldShowMoreLessButton()}render(){return t.x` <figcaption class="p-xs absolute h-auto left-0 right-0 bottom-0 mb-xl"> <div id="gallery-image-caption-container-${this.imageIndex}" class="box-border flex flex-col items-start h-auto border-[0.5px] border-solid border-neutral-border-weak shadow-[0px_4px_4px_rgba(0, 0, 0, 0.15)_0px_1px_4px_rgba(0, 0, 0, 0.15)] rounded-2 py-2xs px-xs image-caption-container-collapsed flex-1"> ${this.imageCaption&&t.x` <div id="gallery-image-caption-text-container-${this.imageIndex}" class="${"flex flex-row items-center w-full gap-2xs"}"> <span id="gallery-image-caption-text-${this.imageIndex}" class="text-media-onbackground font-normal text-12 ${this.getTruncateTextOverFlow()}" title="${this.imageCaption}">${this.imageCaption} </span> ${this.outboundUrl?"":t.x`${this.showMoreLessButton()}`} </div> `} ${this.outboundUrl&&t.x` <div id="gallery-image-caption-url-container-${this.imageIndex}" class="flex flex-row items-center w-full h-md gap-2xs"> <a class="flex flex-row items-center p-0 gap-2xs w-full" href="${this.outboundUrl}" rel="noopener nofollow ugc" target="_blank"> <span class="font-bold text-12 truncate text-primary-blue"> ${this.shortenedUrl||this.outboundUrl} </span> </a> ${this.showMoreLessButton()} </div> `} </div> </figcaption>`}};return e._([e.n({type:String,attribute:"image-caption"})],o.prototype,"imageCaption",void 0),e._([e.n({type:String,attribute:"outbound-url"})],o.prototype,"outboundUrl",void 0),e._([e.n({type:String,attribute:"shortened-url"})],o.prototype,"shortenedUrl",void 0),e._([e.n({type:String,attribute:"image-index"})],o.prototype,"imageIndex",void 0),o=e._([e.e("gallery-caption")],o),{get GalleryCaption(){return o}}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("BC4TFJx3",["s_Igk1Yn"],(async m=>{const{svg:c}=m.g();return{p:m.m(c`<path d="M10 1c-4.96 0-9 4.04-9 9s4.04 9 9 9 9-4.04 9-9-4.04-9-9-9zm0 4.5c1.52 0 2.75 1.23 2.75 2.75S11.52 11 10 11 7.25 9.77 7.25 8.25 8.48 5.5 10 5.5zm-4.97 9.69C5.91 13.31 7.8 12 10 12c2.2 0 4.09 1.31 4.97 3.19A7.153 7.153 0 0110 17.2c-1.93 0-3.68-.77-4.97-2.01z"></path>`,"0 0 20 20","profile-fill")}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("BCmR6Ymi",["GlDbwxoG","DRM-oTYq","s_Igk1Yn"],(async(e,t,s)=>{class n{constructor(e,t){this.hasPageUnloaded=!1,this.handleIntersectionObserverEnter=()=>{this.isPostInViewport||(this.isPostInViewport=!0,this.becameVisibleOnScreenTimestamp=Date.now())},this.handleIntersectionObserverLeave=()=>{const e=this.isPostInViewport;this.isPostInViewport=!1,e&&this.handleConsume()},this.handleDocumentVisibilityChange=e=>{this.isPostInViewport&&(e?(this.hasPageUnloaded=!1,this.becameVisibleOnScreenTimestamp=Date.now()):e||this.hasPageUnloaded||this.handleConsume())},this.onBeforeUnloadCallback=()=>{this.hasPageUnloaded=!0,this.isPostInViewport&&this.handleConsume()},this.elementToTrack=e,this.SAN=t}handleConsume(){this.becameVisibleOnScreenTimestamp&&Date.now()-this.becameVisibleOnScreenTimestamp>t.a&&e.f(this.elementToTrack,this.SAN)}}class o{constructor(e){this.host=e,this.postConsumeTrackingController=new n(e,{source:"post",action:"consume",noun:"post"}),this.host.addController(this)}hostConnected(){new e.ap(this.host,this.host,{rootMargin:"0px"}),this.host.addEventListener("faceplate-enter",this.postConsumeTrackingController.handleIntersectionObserverEnter),this.host.addEventListener("faceplate-leave",this.postConsumeTrackingController.handleIntersectionObserverLeave),e.av.subscribe(this.postConsumeTrackingController.onBeforeUnloadCallback,{shouldBeCalledFirst:!0}),e.aw(this.postConsumeTrackingController.handleDocumentVisibilityChange,{immediate:!0})}hostDisconnected(){this.host.removeEventListener("faceplate-enter",this.postConsumeTrackingController.handleIntersectionObserverEnter),this.host.removeEventListener("faceplate-leave",this.postConsumeTrackingController.handleIntersectionObserverLeave),e.av.unsubscribe(this.postConsumeTrackingController.onBeforeUnloadCallback),e.ax(this.postConsumeTrackingController.handleDocumentVisibilityChange)}}let i=class extends s.s{connectedCallback(){super.connectedCallback(),this.postConsumeTrackingController=new o(this)}disconnectedCallback(){super.disconnectedCallback(),this.postConsumeTrackingController&&e.s(this,this.postConsumeTrackingController)}render(){return s.x`<slot></slot>`}};return i=e._([e.e("post-consume-tracker")],i),{C:n}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./OimaI6pY.js",import.meta.url,"OimaI6pY");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");SML.di("./DfxFL9aq.js",import.meta.url,"DfxFL9aq");SML.di("./CDFmhs-S.js",import.meta.url,"CDFmhs-S");SML.di("./DslEtuBZ.js",import.meta.url,"DslEtuBZ");SML.di("./Du8UC0gt.js",import.meta.url,"Du8UC0gt");
SML.dm("BD7y3eDi",["GlDbwxoG","s_Igk1Yn","OimaI6pY","CC2wUKE8","D-MAMWlw","DfxFL9aq","CDFmhs-S","DslEtuBZ","Du8UC0gt"],(async(e,t,i,a,n)=>{var r,s;!function(e){e.Scheduled="scheduled",e.Live="live",e.Ended="ended",e.Unavailable="unavailable"}(r||(r={}));let o=s=class extends t.s{constructor(){super(...arguments),this.isReminderSet=!1,this.eventState=r.Scheduled,this.postId="",this.permalink="",this.pdpTarget="_self",this.isPdp=!1,this.isLoggedIn=!1,this.isDesktopViewport=!1,this.shouldFireEngagedClick=!1,this.enableUserActionTriggeredModal=!1,this.requestInProgress=!1,this.handleClickCancelReminder=()=>{this.dispatchEvent(new Event(n.E,{bubbles:!0})),this.cancelReminder()},this.cancelReminder=async()=>{this.isReminderSet=!1;if(await this.updatePostReminderState(e.dO.NoReminder)){const t=e.c("faceplate-alert",{level:e.X.notice,message:"Reminder cancelled"});this.dispatchEvent(t),this.pubsub?.publish(e.T.AdReminderRsvpUnsubscribe,{postId:this.postId})}else{this.isReminderSet=!0;const e="Failed to cancel reminder";this.dispatchErrorAlert(e)}},this.handleClickSetReminder=async()=>{this.shouldFireEngagedClick&&this.dispatchEvent(e.c(i.A)),this.isLoggedIn?(this.dispatchEvent(new Event(n.b,{bubbles:!0})),await this.setReminder()):this.dispatchEvent(e.c(e.dP.follow))},this.setReminder=async()=>{this.isReminderSet=!0;if(await this.updatePostReminderState(e.dO.Reminder)){const t=e.c("faceplate-alert",{level:e.X.success,message:"Reminder set"});this.dispatchEvent(t),this.pubsub?.publish(e.T.AdReminderRsvpSubscribe,{postId:this.postId})}else{this.isReminderSet=!1;const e="Failed to set reminder";this.dispatchErrorAlert(e)}},this.showUserActionTriggeredModal=()=>{this.userActionTriggeredModal?.showModal(),this.userActionTriggeredBottomSheet?.showModal(),this.userActionTriggeredModal?.addEventListener("rpl-dialog:hide",this.handleModalClose),this.userActionTriggeredBottomSheet?.addEventListener("rpl-bottom-sheet:hide",this.handleBottomSheetClose)},this.closeUserActionTriggeredModal=()=>{this.userActionTriggeredModal?.hide(),this.userActionTriggeredBottomSheet?.hide(),s.triggeredPostIds.delete(this.postId),this.userActionTriggeredModal?.removeEventListener("rpl-dialog:hide",this.handleModalClose),this.userActionTriggeredBottomSheet?.removeEventListener("rpl-bottom-sheet:hide",this.handleBottomSheetClose)},this.handleModalClose=()=>{s.triggeredPostIds.delete(this.postId),this.userActionTriggeredModal?.removeEventListener("rpl-dialog:hide",this.handleModalClose)},this.handleBottomSheetClose=()=>{s.triggeredPostIds.delete(this.postId),this.userActionTriggeredBottomSheet?.removeEventListener("rpl-bottom-sheet:hide",this.handleBottomSheetClose)},this.handleTriggerModal=e=>{e.postId!==this.postId||s.triggeredPostIds.has(this.postId)||this.isReminderSet||this.eventState!==r.Scheduled||(s.triggeredPostIds.add(this.postId),this.showUserActionTriggeredModal())},this.closeUserActionTriggeredModalAndGetNotifications=async()=>{this.closeUserActionTriggeredModal(),await this.handleClickSetReminder()},this.updatePostReminderState=async t=>{this.requestInProgress=!0;const i=await e.B({operation:e.C.UpdatePostReminderState,variables:{input:{postId:this.postId,reminderState:t}}});return this.requestInProgress=!1,!!i.data.updatePostReminderState?.ok}}connectedCallback(){super.connectedCallback(),this.pubsub=new e.m(this),this.pubsub.subscribe(e.T.AdReminderRsvpSubscribe,(e=>{e.postId===this.postId&&(this.isReminderSet=!0)})),this.pubsub.subscribe(e.T.AdReminderRsvpUnsubscribe,(e=>{e.postId===this.postId&&(this.isReminderSet=!1)})),this.enableUserActionTriggeredModal&&this.pubsub.subscribe(e.T.TriggerAdReminderModal,this.handleTriggerModal,!1)}disconnectedCallback(){super.disconnectedCallback(),this.pubsub=void 0}get shouldShowUserActionTriggeredModal(){const e=this.eventState===r.Live;return this.enableUserActionTriggeredModal&&this.isLoggedIn&&!e}dispatchErrorAlert(t){const i=e.c("faceplate-alert",{level:e.X.error,cause:"uncategorized",message:t});this.dispatchEvent(i)}getButtonAttributes(){const e=this.eventState===r.Live;return e&&this.isPdp?null:e&&!this.isPdp?{text:"Join Now",appearance:"primary",href:this.permalink,target:this.pdpTarget}:this.isReminderSet&&!e?{action:this.handleClickCancelReminder,text:"Reminder set",appearance:a.aj()?"secondary":"bordered"}:this.isReminderSet||e?null:{action:this.handleClickSetReminder,text:"Remind me",appearance:a.aj()?"bordered":"secondary"};}get userActionTriggerModalHeaderString(){return "Get reminded when this event starts?";}get userActionTriggerModalContentString(){return "Get notified before it starts so you don't miss out.";}renderUserActionTriggeredBottomSheet(){const i=t.x` <div class="w-full box-border px-md"> <div class="flex justify-between items-center"> <div class="font-bold text-16">${this.userActionTriggerModalHeaderString}</div> ${e.Y({appearance:"secondary",attributes:{onclick:this.closeUserActionTriggeredModal,"aria-label":"Close",className:"close-btn"},leadingIcon:t.c({size:t.I.Small}),size:e.a7.Small})} </div> <div class="w-full box-border pt-md"> ${this.userActionTriggerModalContentString} <div> ${e.Y({appearance:"secondary",size:e.a7.Small,children:"No thanks",attributes:{className:"w-100 mt-sm",onclick:this.closeUserActionTriggeredModal}})} </div> <div> ${e.Y({appearance:"primary",size:e.a7.Small,children:"Yes, remind me",attributes:{onclick:this.closeUserActionTriggeredModalAndGetNotifications,className:"w-100 my-sm"}})} </div> </div> </div> `;return t.x`<rpl-bottom-sheet class="triggered-modal" .litTemplateChildren="${i}"></rpl-bottom-sheet>`}renderUserActionTriggeredModal(){const i=t.x` <rpl-modal-card class="w-[640px] max-w-[90%] m-auto"> <div slot="title">${this.userActionTriggerModalHeaderString}</div> <div slot="close-button"> ${e.Y({appearance:"secondary",shape:"pill",leadingIcon:t.c({size:t.I.Small}),size:e.a7.Small,attributes:{"aria-label":"Close",onclick:this.closeUserActionTriggeredModal}})} </div> <div class="pt-sm">${this.userActionTriggerModalContentString}</div> <div slot="secondary-button"> ${e.Y({appearance:"secondary",size:e.a7.Small,children:"No thanks",attributes:{className:"w-100 xs:w-auto",onclick:this.closeUserActionTriggeredModal}})} </div> <div slot="primary-button"> ${e.Y({appearance:"primary",size:e.a7.Small,children:"Yes, remind me",attributes:{onclick:this.closeUserActionTriggeredModalAndGetNotifications,className:"w-100 xs:w-auto"}})} </div> </rpl-modal-card> `;return t.x`<rpl-dialog class="triggered-modal" .litTemplateChildren="${i}"></rpl-dialog>`}render(){if(this.eventState===r.Ended)return t.x``;const i=this.getButtonAttributes();if(!i)return t.x``;const{appearance:a,action:n,text:s,href:o,target:l}=i,d=e.Y({appearance:a,attributes:{className:"relative",onclick:n,id:"",href:o,target:l,disabled:this.requestInProgress},size:e.a7.Small,children:s});return t.x`<div> ${d} ${this.shouldShowUserActionTriggeredModal?this.isDesktopViewport?this.renderUserActionTriggeredModal():this.renderUserActionTriggeredBottomSheet():""} </div>`}};o.styles=[e.t],o.triggeredPostIds=new Set,e._([e.n({type:Boolean,attribute:"is-reminder-set",reflect:!0})],o.prototype,"isReminderSet",void 0),e._([e.n({type:String,attribute:"event-state"})],o.prototype,"eventState",void 0),e._([e.n({type:String,attribute:"post-id"})],o.prototype,"postId",void 0),e._([e.n({type:String})],o.prototype,"permalink",void 0),e._([e.n({type:String,attribute:"pdp-target"})],o.prototype,"pdpTarget",void 0),e._([e.n({type:Boolean,attribute:"is-pdp"})],o.prototype,"isPdp",void 0),e._([e.n({type:Boolean,attribute:"is-logged-in"})],o.prototype,"isLoggedIn",void 0),e._([e.n({type:Boolean,attribute:"is-desktop-viewport"})],o.prototype,"isDesktopViewport",void 0),e._([e.n({type:Boolean,attribute:"should-fire-engaged-click"})],o.prototype,"shouldFireEngagedClick",void 0),e._([e.n({type:Boolean,attribute:"enable-user-action-triggered-modal"})],o.prototype,"enableUserActionTriggeredModal",void 0),e._([e.N()],o.prototype,"requestInProgress",void 0),e._([e.Q("rpl-dialog.triggered-modal")],o.prototype,"userActionTriggeredModal",void 0),e._([e.Q("rpl-bottom-sheet.triggered-modal")],o.prototype,"userActionTriggeredBottomSheet",void 0),o=s=e._([e.e("ad-reminder-button")],o);let l=class extends t.s{constructor(){super(...arguments),this.postId="",this.eventState=r.Scheduled,this.startsAt="",this.endsAt="",this.locale="en",this.isReminderSet=!1,this.isLoggedIn=!1,this.shouldFireEngagedClick=!1,this.requestInProgress=!1,this.handleClickCancelReminder=()=>{this.dispatchEvent(new Event(n.E,{bubbles:!0})),this.cancelReminder()},this.cancelReminder=async()=>{this.isReminderSet=!1;if(await this.updatePostReminderState(e.dO.NoReminder)){const t=e.c("faceplate-alert",{level:e.X.notice,message:"Reminder cancelled"});this.dispatchEvent(t),this.pubsub?.publish(e.T.AdReminderRsvpUnsubscribe,{postId:this.postId})}else{this.isReminderSet=!0;const e="Failed to cancel reminder";this.dispatchErrorAlert(e)}},this.handleClickSetReminder=async()=>{this.shouldFireEngagedClick&&this.dispatchEvent(e.c(i.A)),this.isLoggedIn?(this.dispatchEvent(new Event(n.b,{bubbles:!0})),await this.setReminder()):this.dispatchEvent(e.c(e.dP.follow))},this.setReminder=async()=>{this.isReminderSet=!0;if(await this.updatePostReminderState(e.dO.Reminder)){const t=e.c("faceplate-alert",{level:e.X.success,message:"Reminder set"});this.dispatchEvent(t),this.pubsub?.publish(e.T.AdReminderRsvpSubscribe,{postId:this.postId})}else{this.isReminderSet=!1;const e="Failed to set reminder";this.dispatchErrorAlert(e)}},this.updatePostReminderState=async t=>{this.requestInProgress=!0;const i=await e.B({operation:e.C.UpdatePostReminderState,variables:{input:{postId:this.postId,reminderState:t}}});return this.requestInProgress=!1,!!i.data.updatePostReminderState?.ok},this.handleStatusClick=()=>{this.eventState===r.Ended||this.requestInProgress||(this.isReminderSet?this.handleClickCancelReminder():this.handleClickSetReminder())}}connectedCallback(){super.connectedCallback(),this.pubsub=new e.m(this),this.pubsub.subscribe(e.T.AdReminderRsvpSubscribe,(e=>{e.postId===this.postId&&(this.isReminderSet=!0)})),this.pubsub.subscribe(e.T.AdReminderRsvpUnsubscribe,(e=>{e.postId===this.postId&&(this.isReminderSet=!1)}))}getStatusMessage(){let e,t="text-neutral-content-weak";return this.eventState===r.Scheduled?e="Coming Up":this.eventState===r.Live?(t="text-global-orangered",e="Live"):e="Just Finished",{message:e,color:t};}getRelativeTime(){const e=new Date(this.startsAt),t=new Date(this.endsAt),i=new Date(Date.now()-6e4);return this.eventState===r.Scheduled?e:this.eventState===r.Live?e<i?e:i:t<i?t:i}endedOver24HoursAgo(){if(this.eventState===r.Ended){return new Date(this.endsAt)<=new Date(Date.now()-864e5)}return!1}dispatchErrorAlert(t){const i=e.c("faceplate-alert",{level:e.X.error,cause:"uncategorized",message:t});this.dispatchEvent(i)}render(){if(!this.startsAt||!this.endsAt||this.endedOver24HoursAgo())return t.x``;const{message:e,color:i}=this.getStatusMessage(),a=this.eventState===r.Scheduled,n=this.getRelativeTime().toISOString();return t.x`<div class="flex flex-row items-center text-12 h-xl ad-event-status cursor-pointer hover:opacity-80 transition-opacity" @click="${this.handleStatusClick}" role="button" tabindex="0" @keydown="${e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.handleStatusClick())}}"> <span class="${i} font-bold tracking-tight">${e}</span> <span class="me-2xs ms-2xs"></span> <span class="text-neutral-content-strong tracking-tight"> ${a?t.x`<faceplate-date locale="${t.l(this.locale)}" ts="${n}" .formatOptions="${{dateStyle:"medium",timeStyle:"short"}}"></faceplate-date>`:t.x`<faceplate-timeago ts="${n}" format="short"></faceplate-timeago>`} </span> </div>`}};l.styles=[e.t],e._([e.n({type:String,attribute:"post-id"})],l.prototype,"postId",void 0),e._([e.n({type:String,attribute:"event-state"})],l.prototype,"eventState",void 0),e._([e.n({type:String,attribute:"starts-at"})],l.prototype,"startsAt",void 0),e._([e.n({type:String,attribute:"ends-at"})],l.prototype,"endsAt",void 0),e._([e.n({type:String})],l.prototype,"locale",void 0),e._([e.n({type:Boolean,attribute:"is-reminder-set",reflect:!0})],l.prototype,"isReminderSet",void 0),e._([e.n({type:Boolean,attribute:"is-logged-in"})],l.prototype,"isLoggedIn",void 0),e._([e.n({type:Boolean,attribute:"should-fire-engaged-click"})],l.prototype,"shouldFireEngagedClick",void 0),e._([e.N()],l.prototype,"requestInProgress",void 0),l=e._([e.e("ad-event-status")],l)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./EI0o9e89.js",import.meta.url,"EI0o9e89");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./FaYkg4Io.js",import.meta.url,"FaYkg4Io");
SML.dm("BDjNXHKi",["GlDbwxoG","EI0o9e89","s_Igk1Yn","CC2wUKE8","FaYkg4Io"],(async(r,o,a)=>{var e=a.i`${r.Z}:host{--max-width:20rem;--hide-delay:500ms;--show-delay:750ms;display:contents}:host,:host([appearance=neutral]){--rpl-hovercard-background-color:var(--color-neutral-background);--rpl-hovercard-color:var(--color-neutral-content-strong)}:host([appearance=inverted]){--rpl-hovercard-background-color:var(--color-inverted-neutral-background);--rpl-hovercard-color:var(--color-inverted-neutral-content-strong)}.hovercard{--arrow-color:var(--rpl-hovercard-background-color)}.hovercard::part(popup){z-index:var(--rpl-z-index-hovercard,var(--faceplate-hovercard-z-index,1))}.hovercard[placement^=top]::part(popup){transform-origin:bottom}.hovercard[placement^=bottom]::part(popup){transform-origin:top}.hovercard[placement^=left]::part(popup){transform-origin:right}.hovercard[placement^=right]::part(popup){transform-origin:left}.hovercard-body{display:flex;flex-direction:column;width:fit-content;justify-content:flex-start;align-items:flex-start;box-sizing:border-box;border-radius:1rem;box-shadow:var(--elevation-md);z-index:var(--rpl-hovercard-z-index,var(--faceplate-tooltip-z-index,1));font:var(--font-12-16-semibold);background-color:var(--rpl-hovercard-background-color);color:var(--rpl-hovercard-color);padding:8px}`;const t="neutral";let c=class extends o.H{constructor(){super(...arguments),this.appearance=t}};c.styles=e,r._([r.n({type:String,reflect:!0})],c.prototype,"appearance",void 0),c=r._([r.e("rpl-hovercard")],c)}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("BGOkDHmz",["s_Igk1Yn"],(async t=>{const{svg:e}=t.g(),i=t.m(e`<g clip-path="url(#a)"><path d="M19.63 11.863a.9.9 0 11-1.274 1.273l-1.863-1.863-1.863 1.863a.897.897 0 01-1.274 0 .9.9 0 010-1.273L15.22 10l-1.863-1.863a.9.9 0 111.273-1.273l1.863 1.863 1.863-1.863a.9.9 0 111.273 1.273L17.765 10l1.863 1.863h.002zM9.126 1.5c-.336 0-.68.098-.993.316L2.251 5.897c-2.865 1.988-2.865 6.219 0 8.207l5.881 4.081c.313.217.658.316.993.316.91 0 1.757-.721 1.757-1.752V3.252c0-1.031-.848-1.752-1.757-1.752h.001z"></path></g><defs><clipPath id="a"><path d="M0 0h20v20H0z"></path></clipPath></defs>`,"0 0 20 20","volume-off-fill"),s={LoadFail:0,BadSignature:1,BadTimestamp:2,BadSettingValue:3,BadFormat:4,UnknownSetting:5};class r extends Error{code;line;constructor(t){super(t.reason),this.code=t.code,this.line=t.line}}const n=/\r?\n|\r/gm;class a{writable;readable;constructor(t){const e=new o(t);this.writable=new WritableStream({write(t){e.transform(t)},close(){e.close()}}),this.readable=new ReadableStream({start(t){e.onLine=e=>t.enqueue(e),e.onClose=()=>t.close()}})}}class o{x="";y;onLine;onClose;constructor(t){this.y=new TextDecoder(t)}transform(t){this.x+=this.y.decode(t,{stream:!0});const e=this.x.split(n);this.x=e.pop()||"";for(let t=0;t<e.length;t++)this.onLine(e[t].trim())}close(){this.x&&this.onLine(this.x.trim()),this.x="",this.onClose()}}async function l(t,e){const i=e?.type??"vtt";let s,r;if("string"==typeof i)switch(i){case"srt":s=(await SML.di("./DoY_u8JV.js",import.meta.url,"DoY_u8JV").then((function(t){return t.a}))).default;break;case"ssa":case"ass":s=(await Promise.resolve().then((function(){return kt}))).default;break;default:s=(await Promise.resolve().then((function(){return C}))).default}else s=i;const n=t.getReader(),a=s(),o=!!e?.strict||!!e?.errors;await a.init({strict:!1,...e,errors:o,type:i,cancel(){n.cancel(),r=a.done(!0)}});let l=1;for(;;){const{value:t,done:e}=await n.read();if(e){a.parse("",l),r=a.done(!1);break}a.parse(t,l),l++}return r}async function c(t,{encoding:e="utf-8",...i}={}){return l(t.pipeThrough(new a(e)),i)}class h extends EventTarget{id="";startTime;endTime;text;pauseOnExit=!1;constructor(t,e,i){super(),this.startTime=t,this.endTime=e,this.text=i}addEventListener(t,e,i){super.addEventListener(t,e,i)}removeEventListener(t,e,i){super.removeEventListener(t,e,i)}}const u="undefined"==typeof document,p=u?h:window.VTTCue;class d extends p{region=null;vertical="";snapToLines=!0;line="auto";lineAlign="start";position="auto";positionAlign="auto";size=100;align="center";style}class f{id="";width=100;lines=3;regionAnchorX=0;regionAnchorY=100;viewportAnchorX=0;viewportAnchorY=100;scroll=""}function g(t){const e=parseInt(t,10);return Number.isNaN(e)?null:e}function m(t){const e=parseInt(t.replace("%",""),10);return!Number.isNaN(e)&&e>=0&&e<=100?e:null}function b(t){if(!t.includes(","))return null;const[e,i]=t.split(",").map(m);return null!==e&&null!==i?[e,i]:null}function y(t){const e=parseFloat(t);return Number.isNaN(e)?null:e}const w=/[:=]/,v=/^[\s\t]*(region|vertical|line|position|size|align)[:=]/,k=/^REGION:?[\s\t]+/,x=/[\s\t]+/,T=/[\s\t]*-->[\s\t]+/,A=/start|center|end|left|right/,j=/start|center|end/,M=/line-(?:left|right)|center|auto/,S=/^(?:(\d{1,2}):)?(\d{2}):(\d{2})(?:\.(\d{1,3}))?$/;var E=(t=>(t[t.None=0]="None",t[t.Header=1]="Header",t[t.Cue=2]="Cue",t[t.Region=3]="Region",t[t.Note=4]="Note",t))(E||{});class O{f;c=0;g={};h={};j=[];a=null;b=null;k=[];d;l="";async init(t){this.f=t,t.strict&&(this.c=1),t.errors&&(this.d=(await SML.di("./DoY_u8JV.js",import.meta.url,"DoY_u8JV").then((function(t){return t.e}))).ParseErrorBuilder)}parse(t,e){if(""===t)this.a?(this.j.push(this.a),this.f.onCue?.(this.a),this.a=null):this.b?(this.h[this.b.id]=this.b,this.f.onRegion?.(this.b),this.b=null):1===this.c&&(this.i(t,e),this.f.onHeaderMetadata?.(this.g)),this.c=0;else if(this.c)switch(this.c){case 1:this.i(t,e);break;case 2:if(this.a){const i=this.a.text.length>0;!i&&v.test(t)?this.m(t.split(x),e):this.a.text+=(i?"\n":"")+t}break;case 3:this.n(t.split(x),e)}else if(t.startsWith("NOTE"))this.c=4;else if(t.startsWith("REGION"))this.c=3,this.b=new f,this.n(t.replace(k,"").split(x),e);else if(t.includes("--\x3e")){const i=this.o(t,e);i&&(this.a=new d(i[0],i[1],""),this.a.id=this.l,this.m(i[2],e)),this.c=2}else 1===e&&this.i(t,e);this.l=t}done(){return{metadata:this.g,cues:this.j,regions:Object.values(this.h),errors:this.k}}i(t,e){if(e>1){if(w.test(t)){const[e,i]=t.split(w);e&&(this.g[e]=(i||"").replace(x,""))}}else t.startsWith("WEBVTT")?this.c=1:this.e(this.d?.p())}o(t,e){const[i,s=""]=t.split(T),[r,...n]=s.split(x),a=L(i),o=L(r);if(null!==a&&null!==o&&o>a)return[a,o,n];null===a&&this.e(this.d?.q(i,e)),null===o&&this.e(this.d?.r(r,e)),null!=a&&null!==o&&o>a&&this.e(this.d?.s(a,o,e))}n(t,e){let i;for(let s=0;s<t.length;s++)if(w.test(t[s])){i=!1;const[r,n]=t[s].split(w);switch(r){case"id":this.b.id=n;break;case"width":const t=m(n);null!==t?this.b.width=t:i=!0;break;case"lines":const s=g(n);null!==s?this.b.lines=s:i=!0;break;case"regionanchor":const a=b(n);null!==a?(this.b.regionAnchorX=a[0],this.b.regionAnchorY=a[1]):i=!0;break;case"viewportanchor":const o=b(n);null!==o?(this.b.viewportAnchorX=o[0],this.b.viewportAnchorY=o[1]):i=!0;break;case"scroll":"up"===n?this.b.scroll="up":i=!0;break;default:this.e(this.d?.t(r,n,e))}i&&this.e(this.d?.u(r,n,e))}}m(t,e){let i;for(let s=0;s<t.length;s++)if(i=!1,w.test(t[s])){const[r,n]=t[s].split(w);switch(r){case"region":const t=this.h[n];t&&(this.a.region=t);break;case"vertical":"lr"===n||"rl"===n?(this.a.vertical=n,this.a.region=null):i=!0;break;case"line":const[s,a]=n.split(",");if(s.includes("%")){const t=m(s);null!==t?(this.a.line=t,this.a.snapToLines=!1):i=!0}else{const t=y(s);null!==t?this.a.line=t:i=!0}j.test(a)?this.a.lineAlign=a:a&&(i=!0),"auto"!==this.a.line&&(this.a.region=null);break;case"position":const[o,l]=n.split(","),c=m(o);null!==c?this.a.position=c:i=!0,l&&M.test(l)?this.a.positionAlign=l:l&&(i=!0);break;case"size":const h=m(n);null!==h?(this.a.size=h,h<100&&(this.a.region=null)):i=!0;break;case"align":A.test(n)?this.a.align=n:i=!0;break;default:this.e(this.d?.v(r,n,e))}i&&this.e(this.d?.w(r,n,e))}}e(t){if(t){if(this.k.push(t),this.f.strict)throw this.f.cancel(),t;this.f.onError?.(t)}}}function L(t){const e=t.match(S);if(!e)return null;const i=e[1]?parseInt(e[1],10):0,s=parseInt(e[2],10),r=parseInt(e[3],10),n=e[4]?parseInt(e[4].padEnd(3,"0"),10):0;return i<0||s<0||r<0||n<0||s>59||r>59?null:3600*i+60*s+r+n/1e3}var C=Object.freeze({__proto__:null,VTTBlock:E,VTTParser:O,default:function(){return new O},parseVTTTimestamp:L});const N=/[0-9]/,$=/[\s\t]+/,P={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span",timestamp:"span"},z={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":"","&lrm;":"","&rlm;":""},I=/&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g,V=new Set(["white","lime","cyan","red","yellow","magenta","blue","black"]),F=new Set(Object.keys(P));function R(t){let e,i="",s=1,r=[],n=[];for(let r=0;r<t.text.length;r++){const c=t.text[r];switch(s){case 1:"<"===c?(l(),s=2):i+=c;break;case 2:switch(c){case"\n":case"\t":case" ":a(),s=4;break;case".":a(),s=3;break;case"/":s=5;break;case">":a(),s=1;break;default:!i&&N.test(c)&&(s=6),i+=c}break;case 3:switch(c){case"\t":case" ":case"\n":o(),e&&e.class?.trim(),s=4;break;case".":o();break;case">":o(),e&&e.class?.trim(),s=1;break;default:i+=c}break;case 4:">"===c?(i=i.replace($," "),"v"===e?.type?e.voice=B(i):"lang"===e?.type&&(e.lang=B(i)),i="",s=1):i+=c;break;case 5:">"===c&&(i="",e=n.pop(),s=1);break;case 6:if(">"===c){const r=L(i);null!==r&&r>=t.startTime&&r<=t.endTime&&(i="timestamp",a(),e.time=r),i="",s=1}else i+=c}}function a(){if(F.has(i)){const s=e;e={tagName:P[t=i],type:t,children:[]},s?(n[n.length-1]!==s&&n.push(s),s.children.push(e)):r.push(e)}var t;i="",s=1}function o(){if(e&&i){const t=i.replace("bg_","");V.has(t)?e[i.startsWith("bg_")?"bgColor":"color"]=t:e.class=e.class?e.class+" "+i:i}i=""}function l(){if(!i)return;const t={type:"text",data:B(i)};e?e.children.push(t):r.push(t),i=""}return 1===s&&l(),r}function B(t){return t.replace(I,(t=>z[t]||"'"))}function _(t,e,i){t.style.setProperty(`--${e}`,i+"")}function H(t,e,i=!0){t.setAttribute(`data-${e}`,!0===i?"":i+"")}function D(t,e){t.setAttribute("data-part",e)}function W(t,e=0){return Y(R(t),e)}function Y(t,e=0){let i,s="";for(const r of t)if("text"===r.type)s+=r.data;else{const t="timestamp"===r.type;i={},i.class=r.class,i.title="v"===r.type&&r.voice,i.lang="lang"===r.type&&r.lang,i["data-part"]="v"===r.type&&"voice",t&&(i["data-part"]="timed",i["data-time"]=r.time,i["data-future"]=r.time>e,i["data-past"]=r.time<e),i.style=`${r.color?`color: ${r.color};`:""}${r.bgColor?`background-color: ${r.bgColor};`:""}`;const n=Object.entries(i).filter((t=>t[1])).map((t=>`${t[0]}="${!0===t[1]?"":t[1]}"`)).join(" ");s+=`<${r.tagName}${n?" "+n:""}>${Y(r.children)}</${r.tagName}>`}return s}function q(t,e){if(!u)for(const i of t.querySelectorAll('[data-part="timed"]')){const t=Number(i.getAttribute("data-time"));Number.isNaN(t)||(t>e?H(i,"future"):i.removeAttribute("data-future"),t<e?H(i,"past"):i.removeAttribute("data-past"))}}const X=Symbol(0);function G(t){return t instanceof HTMLElement?{top:t.offsetTop,width:t.clientWidth,height:t.clientHeight,left:t.offsetLeft,right:t.offsetLeft+t.clientWidth,bottom:t.offsetTop+t.clientHeight}:{...t}}function U(t,e,i){switch(e){case"+x":t.left+=i,t.right+=i;break;case"-x":t.left-=i,t.right-=i;break;case"+y":t.top+=i,t.bottom+=i;break;case"-y":t.top-=i,t.bottom-=i}}function Q(t,e){for(let r=0;r<e.length;r++)if(i=t,s=e[r],i.left<=s.right&&i.right>=s.left&&i.top<=s.bottom&&i.bottom>=s.top)return e[r];var i,s;return null}function J(t,e){return e.top>=0&&e.bottom<=t.height&&e.left>=0&&e.right<=t.width}function K(t,e,i){switch(i){case"+x":return e.left<0;case"-x":return e.right>t.width;case"+y":return e.top<0;case"-y":return e.bottom>t.height}}function Z(t,e){return Math.max(0,Math.min(t.width,e.right)-Math.max(0,e.left))*Math.max(0,Math.min(t.height,e.bottom)-Math.max(0,e.top))/(t.height*t.width)}function tt(t,e){return{top:e.top/t.height,left:e.left/t.width,right:(t.width-e.right)/t.width,bottom:(t.height-e.bottom)/t.height}}function et(t,e){return e.top=e.top*t.height,e.left=e.left*t.width,e.right=t.width-e.right*t.width,e.bottom=t.height-e.bottom*t.height,e}const it=["top","left","right","bottom"];function st(t,e,i,s){const r=tt(e,i);for(const e of it)_(t,`${s}-${e}`,100*r[e]+"%")}function rt(t,e,i,s){let r,n=1,a={...e};for(let o=0;o<s.length;o++){for(;K(t,e,s[o])||J(t,e)&&Q(e,i);)U(e,s[o],1);if(J(t,e))return e;const l=Z(t,e);n>l&&(r={...e},n=l),e={...a}}return r||a}const nt=Symbol(0);function at(t,e,i,s){let r,n=i.firstElementChild,a=function(t){if("auto"===t.line)return t.snapToLines?-1:100;return t.line}(e),o=[];if(i[X]||(i[X]=function(t,e){const i=G(e),s=function(t){const e={};for(const i of it)e[i]=parseFloat(t.style.getPropertyValue(`--cue-${i}`));return e}(e);e[nt]=!1,s.top&&(i.top=s.top,i.bottom=s.top+i.height,e[nt]="top");if(s.bottom){const r=t.height-s.bottom;i.top=r-i.height,i.bottom=r,e[nt]="bottom"}s.left&&(i.left=s.left);s.right&&(i.right=t.width-s.right);return tt(t,i)}(t,i)),r=et(t,{...i[X]}),i[nt])o=["top"===i[nt]?"+y":"-y","+x","-x"];else if(e.snapToLines){let i;switch(e.vertical){case"":o=["+y","-y"],i="height";break;case"rl":o=["+x","-x"],i="width";break;case"lr":o=["-x","+x"],i="width"}let s=parseFloat(getComputedStyle(n).lineHeight)||0,l=s*Math.round(a),c=t[i]+s,h=o[0];Math.abs(l)>c&&(l=l<0?-1:1,l*=Math.ceil(c/s)*s),a<0&&(l+=""===e.vertical?t.height:t.width,o=o.reverse()),U(r,h,l)}else{const i=""===e.vertical,s=i?"+y":"+x",n=i?r.height:r.width;U(r,s,(i?t.height:t.width)*a/100),U(r,s,"center"===e.lineAlign?n/2:"end"===e.lineAlign?n:0),o=i?["-y","+y","-x","+x"]:["-x","+x","-y","+y"]}return r=rt(t,r,s,o),st(i,t,r,"cue"),r}const ot=["-y","+y","-x","+x"];function lt(t,e,i,s){let r=Array.from(i.querySelectorAll('[data-part="cue-display"]')),n=0,a=Math.max(0,r.length-e.lines);for(let t=r.length-1;t>=a;t--)n+=r[t].offsetHeight;_(i,"region-height",n+"px"),i[X]||(i[X]=tt(t,G(i)));let o={...i[X]};return o=et(t,o),o.width=i.clientWidth,o.height=n,o.right=o.left+o.width,o.bottom=o.top+n,o=rt(t,o,s,ot),st(i,t,o,"region"),o}var ct=Object.freeze({__proto__:null,CaptionsRenderer:class{overlay;z;A=0;C="ltr";B=[];D=!1;E;h=new Map;j=new Map;get dir(){return this.C}set dir(t){this.C=t,H(this.overlay,"dir",t)}get currentTime(){return this.A}set currentTime(t){this.A=t,this.update()}constructor(t,e){this.overlay=t,this.dir=e?.dir??"ltr",t.setAttribute("translate","yes"),t.setAttribute("aria-live","off"),t.setAttribute("aria-atomic","true"),D(t,"captions"),this.G(),this.E=new ResizeObserver(this.I.bind(this)),this.E.observe(t)}changeTrack({regions:t,cues:e}){this.reset(),this.J(t);for(const t of e)this.j.set(t,null);this.update()}addCue(t){this.j.set(t,null),this.update()}removeCue(t){this.j.delete(t),this.update()}update(t=!1){this.H(t)}reset(){this.j.clear(),this.h.clear(),this.B=[],this.overlay.textContent=""}destroy(){this.reset(),this.E.disconnect()}I(){this.D=!0,this.K()}K=function(t,e){let i,s=null;function r(){n(),t(...i),i=void 0}function n(){clearTimeout(s),s=null}return function(){i=[].slice.call(arguments),n(),s=setTimeout(r,e)}}((()=>{this.D=!1,this.G();for(const t of this.h.values())t[X]=null;for(const t of this.j.values())t&&(t[X]=null);this.H(!0)}),50);G(){this.z=G(this.overlay),_(this.overlay,"overlay-width",this.z.width+"px"),_(this.overlay,"overlay-height",this.z.height+"px")}H(t=!1){if(!this.j.size||this.D)return;let e,i=[...this.j.keys()].filter((t=>this.A>=t.startTime&&this.A<=t.endTime)).sort(((t,e)=>t.startTime!==e.startTime?t.startTime-e.startTime:t.endTime-e.endTime)),s=i.map((t=>t.region));for(let r=0;r<this.B.length;r++){if(e=this.B[r],i[r]===e)continue;if(e.region&&!s.includes(e.region)){const i=this.h.get(e.region.id);i&&(i.removeAttribute("data-active"),t=!0)}const n=this.j.get(e);n&&(n.remove(),t=!0)}for(let s=0;s<i.length;s++){e=i[s];let r=this.j.get(e);r||this.j.set(e,r=this.L(e));const n=this.F(e)&&this.h.get(e.region.id);n&&!n.hasAttribute("data-active")&&(requestAnimationFrame((()=>H(n,"active"))),t=!0),r.isConnected||((n||this.overlay).append(r),t=!0)}if(t){const t=[],s=new Set;for(let r=i.length-1;r>=0;r--){if(e=i[r],s.has(e.region||e))continue;const n=this.F(e),a=n?this.h.get(e.region.id):this.j.get(e);n?t.push(lt(this.z,e.region,a,t)):t.push(at(this.z,e,a,t)),s.add(n?e.region:e)}}q(this.overlay,this.A),this.B=i}J(t){if(t)for(const e of t){const t=this.M(e);this.h.set(e.id,t),this.overlay.append(t)}}M(t){const e=document.createElement("div");return D(e,"region"),H(e,"id",t.id),H(e,"scroll",t.scroll),_(e,"region-width",t.width+"%"),_(e,"region-anchor-x",t.regionAnchorX),_(e,"region-anchor-y",t.regionAnchorY),_(e,"region-viewport-anchor-x",t.viewportAnchorX),_(e,"region-viewport-anchor-y",t.viewportAnchorY),_(e,"region-lines",t.lines),e}L(t){const e=document.createElement("div"),i=function(t){if("auto"===t.position)switch(t.align){case"start":case"left":return 0;case"right":case"end":return 100;default:return 50}return t.position}(t),s=function(t,e){if("auto"===t.positionAlign)switch(t.align){case"start":return"ltr"===e?"line-left":"line-right";case"end":return"ltr"===e?"line-right":"line-left";case"center":return"center";default:return`line-${t.align}`}return t.positionAlign}(t,this.C);if(D(e,"cue-display"),""!==t.vertical&&H(e,"vertical"),_(e,"cue-text-align",t.align),t.style)for(const i of Object.keys(t.style))e.style.setProperty(i,t.style[i]);if(this.F(t))_(e,"cue-offset",i-("line-right"===s?100:"center"===s?50:0)+"%");else if(_(e,"cue-writing-mode",""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl"),!t.style?.["--cue-width"]){let r=i;"line-left"===s?r=100-i:"center"===s&&i<=50?r=2*i:"center"===s&&i>50&&(r=2*(100-i));const n=t.size<r?t.size:r;""===t.vertical?_(e,"cue-width",n+"%"):_(e,"cue-height",n+"%")}const r=document.createElement("div");return D(r,"cue"),t.id&&H(r,"id",t.id),r.innerHTML=W(t),e.append(r),e}F(t){return t.region&&100===t.size&&""===t.vertical&&"auto"===t.line}},ParseError:r,ParseErrorCode:s,TextCue:h,VTTCue:d,VTTRegion:f,parseByteStream:c,parseResponse:async function(t,e){const i=await t;if(!i.ok||!i.body){let t;return{metadata:{},cues:[],regions:[],errors:[t]}}const s=i.headers.get("content-type")||"",r=s.match(/text\/(.*?)(?:;|$)/)?.[1],n=s.match(/charset=(.*?)(?:;|$)/)?.[1];return c(i.body,{type:r,encoding:n,...e})},parseTextStream:l,parseVTTTimestamp:L,renderVTTCueString:W,renderVTTTokensString:Y,tokenizeVTTCue:R,updateTimedVTTCueNodes:q});const ht=/^Format:[\s\t]*/,ut=/^Style:[\s\t]*/,pt=/^Dialogue:[\s\t]*/,dt=/[\s\t]*,[\s\t]*/,ft=/\{[^}]+\}/g,gt=/\\N/g,mt=/^\[(.*)[\s\t]?Styles\]$/,bt=/^\[(.*)[\s\t]?Events\]$/;class yt{f;P=0;a=null;j=[];k=[];O=null;d;Q={};async init(t){this.f=t,t.errors&&(this.d=(await SML.di("./DoY_u8JV.js",import.meta.url,"DoY_u8JV").then((function(t){return t.e}))).ParseErrorBuilder)}parse(t,e){if(this.P)switch(this.P){case 1:if(""===t)this.P=0;else if(ut.test(t))if(this.O){const e=t.replace(ut,"").split(dt);this.T(e)}else this.e(this.d?.N("Style",e));else ht.test(t)?this.O=t.replace(ht,"").split(dt):bt.test(t)&&(this.O=null,this.P=2);break;case 2:if(""===t)this.R();else if(pt.test(t))if(this.R(),this.O){const i=t.replace(pt,"").split(dt),s=this.U(i,e);s&&(this.a=s)}else this.e(this.d?.N("Dialogue",e));else this.a?this.a.text+="\n"+t.replace(ft,"").replace(gt,"\n"):ht.test(t)?this.O=t.replace(ht,"").split(dt):mt.test(t)?(this.O=null,this.P=1):bt.test(t)&&(this.O=null)}else""===t||(mt.test(t)?(this.O=null,this.P=1):bt.test(t)&&(this.O=null,this.P=2))}done(){return{metadata:{},cues:this.j,regions:[],errors:this.k}}R(){this.a&&(this.j.push(this.a),this.f.onCue?.(this.a),this.a=null)}T(t){let e,i,s,r,n="Default",a={},o="center",l="bottom",c=1.2,h=3,u=[];for(let p=0;p<this.O.length;p++){const d=this.O[p],f=t[p];switch(d){case"Name":n=f;break;case"Fontname":a["font-family"]=f;break;case"Fontsize":a["font-size"]=`calc(${f} / var(--overlay-height))`;break;case"PrimaryColour":const t=wt(f);t&&(a["--cue-color"]=t);break;case"BorderStyle":h=parseInt(f,10);break;case"BackColour":r=wt(f);break;case"OutlineColour":const p=wt(f);p&&(s=p);break;case"Bold":parseInt(f)&&(a["font-weight"]="bold");break;case"Italic":parseInt(f)&&(a["font-style"]="italic");break;case"Underline":parseInt(f)&&(a["text-decoration"]="underline");break;case"StrikeOut":parseInt(f)&&(a["text-decoration"]="line-through");break;case"Spacing":a["letter-spacing"]=f+"px";break;case"AlphaLevel":a.opacity=parseFloat(f);break;case"ScaleX":u.push(`scaleX(${parseFloat(f)/100})`);break;case"ScaleY":u.push(`scaleY(${parseFloat(f)/100})`);break;case"Angle":u.push(`rotate(${f}deg)`);break;case"Shadow":c=1.2*parseInt(f,10);break;case"MarginL":a["--cue-width"]="auto",a["--cue-left"]=parseFloat(f)+"px";break;case"MarginR":a["--cue-width"]="auto",a["--cue-right"]=parseFloat(f)+"px";break;case"MarginV":i=parseFloat(f);break;case"Outline":e=parseInt(f,10);break;case"Alignment":const d=parseInt(f,10);switch(d>=4&&(l=d>=7?"top":"center"),d%3){case 1:o="start";break;case 2:o="center";break;case 3:o="end"}}}if(a.S=l,a["--cue-white-space"]="normal",a["--cue-line-height"]="normal",a["--cue-text-align"]=o,"center"===l?(a["--cue-top"]="50%",u.push("translateY(-50%)")):a[`--cue-${l}`]=(i||0)+"px",1===h&&(a["--cue-padding-y"]="0"),(1===h||r)&&(a["--cue-bg-color"]=1===h?"none":r),3===h&&s&&(a["--cue-outline"]=`${e}px solid ${s}`),1===h&&"number"==typeof e){const t=r??"#000";a["--cue-text-shadow"]=[s&&vt(1.2*e,1.2*c,s),s?vt(e*(e/2),c*(e/2),t):vt(e,c,t)].filter(Boolean).join(", ")}u.length&&(a["--cue-transform"]=u.join(" ")),this.Q[n]=a}U(t,e){const i=this.V(t),s=this.o(i.Start,i.End,e);if(!s)return;const r=new d(s[0],s[1],""),n={...this.Q[i.Style]||{}},a=i.Name?`<v ${i.Name}>`:"",o=n.S,l=i.MarginL&&parseFloat(i.MarginL),c=i.MarginR&&parseFloat(i.MarginR),h=i.MarginV&&parseFloat(i.MarginV);return l&&(n["--cue-width"]="auto",n["--cue-left"]=l+"px"),c&&(n["--cue-width"]="auto",n["--cue-right"]=c+"px"),h&&"center"!==o&&(n[`--cue-${o}`]=h+"px"),r.text=a+t.slice(this.O.length-1).join(", ").replace(ft,"").replace(gt,"\n"),delete n.S,Object.keys(n).length&&(r.style=n),r}V(t){const e={};for(let i=0;i<this.O.length;i++)e[this.O[i]]=t[i];return e}o(t,e,i){const s=L(t),r=L(e);if(null!==s&&null!==r&&r>s)return[s,r];null===s&&this.e(this.d?.q(t,i)),null===r&&this.e(this.d?.r(e,i)),null!=s&&null!==r&&r>s&&this.e(this.d?.s(s,r,i))}e(t){if(t){if(this.k.push(t),this.f.strict)throw this.f.cancel(),t;this.f.onError?.(t)}}}function wt(t){const e=parseInt(t.replace("&H",""),16);if(e>=0){return"rgba("+[255&e,e>>8&255,e>>16&255,(e>>24&255^255)/255].join(",")+")"}return null}function vt(t,e,i){const s=Math.ceil(2*Math.PI*t);let r="";for(let n=0;n<s;n++){const a=2*Math.PI*n/s;r+=t*Math.cos(a)+"px "+e*Math.sin(a)+"px 0 "+i+(n==s-1?"":",")}return r}var kt=Object.freeze({__proto__:null,SSAParser:yt,default:function(){return new yt}});return{P:r,V:O,get a(){return E},b:d,c:s,get p(){return ct},v:i}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("BH4VvyCw",["GlDbwxoG","s_Igk1Yn"],(async(e,r)=>{let i=class extends r.s{constructor(){super(...arguments),this.revealed=!1,this.blockRevealOnClick=!1}static get styles(){return r.i`.outer{background:var(--color-category-spoiler);border-radius:2px;cursor:pointer;line-height:21px;transition:background ease-out 1s;border:none;padding:0;font:inherit;color:inherit;margin-right:.25rem}.inner{opacity:0;transition:opacity ease-out 1s;margin-right:-.25rem}.revealed.outer{background:0 0}.revealed .inner{opacity:1}`}revealSpoiler(e){this.revealed||e.preventDefault(),this.revealed=!0}handleKeyPress(e){"Enter"!==e.key&&" "!==e.key||this.revealSpoiler(e)}render(){return this.blockRevealOnClick?r.x` <span class="outer"> <span class="inner" aria-hidden="true"> <slot></slot> </span> </span> `:r.x` <span class="outer${this.revealed?" revealed":""}" title="${"Reveal Spoiler"}" role="button" @click="${this.revealSpoiler}" @keypress="${this.handleKeyPress}" tabindex="0"> <span class="inner" aria-hidden="${!this.revealed}"> <slot></slot> </span> </span> `;}};e._([e.N()],i.prototype,"revealed",void 0),e._([e.n({type:Boolean,attribute:"block-reveal-on-click"})],i.prototype,"blockRevealOnClick",void 0),i=e._([e.e("shreddit-spoiler")],i)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("BHW1DH4B",["GlDbwxoG","s_Igk1Yn"],(async(e,l)=>{let o=class extends l.s{constructor(){super(...arguments),this.handleScroll=()=>{this.dropdownMenu?.[0]?.close()}}connectedCallback(){super.connectedCallback(),document.querySelector('[slot="pdp-panel"]')?.addEventListener("scroll",this.handleScroll),document.querySelector('[slot="mod-queue-feed"]')?.addEventListener("scroll",this.handleScroll)}disconnectedCallback(){super.disconnectedCallback(),document.querySelector('[slot="pdp-panel"]')?.removeEventListener("scroll",this.handleScroll),document.querySelector('[slot="mod-queue-feed"]')?.removeEventListener("scroll",this.handleScroll)}render(){return l.x`<slot></slot>`}};e._([e.l({slot:"",selector:"faceplate-dropdown-menu"})],o.prototype,"dropdownMenu",void 0),o=e._([e.e("mod-dropdown-closer")],o)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("BIKD7jJv",["GlDbwxoG","s_Igk1Yn"],(async(t,e)=>{let s=class extends e.s{constructor(){super(...arguments),this.size=1/0,this.target="",this.isBatching=!1}static get styles(){return e.i`:host{display:block}`}render(){return e.x` <slot></slot> `}getCurrentTarget(t=this){return this.target&&t.querySelector(this.target)||t}async batchInsert(e){if(this.isBatching)throw new Error("Cannot call batchInsert while batching is already in progress");const s=this.getCurrentTarget();if(!(s instanceof HTMLElement))throw new TypeError("Target element must be instance of HTMLElement");const i=t.c("faceplate-batch-begin",{size:this.size,count:e.length});if(s.dispatchEvent(i),i.defaultPrevented)return;this.isBatching=!0;const n=()=>{if(e.length){const t=e.slice(0,this.size),i=document.createDocumentFragment();for(let s=0;s<t.length;s++)i.appendChild(e[s]);s.appendChild(i)}e.length>this.size?(e=e.slice(this.size),window.setTimeout(n)):(s.style.willChange="unset",this.isBatching=!1)};s.style.willChange="contents",await n()}};t._([t.n({type:Number})],s.prototype,"size",void 0),t._([t.n({type:String})],s.prototype,"target",void 0),s=t._([t.e("faceplate-batch")],s)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("BJ1W-iEe",["GlDbwxoG","s_Igk1Yn"],(async(t,e)=>{const o="dismiss-coachmark";let s=class extends e.s{constructor(){super(...arguments),this.showAfterSec=0,this.show=async()=>{const t=this.getCoachmark();if(!t)return;t.show();const e=1e3*(this.showForSec||0);e&&(this.closeTimeoutId=setTimeout(this.hide,e))},this.hide=()=>{this.getCoachmark()?.hide()}}connectedCallback(){super.connectedCallback(),requestAnimationFrame((()=>{this.getCoachmark()?.addEventListener(o,this.hide)}));const t=1e3*(this.showAfterSec||0);this.showTimeoutId=setTimeout(this.show,t)}disconnectedCallback(){super.disconnectedCallback(),clearTimeout(this.showTimeoutId),clearTimeout(this.closeTimeoutId),this.getCoachmark()?.removeEventListener(o,this.hide)}getCoachmark(){return document.querySelector(`rpl-hovercard#${this.coachmarkId}, rpl-tooltip#${this.coachmarkId}`)}createRenderRoot(){return this}};s.styles=[e.i`:host{display:contents}`,t.t],t._([t.n({type:String,attribute:"coachmark-id"})],s.prototype,"coachmarkId",void 0),t._([t.n({type:Number,attribute:"show-after-sec"})],s.prototype,"showAfterSec",void 0),t._([t.n({type:Number,attribute:"show-for-sec"})],s.prototype,"showForSec",void 0),s=t._([t.e("shreddit-coachmark-trigger")],s)}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("BJSmnD7s",["s_Igk1Yn"],(async a=>{const{svg:t}=a.g();return{t:a.m(t`<path d="M16.316 3.684V8.61c0 .627-.26 1.236-.712 1.671l-6.44 6.183a1.612 1.612 0 01-1.127.456c-.433 0-.839-.168-1.145-.474L3.52 13.073a1.626 1.626 0 01-.018-2.271l6.215-6.413a2.327 2.327 0 011.663-.704l4.937-.001zM16.85 2h-5.47a4 4 0 00-2.873 1.216L2.292 9.629a3.304 3.304 0 00.036 4.634l3.373 3.373c.644.644 1.49.967 2.335.967.828 0 1.657-.31 2.297-.93l6.436-6.178A3.998 3.998 0 0018 8.609V3.15A1.15 1.15 0 0016.85 2zM13 8.75a1.75 1.75 0 10.001-3.499 1.75 1.75 0 000 3.499z"></path>`,"0 0 20 20","tag")}}));
SML.di("./wFIF_OFn.js",import.meta.url,"wFIF_OFn");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CU4mObWU.js",import.meta.url,"CU4mObWU");
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("BM-DpnLu",["s_Igk1Yn"],(async a=>{const{svg:h}=a.g();return{l:a.m(h`<path d="M15.993 8.168h-.429V6.61a5.572 5.572 0 00-5.566-5.566A5.572 5.572 0 004.432 6.61v1.558h-.429a2.005 2.005 0 00-2.005 2.005v3.692a5.054 5.054 0 005.054 5.054h5.892a5.054 5.054 0 005.054-5.054v-3.692a2.005 2.005 0 00-2.005-2.005zM10.998 15h-2v-3h2v3zm2.767-6.832H6.232V6.61A3.771 3.771 0 0110 2.844a3.77 3.77 0 013.767 3.766l-.001 1.558z"></path>`,"0 0 20 20","lock-fill")}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("BNHQzrNB",["GlDbwxoG","s_Igk1Yn"],(async(e,t)=>{let r=class extends t.s{constructor(){super(...arguments),this.country="",this.onClick=()=>{this.confirmOver18()},this.onKeyPress=e=>{"Enter"!==e.key&&"Space"!==e.key||this.confirmOver18()}}redirect(e){window.location.href=e.toString()}refreshAndRememberSEO(){const t=new URL(window.location.href);t.searchParams.set(e.y,"1"),this.redirect(t)}setOver18Cookie(){e.z({country:this.country,name:e.O,value:"true",options:e.D})}async confirmOver18(){e.g()?await e.B({operation:e.C.UpdateProfileSettings,variables:{input:{isNsfw:!0}}}):this.setOver18Cookie(),this.refreshAndRememberSEO()}render(){return t.x`<slot @click="${this.onClick}" @keypress="${this.onKeyPress}"></slot>`}};r.styles=[e.t],e._([e.n({type:String})],r.prototype,"country",void 0),r=e._([e.e("confirm-over-18")],r)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");
SML.dm("BOloqGL8",["GlDbwxoG"],(async e=>{var _,n,t;function E({subredditId:e,subredditName:_}){return{id:e,name:_}}function i({isEnabled:_}){return{page_type:e.w(),reason:_?"on":"off"}}!function(e){e.MODERATOR="moderator",e.COMMUNITY_GUIDE="community_guide"}(_||(_={})),function(e){e.VIEW="view",e.CLICK="click"}(n||(n={})),function(e){e.GUIDE_TOGGLE="community_guide_toggle",e.SHOW_ON_JOIN_TOGGLE="show_on_join_toggle",e.HEADER_LAYOUT_EDIT="header_layout_edit",e.HEADER_BANNER_EDIT="header_banner_edit",e.WELCOME_MESSAGE_EDIT="welcome_message_edit",e.USER_FLAIR_EDIT="user_flair_edit",e.COMMUNITY_RESOURCES_EDIT="community_resources_edit",e.COMMUNITY_RESOURCE_LINK="resource_link",e.GUIDE="guide",e.CLOSE="close",e.OPEN="open"}(t||(t={}));const r=(_,n,t)=>r=>e.b({source:_,action:n,noun:t},{action_info:i(r),subreddit:E(r)});const o=r(_.MODERATOR,n.CLICK,t.GUIDE_TOGGLE),u=r(_.MODERATOR,n.CLICK,t.SHOW_ON_JOIN_TOGGLE);return{get A(){return n},get N(){return t},get S(){return _},a:u,c:o,g:function(e,_){return JSON.stringify({subreddit:{id:e,name:_}})}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("BPjD9jS-",["GlDbwxoG","s_Igk1Yn"],(async(t,e)=>{let o=class extends e.s{constructor(){super(...arguments),this.feature="",this.routeParams="",this.queryParams="",this.dialogId="",this.dialogContentId="",this.featureRootSelector=""}parseParams(t){try{return JSON.parse(t)}catch{return}}async showModal(){await t.j({name:this.feature,routeParams:this.parseParams(this.routeParams),queryParams:this.parseParams(this.queryParams),renderMode:t.P.Contents,root:this.featureRootSelector?document.querySelector(this.featureRootSelector)??document:document});const e=document.querySelector(`rpl-dialog#${this.dialogId}`),o=new CustomEvent("custom-feed-edit-button:dialog-loaded",{detail:{dialog:e}});this.dispatchEvent(o);const r=()=>e.portalContainer,a=()=>{const t=r();return t?.querySelectorAll('[slot="close-button"]')??[]},s=()=>e.hide(),i=()=>{a().forEach((t=>{t.addEventListener("click",s)})),r()?.addEventListener("close-dialog",s)};e.open?i():(e.addEventListener("rpl-dialog:after-show",i),e.showModal()),e.addEventListener("rpl-dialog:hide",(()=>{a().forEach((t=>{t.removeEventListener("click",s)})),r()?.removeEventListener("close-dialog",s)}))}handleKeyDown(t){"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),this.showModal())}render(){return e.x`<slot @click="${this.showModal}" @keydown="${this.handleKeyDown}"></slot>`}};o.styles=[t.t],t._([t.n({type:String})],o.prototype,"feature",void 0),t._([t.n({type:String,attribute:"route-params"})],o.prototype,"routeParams",void 0),t._([t.n({type:String,attribute:"query-params"})],o.prototype,"queryParams",void 0),t._([t.n({type:String,attribute:"dialog-id"})],o.prototype,"dialogId",void 0),t._([t.n({type:String,attribute:"dialog-content-id"})],o.prototype,"dialogContentId",void 0),t._([t.n({type:String,attribute:"feature-root-selector"})],o.prototype,"featureRootSelector",void 0),o=t._([t.e("custom-feed-edit-button")],o)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./BhFZ7wtj.js",import.meta.url,"BhFZ7wtj");
SML.dm("BRT1r9z9",["GlDbwxoG","s_Igk1Yn","BhFZ7wtj"],(async(t,e,i)=>{const n="-comment-rtjson-content",s="#text",o=t=>t.replace(/\n/g,"").replace(/\s+/g," ").trim(),r=({commentId:t,noPrefix:e})=>{let i=t.replace(n,"");return e&&(i=i.replace("t1_","")),i},l=({commentId:t,permalink:e,snippetData:i})=>t?`https://publish.reddit.com/embed?url=https://www.reddit.com${e.replace(/\/[^/]+(?=\/$)|\/$/,"")}comment/${r({commentId:t,noPrefix:!0})}?snippet=${i}`:`https://publish.reddit.com/embed?url=https://www.reddit.com${e}?snippet=${i}`,a=["TR","TH","TD","TABLE","TBODY","THEAD"],d=new Set(["H1","P"]);let c=class extends e.s{constructor(){super(...arguments),this.postId="",this.permalink="",this.topOffset=0,this.leftOffset=0,this.snippetData="",this.isTitleSelected=!1,this.isSelectionOutOfRange=!1,this.isFullTextSelected=!1,this.isComment=!1,this.clearSelection=t=>{if(2!==t.button&&t.target.getAttribute("postid")!==this.postId){const e=((t,e)=>{for(;t;){if(t.id&&(t.id.includes(`${e}-post-rtjson-content`)||t.id.includes(n)))return t;t=t.parentNode}return null})(t.target,this.postId);this.richTextContainer=e,getSelection()?.empty(),this.snippetData="",this.isTitleSelected=!1,this.isSelectionOutOfRange=!1,this.isFullTextSelected=!1}},this.handleEmbedClick=()=>{this.isComment&&this.richTextContainer?.id?open(l({commentId:this.richTextContainer?.id,permalink:this.permalink,snippetData:this.snippetData}),"RedditEmbed"):open(l({permalink:this.permalink,snippetData:this.snippetData}),"RedditEmbed"),this.sendClickTelemetry()},this.isTripleClickHandled=t=>3===t.detail,this.getChildTextNode=t=>{let e;const i=t.childNodes;for(let t=0;t<i.length;t++){const n=i[t];if(n.nodeName!==s)continue;0!==o(n.textContent||"").length&&(e=n)}return e},this.getCorrectSelection=t=>{const e=getSelection();if(this.isTripleClickHandled(t)&&e?.anchorNode?.nodeName&&d.has(e?.anchorNode?.nodeName)){const t=this.getChildTextNode(e.anchorNode),i=t?.textContent?.length||0;e.setBaseAndExtent(t,0,t,i)}return e},this.calculateSnippetData=t=>{if(this.shouldShowButton)return void this.clearSelection(t);this.isComment=Boolean(this.richTextContainer?.id&&this.richTextContainer.id.startsWith("t1")),this.snippetData="";const e=this.getCorrectSelection(t),i=o(e?.toString()||"");if(!e||!i?.length)return;const n=this.richTextContainer?o(this.richTextContainer.innerText):"",r=o(this.postTitleElement.innerText);this.richTextContainer&&i===n&&(this.isFullTextSelected=!0);const l=e?.anchorNode;if(l.parentNode?.nodeName&&a.includes(l.parentNode?.nodeName))return;const d=e.getRangeAt(0);l.parentNode===this.postTitleElement&&(this.isTitleSelected=!0),(this.isTitleSelected&&i.length>r.length||this.richTextContainer&&i.length>n.length)&&(this.isSelectionOutOfRange=!0);const c=this.isTitleSelected?this.postTitleElement?.getBoundingClientRect():this.richTextContainer?.getBoundingClientRect(),h=e?.getRangeAt(0).getBoundingClientRect();if(c&&h){if(this.topOffset=h.top+scrollY,this.leftOffset=h.left+h.width/2,(this.shadowRoot?.host).style.setProperty("--left-offset",`${this.leftOffset}px`),(this.shadowRoot?.host).style.setProperty("--top-offset",this.topOffset-32-4+"px"),this.isTitleSelected||this.isFullTextSelected)return void this.sendViewTelemetry();if(e.rangeCount>0){let t=-1;const e=Array.from((this.isComment?this.richTextContainer?.children[0].children:this.richTextContainer?.children)||[]).filter((t=>t.nodeName!==s));for(let i=0;i<e.length;i++){const n=e[i];if(d.intersectsNode(n)){t=i;break}}if(-1!==t&&i){const n=(({nodeText:t,selectedText:e})=>{if(!t||!e)return-1;const i=t.length,n=e.length,s=[];for(let t=0;t<=i;t++)s[t]=new Array(n+1).fill(0);let o=0,r=0;for(let l=1;l<=i;l++)for(let i=1;i<=n;i++)t[l-1]===e[i-1]&&(s[l][i]=s[l-1][i-1]+1,s[l][i]>o&&(o=s[l][i],r=l-1));const l=t.substring(r-o+1,r+1);return l?t.indexOf(l):-1})({nodeText:o(e[t].innerText),selectedText:i});t>-1&&n>-1&&i.length>0&&(this.snippetData=`${t}_${n}_${i.length}`,this.sendViewTelemetry())}}}},this.getEventDetails=()=>{const t={};return this.isComment&&this.richTextContainer?.id&&(t.comment={id:r({commentId:this.richTextContainer.id})}),t},this.sendViewTelemetry=()=>{const e=this.getEventDetails();this.dispatchEvent(t.c(t.cu,{details:e}))},this.sendClickTelemetry=()=>{const e=this.getEventDetails();this.dispatchEvent(t.c(t.cv,{details:e}))}}get shouldShowButton(){return(this.snippetData.length||this.isTitleSelected||this.isFullTextSelected)&&!this.isSelectionOutOfRange}connectedCallback(){super.connectedCallback();const t=document.getElementById(`post-title-${this.postId}`);t&&(this.postTitleElement=t),document.addEventListener("mousedown",this.clearSelection),document.addEventListener("mouseup",this.calculateSnippetData)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("mousedown",this.clearSelection),document.removeEventListener("mouseup",this.calculateSnippetData)}render(){return e.x` ${this.shouldShowButton?e.x` <div class="button-container bg-neutral-content-strong rounded-full shadow-sm flex"> ${t.Y({appearance:"plainInverted",size:t.a7.Small,attributes:{onclick:this.handleEmbedClick},leadingIcon:i.c(),children:"Embed"})} </div> `:""} `;}};c.styles=[e.i`.button-container{position:absolute;left:var(--left-offset);top:var(--top-offset);transform:translateX(-50%);z-index:1}`,t.t],t._([t.n({type:String})],c.prototype,"postId",void 0),t._([t.n({type:String})],c.prototype,"permalink",void 0),t._([t.N()],c.prototype,"topOffset",void 0),t._([t.N()],c.prototype,"leftOffset",void 0),t._([t.N()],c.prototype,"snippetData",void 0),t._([t.N()],c.prototype,"isTitleSelected",void 0),t._([t.N()],c.prototype,"isSelectionOutOfRange",void 0),t._([t.N()],c.prototype,"isFullTextSelected",void 0),t._([t.N()],c.prototype,"isComment",void 0),c=t._([t.e("embed-snippet-share-button")],c)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./MX9FaClF.js",import.meta.url,"MX9FaClF");SML.di("./FaYkg4Io.js",import.meta.url,"FaYkg4Io");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("BStJq-t0",["GlDbwxoG","s_Igk1Yn","MX9FaClF","FaYkg4Io","CC2wUKE8"],(async(r,o,t,e)=>{class a extends t.T{constructor(){super(...arguments),this.variant="plain",this.placement=e.P.Bottom,this.disabled=!1,this.label="",this.distance=8,this.animationNames={show:"coachmark.show",hide:"coachmark.hide",denyClose:"coachmark.denyClose",overlayShow:"coachmark.overlay.show",overlayHide:"coachmark.overlay.hide"}}connectedCallback(){super.connectedCallback(),this.addEventListener("rpl-coachmark-card:close-button-clicked",this.hide)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("rpl-coachmark-card:close-button-clicked",this.hide)}render(){return o.x` <rpl-popper ?active="${this.open}" strategy="${this.hoist?"fixed":"absolute"}" .anchor="${this.anchor}" flip shift arrow safe-area distance="${this.distance}" skidding="${this.skidding}" placement="${o.l(this.placement)}" exportparts="
          popup:popper--popup,
          arrow:popper--arrow
        " class="${r.H({coachmark:!0,"coachmark--open":this.open})}" ${r.V(this.popperRef)}> <slot slot="anchor" ${r.V(this.defaultSlotRef)}></slot> <slot name="content" ${r.V(this.bodyRef)} ${r.V(this.contentSlotRef)}></slot> </rpl-popper> `}}r._([r.n({type:String,reflect:!0})],a.prototype,"variant",void 0),r._([r.n({type:String,reflect:!0})],a.prototype,"placement",void 0),r._([r.n({type:Boolean,reflect:!0})],a.prototype,"disabled",void 0),r._([r.n({type:String,reflect:!0})],a.prototype,"label",void 0),r._([r.n()],a.prototype,"anchor",void 0);var p=o.i`${r.Z}:host{--transition-duration:250ms;display:contents}:host,:host([appearance=neutral]){--rpl-coachmark-background-color:var(--color-neutral-background);--rpl-coachmark-color:var(--color-neutral-content-strong)}:host([appearance=inverted]){--rpl-coachmark-background-color:var(--color-inverted-neutral-background);--rpl-coachmark-color:var(--color-inverted-neutral-content-strong)}.coachmark{--arrow-size:var(--rpl-coachmark-arrow-size, 4px);--arrow-color:var(--rpl-coachmark-background-color)}rpl-popper{--arrow-size:8px}rpl-popper[placement^=top]::part(arrow){box-shadow:1px 1px 2px rgba(0,0,0,.05)}rpl-popper[placement^=bottom]::part(arrow){box-shadow:-1px -1px 2px rgba(0,0,0,.05)}rpl-popper[placement^=left]::part(arrow){box-shadow:0 -2px 2px rgba(0,0,0,.05)}rpl-popper[placement^=right]::part(arrow){box-shadow:-2px 0 2px rgba(0,0,0,.05)}rpl-popper::part(popup){z-index:var(--rpl-z-index-tooltip,var(--faceplate-tooltip-z-index,1))}rpl-popper[placement^=top]::part(popup){transform-origin:bottom}rpl-popper[placement^=bottom]::part(popup){transform-origin:top}rpl-popper[placement^=left]::part(popup){transform-origin:right}rpl-popper[placement^=right]::part(popup){transform-origin:left}`;let c=class extends a{};return c.styles=p,c=r._([r.e("rpl-coachmark")],c),{get RPLCoachmark(){return c}}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");
SML.dm("BTMXBfyY",["s_Igk1Yn","GlDbwxoG"],(async(n,o)=>{const{svg:e}=n.g();return{b:(n,e)=>o.b({source:n,action:"view",noun:"banner"},{action_info:{reason:e}}),e:(n,e)=>o.b({source:n,action:"submit",noun:"email"},{action_info:{success:e}}),i:n.m(e`<path d="M10 2.8c3.97 0 7.2 3.23 7.2 7.2s-3.23 7.2-7.2 7.2-7.2-3.23-7.2-7.2S6.03 2.8 10 2.8zM10 1a9 9 0 10.001 18.001A9 9 0 0010 1zm-.57 6.16c-.17-.1-.31-.24-.41-.41-.1-.17-.15-.36-.15-.57 0-.21.05-.4.15-.57.1-.17.24-.31.41-.41.17-.1.36-.15.57-.15.21 0 .4.05.57.15.17.1.31.24.41.41.1.17.15.36.15.57 0 .21-.05.4-.15.57-.1.17-.24.31-.41.41-.17.1-.36.15-.57.15-.21 0-.4-.05-.57-.15zm1.5 7.68H9.07v-6.3h1.86v6.3z"></path>`,"0 0 20 20","info"),r:()=>o.b({source:o.eL.ResetPassword,action:"submit",noun:"reset_complete"})}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("BTMr9sPC",["s_Igk1Yn"],(async a=>{const{svg:t}=a.g();return{t:a.m(t`<path d="M19.016 17.572l-3.668-9.787a1.15 1.15 0 00-2.151 0L9.54 17.573a.964.964 0 001.81.66l.755-2.307h4.339l.763 2.31a.963.963 0 101.808-.664zm-6.32-3.3l1.576-4.5 1.59 4.5h-3.166zm-3.147-.608l.63-1.688a8.257 8.257 0 01-2.655-1.632 12.859 12.859 0 002.313-5.47h1.606a.9.9 0 000-1.8H7.2v-.761a.9.9 0 00-1.8 0v.761H1.16a.9.9 0 000 1.8h1.6a12.864 12.864 0 002.31 5.472 8.36 8.36 0 01-4.1 2.036.9.9 0 10.319 1.771 10.24 10.24 0 005.01-2.472c.948.86 2.051 1.532 3.25 1.98v.003zm-1.55-8.79a11.084 11.084 0 01-1.7 4.072 11.055 11.055 0 01-1.7-4.072H8z"></path>`,"0 0 20 20","translate")}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("BTfAALG-",["s_Igk1Yn"],(async m=>{const{svg:a}=m.g();return{m:m.m(a`<path d="M10 2.827c2.188 0 4.322.584 6.2 1.694v5.893c0 3.198-4.681 5.661-6.2 6.376-1.517-.714-6.2-3.178-6.2-6.376V4.521A12.164 12.164 0 0110 2.827zm0-1.8c-2.791 0-5.388.821-7.572 2.226A.952.952 0 002 4.054v6.36c0 4.611 6.22 7.576 7.691 8.212.1.043.205.065.309.065a.783.783 0 00.309-.065C11.78 17.99 18 15.026 18 10.414v-6.36a.952.952 0 00-.428-.8A13.943 13.943 0 0010 1.026z"></path>`,"0 0 20 20","mod")}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");
SML.dm("BTgalZoS",["GlDbwxoG"],(async t=>{var r,e;class s{static get instance(){return t.a(r,r,"f",e)||t.d(r,r,new r,"f",e),t.a(r,r,"f",e)}getCorrelationId(){return this._correlationId}setCorrelationId(){return this._correlationId=crypto.randomUUID(),this._correlationId}getPostType(){return this._postType}setPostType(t){return this._postType=t,this._postType}}r=s,e={value:void 0};return{a:s.instance}}));
SML.dm("BUDNGNBQ",[],(async()=>{var t,a,n,i,o;return function(t){t.Control="control_1",t.Variant1="variant1",t.Variant2="variant2",t.Variant3="variant3",t.Variant4="variant4"}(t||(t={})),function(t){t.Control="control_1",t.Variant1="cbau_desktop_variant1",t.Variant2="cbau_desktop_variant2",t.Variant3="cbau_desktop_variant3",t.SlimVariant1="slim_cbau_desktop_variant1",t.SlimVariant2="slim_cbau_desktop_variant2",t.SlimVariant3="slim_cbau_desktop_variant3"}(a||(a={})),function(t){t.Full="full",t.Slim="slim"}(n||(n={})),function(t){t.Button="button",t.Scroll="scroll",t.Close="close"}(i||(i={})),function(t){t.Desktop="comment_block_auth_desktop",t.DesktopWithTimer="comment_block_auth_desktop_timer",t.Mobile="comment_block_auth_mobile"}(o||(o={})),{get C(){return i}}}));

SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DMfuJHXs.js",import.meta.url,"DMfuJHXs");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");SML.di("./FagDXDzk.js",import.meta.url,"FagDXDzk");
SML.dm("BXgkCz3E",["GlDbwxoG","s_Igk1Yn","DMfuJHXs","D-MAMWlw","FagDXDzk"],(async(t,e,s,i)=>{let n=class extends e.s{constructor(){super(),this.postId="",this.spoiler=!1,this.nsfw=!1,this.quarantined=!1,this.game=!1,this.app="",this.onPostUpdateAction=({postId:t,action:e,value:s})=>{if(this.postId===t)switch(e){case i.a.markAsNsfw:this.nsfw=s;break;case i.a.markAsSpoiler:this.spoiler=s}},this.pubsubController=new t.m(this)}connectedCallback(){super.connectedCallback(),this.pubsubController.subscribe(t.T.PostUpdated,this.onPostUpdateAction)}renderContentTag(t){const i=s.c(s.g()[t]);return e.x`<span class="h-lg inline-block">${i}</span>`}render(){return this.nsfw||this.spoiler||this.quarantined||this.app?e.x` <div class="content-tags inline-flex gap-xs"> ${this.nsfw?this.renderContentTag(s.C.NSFW):""} ${this.app?e.x`<a target="_blank" href="https://developers.reddit.com/apps/${this.app}?utm=watermark_v1" @click="${()=>this.dispatchEvent(new CustomEvent("tag-click",{detail:{type:s.C.APP}}))}">${this.renderContentTag(this.game?s.C.GAME:s.C.APP)}</a>`:""} ${this.spoiler?this.renderContentTag(s.C.SPOILER):""} ${this.quarantined?this.renderContentTag(s.C.QUARANTINED):""} </div> `:""}};n.styles=[t.t],t._([t.n({type:String,attribute:"post-id"})],n.prototype,"postId",void 0),t._([t.n({type:Boolean,attribute:"spoiler",reflect:!0})],n.prototype,"spoiler",void 0),t._([t.n({type:Boolean,attribute:"nsfw",reflect:!0})],n.prototype,"nsfw",void 0),t._([t.n({type:Boolean,attribute:"quarantined",reflect:!0})],n.prototype,"quarantined",void 0),t._([t.n({type:Boolean})],n.prototype,"game",void 0),t._([t.n({type:String})],n.prototype,"app",void 0),n=t._([t.e("shreddit-content-tags")],n)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./C_OcidZ-.js",import.meta.url,"C_OcidZ-");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./GGn-LX5b.js",import.meta.url,"GGn-LX5b");
SML.dm("BXmRkVEu",["GlDbwxoG","C_OcidZ-","s_Igk1Yn","GGn-LX5b"],(async(e,t,n)=>{const a=n.s;let i=class extends a{constructor(){super(...arguments),this.translationContextValue=e.aB,this.checked=!0,this.isViewEventSent=!1,this.renderTitleText=()=>n.x` ${this.isCommentToggle()?"Translate comment":"Translate post"} `,this.renderbodyText=()=>n.x` ${this.isCommentToggle()?"You are commenting in a community speaking a language different from yours.":"You are posting in a community speaking a language different from yours."} `}getCommentIdForEditMode(){const e=this.closest("comment-composer-host");if(e&&e.isInEditMode)return this.closest("shreddit-comment")?.getAttribute("thingId")??void 0}updated(){if(this.translationContextValue.isTranslationActive&&!this.isViewEventSent){if(this.isCommentToggle()){const n=this.getCommentIdForEditMode();e.f(this,t.t(n))}else this.isPostToggle()&&e.f(this,t.a(this.thingId));this.isViewEventSent=!0}}handleToggleClick(n){if(n.preventDefault(),n.stopPropagation(),this.checked=!this.checked,this.isCommentToggle()){const n=this.getCommentIdForEditMode();e.f(this,t.c(this.checked,n))}this.isPostToggle()&&e.f(this,t.d(this.checked,this.thingId))}isCommentToggle(){return"comment"===this.toggleType}isPostToggle(){return"post"===this.toggleType}render(){if(!this.translationContextValue.isTranslationActive)return n.x``;const e=this.isCommentToggle()?"flex ml-sm mb-2xs justify-between":"flex justify-between py-md";return n.x` <div class="${e}"> <div> <div class="font-normal text-14 leading-5 text-secondary-plain"> ${this.renderTitleText()} </div> <div class="font-normal text-12 leading-4 text-secondary-plain-weak"> ${this.renderbodyText()} </div> </div> <faceplate-switch-input ?checked="${this.checked}" @click="${this.handleToggleClick}"></faceplate-switch-input> </div> `}};i.styles=[e.t],e._([e.aA({context:e.aC,subscribe:!0}),e.N()],i.prototype,"translationContextValue",void 0),e._([e.n({type:String,attribute:"toggle-type"})],i.prototype,"toggleType",void 0),e._([e.n({type:String,attribute:"thing-id"})],i.prototype,"thingId",void 0),e._([e.N()],i.prototype,"checked",void 0),e._([e.N()],i.prototype,"isViewEventSent",void 0),i=e._([e.e("translation-contribution-toggle")],i)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");
SML.dm("BYIf08Dv",["GlDbwxoG"],(async o=>{var n;return function(o){o.Back="back",o.Close="close",o.GetApp="get_app",o.Login="login",o.NotOver18="im_not_over_18",o.Over18="continue",o.Signup="signup",o.DontShowAgain="dont_show",o.Report="report"}(n||(n={})),{get B(){return n},a:n=>o.b({source:"xpromo",action:"click",noun:"recap"},{popup:{button_text:n}}),r:()=>o.b({source:"xpromo",action:"view",noun:"recap"})}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CZPCygeT.js",import.meta.url,"CZPCygeT");SML.di("./C0I_JWye.js",import.meta.url,"C0I_JWye");SML.di("./B9pe2eYY.js",import.meta.url,"B9pe2eYY");SML.di("./DoOFmcQZ.js",import.meta.url,"DoOFmcQZ");SML.di("./DS7BJDdq.js",import.meta.url,"DS7BJDdq");
SML.dm("B_EEhXwG",["GlDbwxoG","s_Igk1Yn","DoOFmcQZ","DS7BJDdq","CZPCygeT","C0I_JWye","B9pe2eYY"],(async(e,t,a,s)=>{const{svg:o}=t.g(),i=t.m(o`<path d="M13 8.75a1.75 1.75 0 100-3.5 1.75 1.75 0 000 3.5z"></path><path d="M8.6 18c0 .55-.45 1-1 1H4.11c-.84 0-1.62-.32-2.2-.9a3.109 3.109 0 01-.86-2.78c.12-.65.47-1.23.94-1.7l5.18-5.18c-.51-2.05.07-4.18 1.57-5.68 2.34-2.34 6.16-2.34 8.5 0s2.34 6.16 0 8.5a5.952 5.952 0 01-5.02 1.7v1.43c0 .55-.45 1-1 1H8.6V18zm4.39-15.2c-1.08 0-2.16.41-2.98 1.23a4.195 4.195 0 00-.98 4.37l.19.53-6.04 6.04c-.25.25-.38.57-.38.92 0 .35.14.68.38.92s.57.38.93.38H6.8v-3.61h3.62v-3.03l1.2.41c1.54.54 3.21.16 4.35-.98a4.213 4.213 0 000-5.95c-.82-.82-1.9-1.23-2.98-1.23z"></path>`,"0 0 20 20","key"),r=()=>e.b({source:"content_gate",action:"click",noun:"continue"});let n=class extends t.s{constructor(){super(...arguments),this.country="",this.subredditName="",this.subredditId="",this.showMessageModeModal=!1,this.messageModsType="request",this.modMessageTextArea=e.U(),this.modSubjectText=e.U(),this.setPrefGatedOptIn=async()=>{if(e.f(this,r()),this.isLoggedIn&&this.subredditName.length)try{await e.B({operation:e.C.OptInToGatedSubreddit,variables:{input:{subredditName:this.subredditName}}})}catch(e){window.console.error(e)}finally{this.reload()}else this.setCookie(e.cR)},this.setPrefQuarantinedOptIn=async()=>{if(e.f(this,r()),this.isLoggedIn&&this.subredditName.length)try{await e.B({operation:e.C.UpdateSubredditQuarantineOptInState,variables:{input:{optInState:e.cS.OptedOut,subredditId:this.subredditId}}})}catch(e){window.console.error(e)}finally{this.reload()}else await this.setCookie(e.cT),this.reload()},this.setNsfwAllowed=async()=>{if(this.isLoggedIn){const{data:t}=await e.B({operation:e.C.UpdateProfileSettings,variables:{input:{isNsfw:!0}}});t.updateProfileSettings?.ok&&this.reload()}else this.setCookie(e.O)},this.onCancelModModal=()=>{this.showMessageModeModal=!1},this.messageMod=async()=>{this.showMessageModeModal=!0,this.messageModsType="message"},this.requestToJoin=async()=>{this.showMessageModeModal=!0,this.messageModsType="request",e.f(this,e.b({source:"content_gate",action:"click",noun:"request_to_join_button"}))},this.sendMessageToMods=async()=>{const t=this.modMessageTextArea.value?.value||"",a=this.modSubjectText.value?.value||"Request to join";if(t.length){const{data:s}=await e.B({operation:e.C.SendMessageToSubreddit,variables:{input:{body:t,subject:`[join] ${a}`,subredditId:this.subredditId}}});if(s.sendMessageToSubreddit.ok){if("request"===this.messageModsType){const{data:t}=await e.B({operation:e.C.UpdateContributorRequestTimestamp,variables:{input:{requestDatetime:(new Date).toISOString(),subredditId:this.subredditId}}});if(t.updateLastContributorRequestTimestamp?.ok)return e.f(this,e.b({source:"content_gate",action:"click",noun:"request_to_join_submit"})),this.reload()}this.showMessageModeModal=!1}}}}reload(){window.location.reload()}initializeSlottedElements(){this.shadowRoot.querySelector('[slot="secondaryButton"]')?.assignedNodes({flatten:!0}).forEach((e=>{const t=e;"gated-action-button"===t.id&&(this.gatedButton=t),"nsfw-action-button"===t.id&&(this.nsfwButton=t),"quarantine-action-button"===t.id&&(this.quarantineButton=t),"private-mod-action-button"===t.id&&(this.privateModeButton=t)})),this.shadowRoot.querySelector('[slot="tertiaryButton"]')?.assignedNodes({flatten:!0}).forEach((e=>{const t=e;"private-join-action-button"===t.id&&(this.privateRequestToJoinButton=t)}))}addEventListenerToSlottedElements(){this.gatedButton?.addEventListener("click",this.setPrefGatedOptIn),this.nsfwButton?.addEventListener("click",this.setNsfwAllowed),this.quarantineButton?.addEventListener("click",this.setPrefQuarantinedOptIn),this.privateModeButton?.addEventListener("click",this.messageMod),this.privateRequestToJoinButton?.addEventListener("click",this.requestToJoin)}removeEventListenerFromSlottedElements(){this.gatedButton?.removeEventListener("click",this.setPrefGatedOptIn),this.nsfwButton?.removeEventListener("click",this.setNsfwAllowed),this.quarantineButton?.removeEventListener("click",this.setPrefQuarantinedOptIn),this.privateModeButton?.removeEventListener("click",this.messageMod),this.privateRequestToJoinButton?.removeEventListener("click",this.requestToJoin)}firstUpdated(){this.initializeSlottedElements(),this.addEventListenerToSlottedElements()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListenerFromSlottedElements()}setCookie(t){e.z({country:this.country,name:t,value:"true",options:e.D}),this.reload()}getBgImagePath(){const t=this.isLoggedIn?"home":"popular",a=e.a3()?"dark":void 0,s=this.isDesktop?void 0:"mobile";return`${CLIENT_CONFIG.STATIC_BASE_URL}assets/feeds/${[t,a,s].filter(Boolean).join("-")}.jpg`}renderModForm(){return t.x`<faceplate-form class="w-full"> <p class="mb-md"> ${"message"===this.messageModsType?"Send A Private Message":"Write a short message to the moderators explaining why you want to join."} </p> ${"message"===this.messageModsType?t.x`<faceplate-text-input ${e.V(this.modSubjectText)} ?novalidate="${!0}" maxLength="${100}" class="mb-md w-100"> <span slot="label">${"Subject"}</span></faceplate-text-input>`:""} <faceplate-textarea-input class="w-full" ${e.V(this.modMessageTextArea)} size="${a.T.EXPANDED}" appearance="${a.a.SECONDARY}" name="textarea" maxLength="${1e4}" ?novalidate="${!0}"> <span slot="label">${"Message to moderators"}</span> </faceplate-textarea-input> </faceplate-form>`;}renderModModal(){return t.x`<faceplate-modal open class="fixed top-1/2 -translate-y-1/2 w-[500px]"> <div slot="closeButton"> ${e.Y({appearance:"secondary",attributes:{onclick:this.onCancelModModal},leadingIcon:t.c({size:t.I.Medium}),size:e.a7.Medium})} </div> <div slot="titleGraphic" class="flex"> ${"message"===this.messageModsType?s.m({size:t.I.ExtraLarge}):i({size:t.I.ExtraLarge})} </div> <div slot="title"> ${"message"===this.messageModsType?"Message Mods":"Request to join"} </div> <div slot="primaryButton" ,> ${e.Y({appearance:"primary",attributes:{className:"w-100",onclick:this.sendMessageToMods},children:"Send Message"})} </div> <div slot="secondaryButton" ,> ${e.Y({appearance:"secondary",attributes:{className:"w-100",onclick:this.onCancelModModal},children:"Cancel"})} </div> ${this.renderModForm()} </faceplate-modal>`;}render(){return t.x`<main> ${this.showMessageModeModal?this.renderModModal():t.x`<faceplate-modal open class="fixed top-1/2 -translate-y-1/2"> <slot name="titleGraphic" slot="titleGraphic"></slot> <slot name="title" slot="title"></slot> <slot name="closeButton" slot="closeButton"></slot> <slot name="primaryButton" slot="primaryButton"></slot> <slot name="secondaryButton" slot="secondaryButton"></slot> <slot name="tertiaryButton" slot="tertiaryButton"></slot> <slot></slot> </faceplate-modal> `} <div class="blurred-bg h-full w-full bg-no-repeat bg-cover" style="background-image:url('${this.getBgImagePath()}')"> <div class="shade h-full w-full"></div> </div> </main> `}};n.styles=[t.i`main{height:calc(100vh - var(--shreddit-header-height));width:100vw}faceplate-modal{max-width:min(90%,656px)}.blurred-bg{filter:blur(10px)}.blurred-bg .shade{background-color:rgba(0,0,0,.7)}`,e.t],e._([e.n({type:String})],n.prototype,"country",void 0),e._([e.n({type:String})],n.prototype,"subredditName",void 0),e._([e.n({type:String})],n.prototype,"subredditId",void 0),e._([e.n({type:Boolean})],n.prototype,"isDesktop",void 0),e._([e.n({type:Boolean})],n.prototype,"isLoggedIn",void 0),e._([e.N()],n.prototype,"showMessageModeModal",void 0),e._([e.N()],n.prototype,"messageModsType",void 0),n=e._([e.e("guard-community-modal")],n)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./CLcwsfQZ.js",import.meta.url,"CLcwsfQZ");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CTwJH_ps.js",import.meta.url,"CTwJH_ps");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./OimaI6pY.js",import.meta.url,"OimaI6pY");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");SML.di("./FagDXDzk.js",import.meta.url,"FagDXDzk");SML.di("./DBgqsMtO.js",import.meta.url,"DBgqsMtO");SML.di("./Ccw0cO_g.js",import.meta.url,"Ccw0cO_g");SML.di("./CykCcTkJ.js",import.meta.url,"CykCcTkJ");SML.di("./HYbNa5uQ.js",import.meta.url,"HYbNa5uQ");SML.di("./DAqoOXDQ.js",import.meta.url,"DAqoOXDQ");SML.di("./CsGy0MYm.js",import.meta.url,"CsGy0MYm");SML.di("./BGOkDHmz.js",import.meta.url,"BGOkDHmz");SML.di("./DoY_u8JV.js",import.meta.url,"DoY_u8JV");
SML.dm("B_YWV8CL",["GlDbwxoG","CLcwsfQZ","s_Igk1Yn","CTwJH_ps","CC2wUKE8","OimaI6pY","D-MAMWlw","FagDXDzk","DBgqsMtO","Ccw0cO_g","CykCcTkJ","HYbNa5uQ","DAqoOXDQ","CsGy0MYm","BGOkDHmz","DoY_u8JV"],(async(t,e,i)=>{const o=e.W(i.s);let r=class extends o{constructor(){super(...arguments),this.adEvents=[],this.impressionId="0",this.isBlank=!1,this.adType=t.eo.DISPLAY,this.placement=t.a8.BLANK_ONLY,this.hasToggleableVideo=!1,this._isConnected=!1,this.toggleableVideoAdController=null}async connectedCallback(){super.connectedCallback(),this._isConnected||(this.enableAdObserver({postElement:this,adType:this.adType,events:e.e(this.adEvents),postId:this.postId,impressionId:this.impressionId,dimensions:this.dimensions}),this._isConnected=!0,await this.resolveVideoAdDependencies())}async resolveVideoAdDependencies(){if(this.adType!==t.eo.VIDEO||!this.hasToggleableVideo)return;const{ToggleableVideoAdController:e}=await SML.di("./DAqoOXDQ.js",import.meta.url,"DAqoOXDQ").then((function(t){return t.i}));this.toggleableVideoAdController=new e(this,((t,e)=>{this.adMeasurer&&(this.adMeasurer.dimensions={height:t,width:e})}))}disconnectedCallback(){this.adMeasurer&&this.adMeasurer.handleUnload(),super.disconnectedCallback()}render(){return i.x`<slot></slot>`}};t._([t.n({type:Array,attribute:"ad-events"})],r.prototype,"adEvents",void 0),t._([t.n({type:String,attribute:"post-id"})],r.prototype,"postId",void 0),t._([t.n({type:String,attribute:"impression-id"})],r.prototype,"impressionId",void 0),t._([t.n({type:String,attribute:"outbound-link-url",reflect:!0})],r.prototype,"outboundLinkUrl",void 0),t._([t.n({type:Boolean,attribute:"is-blank"})],r.prototype,"isBlank",void 0),t._([t.n({type:String,attribute:"ad-type"})],r.prototype,"adType",void 0),t._([t.n({type:Object,attribute:!0})],r.prototype,"dimensions",void 0),t._([t.n({type:String,attribute:"encrypted-tracking-payload"})],r.prototype,"encryptedTrackingPayload",void 0),t._([t.n({type:Array,attribute:"additional-event-metadata"})],r.prototype,"additionalEventMetadata",void 0),t._([t.n({type:String,attribute:"ad-transparency-encoded-data"})],r.prototype,"adTransparencyEncodedData",void 0),t._([t.n({type:String,attribute:"placement"})],r.prototype,"placement",void 0),t._([t.n({type:String,attribute:"ads-correlation-id"})],r.prototype,"adsCorrelationId",void 0),t._([t.n({type:Object,attribute:"ad-user-targeting-info"})],r.prototype,"adUserTargeting",void 0),t._([t.n({type:Boolean,attribute:"has-toggleable-video"})],r.prototype,"hasToggleableVideo",void 0),r=t._([t.e("ad-event-tracker")],r)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./GGn-LX5b.js",import.meta.url,"GGn-LX5b");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./Cxc0RZl1.js",import.meta.url,"Cxc0RZl1");SML.di("./BTMr9sPC.js",import.meta.url,"BTMr9sPC");SML.di("./DzMpUNmB.js",import.meta.url,"DzMpUNmB");SML.di("./DoOFmcQZ.js",import.meta.url,"DoOFmcQZ");SML.di("./C_OcidZ-.js",import.meta.url,"C_OcidZ-");SML.di("./C2coigY7.js",import.meta.url,"C2coigY7");SML.di("./wFIF_OFn.js",import.meta.url,"wFIF_OFn");SML.di("./DK2EuOAl.js",import.meta.url,"DK2EuOAl");SML.di("./B4wbfaco.js",import.meta.url,"B4wbfaco");SML.di("./BStJq-t0.js",import.meta.url,"BStJq-t0");SML.di("./DCovP8x6.js",import.meta.url,"DCovP8x6");SML.di("./DWhQjF7E.js",import.meta.url,"DWhQjF7E");SML.di("./jOi_w9kT.js",import.meta.url,"jOi_w9kT");SML.di("./B8B7_bfl.js",import.meta.url,"B8B7_bfl");SML.di("./DhQW5pQL.js",import.meta.url,"DhQW5pQL");SML.di("./DrrjN1Nt.js",import.meta.url,"DrrjN1Nt");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");SML.di("./CU4mObWU.js",import.meta.url,"CU4mObWU");SML.di("./B5aCBAWI.js",import.meta.url,"B5aCBAWI");SML.di("./MX9FaClF.js",import.meta.url,"MX9FaClF");SML.di("./FaYkg4Io.js",import.meta.url,"FaYkg4Io");
SML.dm("BaMI3SX6",["GlDbwxoG","GGn-LX5b","s_Igk1Yn","Cxc0RZl1","BTMr9sPC","DzMpUNmB","DoOFmcQZ","C_OcidZ-","C2coigY7","wFIF_OFn","DK2EuOAl","B4wbfaco","BStJq-t0","DCovP8x6","DWhQjF7E","jOi_w9kT","B8B7_bfl","DhQW5pQL","DrrjN1Nt","CC2wUKE8","DRM-oTYq","CU4mObWU","B5aCBAWI","MX9FaClF","FaYkg4Io"],(async(e,t,a,i,n,s,o,r,l)=>{var d;!function(e){e.GREAT="great",e.NOT_GREAT="not great"}(d||(d={}));let c=class extends a.s{constructor(){super(...arguments),this.otherReasonFormValue="",this.isOpen=!1,this.handleDismiss=()=>{e.f(this,r.n()),this.close()}}show(){e.f(this,r.m()),this.faceplateDialog?.showModal?.(),this.isOpen=!0}close(){this.faceplateDialog?.close?.(),this.isOpen=!1,this.selectedOption=void 0,this.otherReasonFormValue=""}showThankYouAlert(){this.dispatchEvent(e.c("faceplate-alert",{level:e.X.success,message:"Thanks for rating"}))}handleUpvoteTranslation(){this.selectedOption=d.GREAT}handleDownvoteTranslation(){this.selectedOption=d.NOT_GREAT}handleSubmit(){this.selectedOption&&(e.f(this,r.o({reason:this.selectedOption,survey_text:this.otherReasonFormValue})),this.showThankYouAlert(),this.close())}render(){return a.x` <faceplate-dialog id="global-translation-feedback-faceplate-dialog" class="translation-feedback"> <div class="flex flex-col gap-lg"> <div class="flex justify-between"> <h3 class="font-bold text-24 text-neutral-content-strong m-0" data-testid="modal-title"> ${"Enjoying these translations?"} </h3> ${e.Y({attributes:{onclick:this.handleDismiss},appearance:"secondary",leadingIcon:a.c({size:a.I.Medium}),size:e.a7.Medium})} </div> <p class="m-0" data-testid="modal-subtitle"> ${"Tell us what you think about your translated Reddit experience."} </p> <div class="flex justify-center gap-md"> <button data-testid="upvote-translation" class="py-md px-lg cursor-pointer border-none rounded-md ${this.selectedOption===d.GREAT?"bg-neutral-background-selected":"bg-neutral-background-medium"}" @click="${this.handleUpvoteTranslation}" @keydown="${this.handleUpvoteTranslation}"> <img src="${CLIENT_CONFIG.STATIC_BASE_URL}assets/snoomojis/Snoo_Expression_Smile_EyesOpen.png" class="block m-auto pb-xs" width="56" height="56" alt=""> <p class="font-semibold text-14 text-center text-neutral-content-strong m-0"> ${"Great"} </p> </button> <button data-testid="downvote-translation" class="py-md px-lg cursor-pointer border-none rounded-md ${this.selectedOption===d.NOT_GREAT?"bg-neutral-background-selected":"bg-neutral-background-medium"}" @click="${this.handleDownvoteTranslation}" @keydown="${this.handleDownvoteTranslation}"> <img src="${CLIENT_CONFIG.STATIC_BASE_URL}assets/snoomojis/Snoo_Expression_Blanc.png" class="block m-auto pb-xs" width="56" height="56" alt=""> <p class="font-semibold text-14 text-center text-neutral-content-strong m-0"> ${"Not Great"} </p> </button> </div> ${this.selectedOption?a.x` <div class="flex w-full box-border"> <faceplate-textarea-input data-testid="other-reason-input" maxlength="500" appearance="${o.a.BORDERED}" size="${o.T.EXPANDED}" @keyup="${e=>{e.stopPropagation(),this.otherReasonFormValue=e.target.value}}" class="w-full" .value="${this.otherReasonFormValue}"> <span slot="label">${"Leave a comment (optional)"}</span> </faceplate-textarea-input> </div> `:a.x``} <div class="flex justify-end"> ${e.Y({appearance:"primary",size:e.a7.Large,shape:"pill",attributes:{onclick:this.handleSubmit,className:"flex box-border","data-testid":"submit-feedback-button",disabled:!this.selectedOption},children:a.x`<span class="font-semibold text-14">${"Give Feedback"}</span>`})} </div> </div> </faceplate-dialog> `;}};c.styles=[a.i`.translation-feedback{border-radius:16px;max-width:400px;padding:2rem 1.5rem 1.5rem 1.5rem;width:82%}`,e.t],e._([e.Q("#global-translation-feedback-faceplate-dialog")],c.prototype,"faceplateDialog",void 0),e._([e.N()],c.prototype,"selectedOption",void 0),e._([e.N()],c.prototype,"otherReasonFormValue",void 0),e._([e.N()],c.prototype,"isOpen",void 0),c=e._([e.e("global-translation-feedback-modal")],c);const u="data-protection-consent",h="faceplate-bottom-sheet#xpromo-bottom-sheet",m="faceplate-modal#blocking-modal",p=a.s;function k(e){return!!e?.open}let T=class extends p{constructor(){super(...arguments),this.activatableFeatures=[e.hj,e.hk,e.hl,e.hm],this.isDesktop=!1,this.withFeedback=!1,this.withActivatedFeatures=!1,this.translationContextValue=e.aB,this.withCoachmark=!1,this.withTranslationSettings=!1,this.userLocale="",this.hasCoachmarkDisplayLimit=!1,this.translationActiveMsg="Translations enabled",this.handleTranslationActiveSwitch=()=>{const e=!this.translationContextValue.isTranslationActive;this.dispatchContextUpdateEvent({isTranslationActive:e})},this.closeTranslationCoachmark=()=>{this.translationCoachmark?.hide?.(),this.onCoachmarkClose()},this.openTranslationCoachmark=()=>{e.f(this,l.e(!!this.translationContextValue.isTranslationActive)),this.translationCoachmark?.show?.()},this.openTranslationMenu=()=>{e.f(this,l.f(!!this.translationContextValue.isTranslationActive)),this.isDesktop?this.translationDropdownMenu?.show?.():this.translationMenuBottomSheet?.showModal?.()},this.closeTranslationMenu=()=>{e.f(this,l.f(!!this.translationContextValue.isTranslationActive)),this.isDesktop?this.translationDropdownMenu?.close?.():this.translationMenuBottomSheet?.close?.()},this.openFeedbackModal=()=>{this.translationFeedbackModal?.show?.()},this.handleCoachmarkSettingsClick=()=>{this.closeTranslationCoachmark(),this.openTranslationMenu(),e.f(this,l.g(l.h.UpdateSettings))},this.handleTranslationActiveClick=t=>{t.stopPropagation(),e.f(this,r.q(!!this.translationContextValue.isTranslationActive,this.userLocale))},this.handleCoachmarkClick=e=>{e.stopPropagation()},this.handleCoachmarkCloseClick=()=>{this.closeTranslationCoachmark(),e.f(this,l.g(l.h.Dismiss))},this.handleNavMobileButtonClick=()=>{this.activateFeatures(),this.openTranslationMenu(),e.f(this,l.i(!!this.translationContextValue.isTranslationActive))},this.handleNavbarButtonClick=()=>{this.activateFeatures(),e.f(this,l.i(!!this.translationContextValue.isTranslationActive)),e.f(this,l.f(!!this.translationContextValue.isTranslationActive))},this.handleGiveFeedbackButtonClick=()=>{this.openFeedbackModal(),this.closeTranslationMenu()},this.onCoachmarkClose=()=>{setTimeout((()=>{this.dispatchContextUpdateEvent({shouldDisplayCoachmark:!1,shouldDisplayFeedbackCoachmark:!0})}),500)},this._activateFeature=e.j}connectedCallback(){super.connectedCallback();"mtseo-disabled"===e.$.getItem(e.a0.I18nTranslationInterventionShown)&&(setTimeout((()=>{this.dispatchEvent(e.c("faceplate-alert",{level:e.X.success,message:"Translations are disabled."}))}),1e3),e.$.setItem(e.a0.I18nTranslationInterventionShown,"true"))}updated(e){this.withCoachmark&&!this.hasCoachmarkDisplayLimit&&e.has("translationContextValue")&&void 0!==this.translationContextValue.isTranslationActive&&this.displayCoachmark()}displayCoachmark(){const{coachmarkDisplayCount:e,shouldDisplayCoachmark:t}=this.translationContextValue;window.setTimeout((()=>{if(!t)return;if(this.hasCoachmarkObstacles())return;const a=e<1;this.dispatchContextUpdateEvent({coachmarkDisplayCount:e+1,shouldDisplayCoachmark:a,shouldDisplayFeedbackCoachmark:!a}),a&&this.openTranslationCoachmark(),this.hasCoachmarkDisplayLimit=!0}),1500)}hasCoachmarkObstacles(){const t=!!document.querySelector(u),a=function(t){const a=document.querySelector(t);return a?e.cC(k,a):[]}(h),i=!!document.querySelector(m);return t||a?.length>0||i}dispatchContextUpdateEvent(e){const t={...this.translationContextValue,...e},a=new CustomEvent("update-translation-context",{bubbles:!0,composed:!0,detail:t});this.dispatchEvent(a)}featureShouldBeActivated(t){return!!document.querySelector(`faceplate-loader[name=${t}]`)&&!!document.querySelector(`faceplate-partial[name=${t}]`)&&!e.hn(t)}activateFeatures(){return this.withActivatedFeatures?Promise.all(this.activatableFeatures.filter(this.featureShouldBeActivated).map((e=>this._activateFeature({name:e})))):Promise.resolve()}renderCoachmark(){return this.translationContextValue.shouldDisplayCoachmark?a.x`<rpl-coachmark-card slot="content" appearance="inverted"> ${i.i({size:a.I.Small,attributes:{slot:"title-icon"}})} <span slot="title" class="whitespace-nowrap">${this.translationActiveMsg}</span> <p class="max-w-[10rem] xs:max-w-none"> ${this.translationContextValue.isTranslationActive?"Posts and comments are automatically translated":"Automatically translate posts and comments"} </p> ${e.Y({attributes:{"aria-label":"Close",id:"coachmark-close-button",onclick:this.handleCoachmarkCloseClick,slot:"close-button"},appearance:"plainInverted",leadingIcon:a.c({size:a.I.Small}),size:e.a7.Small})} ${e.Y({attributes:{slot:"primary-button",id:"coachmark-settings-button",onclick:this.handleCoachmarkSettingsClick},children:"Settings",appearance:"plainInverted",size:e.a7.Small})} </rpl-coachmark-card>`:a.x``;}renderDesktopMenu(){return a.x`<faceplate-dropdown-menu position="bottom-end" id="translation-desktop-menu"> ${e.Y({size:e.a7.Medium,appearance:"plain",shape:"pill",leadingIcon:n.t({size:a.I.Medium}),attributes:{id:"translation-menu-button","aria-label":this.translationActiveMsg,onclick:this.handleNavbarButtonClick}})} <faceplate-menu slot="menu" dropdown hidden> ${s.l({label:a.x` <faceplate-switch-input id="hui-translation-switch" appearance="${t.S.PRIMARY}" class="inline-flex flex-row-reverse gap-sm" ?checked="${this.translationContextValue.isTranslationActive}" @input="${this.handleTranslationActiveSwitch}" @click="${this.handleTranslationActiveClick}"> <span class="-ml-xs">${this.translationActiveMsg}</span> </faceplate-switch-input> `,size:s.L.Medium})} ${this.withTranslationSettings?s.l({label:a.x` <span class="flex flex-row items-center"> ${a.ak({size:a.I.Medium})} <span class="ml-xs"> ${"Translation Settings"} </span> </span> `,attributes:{id:"translation-settings-list-item"},size:s.L.Medium,href:"/settings/preferences"}):a.A} ${this.withFeedback?s.l({label:"Give translation feedback",attributes:{"data-testid":"hui-translation-button-feedback-option"},size:s.L.Medium,onClick:this.handleGiveFeedbackButtonClick}):a.A} </faceplate-menu> </faceplate-dropdown-menu>`;}renderMobileMenu(){return a.x`<div> ${e.Y({size:e.a7.Medium,appearance:"plain",shape:"pill",leadingIcon:n.t({size:a.I.Medium}),attributes:{id:"translation-menu-button",onclick:this.handleNavMobileButtonClick,"aria-label":this.translationActiveMsg}})} <faceplate-bottom-sheet id="translation-mobile-menu"> <div class="p-md flex flex-col items-stretch w-full gap-md"> <faceplate-switch-input id="hui-translation-switch" appearance="${t.S.PRIMARY}" class="flex flex-row-reverse justify-between gap-sm px-xs" ?checked="${this.translationContextValue.isTranslationActive}" @input="${this.handleTranslationActiveSwitch}" @click="${this.handleTranslationActiveClick}"> <span class="inline-flex items-center gap-xs"> ${n.t({size:a.I.Medium})} <span> ${this.translationActiveMsg} </span> </span> </faceplate-switch-input> ${this.withFeedback?s.l({label:"Give translation feedback",attributes:{"data-testid":"hui-translation-button-feedback-option"},size:s.L.Medium,onClick:this.handleGiveFeedbackButtonClick}):a.A} </div> </faceplate-bottom-sheet> </div>`;}render(){return a.x` <rpl-coachmark placement="${this.isDesktop?"bottom-end":"bottom"}" appearance="inverted" id="translation-coachmark" @click="${this.handleCoachmarkClick}" @rpl-coachmark:after-hide="${this.onCoachmarkClose}" style="--max-width:fit-content"> <div>${this.isDesktop?this.renderDesktopMenu():this.renderMobileMenu()}</div> ${this.renderCoachmark()} </rpl-coachmark> ${this.withFeedback?a.x` <global-translation-feedback-modal id="hui-translation-button-feedback-modal"></global-translation-feedback-modal>`:a.A} `}};T.styles=[e.t],e._([e.n({type:Boolean,attribute:"is-desktop"})],T.prototype,"isDesktop",void 0),e._([e.n({type:Boolean,attribute:"with-feedback"})],T.prototype,"withFeedback",void 0),e._([e.n({type:Boolean,attribute:"with-activated-features"})],T.prototype,"withActivatedFeatures",void 0),e._([e.aA({context:e.aC,subscribe:!0}),e.N()],T.prototype,"translationContextValue",void 0),e._([e.n({type:Boolean,attribute:"with-coachmark"})],T.prototype,"withCoachmark",void 0),e._([e.n({type:Boolean,attribute:"with-translation-settings"})],T.prototype,"withTranslationSettings",void 0),e._([e.n({type:String,attribute:"user-locale"})],T.prototype,"userLocale",void 0),e._([e.N()],T.prototype,"hasCoachmarkDisplayLimit",void 0),e._([e.Q("#translation-coachmark")],T.prototype,"translationCoachmark",void 0),e._([e.Q("#translation-desktop-menu")],T.prototype,"translationDropdownMenu",void 0),e._([e.Q("#translation-mobile-menu")],T.prototype,"translationMenuBottomSheet",void 0),e._([e.Q("#hui-translation-button-feedback-modal")],T.prototype,"translationFeedbackModal",void 0),T=e._([e.e("hui-translation-button")],T);const v="second_default",g="enabled_initialized";let N=class extends a.s{constructor(){super(...arguments),this.translationContextValue=e.aB,this.isNewAccountAge=!1,this.isNewImmersiveVisit=!1,this.withBackendSetting=!1,this.preferredLanguages="",this.fullPreferredLanguages="",this.defaultImmersiveOn=!1,this.requestClientGQL=e.B}connectedCallback(){super.connectedCallback(),this.isSettingInitialized()?this.syncTranslationSettingsWithCookie():this.initializeTranslationSettings(),this.initializePreferredLanguageSettings()}updated(e){if(!e.has("translationContextValue")||!this.withBackendSetting)return;const t=e.get("translationContextValue"),a=this.translationContextValue.isTranslationActive,i=t?.isTranslationActive;if(void 0===i)return;(!0!==i&&!0===a||!1!==i&&!1===a)&&this.saveTranslationSettingInAccount(a)}async initializePreferredLanguageSettings(){const t=this.fetchTranslationSettingFromCookie(),a=t&&(t.multilingualState===v||t.multilingualState===g);if(!this.fullPreferredLanguages&&!this.preferredLanguages||!this.withBackendSetting||a)return;const i={...this.translationContextValue};let n;const s=!!this.fullPreferredLanguages&&this.fullPreferredLanguages.length>0;try{const{data:t}=await this.requestClientGQL({operation:e.C.TranslationPreferredLanguages}),a=t?.identity?.preferences?.preferredLanguages||[];if(n=this.defaultPreferredLanguageDecider(a),n&&(s||0===a.length)){const t=(await this.requestClientGQL({operation:e.C.UpdatePreferredLanguagesPreference,variables:{input:{languages:n}}})).data.updatePreferredLanguagesPreference;t?.ok?(e.f(this,r.u({reason:"success",languages:n,old_languages:a,error:"",sourceName:s?v:""})),i.multilingualState=s?v:g,this.dispatchContextUpdateEvent(i)):e.f(this,r.u({reason:"failure",languages:n,old_languages:a,error:`GQL update error: ${t?.errors}`,sourceName:s?v:""}))}else!s&&a.length>0&&(i.multilingualState=g,this.dispatchContextUpdateEvent(i))}catch(t){const{message:a}=t;e.f(this,r.u({reason:"failure",languages:n||[],old_languages:[],error:`Exception thrown: ${a}`,sourceName:s?v:""}))}}defaultPreferredLanguageDecider(e){return this.fullPreferredLanguages&&this.fullPreferredLanguages.length>0?e?[...new Set([...this.fullPreferredLanguages.split(","),...e])]:e:this.preferredLanguages&&this.preferredLanguages.length>0?[this.preferredLanguages]:null}async initializeTranslationSettings(){const t=this.fetchTranslationSettingFromCookie(),a=await this.fetchTranslationSettingFromGQL();let i,n={...this.translationContextValue};if(t&&(n={...n,...t}),null!==a&&a!==t?.isTranslationActive&&(n={...n,isTranslationActive:a},i=r.T.BACKEND),null===t&&null===a){const[e,t]=this.getFallbackIsTranslationActive();i=t,n={...n,isTranslationActive:e}}this.dispatchContextUpdateEvent(n),null===a&&void 0!==n.isTranslationActive&&this.saveTranslationSettingInAccount(n.isTranslationActive),i&&(n.isTranslationActive?e.f(this,r.v(i)):e.f(this,r.w(i))),sessionStorage.setItem(e.a0.TranslationInitialized,Date.now().toString()),e.f(this,l.j(!!n.isTranslationActive))}getFallbackIsTranslationActive(){return this.defaultImmersiveOn?[!0,r.T.MULTILINGUAL_ON]:(this.isNewImmersiveVisit,this.isNewAccountAge?[!0,r.T.ACCOUNT_AGE]:[!1,r.T.DEFAULT_OFF])}syncTranslationSettingsWithCookie(){const t=this.fetchTranslationSettingFromCookie();let a={...this.translationContextValue};t&&t.isTranslationActive!==a.isTranslationActive&&(a={...a,...t},this.dispatchContextUpdateEvent(a)),e.f(this,l.j(!!a.isTranslationActive))}fetchTranslationSettingFromCookie(){const t=e.ak.get(e.ho)??"";return e.hp(t)}async fetchTranslationSettingFromGQL(){if(!this.withBackendSetting)return null;try{const{data:t}=await this.requestClientGQL({operation:e.C.IdentityImmersiveTranslationSetting}),a=t.identity?.preferences?.isMachineTranslationImmersive;return null==a||a===e.hc.Unset?null:a===e.hc.Enabled}catch{}return null}async saveTranslationSettingInAccount(t){if(!this.withBackendSetting)return null;try{await this.requestClientGQL({operation:e.C.UpdateAccountPreferences,variables:{input:{isMachineTranslationImmersive:t?e.hc.Enabled:e.hc.Disabled}}})}catch{}return null}dispatchContextUpdateEvent(e){const t=new CustomEvent("update-translation-context",{bubbles:!0,composed:!0,detail:e});this.dispatchEvent(t)}isSettingInitialized(){const t=localStorage.getItem(e.a0.LoginTime);if(t&&this.withBackendSetting){const e=new Date(t);if(Date.now()-e.getTime()<2e4)return!1}const a=sessionStorage.getItem(e.a0.TranslationInitialized);return!!(a&&Date.now()-parseInt(a,10)<36e5)}render(){return a.x`<div> <slot></slot> </div>`}};e._([e.aA({context:e.aC,subscribe:!0}),e.N()],N.prototype,"translationContextValue",void 0),e._([e.n({type:Boolean,attribute:"is-new-account-age"})],N.prototype,"isNewAccountAge",void 0),e._([e.n({type:Boolean,attribute:"is-new-immersive-visit"})],N.prototype,"isNewImmersiveVisit",void 0),e._([e.n({type:Boolean,attribute:"with-backend-setting"})],N.prototype,"withBackendSetting",void 0),e._([e.n({type:String,attribute:"preferred-languages"})],N.prototype,"preferredLanguages",void 0),e._([e.n({type:String,attribute:"full-preferred-languages"})],N.prototype,"fullPreferredLanguages",void 0),e._([e.n({type:Boolean,attribute:"default-immersive-on"})],N.prototype,"defaultImmersiveOn",void 0),N=e._([e.e("translation-settings-admin")],N)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./B5aCBAWI.js",import.meta.url,"B5aCBAWI");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("Baruuhvw",["GlDbwxoG","s_Igk1Yn","B5aCBAWI","CC2wUKE8"],(async(t,e,o,i)=>{let a=class extends e.s{constructor(){super(...arguments),this.position="bottom",this.mouseEnterDelay=750,this.triggerEvent="hover",this.appearance="neutral",this.emitter=i.r(this),this._timeoutID=null,this._popperController=new o.P(this,{position:this.position,variantFlipOrder:{start:"s",middle:"m",end:"e"},referenceElementKey:"referenceElement",popperElementKey:"_tooltip"}),this._eventUsedMap=new WeakMap,this.updated=t=>{t.has("position")&&this._popperController.updateOptions({position:this.position})},this.handleDocumentClick=t=>{if(!(t.target instanceof HTMLElement)||this.hidden)return;if(t.target.closest(this.tagName.toLowerCase())===this)return;this._eventUsedMap.has(t)||this.close()},this.handleEscape=t=>{"Escape"===t.key&&this.close()},this.addListenersWhileOpened=()=>{document.addEventListener("click",this.handleDocumentClick),document.addEventListener("keydown",this.handleEscape)},this.cleanupListenersWhileOpened=()=>{document.removeEventListener("click",this.handleDocumentClick),document.removeEventListener("keydown",this.handleEscape)}}get referenceElement(){return this.triggers[0]??this}static get styles(){return[e.i`:host{display:inline-block;position:relative;color:var(--tooltip-content)}:host([appearance=neutral]){--tooltip-background:var(--color-tooltip-bg-neutral);--tooltip-content:var(--color-tooltip-text-neutral)}:host([appearance=inverted]){--tooltip-background:var(--color-tooltip-bg-inverted);--tooltip-content:var(--color-tooltip-text-inverted)}:host([appearance=primary]){--tooltip-background:var(--color-tooltip-bg-primary);--tooltip-content:var(--color-tooltip-text-primary)}#faceplate-tooltip{font:var(--font-12-16-semibold);background-color:var(--tooltip-background);color:var(--tooltip-content);border-radius:.25rem;box-shadow:var(--boxshadow-tooltip);justify-content:center;align-items:center;padding:.5rem;display:inline-flex;width:max-content;isolation:isolate;z-index:var(--faceplate-tooltip-z-index,1)}article{display:flex;gap:.375rem}#faceplate-tooltip::after{display:block;content:'';width:8px;height:8px;position:absolute;background-color:var(--tooltip-background)}#faceplate-tooltip[position=bottom-end]::after,#faceplate-tooltip[position=bottom-start]::after,#faceplate-tooltip[position=top-end]::after,#faceplate-tooltip[position=top-start]::after{--max-arrow-x-travel-tooltip:calc(var(--tooltip-width, 2rem) - 1rem);--max-arrow-x-travel-target:calc(var(--target-width, 1rem) / 2);--max-arrow-x-distance:max(
            min(var(--max-arrow-x-travel-target), var(--max-arrow-x-travel-tooltip)),
            0.5rem
          )}#faceplate-tooltip[position=bottom-start]::after,#faceplate-tooltip[position=top-start]::after{inset-inline-start:var(--max-arrow-x-distance)}#faceplate-tooltip[position=bottom-end]::after,#faceplate-tooltip[position=top-end]::after{inset-inline-end:var(--max-arrow-x-distance)}#faceplate-tooltip[position=left-end]::after,#faceplate-tooltip[position=left-start]::after,#faceplate-tooltip[position=right-end]::after,#faceplate-tooltip[position=right-start]::after{--max-arrow-y-travel-tooltip:calc(var(--tooltip-height, 2rem) - 1rem);--max-arrow-y-travel-target:calc(var(--target-height, 2rem) / 2);--max-arrow-y-distance:max(
            min(var(--max-arrow-y-travel-target), var(--max-arrow-y-travel-tooltip)),
            0.5rem
          )}#faceplate-tooltip[position=left-start]::after,#faceplate-tooltip[position=right-start]::after{top:var(--max-arrow-y-distance)}#faceplate-tooltip[position=left-end]::after,#faceplate-tooltip[position=right-end]::after{bottom:var(--max-arrow-y-distance)}#faceplate-tooltip[position|=bottom]::after{top:0;transform:translateY(-50%) rotate(45deg);box-shadow:-1px -1px 2px rgba(0,0,0,.05)}#faceplate-tooltip[position|=top]::after{bottom:0;transform:translateY(50%) rotate(45deg);box-shadow:1px 1px 2px rgba(0,0,0,.05)}#faceplate-tooltip[position|=right]::after{inset-inline-start:0;transform:translateX(-38%) rotate(45deg);box-shadow:-2px 0 2px rgba(0,0,0,.05)}#faceplate-tooltip[position|=left]::after{inset-inline-end:0;transform:translateX(38%) rotate(45deg);box-shadow:0 -2px 2px rgba(0,0,0,.05)}#faceplate-tooltip[position^=auto]::after{display:none}`,o.P.defaultPopperContentStyles]}get hidden(){return"closed"===this._popperController.currentState.state}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this.cleanupListenersWhileOpened()}updateCustomProperties(){if("faceplate-tooltip"!==this.tagName.toLocaleLowerCase())return;const{clientHeight:t=null,clientWidth:e=null}=this.referenceElement,{clientHeight:o=null,clientWidth:i=null}=this._tooltip;t&&e&&o&&i&&(this.style.setProperty("--target-width",`${Math.round(e)}px`),this.style.setProperty("--target-height",`${Math.round(t)}px`),this.style.setProperty("--tooltip-width",`${Math.round(i)}px`),this.style.setProperty("--tooltip-height",`${Math.round(o)}px`))}show(){this.emitter.dispatch("open"),this.updateCustomProperties(),this._popperController.open().then((()=>{this.hidden||(this.addListenersWhileOpened(),this.emitter.dispatch("opened"))}))}close(){return this.cleanupListenersWhileOpened(),this.emitter.dispatch("close"),this._popperController.close().then((()=>{this.hidden&&this.emitter.dispatch("closed")}))}handleClick(t){this._eventUsedMap.set(t,!0),"click"===this.triggerEvent&&(this.hidden?this.show():this.close())}handleMouseenter(){"hover"===this.triggerEvent&&(this.cleanupTooltips(),this._timeoutID=window.setTimeout((()=>{this.querySelector(":focus, :hover")&&this.show()}),this.mouseEnterDelay))}handleMouseleave(){this.close(),this.cleanupTooltips()}cleanupTooltips(){this._timeoutID&&(window.clearTimeout(this._timeoutID),this._timeoutID=null)}render(){const t=this._popperController.actualPosition||this.position;return e.x` <slot name="trigger" aria-describedby="faceplate-tooltip" faceplate-popper-trigger @click="${this.handleClick}" @mouseenter="${this.handleMouseenter}" @mouseleave="${this.handleMouseleave}" @focusin="${this.handleMouseenter}" @focusout="${this.handleMouseleave}"></slot> <article id="faceplate-tooltip" role="tooltip" position="${t}" faceplate-popper-content> <slot class="icon" name="icon"></slot> <span> <slot></slot> </span> </article> `}};return t._([t.n({type:String})],a.prototype,"position",void 0),t._([t.n({type:Number,attribute:"enter-delay"})],a.prototype,"mouseEnterDelay",void 0),t._([t.n({type:String,attribute:"trigger-event"})],a.prototype,"triggerEvent",void 0),t._([t.n({type:String,reflect:!0})],a.prototype,"appearance",void 0),t._([t.at({slot:"trigger",flatten:!0})],a.prototype,"triggers",void 0),t._([t.at({slot:"icon",flatten:!0})],a.prototype,"icons",void 0),t._([t.Q("#faceplate-tooltip")],a.prototype,"_tooltip",void 0),a=t._([t.e("faceplate-tooltip")],a),{get FaceplateTooltip(){return a}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DrrjN1Nt.js",import.meta.url,"DrrjN1Nt");SML.di("./C0I_JWye.js",import.meta.url,"C0I_JWye");SML.di("./B8B7_bfl.js",import.meta.url,"B8B7_bfl");SML.di("./jOi_w9kT.js",import.meta.url,"jOi_w9kT");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("BbX3H2B5",["GlDbwxoG","s_Igk1Yn","DrrjN1Nt","C0I_JWye","B8B7_bfl","jOi_w9kT","CC2wUKE8"],(async(e,n,t)=>{let a=class extends t.T{constructor(){super(...arguments),this.hasChips=!1,this.hasTrailingContent=!1,this.clearable=!0,this.hideLeadingIconWithInput=!1,this.centerPlaceholder=!1}static get styles(){return[super.styles,n.i`:host{margin:var(--spacer-2xs) var(--spacer-md);display:inline-flex}label{flex-grow:1}input{background:0 0;border:none;outline:0;width:100%;text-overflow:ellipsis}input::placeholder{color:var(--color-neutral-content-weak)}:host([center-placeholder]) .leadingIcon:not(:empty)~.input-container input::placeholder{text-align:center}:host([center-placeholder]) .label-container:not(.label-container-trailing) .leadingIcon:not(:empty)~.input-container input::placeholder{transform:translateX(var(--spacer-sm))}:host([center-placeholder]) .label-container-trailing .leadingIcon:not(:empty)~.input-container input::placeholder{transform:translateX(var(--spacer-lg))}.label-container,:host([faceplate-validity=invalid]) .label-container,:host([faceplate-validity=valid]) .label-container{border:var(--rem2) solid var(--color-input-border);box-shadow:0 0 0 var(--rem2) transparent}.label-container{align-items:center;box-sizing:border-box;border-radius:var(--radius-full);border:var(--rem2) solid var(--color-input-plain-border);padding-inline:var(--spacer-md)}.label-container-chips{background:var(--color-input-plain)}.label-container:focus-within{background:var(--color-input-plain);border-color:var(--color-neutral-border-strong)}@media (hover:hover){.label-container:focus-within:hover,.label-container:hover{background:var(--color-input-secondary-hover)}}:host .label-container{padding-inline-end:var(--spacer-2xs)}:host faceplate-form-helper-text:not(.helper-text-without-label-with-trailing){padding-inline-end:var(--spacer-2xs)}.label-container.label-container-trailing{padding-inline-end:var(--rem2)}.input-container{align-items:center;display:flex;font:var(--font-14-20-regular);position:relative;transform:translateY(0);transition:transform 150ms ease;width:100%;padding-block:var(--spacer-xs)}.leadingIcon{display:inline-flex;font-size:var(--rem16);margin-inline-end:var(--spacer-xs)}:host([hide-leading-icon-with-input]) .label-container:has(input:not(:placeholder-shown)) .leadingIcon{display:none}.label-container-chips slot[name=chips]{display:inline-flex;margin-inline-end:var(--spacer-xs)}.clear-icon-container{height:var(--rem32);width:var(--rem32);flex-shrink:0}.trailing-content-container{display:none;align-items:center;flex-shrink:0}.trailing-content-container.has-trailing-content{display:flex}.trailing-divider{height:var(--rem24);border:0;border-inline-start:var(--rem1) solid var(--color-neutral-border-weak);margin:0;margin-inline-start:var(--spacer-2xs);margin-inline-end:var(--spacer-2xs);flex-shrink:0}.leadingIcon,:slot[name=chips],:slot[name=clearIcon],:slot[name=trailingContent]{display:flex;flex-shrink:0}`]}render(){return n.x` <label> <div class="${e.H({"label-container":!0,"label-container-chips":this.hasChips,"label-container-trailing":this.hasTrailingContent,"without-label":!0})}"> <span class="leadingIcon"> <slot name="leadingIcon"> ${n.aq({size:n.h.Small,attributes:{"aria-hidden":"true"}})} </slot> </span><slot name="chips" @slotchange="${()=>{this.hasChips=this.chipElements.length>0}}"></slot>${this.inputContainer(n.x` <input type="text" enterkeyhint="${n.l(this.enterkeyhint)}" @change="${this.onChange}" @input="${this.onInput}" .value="${t.l(this.value)}" name="${n.l(this.name)}" maxlength="${n.l(this.maxlength)}" placeholder="${n.l(this.placeholder)}" ?disabled="${this.disabled}" ?required="${this.required}" autocomplete="${n.l(this.autocomplete)}" inputmode="${n.l(this.inputmode)}"> `)} <span class="clear-icon-container"> ${this.clearable&&this.value.length>0?n.x`<slot name="clearIcon"></slot>`:""} </span> ${this.hasTrailingContent?n.x`<hr class="trailing-divider">`:""} <span class="${e.H({"trailing-content-container":!0,"has-trailing-content":this.hasTrailingContent})}"> <slot name="trailingContent" @slotchange="${()=>{this.hasTrailingContent=this.trailingContentElements.length>0}}"></slot> </span> ${this.screenReaderContent?n.x`<faceplate-screen-reader-content> ${this.screenReaderContent} </faceplate-screen-reader-content>`:""} </div> </label> `}};return e._([e.N()],a.prototype,"hasChips",void 0),e._([e.N()],a.prototype,"hasTrailingContent",void 0),e._([e.l({slot:"chips"})],a.prototype,"chipElements",void 0),e._([e.l({slot:"trailingContent"})],a.prototype,"trailingContentElements",void 0),e._([e.Q(".label-container")],a.prototype,"labelContainer",void 0),e._([e.n({type:String})],a.prototype,"enterkeyhint",void 0),e._([e.n({type:String})],a.prototype,"maxlength",void 0),e._([e.n({type:Boolean})],a.prototype,"clearable",void 0),e._([e.n({type:Boolean,attribute:"hide-leading-icon-with-input"})],a.prototype,"hideLeadingIconWithInput",void 0),e._([e.n({type:Boolean,attribute:"center-placeholder"})],a.prototype,"centerPlaceholder",void 0),a=e._([e.e("faceplate-search-input")],a),{get F(){return a}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./DMfuJHXs.js",import.meta.url,"DMfuJHXs");SML.di("./DzMpUNmB.js",import.meta.url,"DzMpUNmB");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./Dwuzm5vN.js",import.meta.url,"Dwuzm5vN");SML.di("./CKCUSZ1J.js",import.meta.url,"CKCUSZ1J");SML.di("./CdOEuw7t.js",import.meta.url,"CdOEuw7t");SML.di("./CdFYkV-r.js",import.meta.url,"CdFYkV-r");SML.di("./B5upT-N6.js",import.meta.url,"B5upT-N6");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./B8v3CYv9.js",import.meta.url,"B8v3CYv9");SML.di("./BH4VvyCw.js",import.meta.url,"BH4VvyCw");
SML.dm("Bdma5j3T",["GlDbwxoG","DMfuJHXs","DzMpUNmB","s_Igk1Yn","Dwuzm5vN","CKCUSZ1J","CdOEuw7t","B5upT-N6","CdFYkV-r","CC2wUKE8","B8v3CYv9","BH4VvyCw"],(async(e,t,a,n,i,r,o,s)=>{const{svg:c}=n.g(),l=n.m(c`<path d="M14.7 2H5.3C3.48 2 2 3.48 2 5.3v9.4C2 16.52 3.48 18 5.3 18h9.4c1.82 0 3.3-1.48 3.3-3.3V5.3C18 3.48 16.52 2 14.7 2zm-1.42 8.17l-2.77 2.77c-.28.28-.74.28-1.02 0l-2.77-2.77a1.943 1.943 0 112.75-2.75l.53.53.53-.53a1.943 1.943 0 112.75 2.75z"></path>`,"0 0 20 20","custom-feed-fill");var u,$;!function(e){e.QUERY="query",e.SUBREDDIT="subreddit",e.MULTIREDDIT="multireddit",e.PROFILE="profile"}(u||(u={})),function(e){e.COLLAPSED_SECTIONS="collapsedSections",e.CONVERSATION_ID="cId",e.FLAIR="flair",e.QUERY="query",e.RECENT_SEARCHES_COUNT="recentSearchesCount"}($||($={}));const E="recent-search-item";let T=class extends n.s{constructor(){super(...arguments),this.handleKeyDown=t=>{"Tab"===t.key&&t.target instanceof HTMLElement&&(t.shiftKey&&t.target.className.includes(e.g1)?(this.focus(),t.preventDefault(),t.stopPropagation()):t.shiftKey||t.target.className.includes(e.g1)||(this.querySelector(`.${e.g1}`)?.focus(),t.preventDefault(),t.stopPropagation()))}}focus(){this.shadowRoot?.querySelector("a")?.focus()}render(){if(!this.recentSearchItem)return;const{flair:c,icon:E,isNsfw:T,isQuarantined:I,name:R,path:d,type:m}=this.recentSearchItem;let h,k;if(m!==u.QUERY)h=d;else try{const t=new URL(d,window.location.origin);t.searchParams.set($.CONVERSATION_ID,s.a.get(e.dI.Qf)),h=t.toString()}catch{h=d}if(E||T){const e=T?"Recent search not safe for work icon":`${R} icon`,t=T?`${window?.CLIENT_CONFIG?.STATIC_BASE_URL}assets/avatar_over18.png`:E;k=n.x`<faceplate-img class="rounded-full h-lg w-lg flex items-center justify-center static" loading="lazy" src="${n.l(t)}" width="16" height="16" alt="${e}"></faceplate-img>`}else k=function(e){return e===u.SUBREDDIT?n.x`${r.c({size:n.I.Small,attributes:{"aria-hidden":"true",className:"flex items-center justify-center h-100 ml-px"}})}`:e===u.MULTIREDDIT?n.x`${l({size:n.I.Small,attributes:{"aria-hidden":"true",className:"flex items-center justify-center h-100 ml-px"}})} `:i.c({size:n.I.Small})}(m);const p=I?n.x`<span class="text-alert-caution inline-block"> ${t.c(t.g()[t.C.QUARANTINED])} </span>`:n.x``,D=c?n.x`<span class="text-alert-caution inline-block" data-test-id="recent-search-flair-item"> ${o.a({backgroundColor:c.colorHint?.backgroundColor,className:"text-12 px-sm py-xs",text:c.text,color:"DEFAULT"===c.colorHint?.textColor?e.ey.Dark:c.colorHint?.textColor,richText:c.richtext})} </span>`:n.x``;return a.l({anchorAttributes:{"aria-label":`Recent search for ${R} ${c?.text??""}`,onkeydown:this.handleKeyDown},attributes:{"data-label":m===u.QUERY?R:"",role:"menuitem",tabindex:"-1"},href:h,onClick:this.onClickLink,leadingAvatar:k,label:n.x` <div class="flex items-center px-4 py-2 gap-2xs align-baseline"> <div class="text-neutral-content flex-grow">${R}</div> ${D} </div>`,trailingSlot:n.x`<slot name="dismiss-button-container" @click="${this.onClickDismiss}" @keydown="${()=>{}}"></slot>`,description:p});}};return T.styles=[e.t],e._([e.n({type:Function})],T.prototype,"onClickLink",void 0),e._([e.n({type:Function})],T.prototype,"onClickDismiss",void 0),e._([e.n({type:Object})],T.prototype,"recentSearchItem",void 0),T=e._([e.e(E)],T),{R:E,get S(){return $},get a(){return u},c:l}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./CZPCygeT.js",import.meta.url,"CZPCygeT");SML.di("./CSQNLuDY.js",import.meta.url,"CSQNLuDY");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./DNASVThB.js",import.meta.url,"DNASVThB");SML.di("./B49dh6xU.js",import.meta.url,"B49dh6xU");SML.di("./FagDXDzk.js",import.meta.url,"FagDXDzk");SML.di("./DdoeBlGT.js",import.meta.url,"DdoeBlGT");SML.di("./UWmwcM6M.js",import.meta.url,"UWmwcM6M");SML.di("./Cjw2ByTc.js",import.meta.url,"Cjw2ByTc");SML.di("./BzGhp_5F.js",import.meta.url,"BzGhp_5F");SML.di("./B5aCBAWI.js",import.meta.url,"B5aCBAWI");SML.di("./CIi1v1l_.js",import.meta.url,"CIi1v1l_");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./B9pe2eYY.js",import.meta.url,"B9pe2eYY");SML.di("./B8B7_bfl.js",import.meta.url,"B8B7_bfl");SML.di("./C-d7BR1A.js",import.meta.url,"C-d7BR1A");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");SML.di("./COiG0TCO.js",import.meta.url,"COiG0TCO");SML.di("./BTMXBfyY.js",import.meta.url,"BTMXBfyY");SML.di("./CLJ5hH8v.js",import.meta.url,"CLJ5hH8v");SML.di("./2Pp2AIeo.js",import.meta.url,"2Pp2AIeo");SML.di("./DhQW5pQL.js",import.meta.url,"DhQW5pQL");SML.di("./CDFmhs-S.js",import.meta.url,"CDFmhs-S");SML.di("./MX9FaClF.js",import.meta.url,"MX9FaClF");SML.di("./FaYkg4Io.js",import.meta.url,"FaYkg4Io");SML.di("./D9o05KHZ.js",import.meta.url,"D9o05KHZ");SML.di("./B4wbfaco.js",import.meta.url,"B4wbfaco");SML.di("./DK2EuOAl.js",import.meta.url,"DK2EuOAl");SML.di("./jOi_w9kT.js",import.meta.url,"jOi_w9kT");SML.di("./C0I_JWye.js",import.meta.url,"C0I_JWye");SML.di("./DrrjN1Nt.js",import.meta.url,"DrrjN1Nt");SML.di("./Bre143cN.js",import.meta.url,"Bre143cN");SML.di("./BStJq-t0.js",import.meta.url,"BStJq-t0");SML.di("./DCovP8x6.js",import.meta.url,"DCovP8x6");SML.di("./CjqcW8YI.js",import.meta.url,"CjqcW8YI");SML.di("./DS7BJDdq.js",import.meta.url,"DS7BJDdq");SML.di("./Dg8LS6-X.js",import.meta.url,"Dg8LS6-X");SML.di("./DoOFmcQZ.js",import.meta.url,"DoOFmcQZ");SML.di("./DdIwQUSk.js",import.meta.url,"DdIwQUSk");SML.di("./DzMpUNmB.js",import.meta.url,"DzMpUNmB");SML.di("./DtcD-j6p.js",import.meta.url,"DtcD-j6p");
SML.dm("BdueHHHl",["GlDbwxoG","CZPCygeT","CSQNLuDY","CC2wUKE8","DNASVThB","B49dh6xU","FagDXDzk","DdoeBlGT","UWmwcM6M","Cjw2ByTc","B5aCBAWI","CIi1v1l_","BzGhp_5F","s_Igk1Yn","B9pe2eYY","B8B7_bfl","C-d7BR1A","D-MAMWlw","DRM-oTYq","COiG0TCO","BTMXBfyY","CLJ5hH8v","2Pp2AIeo","DhQW5pQL","CDFmhs-S","MX9FaClF","FaYkg4Io","D9o05KHZ","B4wbfaco","DK2EuOAl","jOi_w9kT","C0I_JWye","DrrjN1Nt","Bre143cN","BStJq-t0","DCovP8x6","CjqcW8YI","DS7BJDdq","Dg8LS6-X","DoOFmcQZ","DdIwQUSk","DzMpUNmB","DtcD-j6p"],(async(t,e,i,s,o,a,h,n,r,E,T,d)=>({ModActionsController:class{constructor(s,{getThingIdFn:o,focusChatTextareaFn:l,getIsProfilePostFn:_}){this.publishEvent=(t,e)=>{a.p(this._getThingId(),t,e)},this.modActionMenuClickEvent=e=>{let i="",s="";switch(this.itemType){case t.M.Award:i="awardOnContentId",s="award";break;case t.M.Comment:i="commentId",s="comment";break;case t.M.Post:default:i="postId",s="post"}return t.b({source:"moderator",action:"click",noun:e},{[i]:this._getThingId(),[s]:{id:this._getThingId()},action_info:{reason:this.modPartialPath}})},this._getPageType=t.w,this._getHandleReportToggle=e=>async()=>{const i=e===h.M.IgnoreReports,s=i?h.p:h.a,o=i?h.c:h.b;t.f(this._host,this.isPost?s():o());try{const t=[this._getThingId()],s=await(i?this.modBulkActions.modBulkIgnore(t):this.modBulkActions.modBulkUnignore(t));if(!s?.ok)throw new Error("Operation failed");return this.publishEvent(e,i),this.showSuccessToast(e),i}catch{return this.showErrorToast(e),!i}},this._getHandleDistinguishToggle=e=>async()=>{const i=e===h.M.Distinguish,s=i?"distinguish_as_mod":"undistinguish_as_mod";t.f(this._host,this.modActionMenuClickEvent(s));let o=!0;this.publishEvent(e,i);try{const s=await this.updateDistinguishState(i?t.d0.ModDistinguished:t.d0.None);if(!s?.ok)throw new Error("Operation failed");this.showSuccessToast(e)}catch{this.publishEvent(e,!i),this.showErrorToast(e),o=!1}return this._host.requestUpdate(),o?i:!i},this._getHandleStickyToggle=e=>async()=>{const i=e===h.M.Sticky,s=i?"sticky":"unsticky";t.f(this._host,this.modActionMenuClickEvent(s));let o=!0;this.publishEvent(e,i);try{const t=await this.updateStickyState(i);if(!t?.ok)throw new Error("Operation failed");this.showSuccessToast(e)}catch{this.publishEvent(e,!i),this.showErrorToast(e),o=!1}return this._host.requestUpdate(),o?i:!i},this._getHandleLockedToggle=e=>async()=>{const i=e===h.M.Lock,s=i?"lock":"unlock";t.f(this._host,this.modActionMenuClickEvent(s));let o=!0;this.publishEvent(e,i);try{let s;if(this.isPost){const t=[this._getThingId()];s=await(i?this.modBulkActions.modBulkLock(t):this.modBulkActions.modBulkUnlock(t))}else s=await this.updateLockedState(i?t.d1.Locked:t.d1.None);if(!s?.ok)throw new Error("Operation failed");this.showSuccessToast(e)}catch{this.publishEvent(e,!i),this.showErrorToast(e),o=!1}return this._host.requestUpdate(),o?i:!i},this._getHandleMarkNsfwToggle=e=>async()=>{let i=!0;const s=e===h.M.MarkNsfw;if(!this.isPost)return!s;const o=s?"mark_nsfw":"unmark_nsfw";t.f(this._host,this.modActionMenuClickEvent(o));const a=[this._getThingId()],n=await(s?this.modBulkActions.modBulkMarkNSFW(a):this.modBulkActions.modBulkUnmarkNSFW(a));return n?.ok?(this.showSuccessToast(e),this.publishEvent("isPostNsfw",s)):(this.showErrorToast(e),i=!1),this._host.requestUpdate(),i?s:!s},this._getHandleMarkSpoilerToggle=e=>async()=>{let i=!0;const s=e===h.M.MarkSpoiler;if(!this.isPost)return!s;const o=s?"mark_spoiler":"unmark_spoiler";t.f(this._host,this.modActionMenuClickEvent(o));const a=[this._getThingId()],n=await(s?this.modBulkActions.modBulkMarkSpoiler(a):this.modBulkActions.modBulkUnmarkSpoiler(a));return n?.ok?(this.showSuccessToast(e),this.publishEvent("isPostSpoiler",s)):(this.showErrorToast(e),i=!1),this._host.requestUpdate(),i?s:!s},this.handleApproveContentOptimistic=()=>{this.publishEvent(h.M.ApproveContentOptimistic,!0)},this._getHandleModApproval=e=>async()=>{this.handleApproveContentOptimistic(),t.f(this._host,this.modActionMenuClickEvent("approve"));try{const t=await this.modBulkActions.modBulkApprove([this._getThingId()]);return t?.ok?(this.publishEvent(e,!0),this._resetAddRemovalReasonForm(),!0):(this.showErrorToast(e),!1)}catch{return this.showErrorToast(e),!1}},this._getShareToModChat=t=>async t=>(await this._focusChatTextarea(),!0),this._getViewChatThread=t=>async t=>(await this._focusChatTextarea(!0),!0),this.handleRemoveContentOptimistic=()=>{this.publishEvent(h.M.RemoveContentOptimistic,!0)},this.handleRemoveContentAsSpamOptimistic=()=>{this.publishEvent(h.M.RemoveContentAsSpamOptimistic,!0)},this.handleConfirmRemovalOptimistic=()=>{this.publishEvent(h.M.ConfirmRemovalOptimistic,!0)},this._getHandleModRemoval=e=>async()=>{switch(e){case h.M.RemoveContent:this.handleRemoveContentOptimistic();break;case h.M.RemoveContentAsSpam:this.handleRemoveContentAsSpamOptimistic();break;case h.M.ConfirmRemoval:this.handleConfirmRemovalOptimistic()}const i=e===h.M.RemoveContentAsSpam;let s=e===h.M.ConfirmRemoval?"confirm_removal":"remove";e===h.M.RemoveContentAsSpam&&(s="spam"),t.f(this._host,this.modActionMenuClickEvent(s));try{const t=await this.modBulkActions.modBulkRemove([this._getThingId()],i);return t?.ok?(this.publishEvent(e,!0),this.dispatchRequestReload(),!0):(this.showErrorToast(e),!1)}catch{return this.showErrorToast(e),!1}},this._getHandleOpenEditPostFlairModal=()=>async()=>{const e=this._getThingId();if(!e)return;t.f(this._host,this.modActionMenuClickEvent("flair"));const i=this._getPageType();if((this._getIsProfilePost?.()??!1)&&i&&d.l.has(i))T.s(e,{isEditMode:!0});else{await this._activateFeature({name:t.d2,queryParams:{isLoggedin:!0,selectedIds:e},renderMode:t.P.Contents});const i=document.getElementById(n.g(e));i?.showModal()}},this._getHandleAddToHighlights=()=>async()=>{const e=this._getThingId();e&&await this._activateFeature({name:t.d3,routeParams:{postId:e},renderMode:t.P.Contents})},this._getHandleRemoveFromHighlights=()=>async()=>{const e=this._getThingId();if(e){this.publishEvent(h.M.RemoveHighlightedPost,!1);try{await this.removeHighlightedPost(e),this.showSuccessToast(h.M.RemoveHighlightedPost),t.f(this._host,h.u(e,t.w())),t.p(t.T.ReloadHighlights)}catch(t){this.showErrorToast(h.M.RemoveHighlightedPost),this.publishEvent(h.M.RemoveHighlightedPost,!0)}}},this._resetAddRemovalReasonForm=()=>{this._host.dispatchEvent(new i.A(""))},this.handleIgnoreReports=this._getHandleReportToggle(h.M.IgnoreReports),this.handleUnignoreReports=this._getHandleReportToggle(h.M.UnignoreReports),this.handleDistinguish=this._getHandleDistinguishToggle(h.M.Distinguish),this.handleUndistinguish=this._getHandleDistinguishToggle(h.M.Undistinguish),this.handleSticky=this._getHandleStickyToggle(h.M.Sticky),this.handleUnsticky=this._getHandleStickyToggle(h.M.Unsticky),this.handleUpdateHighlightedPost=this._getHandleAddToHighlights(),this.handleRemoveHighlightedPost=this._getHandleRemoveFromHighlights(),this.handleLock=this._getHandleLockedToggle(h.M.Lock),this.handleUnlock=this._getHandleLockedToggle(h.M.Unlock),this.handleMarkNsfw=this._getHandleMarkNsfwToggle(h.M.MarkNsfw),this.handleUnmarkNsfw=this._getHandleMarkNsfwToggle(h.M.UnmarkNsfw),this.handleMarkSpoiler=this._getHandleMarkSpoilerToggle(h.M.MarkSpoiler),this.handleUnmarkSpoiler=this._getHandleMarkSpoilerToggle(h.M.UnmarkSpoiler),this.handleConfirmRemoval=this._getHandleModRemoval(h.M.ConfirmRemoval),this.handleRemoveContent=this._getHandleModRemoval(h.M.RemoveContent),this.handleRemoveContentAsSpam=this._getHandleModRemoval(h.M.RemoveContentAsSpam),this.handleApproveContent=this._getHandleModApproval(h.M.ApproveContent),this.handleShareToModChat=this._getShareToModChat(h.M.ShareToModChat),this.handleViewChatThread=this._getViewChatThread(h.M.ViewChatThread),this.handleOpenEditPostFlairModal=this._getHandleOpenEditPostFlairModal(),this.handleSnoozeReporter=()=>{},this.handleUnsnoozeReporter=()=>{},this.handleAddRemovalReason=()=>{this._host.dispatchEvent(new i.A(this._getThingId())),t.f(this._host,this.modActionMenuClickEvent("add_removal_reason"))},this.handleAdjustCrowdControl=()=>{this._host.dispatchEvent(t.c(e.O,{postId:this._getThingId()}))},this.handleRemoveContentMenu=()=>this._getHandleModRemoval(h.M.RemoveContent)(),this._activateFeature=async e=>t.j(e),this._getThingId=o,this._getIsProfilePost=_,this._host=s,this._focusChatTextarea=l??E.f,this.modBulkActions=new r.M,this._host?.addController(this)}get isPost(){return this.itemType===t.M.Post}get itemType(){return o.i(this._getThingId())}get modPartialPath(){switch(this.itemType){case t.M.Award:case t.M.Comment:case t.M.Post:return this.itemType.toLowerCase();default:return""}}hostConnected(){Object.keys(h.M).forEach((t=>{this._host.addEventListener(h.M[t],this[`handle${t}`])}))}hostDisconnected(){Object.keys(h.M).forEach((t=>{this._host.removeEventListener(h.M[t],this[`handle${t}`])}))}dispatchFaceplateAlertEvent(e,i,s=""){const o=t.c("faceplate-alert",{level:e,message:i,sourceElement:`modqueue-${this.itemType?.toLowerCase()}`,cause:s});this._host.dispatchEvent(o)}showSuccessToast(e){this.itemType&&this.dispatchFaceplateAlertEvent(t.X.success,E.g(e,!0,this.itemType),`success-${e}`)}showErrorToast(e){this.itemType&&this.dispatchFaceplateAlertEvent(t.X.error,E.g(e,!1,this.itemType),`failed-${e}`)}dispatchRequestReload(){this.itemType===t.M.Comment&&this._host.dispatchEvent(new CustomEvent("reload-shreddit-comment",{bubbles:!0,composed:!0}))}async updateDistinguishState(e){if(this.isPost){const i={input:{postId:this._getThingId(),distinguishType:e,distinguishState:e===t.d0.None?t.d4.None:t.d4.Distinguished}},{data:s}=await t.B({operation:t.C.UpdatePostDistinguishedState,variables:i});return s?.updatePostDistinguishState}{const i={input:{commentId:this._getThingId(),distinguishType:e,distinguishState:e===t.d0.None?t.d5.None:t.d5.Distinguished}},{data:s}=await t.B({operation:t.C.UpdateCommentDistinguishedState,variables:i});return s?.updateCommentDistinguishState}}async updateStickyState(e){if(this.isPost){const i={input:{postId:this._getThingId(),sticky:e,toProfile:!1}},{data:s}=await t.B({operation:t.C.UpdatePostStickyState,variables:i});return s?.updatePostStickyState}{const i={input:{commentId:this._getThingId(),sticky:e}},{data:s}=await t.B({operation:t.C.UpdateCommentStickyState,variables:i});return s?.updateCommentStickyState}}async updateLockedState(e){if(this.isPost){const i={input:{postId:this._getThingId(),lockedState:e}},{data:s}=await t.B({operation:t.C.UpdatePostLockedState,variables:i});return s?.updatePostLockedState}{const i={input:{commentId:this._getThingId(),lockedState:e}},{data:s}=await t.B({operation:t.C.UpdateCommentLockedState,variables:i});return s?.updateCommentLockedState}}async removeHighlightedPost(t){return s.aP({postId:t})}}})));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("Be8KYlVI",["s_Igk1Yn"],(async a=>{const{svg:h}=a.g();return{l:a.m(h`<path d="M15.995 8.168h-.429V6.61A5.573 5.573 0 0010 1.044 5.573 5.573 0 004.434 6.61v1.557h-.429A2.005 2.005 0 002 10.173v3.692a5.054 5.054 0 005.054 5.054h5.892A5.054 5.054 0 0018 13.865v-3.692a2.005 2.005 0 00-2.005-2.005zM6.233 6.61A3.771 3.771 0 0110 2.843a3.771 3.771 0 013.767 3.767v1.557H6.234V6.61h-.001zm9.967 7.254a3.258 3.258 0 01-3.254 3.254H7.054A3.258 3.258 0 013.8 13.864v-3.692c0-.113.092-.205.205-.205h11.991c.113 0 .205.092.205.205l-.001 3.692zm-7.1-1.676h1.8v2.809H9.1v-2.81z"></path>`,"0 0 20 20","lock")}}));
SML.di("./GGn-LX5b.js",import.meta.url,"GGn-LX5b");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./NlvEu5RR.js",import.meta.url,"NlvEu5RR");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./DWhQjF7E.js",import.meta.url,"DWhQjF7E");SML.di("./jOi_w9kT.js",import.meta.url,"jOi_w9kT");SML.di("./B8B7_bfl.js",import.meta.url,"B8B7_bfl");SML.di("./DhQW5pQL.js",import.meta.url,"DhQW5pQL");SML.di("./9SPCVmFT.js",import.meta.url,"9SPCVmFT");SML.di("./DBv0KuLp.js",import.meta.url,"DBv0KuLp");
SML.dm("BfDgHAr5",["s_Igk1Yn","NlvEu5RR","GlDbwxoG","GGn-LX5b","DWhQjF7E","jOi_w9kT","B8B7_bfl","DhQW5pQL","9SPCVmFT","DBv0KuLp"],(async(e,a,n)=>{let t=class extends e.s{constructor(){super(...arguments),this.blurredContainer=null,this.handleSlotchange=e=>{if(!(e.target instanceof HTMLSlotElement))return;const n=e.target.assignedNodes({flatten:!0});for(const e of n)if(e instanceof a.S){this.blurredContainer=e,this.blurredContainer.setAttribute("blurred","");break}}}static get styles(){return[n.t,n.J(":host {\n  display: block;\n  position: relative;\n  height: 100%;\n}\n.prompt.hidden {\n  display: none;\n}\n.prompt {\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0.45);\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  left: 0;\n  justify-content: center;\n  position: absolute;\n  top: 0;\n  width: 100%;\n}\n.icon {\n  color: hsla(0, 0%, 100%, 0.6);\n  font-size: 36px;\n  text-align: center;\n}\n.title,\n.text {\n  color: hsla(0, 0%, 100%, 0.8);\n  max-width: 300px;\n  text-align: center;\n}\n.title {\n  font: var(--font-title-h3);\n  margin: 18px 0 0;\n}\n.text {\n  font: var(--font-title-h4);\n  font-weight: normal;\n  margin: 10px 0 24px;\n}\n@media (max-width: 320px) {\n  .text {\n    margin: 12px 0 20px;\n  }\n}\n")]}render(){return e.x` <slot @slotchange="${this.handleSlotchange}"></slot> <div class="prompt"> <div class="icon">${e.O({size:e.I.ExtraLarge})}</div> <h3 class="title"> ${"Mature Content"} </h3> <p class="text"> ${"This is mature content and may not be appropriate for certain viewers. To continue, use the app to verify youre over 18 and browse anonymously."} </p> <slot name="view-in-app-button"></slot> </div> `;}};t=n._([n.e("xpromo-nsfw-blocking-container")],t)}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("BhFZ7wtj",["s_Igk1Yn"],(async a=>{const{svg:l}=a.g();return{c:a.m(l`<g clip-path="url(#a)"><path d="M8.704 17a.9.9 0 01-.88-1.087l2.594-12.201a.9.9 0 111.759.374L9.583 16.287a.9.9 0 01-.879.713zm-2.567-1.764a.898.898 0 000-1.272L2.173 10l3.964-3.964a.9.9 0 10-1.273-1.272l-4.6 4.599a.898.898 0 000 1.272l4.6 4.6a.897.897 0 001.274 0l-.001.001zm9 0l4.6-4.6a.898.898 0 000-1.272l-4.6-4.6a.9.9 0 10-1.273 1.272L17.828 10l-3.964 3.964a.898.898 0 00.637 1.536c.231 0 .46-.088.636-.264z"></path></g><defs><clipPath id="a"><path d="M0 0h20v20H0z"></path></clipPath></defs>`,"0 0 20 20","code-inline")}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("BkErX3_5",["s_Igk1Yn"],(async c=>{const{svg:h}=c.g();return{b:c.m(h`<path d="M13 5.02H7v1.8h6v-1.8z"></path><path d="M15.1 1H6.3C4.48 1 3 2.48 3 4.3v11.6C3 17.61 4.39 19 6.1 19h10c.5 0 .9-.4.9-.9s-.4-.9-.9-.9a1.25 1.25 0 010-2.5c.5 0 .9-.4.9-.9V2.9A1.9 1.9 0 0015.1 1zm-1.78 16.2H6.1c-.72 0-1.3-.58-1.3-1.3 0-.66.54-1.2 1.2-1.2h7.33c-.17.38-.28.8-.28 1.25 0 .45.1.87.27 1.25zm1.88-4.3H6c-.43 0-.83.09-1.2.25V4.3c0-.83.67-1.5 1.5-1.5h8.8c.06 0 .1.04.1.1v10z"></path>`,"0 0 20 20","book",!0)}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");
SML.dm("BktidS9F",["GlDbwxoG"],(async a=>{const t={[a.ao.Card]:{get description(){return "Card";}},[a.ao.Compact]:{get description(){return "Compact";}},[a.ao.Classic]:{get description(){return "Compact";}}};var o;return function(a){a.MANUAL="manual",a.AUTOMATIC="automatic"}(o||(o={})),{get B(){return o},C:"/svc/shreddit/:subredditName/community-highlights",F:t,P:"post-deletion-modal",S:"subreddit-mute-modal",a:"subreddit-right-rail__partial"}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./OimaI6pY.js",import.meta.url,"OimaI6pY");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("BmAQnYV7",["GlDbwxoG","OimaI6pY","s_Igk1Yn"],(async(t,e,o)=>{let i=class extends o.s{constructor(){super(...arguments),this.clickLocation=t.v.UNKNOWN,this.enableAdPostHydration=!1,this.storageController=null}async connectedCallback(){await super.connectedCallback(),await this.resolveAdStorageControllerDependencies()}async resolveAdStorageControllerDependencies(){if(!this.enableAdPostHydration)return;const{AdStorageController:t}=await SML.di("./OimaI6pY.js",import.meta.url,"OimaI6pY").then((function(t){return t.j}));this.storageController=new t(this)}async disconnectedCallback(){await super.disconnectedCallback()}handleClick(t){this.storageController&&this.enableAdPostHydration&&this.storageController.storeAdDataInStorage();"auxclick"===t.type&&1!==t.button||e.t({el:this,clickLocation:this.clickLocation})}render(){return o.x`<slot @click="${this.handleClick}" @contextmenu="${this.handleClick}" @auxclick="${this.handleClick}"></slot>`}};i.styles=[t.t],t._([t.n({type:String,attribute:"click-location"})],i.prototype,"clickLocation",void 0),t._([t.n({type:Boolean,attribute:"enable-ad-post-hydration"})],i.prototype,"enableAdPostHydration",void 0),i=t._([t.e("click-location-tracker")],i)}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("BqPzZllT",["s_Igk1Yn"],(async a=>{const{svg:c}=a.g();return{w:a.m(c`<g clip-path="url(#a)"><path d="M18.857 13.69l-6.47-11.21a2.732 2.732 0 00-2.39-1.38c-.93 0-1.86.46-2.39 1.38l-6.47 11.21c-1.06 1.84.27 4.13 2.39 4.13h12.94c2.12 0 3.45-2.3 2.39-4.13zm-7.86-7.65l-.24 5.56h-1.52l-.24-5.56h2zm.04 8.36c-.11.18-.25.33-.44.43-.19.1-.39.16-.61.16-.22 0-.42-.05-.6-.16-.18-.1-.33-.25-.43-.43a1.16 1.16 0 01-.16-.61c0-.22.05-.42.16-.61.11-.18.25-.33.43-.44.18-.11.38-.16.6-.16.22 0 .43.05.61.16s.33.25.44.44c.11.18.16.38.16.61 0 .23-.05.42-.16.61z"></path></g><defs><clipPath id="a"><path d="M0 0h20v20H0z"></path></clipPath></defs>`,"0 0 20 20","warning-fill")}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("BrFgy9Ps",["GlDbwxoG","CC2wUKE8","s_Igk1Yn"],(async(e,i,t)=>{let s=class extends t.s{constructor(){super(...arguments),this.zoomedIn=!1,this.disabled=!1,this.media=null,this._events=new e.E(this),this._click=this._events.define("click",this.onClick),this.fullImageWidth=0,this.fullImageHeight=0,this.checkMediaSize=()=>{this.media?.complete&&(this.fullImageWidth=this.media.naturalWidth,this.fullImageHeight=this.media.naturalHeight,this.disabled=this.fullImageWidth<=this.clientWidth&&this.fullImageHeight<=this.clientHeight,this.zoomedIn=!this.disabled&&this.zoomedIn)},this.checkMediaSizeDebounced=e.a6(this.checkMediaSize,100)}createRenderRoot(){return this}connectedCallback(){super.connectedCallback(),this.media=this.querySelector("img"),this.media&&this.media.addEventListener("load",this.checkMediaSize,{once:!0}),requestAnimationFrame(this.checkMediaSize),window.addEventListener("resize",this.checkMediaSizeDebounced)}firstUpdated(){this.checkMediaSize()}onClick(e){if(this.media&&e.target===this.media&&!this.disabled){let i=0,t=0;if(!this.zoomedIn){const s=this.media.getBoundingClientRect(),h=e.clientX-s.left,l=e.clientY-s.top,a=h/s.width*100,d=l/s.height*100;t=this.fullImageWidth*a/100-this.clientWidth/2,i=this.fullImageHeight*d/100-this.clientHeight/2}this.zoomedIn=!this.zoomedIn,requestAnimationFrame((()=>{this.scrollTo({top:i,left:t})}))}}render(){this.media&&this.media.setAttribute("class",this.getChildClassList()),this.setAttribute("class",this.getClasslist())}getClasslist(){return i.n("flex",this.zoomedIn?"fixed top-0 left-0 w-screen h-screen overflow-auto":"w-full h-full justify-center items-center overflow-hidden")}getChildClassList(){return i.n("z-1",this.disabled?"max-h-full max-w-full":this.zoomedIn?"max-w-none max-h-none m-auto cursor-zoom-out":"max-h-full max-w-full object-contain cursor-zoom-in")}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("resize",this.checkMediaSizeDebounced),this.zoomedIn=!1}};e._([e.N()],s.prototype,"zoomedIn",void 0),e._([e.N()],s.prototype,"disabled",void 0),s=e._([e.e("zoomable-img")],s)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("Bre143cN",["GlDbwxoG","s_Igk1Yn","CC2wUKE8"],(async(e,t,s)=>{class i extends(function(e){var t;return(t=class extends e{}).VERSION="unreleased",t}(t.s)){}let a=class extends i{constructor(){super(...arguments),this.selected=!1,this.disabled=!1,this.current=!1,this.emitter=s.r(this),this.trustedUpdate=!1,this.handleSelection=e=>{e.stopPropagation(),this.disabled||this.dispatchSelectRequest(!this.selected)},this.onClick=e=>{this.handleSelection(e)},this.dispatchSelectRequest=(e=this.selected,t)=>{this.emitter.dispatch("select",{bubbles:!0,composed:!0,detail:{option:this,selected:e,allowSingleDeselection:t}})},this.resetSelection=()=>{this.matchedText="",this.removeAttribute("hidden"),this.selected=!1,this.dispatchSelectRequest()},this.visualFocus=e=>{this.current=e}}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick),this.addEventListener(this.emitter.eventId("update"),this.onUpdateFromSelect),this.setAttribute("role","option")}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick),this.removeEventListener(this.emitter.eventId("update"),this.onUpdateFromSelect)}updated(e){e.has("selected")&&this.setAttribute("aria-selected",`${this.selected}`),e.has("disabled")&&this.setAttribute("tabindex",this.disabled?"-1":"0"),this.trustedUpdate&&(this.trustedUpdate=!1)}willUpdate(e){e.has("selected")&&!this.trustedUpdate&&this.dispatchSelectRequest(this.selected,!0)}onUpdateFromSelect(e){const{selected:t}=e.detail??{};t!==this.selected&&(this.selected=t,this.trustedUpdate=!0)}static get styles(){return t.i`:host{color:var(--color-secondary-plain);cursor:pointer;display:flex;align-items:center;gap:var(--spacer-xs);padding:var(--spacer-xs);min-width:var(--select-width, 'auto');box-sizing:border-box;outline-offset:-1px}:host([hidden]){display:none}:host(:hover){background:var(--color-neutral-background-strong-hover)}:host([selected]){background:var(--color-neutral-background-selected)}:host([current]){outline:1px auto var(--color-global-focus)}:host([disabled]){color:var(--color-interactive-content-disabled);pointer-events:none}slot[name=leading]{width:var(--size-xl);height:var(--size-xl);align-items:center}::slotted([slot=leading]){display:inline-flex}slot:not([name]){display:inline-block;width:100%;line-height:var(--rem20)}.matched-text{font-weight:700}`}render(){const e=this.matchedText?.length||0;return t.x`<slot name="leading"></slot> <slot> <span class="matched-text">${this.matchedText}</span><span>${this.displayText?.slice(e)}</span> </slot> <span>${this.selected?t.z():t.A}</span>`}};e._([e.n({type:Boolean})],a.prototype,"selected",void 0),e._([e.n({type:Boolean})],a.prototype,"disabled",void 0),e._([e.n({type:String})],a.prototype,"value",void 0),e._([e.n({type:String,attribute:"matched-text",reflect:!0})],a.prototype,"matchedText",void 0),e._([e.n({type:String,attribute:"display-text"})],a.prototype,"displayText",void 0),e._([e.n({type:Boolean,reflect:!0})],a.prototype,"current",void 0),e._([e.at({flatten:!0})],a.prototype,"defaultSlot",void 0),a=e._([e.e("faceplate-option")],a)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DSgcmNT3.js",import.meta.url,"DSgcmNT3");SML.di("./DzK3xEza.js",import.meta.url,"DzK3xEza");SML.di("./BkErX3_5.js",import.meta.url,"BkErX3_5");SML.di("./ZU4mPORS.js",import.meta.url,"ZU4mPORS");SML.di("./BOloqGL8.js",import.meta.url,"BOloqGL8");SML.di("./Csfdzp9J.js",import.meta.url,"Csfdzp9J");SML.di("./B6yBL9at.js",import.meta.url,"B6yBL9at");SML.di("./DrQgO6CS.js",import.meta.url,"DrQgO6CS");SML.di("./DWwkEB7i.js",import.meta.url,"DWwkEB7i");SML.di("./CZ7YNHqf.js",import.meta.url,"CZ7YNHqf");SML.di("./DuMDg_pA.js",import.meta.url,"DuMDg_pA");SML.di("./Wj1K4cGE.js",import.meta.url,"Wj1K4cGE");SML.di("./C7Ws8ntA.js",import.meta.url,"C7Ws8ntA");SML.di("./BM-DpnLu.js",import.meta.url,"BM-DpnLu");SML.di("./Be8KYlVI.js",import.meta.url,"Be8KYlVI");SML.di("./Diel-zJV.js",import.meta.url,"Diel-zJV");SML.di("./Dm-LXBi1.js",import.meta.url,"Dm-LXBi1");SML.di("./BqPzZllT.js",import.meta.url,"BqPzZllT");SML.di("./DzMpUNmB.js",import.meta.url,"DzMpUNmB");SML.di("./BGOkDHmz.js",import.meta.url,"BGOkDHmz");SML.di("./CnjPLu6R.js",import.meta.url,"CnjPLu6R");SML.di("./Bvcfbv8-.js",import.meta.url,"Bvcfbv8-");SML.di("./m5O0vt6a.js",import.meta.url,"m5O0vt6a");SML.di("./DtcD-j6p.js",import.meta.url,"DtcD-j6p");SML.di("./BktidS9F.js",import.meta.url,"BktidS9F");SML.di("./BPjD9jS-.js",import.meta.url,"BPjD9jS-");SML.di("./DK2EuOAl.js",import.meta.url,"DK2EuOAl");SML.di("./B5aCBAWI.js",import.meta.url,"B5aCBAWI");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./B4wbfaco.js",import.meta.url,"B4wbfaco");SML.di("./DMa5Y6a9.js",import.meta.url,"DMa5Y6a9");
SML.dm("BsxA9l1f",["GlDbwxoG","s_Igk1Yn","DSgcmNT3","DzK3xEza","BkErX3_5","ZU4mPORS","BOloqGL8","Csfdzp9J","B6yBL9at","DrQgO6CS","DWwkEB7i","CZ7YNHqf","DuMDg_pA","Wj1K4cGE","C7Ws8ntA","BM-DpnLu","Be8KYlVI","Diel-zJV","Dm-LXBi1","BqPzZllT","DzMpUNmB","BGOkDHmz","CnjPLu6R","Bvcfbv8-","m5O0vt6a","DtcD-j6p","BktidS9F","BPjD9jS-","DK2EuOAl","B5aCBAWI","CC2wUKE8","B4wbfaco","DMa5Y6a9"],(async(t,e,n,s,a,i,r,o,l)=>{const u="line-clamp-3",c="hidden",p="description",x="show-more-btn";let d=class extends e.s{constructor(){super(...arguments),this.name="",this.subredditId="",this.prefixedName="",this.displayName="",this.description="",this.subscribers=0,this.bannerUrl="",this.routerName="",this.bannerFallbackBackgroundColor="",this.notificationLevel="",this.idCardWidgetId="",this.subscribersText="",this.currentlyViewingText="",this.weeklyActiveUsersCount=0,this.weeklyContributionsCount=0,this.isActivityIndicatorsEnabled=!1,this.isModerator=!1,this.hasModqueueAccess=!1,this.isSubscribed=!1,this.isMuted=!1,this.isFavorite=!1,this.isUserLoggedIn=!1,this.isPdpRoute=!1,this.newBannerExperimentEnabled=!1,this.allowIdCardEdit=!1,this.isCustomFeedEnabled=!1,this.active=0,this.hasCommunityGuide=!1,this.isCommunityGuideExperimentEnabled=!1,this.isModInsightsWidgetExperimentEnabled=!1,this.isModOnboardingGuidesExperimentEnabled=!1,this.isRedesign=!1,this.hfnUxUpdatesVariant="",this.isUpdatesAllEnabled=!1,this.subredditUpdatesAllClientsVariant="",this.shredditSubredditUpdatesAllVariant="",this.subredditUpdatesAllClientsVersion="",this.shredditSubredditUpdatesAllVersion="",this.pubsub=new t.m(this),this._activateFeature=async e=>t.j(e),this._getPageType=t.w,this.onSubscriptionChange=async e=>{let n;this.name===e.name&&(n=e.subscribed&&this.isSubscribed!==e.subscribed,this.isSubscribed=e.subscribed),n&&this.isPdpRoute&&this.isUserLoggedIn&&this.subredditId&&(await this._activateFeature({name:t.f_,queryParams:{subredditId:this.subredditId,pageType:String(this._getPageType())}}))},this.renderJoinOrModButton=()=>{if(!this.newBannerExperimentEnabled||this.isPdpRoute)return this.isModerator?t.Y({appearance:"primary",size:t.a7.Small,attributes:{href:this.hasModqueueAccess?`/mod/${this.name}/queue`:`/mod/${this.name}/insights`,className:"modtools-btn"},children:"Mod Tools"}):e.x`<faceplate-tracker source="community" action="click" noun="${this.isSubscribed?"unsubscribe":"subscribe"}" data-faceplate-tracking-context="${JSON.stringify({subreddit:{id:this.subredditId,name:this.name}})}"> <shreddit-join-button name="${this.name}" prefixed-name="${this.prefixedName}" subreddit-id="${this.subredditId}" button-classes="min-w-[70px]" subscribe-label="${"Join"}" unsubscribe-label="${"Joined"}" unsubscribe-button-type-override="bordered" ?subscribed="${this.isSubscribed}"></shreddit-join-button></faceplate-tracker>`;},this.renderNotificationControl=()=>this.isSubscribed?e.x` <shreddit-notification-frequency-control subreddit-id="${this.subredditId}" notification-level="${this.notificationLevel}" hfn-ux-updates-variant="${e.l(this.hfnUxUpdatesVariant)}" ?is-updates-all-enabled="${this.isUpdatesAllEnabled}" subreddit-updates-all-clients-variant="${this.subredditUpdatesAllClientsVariant}" shreddit-subreddit-updates-all-variant="${this.shredditSubredditUpdatesAllVariant}" subreddit-updates-all-clients-version="${this.subredditUpdatesAllClientsVersion}" shreddit-subreddit-updates-all-version="${this.shredditSubredditUpdatesAllVersion}" prefixed-name="${this.prefixedName}" ?is-muted="${this.isMuted}"></shreddit-notification-frequency-control>`:"",this.renderOverflowControl=()=>this.isUserLoggedIn?e.x`<shreddit-subreddit-overflow-control name="${this.name}" prefixed-name="${this.prefixedName}" subreddit-id="${this.subredditId}" ?is-muted="${this.isMuted}" ?is-favorite="${this.isFavorite}" ?subscribed="${this.isSubscribed}" ?show-join-button="${this.isModerator}" ?is-user-logged-in="${this.isUserLoggedIn}" ?allow-custom-feed="${this.isCustomFeedEnabled}"></shreddit-subreddit-overflow-control>`:"",this.checkDescriptionForClamping=()=>{if(!this.isPdpRoute)return;const t=this.getDescriptionContainer();if(!t)return;this.isTextClamped(t)&&this.unhideShowMoreButton()},this.showMoreText=()=>{this.hideShowMoreButton(),this.removeLineClampFromDescription()},this.removeLineClampFromDescription=()=>{const t=this.getDescriptionContainer();t?.classList.remove(u)},this.hideShowMoreButton=()=>{const t=this.getShowMoreButton();t?.classList.add(c)},this.unhideShowMoreButton=()=>{const t=this.getShowMoreButton();t?.classList.remove(c)},this.onShowCommunityGuide=async()=>{try{await this._activateFeature({name:t.f$,routeParams:{subredditName:this.name},renderMode:t.P.Contents})}catch{this.showErrorToast("Failed to load community guide")}},this.onShowModOnboardingGuidePreview=async()=>{try{await this._activateFeature({name:t.g0,routeParams:{subredditName:this.name},queryParams:{"show-mod-guide":"true"},renderMode:t.P.Contents})}catch{this.showErrorToast("Failed to load mod onboarding guide preview")}},this.isTextClamped=t=>t.scrollHeight>t.clientHeight,this.getDescriptionContainer=()=>this.shadowRoot?.getElementById(p),this.getShowMoreButton=()=>this.shadowRoot?.getElementById(x),this.renderShowMoreButton=()=>t.Y({appearance:this.isRedesign?"secondary":"plain",attributes:{id:x,className:`${c} ${this.isRedesign?"":"text-[color:var(--color-a-default)]"} no-underline mb-xs`,onclick:this.showMoreText},children:"Show more",size:t.a7.Small}),this.renderDescription=()=>this.description?e.x`<div id="${p}" class="i18n-subreddit-description description text-left text-neutral-content-weak overflow-hidden ${this.isPdpRoute?u:""}"> ${this.description} </div> ${this.renderShowMoreButton()}`:e.x``}static get styles(){return[t.t,t.J(":host {\n  text-align: center;\n}\n.r-slash-icon {\n  border: 2px solid var(--color-tone-1);\n  border-radius: 50%;\n  overflow: hidden;\n}\nh2 {\n  font: var(--font-title-h2);\n  font-weight: bold;\n  margin: 0.5rem 0 0;\n}\n.description,\n.subscribers {\n  margin-bottom: 0.5rem;\n}\n.prefixedName {\n  font-size: 18px;\n}\na {\n  color: inherit;\n  text-decoration: none;\n}\n.header {\n  background-position: top center;\n  background-repeat: no-repeat;\n  background-size: auto 6.8em;\n  position: relative;\n}\n.banner {\n  background-color: var(--color-tone-6);\n  background-position: center center;\n  background-size: cover;\n  margin-top: -1rem;\n  margin-left: -1rem;\n  margin-right: -1rem;\n}\n")]}firstUpdated(){const e=this.parentElement;e&&e.classList.add("xs:block"),this.pubsub.subscribe(t.T.SubredditSubscriptionChange,this.onSubscriptionChange),requestAnimationFrame((()=>{this.checkDescriptionForClamping()}));const n=new CustomEvent(t.df,{bubbles:!0,composed:!0,detail:{name:"shreddit-subreddit-header"}});this.isModOnboardingGuidesExperimentEnabled&&window.location.search.includes("show-mod-guide=true")&&this.onShowModOnboardingGuidePreview(),this.dispatchEvent(n)}renderPdpRouteHeader(){const t=this.mtSeoSubredditLink?this.mtSeoSubredditLink:`/${this.prefixedName}/`;return e.x` <div class="${"flex justify-between"}"> ${this.prefixedName?e.x` <span class="flex items-center truncate"> <a href="${t}" class="flex justify-between truncate focus-visible:-outline-offset-1"> <div class="prefixedName font-bold truncate mr-xs">${this.prefixedName}</div> </a> <slot name="community-status"></slot> </span> `:""} <div class="flex items-center gap-sm">${this.renderJoinOrModButton()}</div> </div>`}renderHeader(){return this.routerName===l.s?e.x`<h2 class="uppercase text-left font-semibold text-neutral-content-weak text-12 mb-sm"> ${"About community"} </h2>`:!this.newBannerExperimentEnabled||this.isPdpRoute?e.x` <div class="${"flex flex-col gap-sm pt-md"}"> <div class="flex justify-between gap-sm"> ${this.prefixedName?e.x` <a class="prefixedName font-bold truncate mr-xs no-underline" href="${`/${this.prefixedName}`}">${this.prefixedName}</a> `:""} ${this.renderOverflowControl()} </div> <div class="flex items-center gap-sm"> ${this.renderJoinOrModButton()} ${this.renderNotificationControl()} </div> </div>`:void 0;}renderBanner(){return this.routerName===l.s||this.isPdpRoute?"":e.x`<div class="banner rounded-t-[8px]" style="${e.o({backgroundImage:this.bannerUrl?`url('${this.bannerUrl}')`:"",backgroundColor:this.bannerFallbackBackgroundColor?this.bannerFallbackBackgroundColor:"",height:this.bannerUrl?"128px":""})}"></div>`}renderWeeklyActivityIndicators(){if(!this.isActivityIndicatorsEnabled||this.isModInsightsWidgetExperimentEnabled&&this.isModerator||this.routerName===l.s||!this.weeklyActiveUsersCount)return e.A;const n=e.x` <span class="text-neutral-content-strong"> <strong><slot name="weekly-active-users-count"></slot></strong></span> `,s=this.subscribersText?e.x` ${n} <span class="text-[12px] text-neutral-content-weak">${this.subscribersText}</span> `:t.bI({one:e.x` ${n} <span class="text-[12px] text-neutral-content-weak">Weekly visitor</span> `,other:e.x` ${n} <span class="text-[12px] text-neutral-content-weak">Weekly visitors</span> `,count:this.weeklyActiveUsersCount}),a=e.x` <span class="text-neutral-content-strong"> <strong><slot name="weekly-contributions-count"></slot></strong></span> `,i=this.currentlyViewingText?e.x` ${a} <span class="text-[12px] text-neutral-content-weak">${this.currentlyViewingText}</span> `:t.bI({one:e.x` ${a} <span class="text-[12px] text-neutral-content-weak">Weekly contribution</span> `,other:e.x` ${a} <span class="text-[12px] text-neutral-content-weak">Weekly contributions</span> `,count:this.weeklyContributionsCount});return e.x` <div class="flex flex-wrap text-left mt-xs gap-2xs" data-testid="activity-indicators"> <div class="flex flex-col items-start flex-grow">${s}</div> ${this.weeklyContributionsCount?e.x`<div class="flex flex-col items-start flex-grow">${i}</div>`:e.A} </div> `}renderSubscribers(){if(this.isModInsightsWidgetExperimentEnabled&&this.isModerator||this.routerName===l.s||!this.subscribers)return e.A;const n=e.x` <span class="text-neutral-content-strong"> <strong id="subscribers"> <faceplate-number number="${this.subscribers}" pretty> </faceplate-number> </strong></span> `,s=this.subscribersText?e.x` ${n} <span class="text-[12px] text-neutral-content-weak subscribers-text"> ${this.subscribersText} </span> `:t.bI({one:e.x` ${n} <span class="text-[12px] text-neutral-content-weak subscribers-text"> Member </span> `,other:e.x` ${n} <span class="text-[12px] text-neutral-content-weak subscribers-text"> Members </span> `,count:this.subscribers}),a=e.x` <strong id="online"><faceplate-number number="${this.active}" pretty></faceplate-number></strong> `,i="Online",r=this.currentlyViewingText||i;return e.x` <div class="flex flex-wrap text-left subscribers mt-xs gap-2xs"> <div class="flex flex-col items-start flex-grow">${s}</div> ${this.active?e.x` <div class="active flex flex-col items-start flex-grow"> <span class="text-neutral-content-strong"> ${a} </span> <span class="text-[12px] text-neutral-content-weak"> <span class="inline-flex bg-kiwigreen-400 rounded-full w-xs h-xs"></span> <span class="currently-viewing-text">${r}</span> </span> </div> `:""} <div class="flex flex-grow flex-col items-start"> <slot name="directoryLink"></slot> </div> </div> `}showErrorToast(e){const n=t.c("faceplate-alert",{message:e,level:t.X.error,cause:"uncategorized"});this.dispatchEvent(n)}renderCommunityGuideBtn(){if(!this.isCommunityGuideExperimentEnabled)return"";if(this.hasCommunityGuide){const n=r.g(this.subredditId,this.name);return e.x` <faceplate-tracker class="mt-sm mb-md" source="${r.S.COMMUNITY_GUIDE}" action="${r.A.CLICK}" noun="${r.N.OPEN}" data-faceplate-tracking-context="${n}"> ${t.Y({appearance:"secondary",size:t.a7.Small,attributes:{id:"show-community-guide-btn",className:"w-full",onclick:this.onShowCommunityGuide},children:"Community Guide",leadingIcon:a.b({size:e.I.ExtraSmall})})} </faceplate-tracker> `;}return this.isModerator?t.Y({appearance:"bordered",size:t.a7.Small,attributes:{id:"community-guide-settings",className:"w-full mt-sm mb-md",href:`/mod/${this.name}/guide`,target:"_blank"},children:"Add a community guide",leadingIcon:n.a({size:e.I.ExtraSmall})}):"";}renderModOnboardingGuidePreviewBtn(){return this.isModerator&&this.isModOnboardingGuidesExperimentEnabled?e.x`${t.Y({appearance:"secondary",size:t.a7.Small,attributes:{id:"show-mod-onboarding-guide-preview-btn",className:"w-full mt-sm",onclick:this.onShowModOnboardingGuidePreview},children:"Mod Guide",leadingIcon:i.t({size:e.I.Small})})}`:"";}renderTitle(){const n=this.displayName||this.name,a=e.x`<div id="title" class="i18n-subreddit-title text-left text-neutral-content ${this.isRedesign?"text-16 font-semibold":"text-14 font-bold"} mt-xs"> ${n} </div>`;return this.allowIdCardEdit&&!this.isPdpRoute?e.x` <div class="flex justify-between items-end py-xs"> ${a} <community-widget-edit-button subreddit-name="${this.name}" page-id="${o.E.IdCard}" widget-id="${this.idCardWidgetId}"> <faceplate-tracker source="community_widgets" action="click" noun="edit_widget" data-faceplate-tracking-context="${JSON.stringify({widget:{type:o.W[o.E.IdCard],target_subreddit_name:this.name,target_subreddit_id:this.subredditId}})}"> ${t.Y({appearance:"secondary",shape:"pill",attributes:{type:"button",className:"w-lg h-lg","aria-label":"Edit subreddit ID card"},leadingIcon:s.e({size:e.I.ExtraSmall}),size:t.a7.ExtraSmall})} </faceplate-tracker> </community-widget-edit-button> </div>`:a;}render(){const t="Community Info Section";return e.x` <div class="header ${this.isRedesign?"":"px-md"}"> <h1 class="absolute -top-full -left-full w-px h-px overflow-hidden" aria-label="${t}"> ${t} </h1> ${this.renderBanner()} ${this.isPdpRoute?this.renderPdpRouteHeader():this.renderHeader()} <div class="flex flex-col justify-start"> ${this.renderTitle()} ${this.renderDescription()} <slot name="community-details"></slot> ${this.renderModOnboardingGuidePreviewBtn()} ${this.renderCommunityGuideBtn()} </div> <div class="flex flex-col justify-start ${this.isActivityIndicatorsEnabled&&this.isModerator&&this.isModInsightsWidgetExperimentEnabled&&!this.isCommunityGuideExperimentEnabled?"mt-md":""}"> <slot name="mod-insights-widget"></slot> </div> ${this.isActivityIndicatorsEnabled?this.renderWeeklyActivityIndicators():this.renderSubscribers()} </div> `}};t._([t.n({type:String})],d.prototype,"name",void 0),t._([t.n({type:String,attribute:"subreddit-id"})],d.prototype,"subredditId",void 0),t._([t.n({type:String,attribute:"prefixed-name"})],d.prototype,"prefixedName",void 0),t._([t.n({type:String,attribute:"display-name"})],d.prototype,"displayName",void 0),t._([t.n({type:String})],d.prototype,"description",void 0),t._([t.n({type:Number})],d.prototype,"subscribers",void 0),t._([t.n({type:String,attribute:"banner-url"})],d.prototype,"bannerUrl",void 0),t._([t.n({type:String,attribute:"router-name"})],d.prototype,"routerName",void 0),t._([t.n({type:String,attribute:"banner-background-fallback-color"})],d.prototype,"bannerFallbackBackgroundColor",void 0),t._([t.n({type:String,attribute:"notification-level"})],d.prototype,"notificationLevel",void 0),t._([t.n({type:String,attribute:"id-card-widget-id"})],d.prototype,"idCardWidgetId",void 0),t._([t.n({type:String,attribute:"subscribers-text"})],d.prototype,"subscribersText",void 0),t._([t.n({type:String,attribute:"currently-viewing-text"})],d.prototype,"currentlyViewingText",void 0),t._([t.n({type:Number,attribute:"weekly-active-users"})],d.prototype,"weeklyActiveUsersCount",void 0),t._([t.n({type:Number,attribute:"weekly-contributions"})],d.prototype,"weeklyContributionsCount",void 0),t._([t.n({type:Boolean,attribute:"activity-indicators-enabled"})],d.prototype,"isActivityIndicatorsEnabled",void 0),t._([t.n({type:Boolean,attribute:"is-moderator"})],d.prototype,"isModerator",void 0),t._([t.n({type:Boolean,attribute:"modqueue-access"})],d.prototype,"hasModqueueAccess",void 0),t._([t.n({type:Boolean,attribute:"is-subscribed"})],d.prototype,"isSubscribed",void 0),t._([t.n({type:Boolean,attribute:"is-muted"})],d.prototype,"isMuted",void 0),t._([t.n({type:Boolean,attribute:"is-favorite"})],d.prototype,"isFavorite",void 0),t._([t.n({type:Boolean,attribute:"is-user-logged-in"})],d.prototype,"isUserLoggedIn",void 0),t._([t.n({type:Boolean,attribute:"is-pdp-route"})],d.prototype,"isPdpRoute",void 0),t._([t.n({type:Boolean,attribute:"new-banner-experiment-enabled"})],d.prototype,"newBannerExperimentEnabled",void 0),t._([t.n({type:Boolean,attribute:"allow-id-card-edit"})],d.prototype,"allowIdCardEdit",void 0),t._([t.n({type:Boolean,attribute:"allow-custom-feed"})],d.prototype,"isCustomFeedEnabled",void 0),t._([t.n({type:Number})],d.prototype,"active",void 0),t._([t.n({type:Boolean,attribute:"has-community-guide"})],d.prototype,"hasCommunityGuide",void 0),t._([t.n({type:Boolean,attribute:"community-guide-experiment-enabled"})],d.prototype,"isCommunityGuideExperimentEnabled",void 0),t._([t.n({type:Boolean,attribute:"is-mod-insights-widget-experiment-enabled"})],d.prototype,"isModInsightsWidgetExperimentEnabled",void 0),t._([t.n({type:Boolean,attribute:"mod-onboarding-guides-experiment-enabled"})],d.prototype,"isModOnboardingGuidesExperimentEnabled",void 0),t._([t.n({type:Boolean,attribute:"redesign"})],d.prototype,"isRedesign",void 0),t._([t.n({type:String,attribute:"mt-seo-subreddit-link"})],d.prototype,"mtSeoSubredditLink",void 0),t._([t.n({type:String,attribute:"hfn-ux-updates-variant"})],d.prototype,"hfnUxUpdatesVariant",void 0),t._([t.n({type:Boolean,attribute:"is-updates-all-enabled"})],d.prototype,"isUpdatesAllEnabled",void 0),t._([t.n({type:String,attribute:"subreddit-updates-all-clients-variant"})],d.prototype,"subredditUpdatesAllClientsVariant",void 0),t._([t.n({type:String,attribute:"shreddit-subreddit-updates-all-variant"})],d.prototype,"shredditSubredditUpdatesAllVariant",void 0),t._([t.n({type:String,attribute:"subreddit-updates-all-clients-version"})],d.prototype,"subredditUpdatesAllClientsVersion",void 0),t._([t.n({type:String,attribute:"shreddit-subreddit-updates-all-version"})],d.prototype,"shredditSubredditUpdatesAllVersion",void 0),d=t._([t.e("shreddit-subreddit-header")],d)}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("BvOcWFza",["s_Igk1Yn"],(async c=>{const{svg:l}=c.g();return{p:c.m(l`<path d="M18.17 6.19c0-1.13-.44-2.19-1.24-2.99l-.17-.17c-.8-.8-1.86-1.24-2.99-1.24-1.13 0-2.19.44-2.99 1.24L8.83 4.98a6.2 6.2 0 00-2.71.12c-1.06.28-2.02.84-2.8 1.61a.9.9 0 00-.26.64c0 .24.09.47.26.64l3.72 3.72-4.96 4.96a.9.9 0 000 1.27c.18.18.41.26.64.26.23 0 .46-.09.64-.26l4.96-4.96 3.64 3.64c.17.17.4.26.64.26s.47-.1.64-.26c.77-.77 1.33-1.74 1.61-2.79.24-.88.28-1.81.12-2.7l1.96-1.95c.8-.8 1.24-1.86 1.24-2.99zM15.66 7.9l-2.7 2.69c.35.89.4 1.86.15 2.78-.12.46-.32.89-.58 1.29L5.3 7.43a4.42 4.42 0 014.07-.42l2.69-2.69c.94-.94 2.48-.94 3.42 0l.17.17c.46.46.71 1.07.71 1.71 0 .64-.25 1.26-.71 1.71l.01-.01z"></path>`,"0 0 20 20","pin")}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("Bvcfbv8-",["s_Igk1Yn"],(async a=>{const{svg:t}=a.g();return{n:a.m(t`<path d="M18.175 14.217l-.924-1.93A2.573 2.573 0 0117 11.183V8c0-3.859-3.141-7-7-7-3.86 0-7 3.14-7 7v3.183c0 .38-.086.763-.25 1.105l-.925 1.929c-.165.345-.143.743.062 1.066a1.1 1.1 0 00.935.517h3.26a4.007 4.007 0 003.92 3.2 4.007 4.007 0 003.919-3.2h3.26a1.1 1.1 0 00.935-.516 1.1 1.1 0 00.062-1.067h-.003zM10 17.199A2.198 2.198 0 017.956 15.8h4.088A2.196 2.196 0 0110 17.199z"></path>`,"0 0 20 20","notifications-fill")}}));
SML.dm("Bvty6Dj7",[],(async()=>{var e;return function(e){e.Feed="FEED",e.Pdp="PDP"}(e||(e={})),{get T(){return e}}}));

SML.dm("BwmVBZAv",[],(async()=>{var e,a,r;return function(e){e.GoldPurchasePaymentForm="award-gold-purchase-payment-form",e.GoldTopupPaymentForm="award-gold-topup-payment-form"}(e||(e={})),function(e){e.SelectionSheet="selection-sheet",e.Leaderboard="leaderboard",e.GoldPurchase="gold-purchase",e.GoldTopUp="gold-top-up"}(a||(a={})),Object.values(a),function(e){e.Limited="award:limited",e.Free="award:free",e.Community="award:community",e.Highlighted="award:highlighted",e.Iconic="award:iconic",e.Branded="award:branded"}(r||(r={})),{get A(){return r},get a(){return a}}}));

SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("ByHkMIPl",["GlDbwxoG","s_Igk1Yn"],(async(s,e)=>{const t="data-chat-channel-recommendations-element-dismiss",n="click";let i=class extends(s.W(e.s)){constructor(){super(...arguments),this.onDismiss=e=>{this.parentNode?.removeChild(this),e.stopPropagation(),s.eF(s.eH.Dismiss,s.eG.ChatChannelsOnPdp)}}connectedCallback(){super.connectedCallback(),this.addDismissHandlers()}disconnectedCallback(){super.disconnectedCallback(),this.removeDismissHandlers()}addDismissHandlers(){this.querySelector(`[${t}]`)?.addEventListener(n,this.onDismiss)}removeDismissHandlers(){this.querySelector(`[${t}]`)?.removeEventListener(n,this.onDismiss)}render(){return e.x`<slot></slot>`}};i.styles=[s.t],i=s._([s.e("chat-channel-recommendations-wrapper")],i)}));
SML.di("./CPBi7rr2.js",import.meta.url,"CPBi7rr2");SML.di("./CDFmhs-S.js",import.meta.url,"CDFmhs-S");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./rPGPQWBN.js",import.meta.url,"rPGPQWBN");SML.di("./MX9FaClF.js",import.meta.url,"MX9FaClF");SML.di("./FaYkg4Io.js",import.meta.url,"FaYkg4Io");
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./DzMpUNmB.js",import.meta.url,"DzMpUNmB");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DtcD-j6p.js",import.meta.url,"DtcD-j6p");SML.di("./DK2EuOAl.js",import.meta.url,"DK2EuOAl");SML.di("./B4wbfaco.js",import.meta.url,"B4wbfaco");SML.di("./B5aCBAWI.js",import.meta.url,"B5aCBAWI");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("BzGhp_5F",["GlDbwxoG","DzMpUNmB","s_Igk1Yn","DtcD-j6p","DK2EuOAl","B4wbfaco","B5aCBAWI","CC2wUKE8"],(async(a,t,e,i)=>{const n=e.s;let o=class extends n{constructor(){super(...arguments),this.hasRemovalReasonAdded=!1,this._feedbackSubmitted=!1,this._trackingContext={}}get reportKey(){return`post-guidance-feedback-${this.reportId}`}getShredditPostData(){const a=this.getRootNode();if(a instanceof ShadowRoot){const t=a.host;if(t&&"SHREDDIT-POST"===t.tagName)return{id:t.id,postTitle:t.getAttribute("post-title"),contentHref:t.getAttribute("content-href"),authorId:t.getAttribute("author-id")}}return null}connectedCallback(){super.connectedCallback(),this._feedbackSubmitted="true"===sessionStorage.getItem(this.reportKey);const a=this.getShredditPostData();a&&(this._trackingContext={action_info:{post_id:a.id,post_title:a.postTitle,post_url:a.contentHref,author_id:a.authorId}})}handleFeedbackSubmit(t){if(t.target&&t.target instanceof HTMLElement){const e=t.target.closest("button"),i="yes"===e?.value,n=a.b({source:"moderator",action:"click",noun:i?"filter_is_correct":"filter_is_incorrect",...this._trackingContext});a.f(this,n),this._feedbackSubmitted=!0,sessionStorage.setItem(this.reportKey,"true")}}handleFeedbackUndo(){this._feedbackSubmitted=!1;const t=a.b({source:"moderator",action:"click",noun:"undo_filter",...this._trackingContext});a.f(this,t),sessionStorage.removeItem(this.reportKey)}renderFeedbackForm(){return e.x`<div class="border border-solid border-neutral-border p-sm flex flex-col gap-xs rounded-2 flex-1"> <div class="text-14 w-full"> ${"Was this automation accurate?"} </div> <div class="flex gap-2xs"> ${a.Y({children:"Yes",appearance:"bordered",attributes:{type:"button",onclick:this.handleFeedbackSubmit,value:"yes"}})} ${a.Y({children:"No",appearance:"bordered",attributes:{type:"button",onclick:this.handleFeedbackSubmit,value:"no"}})} </div> </div>`;}renderFeedbackSubmitted(){return e.x` <div class="border border-solid border-neutral-border p-sm flex flex-row gap-xs rounded-2 flex-1 items-center"> <div class="text-14 w-full"> ${"Got it. You helped train your automation."} </div> <faceplate-dropdown-menu id="post-guidance-feedback-dropdown-menu"> ${a.Y({appearance:"plain",attributes:{type:"button"},leadingIcon:i.o({size:e.I.ExtraSmall}),screenReaderContent:"More options"})} <faceplate-menu slot="menu" dropdown> ${t.l({label:"Undo",attributes:{role:"option",onclick:this.handleFeedbackUndo}})} </faceplate-menu> </faceplate-dropdown-menu> </div>`;}renderRemovalReasonAdded(){return e.x`<div class="border border-solid border-neutral-border p-sm flex flex-row gap-xs rounded-2 flex-1 items-center"> <div class="text-14 w-full"> ${"Your removal reason helped train your automation."} </div> </div>`;}render(){return this.hasRemovalReasonAdded?this.renderRemovalReasonAdded():this._feedbackSubmitted?this.renderFeedbackSubmitted():this.renderFeedbackForm()}};o.styles=[a.t],a._([a.n({type:String,attribute:"report-id"})],o.prototype,"reportId",void 0),a._([a.n({type:Boolean,attribute:"has-removal-reason-added"})],o.prototype,"hasRemovalReasonAdded",void 0),a._([a.N()],o.prototype,"_feedbackSubmitted",void 0),o=a._([a.e("post-guidance-feedback")],o)}));
SML.di("./FagDXDzk.js",import.meta.url,"FagDXDzk");
SML.dm("C-d7BR1A",["FagDXDzk"],(async i=>{var e;!function(i){i.addRemovalReason="add_removal_reason",i.distinguishAsMod="distinguish_as_mod",i.distinguishAsAdmin="distinguish_as_admin",i.sticky="sticky",i.lock="lock",i.approve="approve",i.remove="remove",i.removeAsSpam="remove_as_spam",i.confirmRemoval="confirm_removal",i.approveOptimistic="approve_optimistic",i.removeOptimistic="remove_optimistic",i.removeAsSpamOptimistic="remove_as_spam_optimistic",i.confirmRemovalOptimistic="confirm_removal_optimistic",i.ignoreReports="ignore_reports",i.edit="edit",i.snoozeReporter="snooze_reporter",i.unsnoozeReporter="unsnooze_reporter"}(e||(e={}));const o={[i.M.Distinguish]:e.distinguishAsMod,[i.M.Undistinguish]:e.distinguishAsMod,[i.M.Lock]:e.lock,[i.M.Unlock]:e.lock,[i.M.Sticky]:e.sticky,[i.M.Unsticky]:e.sticky,[i.M.AddRemovalReason]:e.addRemovalReason,[i.M.ApproveContent]:e.approve,[i.M.RemoveContent]:e.remove,[i.M.RemoveContentAsSpam]:e.removeAsSpam,[i.M.ConfirmRemoval]:e.confirmRemoval,[i.M.IgnoreReports]:e.ignoreReports,[i.M.UnignoreReports]:e.ignoreReports,[i.M.SnoozeReporter]:e.snoozeReporter,[i.M.UnsnoozeReporter]:e.unsnoozeReporter,[i.A.Distinguish]:e.distinguishAsAdmin,[i.A.Undistinguish]:e.distinguishAsAdmin,[i.M.ApproveContentOptimistic]:e.approveOptimistic,[i.M.RemoveContentOptimistic]:e.removeOptimistic,[i.M.RemoveContentAsSpamOptimistic]:e.removeAsSpamOptimistic,[i.M.ConfirmRemovalOptimistic]:e.confirmRemovalOptimistic};var t,s;return function(i){i.Preview="preview",i.Pdp="pdp"}(t||(t={})),function(i){i.CommentPreviewUnit="CommentPreviewUnit",i.CommentTree="CommentTree"}(s||(s={})),{get C(){return e},S:o}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("C-lRMeGe",["s_Igk1Yn"],(async a=>{const{svg:s}=a.g();return{s:a.m(s`<path d="M12.8 17.524l6.89-6.887a.9.9 0 000-1.273L12.8 2.477a1.64 1.64 0 00-1.782-.349 1.64 1.64 0 00-1.014 1.518v2.593C4.054 6.728 1.192 12.075 1 17.376a1.353 1.353 0 00.862 1.32 1.35 1.35 0 001.531-.364l.334-.381c1.705-1.944 3.323-3.791 6.277-4.103v2.509c0 .667.398 1.262 1.014 1.518a1.638 1.638 0 001.783-.349v-.002zm-.994-1.548V12h-.9c-3.969 0-6.162 2.1-8.001 4.161.514-4.011 2.823-8.16 8-8.16h.9V4.024L17.784 10l-5.977 5.976z"></path>`,"0 0 20 20","share",!0)}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DrrjN1Nt.js",import.meta.url,"DrrjN1Nt");
SML.dm("C0I_JWye",["GlDbwxoG","s_Igk1Yn","DrrjN1Nt"],(async(e,i,a)=>{var n;!function(e){e.BORDERED="bordered",e.SECONDARY="secondary"}(n||(n={}));let t=class extends a.T{constructor(){super(...arguments),this.prefix="",this.type="text",this.appearance=n.SECONDARY,this.persistentTrailingIcon=!1,this.withSelect=!1}static get styles(){return[super.styles,i.i`input{outline:0;background:0 0;border:none;width:100%}:host([appearance=bordered]) .label-container:not(.without-label) .input-container.stateful-input{transform:translateY(0)}::slotted([slot=leadingIcon]){margin-inline-end:var(--spacer-xs);display:flex}.input-prefix{margin-inline-end:var(--spacer-4xs)}.input-suffix{margin-inline-start:var(--spacer-4xs)}.input-prefix,.input-suffix{flex-shrink:0}:host([appearance=bordered]) .label-container{border-radius:20px 20px 0 0;align-items:flex-end;padding-bottom:var(--spacer-2xs)}:host([appearance=bordered]) .input-boundary-box{margin-bottom:var(--rem6);align-items:center;padding:0}:host .label-container.without-label{height:var(--rem40)}:host(:focus-within) .label-container:not(.with-trailing-button) ::slotted([slot=clearButton].has-value),:host([faceplate-validity=invalid]:not([disabled])[faceplate-dirty]) ::slotted([slot=clearButton].has-value){display:inline-block}`]}dispatchFocusin(){}render(){return super.renderInput(i.x`<input aria-labelledby="fp-input-label" ?readonly="${this.readonly}" type="${this.type}" pattern="${i.l(this.pattern)}" @input="${this.onInput}" @change="${this.onChange}" @mouseover="${e=>e.stopPropagation()}" .value="${a.l(this.value)}" name="${i.l(this.withSelect?void 0:this.name)}" minlength="${i.l(this.minLength)}" maxlength="${i.l(this.allowMaxLengthOverflow?void 0:this.maxLength)}" min="${i.l(this.min)}" max="${i.l(this.max)}" placeholder="${i.l(0===this.placeholder.length?void 0:this.placeholder)}" ?disabled="${this.disabled}" ?required="${this.required}" autocomplete="${i.l(this.autocomplete)}" inputmode="${i.l(this.inputmode)}" step="${i.l(this.step)}">`)}};e._([e.n({type:String})],t.prototype,"prefix",void 0),e._([e.n({type:String})],t.prototype,"type",void 0),e._([e.n({type:String})],t.prototype,"pattern",void 0),e._([e.n({converter:e=>"string"==typeof e&&"any"===e.toLowerCase()?"any":isNaN(e)?void 0:Number(e)})],t.prototype,"step",void 0),e._([e.n({type:Number})],t.prototype,"min",void 0),e._([e.n({type:Number})],t.prototype,"max",void 0),e._([e.n({type:String,reflect:!0})],t.prototype,"appearance",void 0),e._([e.n({type:Boolean,attribute:"persistent-trailing-icon"})],t.prototype,"persistentTrailingIcon",void 0),e._([e.n({type:Boolean,attribute:"with-select"})],t.prototype,"withSelect",void 0),t=e._([e.e("faceplate-text-input")],t);let o=e.B;return {get F(){return t},I:/[^\p{L}\d '&\-/$]/u,M:10,get T(){return n},f:async function(i){return (async i=>{const{data:a,errors:n}=await o({operation:e.C.UpdateFollowedKeywords,variables:{input:{keywords:i.map((i=>({keyword:i,followState:e.aq.Followed})))}}});if(n?.length||!a?.updateFollowedKeywords?.ok){const e=a?.updateFollowedKeywords?.errors;if(e&&e.length>0){const i=e.filter((e=>"InvalidArgument"===e.code)),a=e.filter((e=>"InvalidArgument"!==e.code)),n=[];if(i.length>0){const e=[];i.forEach((i=>{const a=i.message.match(/invalid arguments: ([^\\"]+)/i);a&&a[1]&&a[1].split(",").forEach((i=>{const a=i.trim();a&&e.push(a)}))})),e.length>0&&n.push(`Keyword alerts are not available for "${e.join('", "')}"`)}if(a.length>0){const e=a.map((e=>{const i=e.message.match(/keyword "(.+?)"/);return i?i[1]:null})).filter(Boolean);let i=a.map((e=>e.message)).join("; ");e.length>0&&(i=`Could not follow the following keywords: ${e.join(", ")}.`),n.push(i)}if(n.length>0)throw new Error(n.join("\n"))}throw new Error("Unable to follow keywords")}})(i);},u:async function(i){return (async i=>{const{data:a,errors:n}=await o({operation:e.C.UpdateFollowedKeywords,variables:{input:{keywords:[{keywordId:i,followState:e.gv.Unfollowed}]}}}),t="Unable to remove keyword";if(n?.length||!a?.updateFollowedKeywords?.ok)throw new Error(t)})(i);}};}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");
SML.dm("C2coigY7",["GlDbwxoG","DRM-oTYq"],(async(t,n)=>{const a=n=>t.b({source:"translate_button",action:"view",noun:"comment"},(({comment:n,post:a},e=!1)=>{const{thingId:o,parentId:s,postId:i,isCommentTranslated:r}=n,{postLanguage:u,isPostTranslated:d,subredditId:c,subredditPrefixedName:l}=a,b=e?"could not translate":r?t.b9:t.ba;return{comment:{id:o,parent_id:s,translation_language:n.translationLanguage,translation_state:r},post:{id:i||"",language:u,translation_language:a.translationLanguage,translation_state:d,subreddit_id:c,subreddit_name:l},action_info:{reason:b}}})(n));var e;!function(t){t.Dismiss="dismiss",t.UpdateSettings="update_settings"}(e||(e={}));const o=(n,a=!1)=>{const{id:e,name:o,isDescriptionsTranslated:s,nsfw:i,quarantined:r,translationLanguage:u}=n;return{subreddit:{id:e,name:o,quarantined:r,nsfw:i,translation_language:u,translation_state:s},action_info:{reason:a?"could not translate":s?t.b9:t.ba}}};return{a:a=>t.b({source:"translate_button",action:"dismiss",noun:"survey"},a?n.j({fields:n.k(a),post:a,postIsTranslated:!0}):{}),b:(a,e)=>{let o=e?n.j({fields:n.k(e),post:e,postIsTranslated:!0}):{};return o={...o,action_info:{...o?.action_info,reason:a}},t.b({source:"translate_button",action:"submit",noun:"survey"},o)},c:(n,e,o,s)=>{const i=a({comment:{isCommentTranslated:n.isCommentTranslated,parentId:n.parentId,postId:n.postId,thingId:n.thingId,translationLanguage:n.translationLanguage},post:{isPostTranslated:e.isPostTranslated,postId:n.postId,title:e.title,translationLanguage:n.translationLanguage}});return{...i,action_info:{...i.action_info,page_type:t.ah.SearchResults,pane_name:t.bb[s],reason:o?t.b9:t.ba}}},d:(a,e,o)=>{const s=n.p({id:a.postId||"",postTitle:a.title,isTranslationOn:a.isPostTranslated,postLanguage:a.postLanguage,translationLanguage:a.translationLanguage,subredditId:a.subredditId,subredditPrefixedName:a.subredditPrefixedName},e);return{...s,action_info:{...s.action_info,page_type:t.ah.SearchResults,pane_name:t.bb[o],reason:e?t.b9:t.ba}}},e:n=>t.b({source:"translate_button",action:"view",noun:"coachmark"},{action_info:{reason:n?t.b9:t.ba}}),f:n=>t.b({source:"translate_button",action:"view",noun:"toggle"},{action_info:{reason:n?t.b9:t.ba}}),g:n=>t.b({source:"translate_button",action:"click",noun:"coachmark"},{action_info:{reason:n||""}}),get h(){return e},i:n=>t.b({source:"translate_button",action:"click",noun:"nav"},{action_info:{reason:n?t.b9:t.ba}}),j:n=>t.b({source:"translate_button",action:"view",noun:"nav"},{action_info:{reason:n?t.b9:t.ba}}),p:a=>t.b({source:"translate_button",action:"view",noun:"survey"},a?n.j({fields:n.k(a),post:a,postIsTranslated:!0}):{}),t:(n,a,e)=>t.b({source:"translate_button",action:"view",noun:"community"},{...o(n),action_info:{...o(n).action_info,page_type:a,pane_name:t.bb[e]}})}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("C38sKiaF",["s_Igk1Yn"],(async e=>{var n,t;!function(e){e.Regular="regular",e.Semibold="semibold"}(n||(n={})),function(e){e.Small="sm",e.Medium="md",e.Large="lg"}(t||(t={})),t.Small,e.h.ExtraSmall,t.Medium,e.h.Small,t.Large,e.h.Medium;const i={sm:"text-12",md:"text-14",lg:"text-16"},r={always:"underline",hover:"hover:underline",none:"no-underline hover:no-underline"},a={primary:"",secondary:"text-secondary-plain hover:text-secondary-plain-hover no-visited visited:text-secondary-plain","plain-weak":"text-secondary-plain-weak hover:text-secondary-plain-hover no-visited visited:text-secondary-plain-weak",media:"text-media-onbackground no-visited visited:text-media-onbackground",inverted:"text-inverted-secondary-plain hover:text-inverted-secondary-plain-hover no-visited visited:text-neutral-background-weak"};return{get A(){return t},a:({attributes:n,children:t,fontWeight:d="regular",size:s,suppressVisitedStyle:o=!1,underline:l="hover",visited:m,appearance:c="primary",trailingIcon:u})=>{const{html:v,createElement:p}=e.g(),g=v`${t}${u?v`<span class="ms-2xs align-middle">${u}</span>`:""}`,h=`${n?.className||""} a cursor-pointer\n  ${c?a[c]:""}\n  ${s?i[s]:""}\n  ${"semibold"===d?"font-semibold":""}\n  ${o?"no-visited":""}\n  ${l?r[l]:""}\n  ${m?"visited":""}`;return p("a",{...n,rpl:!0,className:h},g)},get b(){return n}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./BbX3H2B5.js",import.meta.url,"BbX3H2B5");SML.di("./DopQd8m2.js",import.meta.url,"DopQd8m2");SML.di("./Bdma5j3T.js",import.meta.url,"Bdma5j3T");SML.di("./B9LG8aGh.js",import.meta.url,"B9LG8aGh");SML.di("./DDVMeV6m.js",import.meta.url,"DDVMeV6m");SML.di("./CdFYkV-r.js",import.meta.url,"CdFYkV-r");SML.di("./B5upT-N6.js",import.meta.url,"B5upT-N6");SML.di("./2Pp2AIeo.js",import.meta.url,"2Pp2AIeo");SML.di("./DzMpUNmB.js",import.meta.url,"DzMpUNmB");SML.di("./DOd9aHN1.js",import.meta.url,"DOd9aHN1");SML.di("./CKCUSZ1J.js",import.meta.url,"CKCUSZ1J");SML.di("./BC4TFJx3.js",import.meta.url,"BC4TFJx3");SML.di("./DrrjN1Nt.js",import.meta.url,"DrrjN1Nt");SML.di("./B_YWV8CL.js",import.meta.url,"B_YWV8CL");SML.di("./CTwJH_ps.js",import.meta.url,"CTwJH_ps");SML.di("./DhiXEqBo.js",import.meta.url,"DhiXEqBo");SML.di("./Ctavlk6m.js",import.meta.url,"Ctavlk6m");SML.di("./827J5oU2.js",import.meta.url,"827J5oU2");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./Ca6XYVan.js",import.meta.url,"Ca6XYVan");SML.di("./Do2tmTAb.js",import.meta.url,"Do2tmTAb");
SML.dm("C5MIbR3s",["GlDbwxoG","s_Igk1Yn","Bdma5j3T","CdFYkV-r","B5upT-N6","2Pp2AIeo","DzMpUNmB","DOd9aHN1","CKCUSZ1J","BC4TFJx3","DrrjN1Nt","CC2wUKE8","Ca6XYVan","Do2tmTAb","BbX3H2B5","DopQd8m2","B9LG8aGh","DDVMeV6m","B_YWV8CL","CTwJH_ps","DhiXEqBo","Ctavlk6m","827J5oU2"],(async(e,t,r,i,a,n,s,o,d,h,l,c,p,u)=>{var m;!function(e){e.PRIMARY="primary",e.SECONDARY="secondary"}(m||(m={}));var S,y,b=t.i`${e.Z}:host{border:1px solid var(--rpl-input-chip-border-color);color:var(--rpl-input-chip-text-color);background:var(--rpl-input-chip-background-color);font-weight:600;font-size:var(--rem12)}:host([appearance=bordered]){--rpl-input-chip-border-color:var(--color-neutral-border);--rpl-input-chip-text-color:var(--color-secondary-plain);--rpl-input-chip-disabled-background-color:var(--color-interactive-content-disabled);--rpl-input-chip-disabled-text-color:var(--color-interactive-content-disabled);--rpl-input-chip-disabled-border-color:var(--color-neutral-border-weak);--rpl-input-chip-selected-background-color:var(--color-secondary-background-selected);--rpl-input-chip-selected-border-color:var(--color-neutral-border);--rpl-input-chip-hover-background-color:var(--color-secondary-background-hover)}:host([appearance=media]){--rpl-input-chip-border-color:var(--color-media-border-weak);--rpl-input-chip-background-color:var(--color-media-background);--rpl-input-chip-text-color:var(--color-media-onbackground);--rpl-input-chip-disabled-text-color:var(--color-media-onbackground-disabled);--rpl-input-chip-disabled-background-color:var(--color-media-background);--rpl-input-chip-disabled-border-color:var(--color-media-border-weak);--rpl-input-chip-hover-background-color:var(--color-media-background-hover);--rpl-input-chip-selected-background-color:var(--color-media-background-selected);--rpl-input-chip-selected-border-color:var(--color-media-border-selected)}:host([selected]){--rpl-input-chip-background-color:var(--rpl-input-chip-selected-background-color);--rpl-input-chip-border-color:var(--rpl-input-chip-selected-border-color)}:host([disabled]){--rpl-input-chip-background-color:var(--rpl-input-chip-disabled-background-color);--rpl-input-chip-border-color:var(--rpl-input-chip-disabled-border-color);--rpl-input-chip-text-color:var(--rpl-input-chip-disabled-text-color)}:host([type=in-field]){height:var(--rem20);padding:var(--rem1) 0;border-radius:var(--rem4);align-items:center}:host([type=standalone]){height:var(--rem32);padding-block:calc(var(--rem4) - var(--rem1));padding-inline-start:calc(var(--rem12) - var(--rem1));padding-inline-end:calc(var(--rem6) - var(--rem1));border-radius:var(--rem8)}:host([type=standalone][dragged]){box-shadow:0 var(--rem4) var(--rem8) 0 var(--color-elevation-medium2),0 var(--rem6) var(--rem12) 0 var(--color-elevation-medium1);--rpl-input-chip-background-color:var(--rpl-input-chip-selected-background-color);--rpl-input-chip-border-color:var(--rpl-input-chip-selected-border-color)}:host(.hover:not([disabled])),:host(:hover:not([disabled])){background:var(--rpl-input-chip-hover-background-color)}::slotted([slot=leading]){display:inline-flex;margin-inline-start:var(--spacer-2xs);height:100%}::slotted([slot=trailing]){display:inline-flex}slot:not([name]){width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:inline-block}a,button{height:100%;align-items:center}:host([type=in-field]) slot:not([name]){margin-inline-start:calc(var(--rem6) - var(--rem1))}:host([type=standalone]) ::slotted([slot=leading]){margin-block:calc(var(--rem8) - var(--rem1));margin-inline-start:calc(-1 * (var(--rem4) - var(--rem1)));margin-inline-end:var(--rem4)}:host([type=in-field]) ::slotted([slot=trailing]){margin-inline-start:calc(var(--rem6) - var(--rem1));margin-inline-end:calc(var(--rem6) - var(--rem1))}.close-icon-container{height:var(--rem24);width:var(--rem24);display:inline-flex;align-items:center;justify-content:center}`;!function(e){e.Bordered="bordered",e.Media="media"}(S||(S={})),function(e){e.Standalone="standalone",e.InField="in-field"}(y||(y={}));let E=class extends n.R{constructor(){super(...arguments),this.appearance=S.Bordered,this.type=y.InField,this.dragged=!1}static get styles(){return[n.R.styles,b]}renderTrailingContent(){return t.x`${t.A}`}render(){return t.x` ${super.render()} <slot name="trailing"></slot> `}};e._([e.n({type:String})],E.prototype,"appearance",void 0),e._([e.n({type:String})],E.prototype,"type",void 0),e._([e.n({type:Boolean})],E.prototype,"dragged",void 0),E=e._([e.e("rpl-input-chip")],E);const{svg:g}=t.g(),R=t.m(g`<path d="M4.098 17a3.098 3.098 0 01-2.192-5.291l3.647-3.647a3.104 3.104 0 014.385 0l.308.309 1.672-1.672-1.55-1.548a1.254 1.254 0 01-.271-1.373 1.254 1.254 0 011.163-.777h7.84a.9.9 0 01.9.9v7.84c0 .512-.306.968-.777 1.163a1.256 1.256 0 01-1.373-.272l-1.548-1.549-3.861 3.862c-1.172 1.17-3.213 1.17-4.385 0l-.308-.309-1.457 1.458A3.099 3.099 0 014.098 17zm3.647-8.045c-.347 0-.674.135-.92.381L3.18 12.983a1.302 1.302 0 000 1.839 1.302 1.302 0 001.838 0l2.73-2.73 1.58 1.581a1.3 1.3 0 001.839 0L16.3 8.539l1.897 1.899V4.804h-5.634l1.899 1.897-4.218 4.218-1.581-1.581a1.289 1.289 0 00-.92-.381l.002-.002z"></path>`,"0 0 20 20","trend");function v(t){return!!t&&[e.ah.SearchResults,e.ah.SearchResultsTrending].includes(t)}const T="reddit-recent-searches-partial-container",f="reddit-suggested-search-queries-container",k="search-input",I="search-input-remove-filter",D="search-dropdown-results-container",N="reddit-trending-searches-partial-container",w="reddit-typeahead-results-partial-container",_="/svc/shreddit",$=`${_}/trending-searches`,x={size:t.I.Small,attributes:{"aria-hidden":"true",className:"flex items-center justify-center h-100 ml-px"}};var A,C,L;function O(){return Object.entries(c.p(e.a0.SearchTypeaheadExpanded)??{}).reduce(((e,[t,r])=>(r||e.push(t),e)),[]).join(",")}!function(e){e.Backspace="pill-backspace",e.Click="pill-click"}(A||(A={})),function(e){e.SearchDropdown="search_dropdown"}(C||(C={})),function(e){e.QUERY="query",e.TRENDING="trending",e.TYPEAHEAD="typeahead",e.SUBREDDIT_POST_FLAIR="subreddit_post_flair"}(L||(L={}));class P{constructor(e){this.host=e}async fetchTypeaheadResults(){const t={[r.S.QUERY]:(i=this.host.query,i?i.toLowerCase().trimStart().replace(/\s+/g," "):""),[r.S.CONVERSATION_ID]:a.a.get(e.dI.Qf)};var i;this.host.recentSearchesController.items.length>0&&(t[r.S.RECENT_SEARCHES_COUNT]=this.host.recentSearchesController.items.length.toString());const n=O();n&&(t[r.S.COLLAPSED_SECTIONS]=n),this.host.activeSearchScopeFlair&&(t[r.S.FLAIR]=this.host.activeSearchScopeFlair);const s=new URLSearchParams(t),o=await this.host.partialRequest.request(`${_}${this.host.activeSearchScope.path}search-typeahead?${s.toString()}`);if(this.host.partialRequest.isRequestInProgress)return;const d=await(o?.text());return d?e.b5(d):void 0}}let F;const U=new Uint8Array(16);function M(){if(!F&&(F="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!F))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return F(U)}var H=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const B=[];for(let e=0;e<256;++e)B.push((e+256).toString(16).slice(1));function q(e,t=0){return(B[e[t+0]]+B[e[t+1]]+B[e[t+2]]+B[e[t+3]]+"-"+B[e[t+4]]+B[e[t+5]]+"-"+B[e[t+6]]+B[e[t+7]]+"-"+B[e[t+8]]+B[e[t+9]]+"-"+B[e[t+10]]+B[e[t+11]]+B[e[t+12]]+B[e[t+13]]+B[e[t+14]]+B[e[t+15]]).toLowerCase()}function j(e){if(!function(e){return"string"==typeof e&&H.test(e)}(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}function z(e,t,r){function i(e,i,a,n){var s;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof i&&(i=j(i)),16!==(null===(s=i)||void 0===s?void 0:s.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let o=new Uint8Array(16+e.length);if(o.set(i),o.set(e,i.length),o=r(o),o[6]=15&o[6]|t,o[8]=63&o[8]|128,a){n=n||0;for(let e=0;e<16;++e)a[n+e]=o[e];return a}return q(o)}try{i.name=e}catch(e){}return i.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",i.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",i}function Q(e){return 14+(e+64>>>9<<4)+1}function V(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function G(e,t,r,i,a,n){return V((s=V(V(t,e),V(i,n)))<<(o=a)|s>>>32-o,r);var s,o}function Y(e,t,r,i,a,n,s){return G(t&r|~t&i,e,t,a,n,s)}function K(e,t,r,i,a,n,s){return G(t&i|r&~i,e,t,a,n,s)}function Z(e,t,r,i,a,n,s){return G(t^r^i,e,t,a,n,s)}function J(e,t,r,i,a,n,s){return G(r^(t|~i),e,t,a,n,s)}z("v3",48,(function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){const t=[],r=32*e.length,i="0123456789abcdef";for(let a=0;a<r;a+=8){const r=e[a>>5]>>>a%32&255,n=parseInt(i.charAt(r>>>4&15)+i.charAt(15&r),16);t.push(n)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[Q(t)-1]=t;let r=1732584193,i=-271733879,a=-1732584194,n=271733878;for(let t=0;t<e.length;t+=16){const s=r,o=i,d=a,h=n;r=Y(r,i,a,n,e[t],7,-680876936),n=Y(n,r,i,a,e[t+1],12,-389564586),a=Y(a,n,r,i,e[t+2],17,606105819),i=Y(i,a,n,r,e[t+3],22,-1044525330),r=Y(r,i,a,n,e[t+4],7,-176418897),n=Y(n,r,i,a,e[t+5],12,1200080426),a=Y(a,n,r,i,e[t+6],17,-1473231341),i=Y(i,a,n,r,e[t+7],22,-45705983),r=Y(r,i,a,n,e[t+8],7,1770035416),n=Y(n,r,i,a,e[t+9],12,-1958414417),a=Y(a,n,r,i,e[t+10],17,-42063),i=Y(i,a,n,r,e[t+11],22,-1990404162),r=Y(r,i,a,n,e[t+12],7,1804603682),n=Y(n,r,i,a,e[t+13],12,-40341101),a=Y(a,n,r,i,e[t+14],17,-1502002290),i=Y(i,a,n,r,e[t+15],22,1236535329),r=K(r,i,a,n,e[t+1],5,-165796510),n=K(n,r,i,a,e[t+6],9,-1069501632),a=K(a,n,r,i,e[t+11],14,643717713),i=K(i,a,n,r,e[t],20,-373897302),r=K(r,i,a,n,e[t+5],5,-701558691),n=K(n,r,i,a,e[t+10],9,38016083),a=K(a,n,r,i,e[t+15],14,-660478335),i=K(i,a,n,r,e[t+4],20,-405537848),r=K(r,i,a,n,e[t+9],5,568446438),n=K(n,r,i,a,e[t+14],9,-1019803690),a=K(a,n,r,i,e[t+3],14,-187363961),i=K(i,a,n,r,e[t+8],20,1163531501),r=K(r,i,a,n,e[t+13],5,-1444681467),n=K(n,r,i,a,e[t+2],9,-51403784),a=K(a,n,r,i,e[t+7],14,1735328473),i=K(i,a,n,r,e[t+12],20,-1926607734),r=Z(r,i,a,n,e[t+5],4,-378558),n=Z(n,r,i,a,e[t+8],11,-2022574463),a=Z(a,n,r,i,e[t+11],16,1839030562),i=Z(i,a,n,r,e[t+14],23,-35309556),r=Z(r,i,a,n,e[t+1],4,-1530992060),n=Z(n,r,i,a,e[t+4],11,1272893353),a=Z(a,n,r,i,e[t+7],16,-155497632),i=Z(i,a,n,r,e[t+10],23,-1094730640),r=Z(r,i,a,n,e[t+13],4,681279174),n=Z(n,r,i,a,e[t],11,-358537222),a=Z(a,n,r,i,e[t+3],16,-722521979),i=Z(i,a,n,r,e[t+6],23,76029189),r=Z(r,i,a,n,e[t+9],4,-640364487),n=Z(n,r,i,a,e[t+12],11,-421815835),a=Z(a,n,r,i,e[t+15],16,530742520),i=Z(i,a,n,r,e[t+2],23,-995338651),r=J(r,i,a,n,e[t],6,-198630844),n=J(n,r,i,a,e[t+7],10,1126891415),a=J(a,n,r,i,e[t+14],15,-1416354905),i=J(i,a,n,r,e[t+5],21,-57434055),r=J(r,i,a,n,e[t+12],6,1700485571),n=J(n,r,i,a,e[t+3],10,-1894986606),a=J(a,n,r,i,e[t+10],15,-1051523),i=J(i,a,n,r,e[t+1],21,-2054922799),r=J(r,i,a,n,e[t+8],6,1873313359),n=J(n,r,i,a,e[t+15],10,-30611744),a=J(a,n,r,i,e[t+6],15,-1560198380),i=J(i,a,n,r,e[t+13],21,1309151649),r=J(r,i,a,n,e[t+4],6,-145523070),n=J(n,r,i,a,e[t+11],10,-1120210379),a=J(a,n,r,i,e[t+2],15,718787259),i=J(i,a,n,r,e[t+9],21,-343485551),r=V(r,s),i=V(i,o),a=V(a,d),n=V(n,h)}return[r,i,a,n]}(function(e){if(0===e.length)return[];const t=8*e.length,r=new Uint32Array(Q(t));for(let i=0;i<t;i+=8)r[i>>5]|=(255&e[i/8])<<i%32;return r}(e),8*e.length))}));var X={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function W(e,t,r){if(X.randomUUID&&!e)return X.randomUUID();const i=(e=e||{}).random||(e.rng||M)();return i[6]=15&i[6]|64,i[8]=63&i[8]|128,q(i)}function ee(e,t,r,i){switch(e){case 0:return t&r^~t&i;case 1:case 3:return t^r^i;case 2:return t&r^t&i^r&i}}function te(e,t){return e<<t|e>>>32-t}z("v5",80,(function(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const i=e.length/4+2,a=Math.ceil(i/16),n=new Array(a);for(let t=0;t<a;++t){const r=new Uint32Array(16);for(let i=0;i<16;++i)r[i]=e[64*t+4*i]<<24|e[64*t+4*i+1]<<16|e[64*t+4*i+2]<<8|e[64*t+4*i+3];n[t]=r}n[a-1][14]=8*(e.length-1)/Math.pow(2,32),n[a-1][14]=Math.floor(n[a-1][14]),n[a-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<a;++e){const i=new Uint32Array(80);for(let t=0;t<16;++t)i[t]=n[e][t];for(let e=16;e<80;++e)i[e]=te(i[e-3]^i[e-8]^i[e-14]^i[e-16],1);let a=r[0],s=r[1],o=r[2],d=r[3],h=r[4];for(let e=0;e<80;++e){const r=Math.floor(e/20),n=te(a,5)+ee(r,s,o,d)+h+t[r]+i[e]>>>0;h=d,d=o,o=te(s,30)>>>0,s=a,a=n}r[0]=r[0]+a>>>0,r[1]=r[1]+s>>>0,r[2]=r[2]+o>>>0,r[3]=r[3]+d>>>0,r[4]=r[4]+h>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}));const re=/^m\/([\w+-]+)\/?/,ie=/^r\/([\w+-]+)\/?/,ae=/^u\/([\w+-]+)\/?/;class ne{constructor(t){this._items=null,this.syncWithAnotherInstance=e=>{this._items=e.items},this.removeItem=e=>{this.items=this.items.filter((t=>t.uuid!==e)),this.host.requestUpdate()},this.addItem=({clickedElement:e,flairData:t,type:r})=>{const i=this.buildRecentSearchItem({clickedElement:e,flairData:t,type:r});if(!i)return;const a=this.items.filter((e=>e.path!==i.path));a.length>=this.host.maxRecentSearches&&a.pop(),a.unshift(i),this.items=a},this.moveItemToTop=e=>{let t;const r=this.items.reduce(((r,i)=>(i.uuid===e?t=i:r.push(i),r)),[]);t&&(r.unshift(t),this.items=r)},this.extractDropdownItemTrackingContext=t=>{const r=t?.closest(`[data-type="${e.hS}"]`)?.getAttribute("data-faceplate-tracking-context")??"{}";return JSON.parse(r)},this.extractDropdownItemName=t=>t?.querySelector(`[data-type="${e.hT}"]`)?.textContent,this.buildDropdownItemTrackingContext=(e,t)=>{const r=this.extractDropdownItemTrackingContext(t);return r.search={...e.search,...r.search},delete r.search.impression_id,delete r.search.conversation_id,r},this.getClickedElementHref=e=>{const t=new URL(e.href);return t.searchParams.delete(i.S.ConversationId),t.searchParams.delete(i.S.ImpressionId),t.toString()},this.buildTrendingRecentSearchItem=({baseTrackingContext:e,clickedElement:t,query:i,uuid:a})=>{if(!t)return null;const n=this.getClickedElementHref(t),s=this.extractDropdownItemName(t);if(!s||!n)return null;return{name:s,path:n,rawQuery:i,trackingContext:this.buildDropdownItemTrackingContext(e,t),type:r.a.QUERY,uuid:a}},this.buildTypeaheadRecentSearchItem=({baseTrackingContext:e,clickedElement:t,query:i,uuid:a})=>{if(!t)return null;const n=this.getClickedElementHref(t),s=this.extractDropdownItemName(t);if(!s||!n)return null;const o=this.buildDropdownItemTrackingContext(e,t),d=t.querySelector("faceplate-img,img")?.src,h=!!t.getElementsByClassName("text-alert-caution").length,l=!!t.getElementsByClassName("text-category-nsfw").length;let c=r.a.QUERY;return ie.test(s)?c=r.a.SUBREDDIT:re.test(s)?c=r.a.MULTIREDDIT:ae.test(s)&&(c=r.a.PROFILE),{icon:d,isNsfw:l,isQuarantined:h,name:s,path:n,rawQuery:i,trackingContext:o,type:c,uuid:a}},this.buildSubredditPostFlairRecentSearchItem=({baseTrackingContext:e,flairData:t,uuid:a})=>{if(!t)return null;const n=t?.href,s=t?.chip,o=`${i.g(this.host.activeSearchScope)}`;if(!s||!n||!o)return null;const d=this.host.subreddit?.communityIcon;return{flair:s,icon:d,name:o,path:n,rawQuery:"",trackingContext:e,type:r.a.SUBREDDIT,uuid:a}},this.buildQueryRecentSearchItem=({baseTrackingContext:t,query:a,uuid:n})=>{if(!a)return null;const{activeSearchScope:s,multireddit:o,profile:d,subreddit:h}=this.host,l=i.g(s),c={[e.a1.GLOBAL]:"",[e.a1.COMMUNITY]:h?.communityIcon,[e.a1.CUSTOM_FEED]:o?.icon,[e.a1.PROFILE]:d?.icon}[s.type],p=a.trim();let u=p;s.type!==e.a1.GLOBAL&&(u=`${l} ${u}`);return{icon:c,name:u,path:i.b({cursor:{},query:p,scope:s}),rawQuery:a,trackingContext:t,type:r.a.QUERY,uuid:n}},this.buildRecentSearchItem=({clickedElement:e,flairData:t,type:r})=>{const{activeSearchScope:i,query:a}=this.host,n={search:{query:a,scope_path:i.path,scope_type:i.type}},s=W();switch(r){case L.TRENDING:return this.buildTrendingRecentSearchItem({baseTrackingContext:n,clickedElement:e,query:a,uuid:s});case L.TYPEAHEAD:return this.buildTypeaheadRecentSearchItem({baseTrackingContext:n,clickedElement:e,query:a,uuid:s});case L.SUBREDDIT_POST_FLAIR:return this.buildSubredditPostFlairRecentSearchItem({baseTrackingContext:n,flairData:t,uuid:s});case L.QUERY:return this.buildQueryRecentSearchItem({baseTrackingContext:n,query:a,uuid:s})}},this.host=t}hostDisconnected(){this._items=null}get items(){return this._items=this._items??c.p(e.a0.RecentSearches)??[],this._items}set items(t){this._items=t,c.h(e.a0.RecentSearches,t)}}class se extends t.s{constructor(){super(...arguments),this.scope=e.hU,this.scopedTypeaheadVariant="",this.scopedTypeaheadExperimentName="",this.scopedTypeaheadExperimentVersion="",this.askButtonVariant="",this.askButtonExperimentName="",this.askButtonExperimentVersion="",this.homeRevampVariant="",this.homeRevampExperimentName="",this.homeRevampExperimentVersion="",this.mobileExpandSearchBar=!1,this.isPdpSeekerM2=!1,this.openSearchInSeekerPostQueue=!1,this.suggestedSearchQueries=[],this.showFiltersEntrypoint=!1,this.isSduiZeroStateEnabled=!1,this.typeaheadDebounceDelay=300,this.maxRecentSearches=e.hV,this.showAskButton=!1,this.showAskText=!1,this.showSnooLeadingIcon=!1,this.globalLeaveScreenEventEnabled=!1,this.homeRevampEnabled=!1,this.query="",this.isSearchScopeEnabled=!1,this.trendingSearches=null,this.isFocused=!1,this.typeaheadResults=null,this.showDropdown=!1,this.loadingSearchResults=!1,this.hasFiredScopedTypeaheadExposeEvent=!1,this.hasFiredAskButtonExposeEvent=!1,this.hasFiredHomeRevampExposeEvent=!1,this.isScopedTypeaheadEnabled=!1,this.isScopedTypeaheadPrimaryAdjusterDismissed=!1,this.isScopedTypeaheadSecondaryAdjusterDismissed=!1,this.hasEditedQuery=!1,this.hasFiredDropdownShownInFocusSession=!1,this.isFiltersEntrypointEnabled=!1,this.getPageType=e.w,this.partialRequest=new e.aF(this),this.exposeClientExperiment=e.aj,this.activateFeature=e.j,this.pubsub=new e.m(this),this.sduiTypeaheadRequestController=new P(this),this.recentSearchesController=new ne(this),this.searchScrollBlockingController=null,this.handleDeleteRecentSearchItem=(e,t)=>{e.stopPropagation(),e.preventDefault(),this.recentSearchesController.removeItem(t)},this.handleRecentSearchDataUpdate=(e,t,r)=>{let i;t&&t.target instanceof HTMLElement&&(i="menuitem"===t.target.role?t.target:t.target.closest('[role="menuitem"]')),this.recentSearchesController.addItem({clickedElement:i??void 0,flairData:r,type:e})},this.debouncedSearch=()=>{this.debounceHandler||(this.debounceHandler=e.a6(this.fetchTypeaheadResults,this.typeaheadDebounceDelay)),this.debounceHandler()},this.handleSearchTypeaheadScopeAdjusterDismiss=({scopedTypeaheadChipDismissed:e})=>{e===m.PRIMARY?(this.isScopedTypeaheadPrimaryAdjusterDismissed=!0,this.isScopedTypeaheadSecondaryAdjusterDismissed=!0,this.isSearchScopeEnabled=!1):e===m.SECONDARY&&(this.isScopedTypeaheadSecondaryAdjusterDismissed=!0),this.typeaheadResults=null,this.focusSearchInput(),this.maybeFetchDropdownItems()},this.handleSearchTypeaheadFlairClick=e=>{this.handleRecentSearchDataUpdate(L.SUBREDDIT_POST_FLAIR,void 0,e)},this.handlePageDataReceived=t=>{const{profile:r,search:i,subreddit:a,multireddit:n}=t;i?.query&&this.pageType===e.ah.SearchResults&&(this.query=i.query),this.subreddit=a||void 0,this.profile=r||void 0,this.multireddit=n||void 0},this.handleEmptyTypeahead=()=>{this.typeaheadResults=null,this.maybeFetchDropdownItems()},this.handleSearchInput=e=>{this.handleQueryChange(e.target.value)},this.handleQueryChange=t=>{this.query!==t&&(a.S.update(e.dI.Qf),this.query=t,this.hasEditedQuery=!0,t?this.query&&this.debouncedSearch():this.handleEmptyTypeahead())},this.handleSubmit=(e,t=this.activeSearchScope)=>{e.preventDefault(),this.isPdpSeekerM2?this.reloadPostQueueOrRedirect(this.query):(this.handleRecentSearchDataUpdate(L.QUERY),this.redirect(this.getSearchUrl(t)))},this.redirect=e.bS,this.handleClear=()=>{this.handleQueryChange(""),this.input&&this.input.checkVisibility()&&(this.input.value="",this.input.focus())},this.focusSearchInput=()=>{this.input?.focus()},this.handleRemoveFilter=t=>{this.isSearchScopeEnabled&&this.searchScopePillDismissButton&&(e.f(this.searchScopePillDismissButton,{source:"search",action:"click",noun:"disable_scope",action_info:{type:t}}),this.typeaheadResults=null,this.isSearchScopeEnabled=!1,this.focusSearchInput(),this.maybeFetchDropdownItems())},this.handleFilterClick=e=>{e.preventDefault()},this.resetIsSearchScopeEnabled=()=>{this.isSearchScopeEnabled=this.isSearchScopeInitiallyEnabled},this.updateFlairExpansionState=t=>{this.pubsub.publish(e.T.SearchFlairExpansionStateChanged,{isExpanded:t})},this.handleClickAway=e=>{e.target===this||this.shadowRoot.contains(e.target)||this.handleBlur()},this.handleScreenLeaveTracking=()=>{const t=this.closest("shreddit-app"),r=t?._visibilityChange._screenviewId;if(this.globalLeaveScreenEventEnabled){const t={action_info:{page_type:e.ah.SearchDropdown},screenview_id:r};e.f(this,{source:"global",action:"leave",noun:"screen",...t})}t?.screenviewInstanceIdController.clearCustomId()},this.handleTrendingSearchesClick=e=>{this.handleRecentSearchDataUpdate(L.TRENDING,e),this.isPdpSeekerM2&&this.handlePostQueueActionForItem(e)},this.maybeUpdateDropdownState=()=>{const e=Boolean(this.isFocused&&(this.query&&this.typeaheadResults||!this.query&&this.trendingSearches||!this.query&&this.isSearchScopeEnabled&&this.isScopedTypeaheadEnabled&&this.typeaheadResults));this.searchIsVisible&&this.showDropdown!==e&&(!this.showDropdown&&e?(this.showDropdown=!0,this.hasFiredDropdownShownInFocusSession||this.handleDropdownShown()):this.showDropdown=!1)},this.handleDropdownShown=()=>{this.closest("shreddit-app")?.screenviewInstanceIdController.requestCustomId(e.hW.SearchDropdown),e.f(this.searchDropdownResultsContainer,{source:"global",action:"view",noun:"screen",action_info:{page_type:e.ah.SearchDropdown}}),this.dispatchEvent(new Event(c.an)),this.hasFiredDropdownShownInFocusSession=!0},this.renderSeekerSearchQueries=e=>t.x` <ul role="menu" id="${f}" @keydown="${this.handleDropdownKeyDown}" class="m-0 p-0 list-none"> ${e.map((e=>s.l({attributes:{className:"suggested-search-item",role:"menuitem",tabindex:"-1","data-label":e},onClick:()=>{this.reloadPostQueueOrRedirect(e)},label:t.x`<div class="text-neutral-content">${e}</div>`,size:s.L.Small})))} </ul> `,this.handlePostQueueActionForItem=e=>{const t=e.target?.closest("li");t&&t.dataset.label&&(e.preventDefault(),this.reloadPostQueueOrRedirect(t.dataset.label))},this.handleRecentSearchClick=(e,t)=>{this.recentSearchesController.moveItemToTop(t.uuid),this.isPdpSeekerM2&&t.type===r.a.QUERY&&t.name&&(e.preventDefault(),this.reloadPostQueueOrRedirect(t.name))},this.renderRecentSearchItem=r=>{const{trackingContext:i}=r,a=e.Y({appearance:"plain",attributes:{className:e.g1,slot:"dismiss-button-container",tabindex:"-1"},leadingIcon:t.R({size:t.I.Small}),screenReaderContent:this.getRecentSearchDeleteButtonScreenReaderContent(r.name),shape:"pill",size:e.a7.Small});return t.x` <faceplate-tracker source="search" action="click" noun="recent_search" data-type="search-dropdown-item" data-faceplate-tracking-context="${t.l(i&&JSON.stringify(i))}"> <faceplate-tracker source="search" action="view" noun="recent_search" loading-modifier="${e.hX.Always}" role="none"> <recent-search-item .recentSearchItem="${r}" .onClickLink="${e=>this.handleRecentSearchClick(e,r)}" .onClickDismiss="${e=>this.handleDeleteRecentSearchItem(e,r.uuid)}">${a}</recent-search-item> </faceplate-tracker> </faceplate-tracker> `},this.handleShowFiltersEntrypointUpdate=({isEnabled:e})=>{this.isFiltersEntrypointEnabled=e}}static get styles(){return[e.t,e.J(".search-input {\n  -webkit-appearance: none;\n}\n.search-input::-webkit-search-cancel-button {\n  display: none;\n}\n@media screen and (max-width: 768px) {\n  faceplate-search-input {\n    --font-14-20-regular: var(--font-16-20-regular);\n  }\n}\n.search-input-wrapper {\n  display: flex;\n  position: relative;\n  border-radius: var(--radius-full);\n}\n.search-input-gradient {\n  --color-secondary-background: var(--color-neutral-background);\n  --color-input-secondary: var(--color-neutral-background);\n  --color-input-secondary-hover: var(--color-neutral-background-hover);\n  position: relative;\n  height: var(--rem40);\n  border: 1px solid var(--color-neutral-border);\n  border-radius: var(--radius-full);\n  background-color: var(--color-neutral-background);\n}\n.search-input-gradient faceplate-search-input {\n  --color-input-plain-border: transparent;\n  --color-input-border: transparent;\n}\n.search-input-gradient > * {\n  position: relative;\n  z-index: 1;\n}\n.search-input-gradient:not(:focus-within) {\n  border-color: transparent;\n}\n.search-input-gradient:not(:focus-within)::before {\n  content: '';\n  position: absolute;\n  inset: -1px;\n  border: inherit;\n  border-radius: inherit;\n  background: linear-gradient(var(--color-neutral-background), var(--color-neutral-background)) padding-box, linear-gradient(90deg, var(--color-global-brand-orangered), #FFBF0B) border-box;\n  pointer-events: none;\n}\n.search-input-gradient:not(:focus-within)::after {\n  content: '';\n  position: absolute;\n  inset: -1px;\n  border: inherit;\n  border-radius: inherit;\n  background: linear-gradient(var(--color-neutral-background), var(--color-neutral-background)) padding-box, linear-gradient(90deg, var(--color-global-brand-orangered), #FFBF0B) border-box;\n  z-index: -1;\n  filter: blur(4px);\n  opacity: 0.75;\n  pointer-events: none;\n}\n.last-dropdown-item [role='menuitem'],\n.last-dropdown-item:hover [role='menuitem'],\n.last-dropdown-item:active [role='menuitem'],\n.last-dropdown-item:focus [role='menuitem'] {\n  border-bottom-left-radius: 1.25rem;\n  border-bottom-right-radius: 1.25rem;\n}\n.last-dropdown-section:not([open]) summary,\n.last-dropdown-section:not([open]):hover summary,\n.last-dropdown-section:not([open]):active summary,\n.last-dropdown-section:not([open]):focus summary,\n.last-dropdown-section:not([open]) summary [tabindex='-1'],\n.last-dropdown-section:not([open]):hover summary [tabindex='-1'],\n.last-dropdown-section:not([open]):active summary [tabindex='-1'],\n.last-dropdown-section:not([open]):focus summary [tabindex='-1'] {\n  border-bottom-left-radius: 1.25rem;\n  border-bottom-right-radius: 1.25rem;\n}\n")]}connectedCallback(){super.connectedCallback(),this.pageType=this.getPageType(),this.isSearchScopeEnabled=this.isSearchScopeInitiallyEnabled,this.isScopedTypeaheadEnabled=e.hY(this.scopedTypeaheadVariant),this.query=this.initialQuery??"",this.pubsub.subscribe(e.T.PageDataLoaded,this.handlePageDataReceived),this.shouldFireExposureOnRender()&&this.maybeFireScopedTypeaheadExposure(),this.omitDynamicId&&(a.a.shouldOverrideId=!0,a.S.shouldOverrideId=!0,a.b.shouldOverrideId=!0),this.isSearchScopeEnabled&&this.isScopedTypeaheadEnabled&&(this.pubsub.subscribe(e.T.SearchTypeaheadScopeAdjusterDismiss,this.handleSearchTypeaheadScopeAdjusterDismiss,!1),this.pubsub.subscribe(e.T.SearchTypeaheadFlairClick,this.handleSearchTypeaheadFlairClick,!1)),this.showFiltersEntrypoint&&v(this.pageType)&&this.pubsub.subscribe(e.T.SearchShowFiltersEntrypoint,this.handleShowFiltersEntrypointUpdate)}disconnectedCallback(){super.disconnectedCallback(),this.isFiltersEntrypointEnabled=!1,this.handleBlur(),this.typeaheadResults=null,this.trendingSearches=null}updated(e){this.loadingSearchResults&&(e.has("typeaheadResults")||e.has("trendingSearches"))&&(this.loadingSearchResults=!1)}getAdParam(){return new URL(window.location.href).searchParams.get(i.S.Ad)}hydrateSduiRecentSearches(t){if(!t)return;const i=t.reduce(((e,t)=>{if(t.tagName.toLowerCase()===r.R)e.push(t);else{t.querySelectorAll(r.R).forEach((t=>e.push(t)))}return e}),[]);for(let t=0;t<i.length&&t<this.recentSearchesController.items.length;t++){const r=i[t],a=this.recentSearchesController.items[t];r.recentSearchItem=a;const n=r.closest(`.${e.hZ}`);n&&a.trackingContext&&n.setAttribute("data-faceplate-tracking-context",JSON.stringify(a.trackingContext));const s=r.querySelector(`.${e.g1}`);s&&(s.ariaLabel=this.getRecentSearchDeleteButtonScreenReaderContent(a.name)),r.onClickLink=e=>this.handleRecentSearchClick(e,a),r.onClickDismiss=t=>{this.handleDeleteRecentSearchItem(t,a.uuid),r.remove(),0===this.recentSearchesController.items.length&&this.trendingSearchesContainer?.querySelector(`[id$="${e.h_}"]`)?.remove()}}}async fetchTrendingSearches(){if(this.isSearchScopeEnabled)return;let t;if(this.loadingSearchResults=!0,this.isSduiZeroStateEnabled)t=await this.sduiTypeaheadRequestController.fetchTypeaheadResults(),this.hydrateSduiRecentSearches(t);else{const r=this.getAdParam(),n=new URLSearchParams({[i.S.ConversationId]:a.a.get(e.dI.Qf),...(r ? {[i.S.Ad]:r} : {})}),s=await this.partialRequest.request(`${$}?${n.toString()}`),o=await(s?.text());t=o?e.b5(o):void 0}t&&this.trendingSearchesContainer&&(this.isSduiZeroStateEnabled||function(t){const r=t.find((t=>t.attributes.getNamedItem(e.i6.IsPromoted)));r&&r.querySelector("[role=menuitem]")?.addEventListener("keydown",(function(e){"Enter"===e.key&&e.target?.dispatchEvent(new MouseEvent("click",{bubbles:!0}))}))}(t),this.trendingSearches=t)}async fetchTypeaheadResults(){const e=this.isSearchScopeEnabled&&!this.isScopedTypeaheadPrimaryAdjusterDismissed&&!this.isScopedTypeaheadEnabled&&!this.query,t=!this.isSearchScopeEnabled&&!this.query;if(e||t)return;this.loadingSearchResults=!0;const r=await this.sduiTypeaheadRequestController.fetchTypeaheadResults();r&&this.typeaheadResultsContainer&&(this.typeaheadResults=r)}get isSearchScopeInitiallyEnabled(){return this.scope.type!==e.a1.GLOBAL&&!document.querySelector("#shreddit-forbidden")}get isSearchSmall(){return this.tagName.toLowerCase()===e.k.SearchInputSmall}get activeSearchScope(){return this.isSearchScopeEnabled?this.scope:e.hU}get activeSearchScopeFlair(){const t=this.scope.type===e.a1.COMMUNITY&&this.scope.flair;return t&&this.isSearchScopeEnabled&&!this.isScopedTypeaheadSecondaryAdjusterDismissed?t:void 0}async maybeFetchDropdownItems(){const e=!this.query,t=!!this.trendingSearches,r=!!this.typeaheadResults,{isSearchScopeEnabled:i,isScopedTypeaheadEnabled:a}=this;i&&this.maybeFireScopedTypeaheadExposure(),!e||t||i?e&&(!a||t)||r||this.debouncedSearch():this.fetchTrendingSearches()}handleFocus(){this.isFocused||(this.isFocused=!0,e.f(this.input,{source:"search",action:"click",noun:"search_bar"}),this.mobileExpandSearchBar&&e.f(this.input,{source:"nav",action:"click",noun:"search_opened"}),this.searchScrollBlockingController?.blockPageScrollingForSearch(),this.maybeFetchDropdownItems(),this.updateFlairExpansionState(!1),this.isSearchSmall&&(this.homeRevampVariant&&!this.hasFiredHomeRevampExposeEvent&&this.maybeFireHomeRevampExposure(),this.askButtonVariant&&!this.hasFiredAskButtonExposeEvent&&this.maybeFireAskButtonExposure()),window.requestAnimationFrame((()=>{window.addEventListener("click",this.handleClickAway)})))}handleBlur(){this.input?.blur(),this.isFocused=!1,window.removeEventListener("click",this.handleClickAway),this.searchScrollBlockingController?.unblockPageScrollingForSearch(),a.S.update(e.dI.Qf),a.a.set(e.dI.Qf),this.typeaheadResults=null,this.trendingSearches=null,this.hasFiredDropdownShownInFocusSession=!1,this.isScopedTypeaheadEnabled&&(this.isScopedTypeaheadPrimaryAdjusterDismissed||this.isScopedTypeaheadSecondaryAdjusterDismissed)&&(this.isScopedTypeaheadPrimaryAdjusterDismissed=!1,this.isScopedTypeaheadSecondaryAdjusterDismissed=!1,this.resetIsSearchScopeEnabled()),this.updateFlairExpansionState(!1)}getSearchUrl(t){return i.b({conversationId:a.a.get(e.dI.Qf),cursor:{},impressionId:a.S.getUUID(),query:this.query,flair:this.activeSearchScopeFlair,scope:t})}get searchTelemetryData(){const t={action_info:{pane_name:C.SearchDropdown},search:{conversation_id:a.a.get(e.dI.Qf),impression_id:a.S.get(e.dI.Qf),origin_element:"search_bar",origin_page_type:this.pageType??"",query:this.query,query_id:a.b.get({query:this.query,scope:e.hU},e.dI.Qf),range:e.h$.ALL,sort:e.i0,typeahead_active:this.isFocused}};if(this.isSearchScopeEnabled||this.isSearchScopeTelemetryExperimentEnabled){const{type:r,path:i}=this.isSearchScopeEnabled?this.scope:e.hU;t.search=((t,r,{subreddit_id:i,subreddit_name:a,custom_feed_id:n,scope_type:s,scope_id:o,scope_name:d,scope_path:h}={},l)=>{if(l){const e={...(d ? {scope_name:d} : {}),...(o ? {scope_id:o} : {})};return{...t,...e,scope_type:s,scope_path:h}}return{[e.a1.COMMUNITY]:{...t,subreddit_id:i,subreddit_name:a},[e.a1.CUSTOM_FEED]:{...t,custom_feed_id:n},[e.a1.PROFILE]:t,[e.a1.GLOBAL]:t,[e.a1.PDP]:t}[r]})(t.search,r,{scope_id:this.isSearchScopeEnabled?this.subreddit?.id:"",scope_name:this.isSearchScopeEnabled?this.subreddit?.name:"",scope_type:r,scope_path:i,subreddit_id:this.subreddit?.id,subreddit_name:this.subreddit?.name,custom_feed_id:this.multireddit?.path},this.isSearchScopeTelemetryExperimentEnabled)}return t}handleTypeaheadResultsClick(t,r=L.TYPEAHEAD){const i=document.querySelector("shreddit-good-visit-tracker");i&&(i.pageType=e.ah.SearchDropdown,i.setScreenViewData({...this.searchTelemetryData,action_info:{...this.searchTelemetryData.action_info,page_type:e.ah.SearchDropdown}})),this.handleRecentSearchDataUpdate(r,t),this.isPdpSeekerM2&&this.handlePostQueueActionForItem(t)}get searchIsVisible(){return!0}willUpdate(){this.maybeUpdateDropdownState()}handleDropdownKeyDown(e){"Enter"===e.key&&this.isPdpSeekerM2&&this.handlePostQueueActionForItem(e)}handleKeyDown(t){if("Backspace"!==t.key||this.query||this.scope.type===e.a1.GLOBAL){if("Enter"===t.key&&this.query&&t.target.id===k){const{activeSearchScope:r}=this;e.f(this.input,{...e.i1,source:this.getFullSearchButtonSource()}),this.handleSubmit(t,r)}}else this.isScopedTypeaheadEnabled||this.handleRemoveFilter(A.Backspace)}renderSearchInput(r=!1,a){const n=this.placeholderText||i.c(this.activeSearchScope,this.mobileExpandSearchBar,this.showAskButton,this.homeRevampEnabled),s={action_info:{type:`input-${this.activeSearchScope.type}`}},o=r&&(this.showAskButton||this.homeRevampEnabled)&&!this.isSearchScopeEnabled&&!this.isFocused,d=r||!this.isSearchScopeEnabled||this.isSearchScopeEnabled&&this.isScopedTypeaheadEnabled||this.mobileExpandSearchBar&&!this.isFocused&&!this.showDropdown;return t.x` <faceplate-search-input @focus="${this.handleFocus}" @input="${this.handleSearchInput}" @keydown="${this.handleKeyDown}" class="search-input m-0 flex-1 w-full outline-none p-0 font-sans placeholder:text-neutral-content-weak${a??""}" data-faceplate-tracking-context="${JSON.stringify(s)}" autocomplete="off" enterkeyhint="search" id="${k}" inputmode="" maxlength="${128}" name="q" novalidate placeholder="${d?n:""}" ?center-placeholder="${o}" role="search" type="search" value="${l.l(this.query)}">${this.renderLeadingIcon()} ${this.renderScopedSearchPill()} ${e.Y({attributes:{className:this.mobileExpandSearchBar&&!this.isFocused?"hidden":"",id:"search-input-clear-button",slot:"clearIcon",type:"button",onclick:this.handleClear,style:!this.showAskButton&&!this.homeRevampEnabled||!this.isSearchScopeEnabled&&this.showAskButton?"":"margin-inline-start: 2px;"},appearance:"plain",size:e.a7.Small,screenReaderContent:"Clear search",leadingIcon:this.showAskButton||this.homeRevampEnabled?t.c({size:t.I.Small,attributes:{style:"color: var(--color-neutral-content-weak);"}}):t.R({size:t.I.Small})})} ${this.showAskButton&&!this.isSearchScopeEnabled?t.x`<div slot="trailingContent">${this.renderAskButton()}</div>`:t.A} </faceplate-search-input>`;}handleShowFiltersEntrypointClick(){this.pubsub.publish(e.T.SearchActivateFilterModal)}renderShowFiltersEntryPoint(){if(!this.shouldShowFiltersEntrypoint||this.isSearchSmall&&this.isFocused)return t.A;let r="ms-xs",i=e.a7.Medium;return this.isSearchSmall&&(r="ms-[var(--rem6)]",i=e.a7.Small),t.x`<rpl-dialog-trigger dialog-id="${e.i2}">${e.Y({appearance:"plain",attributes:{"aria-label":"Open filters menu",className:r,onclick:this.handleShowFiltersEntrypointClick,type:"button"},leadingIcon:u.f({size:t.I.Medium}),size:i})}</rpl-dialog-trigger>`;}async maybeFireScopedTypeaheadExposure(){this.scopedTypeaheadVariant&&!this.hasFiredScopedTypeaheadExposeEvent&&this.exposeClientExperiment({experimentName:this.scopedTypeaheadExperimentName,experimentVersion:this.scopedTypeaheadExperimentVersion,variant:this.scopedTypeaheadVariant}).then((()=>{this.hasFiredScopedTypeaheadExposeEvent=!0})).catch((()=>{}))}async maybeFireAskButtonExposure(){this.askButtonVariant&&!this.hasFiredAskButtonExposeEvent&&(this.hasFiredAskButtonExposeEvent=!0,this.exposeClientExperiment({experimentName:this.askButtonExperimentName,experimentVersion:this.askButtonExperimentVersion,variant:this.askButtonVariant}).then((()=>{})).catch((()=>{})))}async maybeFireHomeRevampExposure(){this.homeRevampVariant&&!this.hasFiredHomeRevampExposeEvent&&this.showAskButton&&this.exposeClientExperiment({experimentName:this.homeRevampExperimentName,experimentVersion:this.homeRevampExperimentVersion,variant:this.homeRevampVariant}).then((()=>{this.hasFiredHomeRevampExposeEvent=!0})).catch((()=>{}))}reloadPostQueueOrRedirect(t){if(!this.openSearchInSeekerPostQueue)return this.handleQueryChange(t),this.handleBlur(),this.handleRecentSearchDataUpdate(L.QUERY),void this.redirect(this.getSearchUrl(this.activeSearchScope));this.activateFeature({name:e.bT,queryParams:{context:p.a.PostQuerySearch,q:t,forceScrollToTop:"true",forceLoadFirstPdp:"true",triggerGoodVisit:"true"},renderMode:e.P.Contents}),this.handleQueryChange(t),this.handleBlur()}getRecentSearchDeleteButtonScreenReaderContent(e){return `Delete ${e} from recent searches`;}renderLeadingIcon(){return this.isSearchSmall&&(this.showAskButton||this.homeRevampEnabled)?t.x`<span slot="leadingIcon"></span>`:this.showSnooLeadingIcon?t.x`${e.cx(`<svg\n      slot="leadingIcon"\n      style="margin-inline-start: calc(-1 * var(--spacer-sm))"\n      width="28"\n      height="28"\n      xmlns="http://www.w3.org/2000/svg"\n      viewBox="0 0 256 256"\n      xml:space="preserve"\n      xmlns:xlink="http://www.w3.org/1999/xlink"\n    >${e.i3}</svg>`)}`:t.A}renderRecentSearches(){const r=this.recentSearchesController.items.map(this.renderRecentSearchItem);return t.x` <div class="w-full border-solid border-b-sm border-t-0 border-e-0 border-s-0 border-neutral-border ${e.H({hidden:this.query})}"> <ul class="p-0 m-0 border-none" id="${T}" @keydown="${this.handleDropdownKeyDown}"> ${r} </ul> </div>`}renderTrendingSearches(){const r=this.query||!this.trendingSearches;return t.x` <div class="ms-md mt-sm mb-2xs text-neutral-content-weak flex items-center ${e.H({hidden:r||this.isSduiZeroStateEnabled})}"> ${R({attributes:{"aria-hidden":"true",className:"me-2xs"},size:t.I.Small})} ${"TRENDING TODAY"} </div> <ul class="list-none mt-0 mb-0 p-0 search-results-list ${e.H({hidden:r})}" id="${N}" @keydown="${this.handleDropdownKeyDown}" @click="${this.handleTrendingSearchesClick}" role="menu" aria-busy="${this.loadingSearchResults}"> ${this.trendingSearches} </ul> `;}renderTypeaheadResults(r=!1){return t.x`<ul id="${w}" class="list-none mt-0 mb-0 p-0 search-results-list min-w-0 ${e.H({"px-md":r,"-mx-md":r})}" @click="${this.handleTypeaheadResultsClick}" @keydown="${this.handleDropdownKeyDown}" role="menu" aria-busy="${this.loadingSearchResults}"> ${this.typeaheadResults??""} </ul>`}renderScopedSearchPill(){if(this.scope.type===e.a1.GLOBAL||!this.isSearchScopeEnabled||this.isSearchScopeEnabled&&this.isScopedTypeaheadEnabled)return t.A;const r=i.g({type:this.scope.type,path:this.scope.path}),a={search:{origin_element:i.d.SearchBarPill},...(this.subreddit ? {subreddit:{id:this.subreddit.id,quarantined:this.subreddit.isQuarantined,nsfw:this.subreddit.isNsfw,name:this.subreddit.name}} : {})};return this.showAskButton||this.homeRevampEnabled?t.x`<rpl-input-chip id="${I}" slot="chips" class="${this.mobileExpandSearchBar?"max-w-[8rem]":""}" style="--rpl-input-chip-background-color:var(--color-neutral-background);--rpl-input-chip-selected-background-color:var(--color-neutral-background)" data-faceplate-tracking-context="${JSON.stringify(a)}" selected="selected" appearance="bordered" type="in-field" aria-label="${`Remove ${r} filter and expand search to all of Reddit`}" @click="${()=>this.handleRemoveFilter(A.Click)}"> <span slot="leading">${this.getChipIcon()}</span> <span class="whitespace-nowrap overflow-hidden text-ellipsis" aria-hidden="true">${r}</span> <span slot="trailing">${t.c({size:t.I.ExtraSmall})}</span> </rpl-input-chip>`:c.am({attributes:{id:"search-input-chip",onclick:this.handleFilterClick,slot:"chips",className:this.mobileExpandSearchBar?"max-w-[8rem]":""},deleteButtonConfig:{screenReaderContent:`Remove ${r} filter and expand search to all of Reddit`,attributes:{"data-faceplate-tracking-context":JSON.stringify(a),id:I,onclick:()=>this.handleRemoveFilter(A.Click),type:"button"}},screenReaderContent:`Current search is within ${r}`,selected:!0,leadingIcon:this.getChipIcon(),children:t.x`<span aria-hidden="true">${r}</span>`});}getFullSearchButtonSource(){return this.isPdpSeekerM2?"post_detail":"search"}getChipIcon(){if(this.scope.type===e.a1.GLOBAL)return t.x``;const{defaultIcon:i,iconUrl:a,isScopeNsfw:n}={[e.a1.COMMUNITY]:{defaultIcon:d.c,iconUrl:this.subreddit?.communityIcon,isScopeNsfw:this.subreddit?.isNsfw},[e.a1.CUSTOM_FEED]:{defaultIcon:r.c,iconUrl:this.multireddit?.icon,isScopeNsfw:this.multireddit?.isNsfw},[e.a1.PROFILE]:{defaultIcon:h.p,iconUrl:this.profile?.icon,isScopeNsfw:this.profile?.isNsfw}}[this.scope.type];return n&&!this.isNsfwEnabled?t.x`${t.O(x)}`:a?t.x`<div class="w-full h-full flex justify-center items-center"> <img height="16" width="16" class="rounded-full overflow-hidden" src="${a}" role="presentation"> </div>`:t.x`${i(x)}`}renderDropdownContent(e){const t=[],r=!this.query,i=this.isSearchScopeEnabled&&this.isScopedTypeaheadEnabled;return this.isPdpSeekerM2&&this.suggestedSearchQueries?.length>0&&!this.hasEditedQuery&&t.push(this.renderSeekerSearchQueries(this.suggestedSearchQueries)),r&&this.recentSearchesController.items?.length&&!i&&!this.isSduiZeroStateEnabled&&t.push(this.renderRecentSearches()),r&&!i?t.push(this.renderTrendingSearches()):t.push(this.renderTypeaheadResults(e)),t}shouldFireExposureOnRender(){return!!this.isSearchScopeEnabled&&(!this.isSearchSmall||this.mobileExpandSearchBar&&Boolean(this.pageType&&this.pageType===e.ah.SearchResults))}get shouldShowFiltersEntrypoint(){return this.showFiltersEntrypoint&&this.isFiltersEntrypointEnabled}renderAskButton(){if(!this.showAskButton||this.isSearchScopeEnabled)return t.A;!this.askButtonVariant||this.hasFiredAskButtonExposeEvent||this.isSearchSmall||this.maybeFireAskButtonExposure(),!this.homeRevampVariant||this.hasFiredHomeRevampExposeEvent||this.isSearchSmall||this.maybeFireHomeRevampExposure();const r=this.searchTelemetryData.search,i=e.i4({conversationID:W(),query:this.query,source:this.pageType===e.ah.SearchResults?e.i5.AskButtonSerp:e.i5.AskButtonTypeahead,upstreamConversationId:r.conversation_id,upstreamImpressionId:r.impression_id,upstreamQuery:this.query,upstreamQueryId:r.query_id,upstreamQueryType:this.pageType===e.ah.SearchResults?"search_ask":"typeahead_ask"});return t.x`<faceplate-tracker source="search" action="click" noun="icon" data-faceplate-tracking-context="${JSON.stringify({action_info:{type:"ask"},search:{conversation_id:r.conversation_id,impression_id:r.impression_id,query:this.query,query_id:r.query_id}})}"> ${e.Y({size:e.a7.Small,appearance:"plain",leadingIcon:o.a({size:t.I.Small,attributes:{className:"text-secondary",style:"color:var(--color-upvote-plain-weaker);"}}),children:this.showAskText?"Ask":void 0,attributes:{href:this.query.trim().length>0?i:e.fY,className:"text-neutral-content no-underline hover:no-underline"}})} </faceplate-tracker>`;}}return e._([e.n({attribute:"initial-query",type:String})],se.prototype,"initialQuery",void 0),e._([e.n({attribute:"scope",type:Object})],se.prototype,"scope",void 0),e._([e.n({attribute:"omit-dynamic-id",type:Boolean})],se.prototype,"omitDynamicId",void 0),e._([e.n({attribute:"is-nsfw-enabled",type:Boolean})],se.prototype,"isNsfwEnabled",void 0),e._([e.n({attribute:"scoped-typeahead-variant",type:String})],se.prototype,"scopedTypeaheadVariant",void 0),e._([e.n({attribute:"scoped-typeahead-experiment-name",type:String})],se.prototype,"scopedTypeaheadExperimentName",void 0),e._([e.n({attribute:"scoped-typeahead-experiment-version",type:String})],se.prototype,"scopedTypeaheadExperimentVersion",void 0),e._([e.n({attribute:"ask-button-variant",type:String})],se.prototype,"askButtonVariant",void 0),e._([e.n({attribute:"ask-button-experiment-name",type:String})],se.prototype,"askButtonExperimentName",void 0),e._([e.n({attribute:"ask-button-experiment-version",type:String})],se.prototype,"askButtonExperimentVersion",void 0),e._([e.n({attribute:"home-revamp-variant",type:String})],se.prototype,"homeRevampVariant",void 0),e._([e.n({attribute:"home-revamp-experiment-name",type:String})],se.prototype,"homeRevampExperimentName",void 0),e._([e.n({attribute:"home-revamp-experiment-version",type:String})],se.prototype,"homeRevampExperimentVersion",void 0),e._([e.n({attribute:"is-search-scope-telemetry-experiment-enabled",type:Boolean})],se.prototype,"isSearchScopeTelemetryExperimentEnabled",void 0),e._([e.n({type:Boolean,attribute:"mobile-expand-search-bar"})],se.prototype,"mobileExpandSearchBar",void 0),e._([e.n({type:Boolean,attribute:"is-pdp-seeker-m2"})],se.prototype,"isPdpSeekerM2",void 0),e._([e.n({type:Boolean,attribute:"open-search-in-seeker-post-queue"})],se.prototype,"openSearchInSeekerPostQueue",void 0),e._([e.n({type:Array,attribute:"suggested-search-queries"})],se.prototype,"suggestedSearchQueries",void 0),e._([e.n({attribute:"show-filters-entrypoint",type:Boolean})],se.prototype,"showFiltersEntrypoint",void 0),e._([e.n({type:Boolean,attribute:"is-sdui-zero-state-enabled"})],se.prototype,"isSduiZeroStateEnabled",void 0),e._([e.n({type:Number,attribute:"typeahead-debounce-delay"})],se.prototype,"typeaheadDebounceDelay",void 0),e._([e.n({type:String,attribute:"placeholder"})],se.prototype,"placeholderText",void 0),e._([e.n({type:Number,attribute:"max-recent-searches"})],se.prototype,"maxRecentSearches",void 0),e._([e.n({type:Boolean,attribute:"show-ask-button"})],se.prototype,"showAskButton",void 0),e._([e.n({type:Boolean,attribute:"show-ask-text"})],se.prototype,"showAskText",void 0),e._([e.n({type:Boolean,attribute:"show-snoo-leading-icon"})],se.prototype,"showSnooLeadingIcon",void 0),e._([e.n({type:Boolean,attribute:"global-leave-screen-event-enabled"})],se.prototype,"globalLeaveScreenEventEnabled",void 0),e._([e.Q(".search-input",!0)],se.prototype,"input",void 0),e._([e.Q(`#${w}`)],se.prototype,"typeaheadResultsContainer",void 0),e._([e.Q("#typeahead-results-nsfw-section")],se.prototype,"typeaheadResultsNsfwSection",void 0),e._([e.Q(`#${N}`)],se.prototype,"trendingSearchesContainer",void 0),e._([e.Q(`#${T}`)],se.prototype,"recentSearchesContainer",void 0),e._([e.Q(`#${I}`)],se.prototype,"searchScopePillDismissButton",void 0),e._([e.Q(`#${D}`)],se.prototype,"searchDropdownResultsContainer",void 0),e._([e.Q(`#${f}`)],se.prototype,"suggestedSearchResultsContainer",void 0),e._([e.n({type:Boolean,attribute:"home-revamp-enabled"})],se.prototype,"homeRevampEnabled",void 0),e._([e.N()],se.prototype,"query",void 0),e._([e.N()],se.prototype,"subreddit",void 0),e._([e.N()],se.prototype,"profile",void 0),e._([e.N()],se.prototype,"multireddit",void 0),e._([e.N()],se.prototype,"pageType",void 0),e._([e.N()],se.prototype,"isSearchScopeEnabled",void 0),e._([e.N()],se.prototype,"trendingSearches",void 0),e._([e.N()],se.prototype,"isFocused",void 0),e._([e.N()],se.prototype,"typeaheadResults",void 0),e._([e.N()],se.prototype,"showDropdown",void 0),e._([e.N()],se.prototype,"loadingSearchResults",void 0),e._([e.N()],se.prototype,"hasFiredScopedTypeaheadExposeEvent",void 0),e._([e.N()],se.prototype,"hasFiredAskButtonExposeEvent",void 0),e._([e.N()],se.prototype,"hasFiredHomeRevampExposeEvent",void 0),e._([e.N()],se.prototype,"isScopedTypeaheadEnabled",void 0),e._([e.N()],se.prototype,"isScopedTypeaheadPrimaryAdjusterDismissed",void 0),e._([e.N()],se.prototype,"isScopedTypeaheadSecondaryAdjusterDismissed",void 0),e._([e.N()],se.prototype,"hasEditedQuery",void 0),e._([e.N()],se.prototype,"hasFiredDropdownShownInFocusSession",void 0),e._([e.N()],se.prototype,"isFiltersEntrypointEnabled",void 0),{R:se,S:D,p:v}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("C6mzR4Ia",["GlDbwxoG","s_Igk1Yn"],(async(t,e)=>{let s=class extends e.s{constructor(){super(...arguments),this.impressionId="0",this.partialSrc="/svc/shreddit/dsa-transparency-modal/",this.getModal=()=>this.querySelector("rpl-dialog-sheet"),this.dispatchCloseDsaTransparencyModalEvent=()=>{this.dispatchEvent(t.c("dsa-transparency-modal-close"))},this.initDialogSheet=()=>{const e=this.getModal();e&&!e.open&&(e.addEventListener("rpl-dialog-sheet:after-show",this.setupButtons),e.addEventListener("rpl-dialog-sheet:hide",this.handleModalHide),e.showModal(),t.f(this,t.b({source:"post",action:"view",noun:"about_this_ad"},{post:{id:this.postId},ad_metadata:{impression_id:this.impressionId,placement:this.placement},screen:{height:window.screen.height,width:window.screen.width}})))},this.onCloseModal=()=>{this.getModal()?.hide()},this.setupButtons=()=>{const t=this.getModal();if(!t)return;const e=t.portalContainer?.querySelector("#dsa-transparency-modal-done");e?.addEventListener("click",this.onCloseModal)},this.handleModalHide=()=>{const t=this.getModal();if(!t||t.open)return;const e=t.portalContainer?.querySelector("#dsa-transparency-modal-done");e?.removeEventListener("click",this.onCloseModal),t.removeEventListener("rpl-dialog-sheet:after-show",this.setupButtons),t.removeEventListener("rpl-dialog-sheet:hide",this.handleModalHide),this.dispatchCloseDsaTransparencyModalEvent()},this.initModal=()=>this.initDialogSheet()}render(){return e.x`<slot></slot>`}};s.styles=[t.t],t._([t.n({type:Boolean,attribute:"is-desktop"})],s.prototype,"isDesktop",void 0),t._([t.n({type:String,attribute:"post-id"})],s.prototype,"postId",void 0),t._([t.n({type:String,attribute:"impression-id"})],s.prototype,"impressionId",void 0),t._([t.n({type:String,attribute:"placement"})],s.prototype,"placement",void 0),s=t._([t.e("dsa-transparency-modal")],s)}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("C7Ws8ntA",["s_Igk1Yn"],(async c=>{const{svg:m}=c.g();return{b:c.m(m`<path d="M10 1c-4.96 0-9 4.04-9 9s4.04 9 9 9 9-4.04 9-9-4.04-9-9-9zm7.15 8.2h-3.17c-.1-2.37-.62-4.46-1.4-5.91 2.46.95 4.27 3.2 4.57 5.91zm-7.15 8c-.66 0-2.2-2.24-2.38-6.4h4.76c-.18 4.16-1.73 6.4-2.38 6.4zm-2.38-8C7.8 5.04 9.35 2.8 10 2.8c.65 0 2.2 2.24 2.38 6.4H7.62zm-.2-5.91c-.78 1.45-1.3 3.55-1.4 5.91H2.85c.3-2.71 2.11-4.97 4.57-5.91zM2.85 10.8h3.17c.1 2.37.62 4.46 1.4 5.91-2.46-.95-4.27-3.2-4.57-5.91zm9.73 5.91c.78-1.45 1.3-3.55 1.4-5.91h3.17a7.188 7.188 0 01-4.57 5.91z"></path>`,"0 0 20 20","browser")}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./CcP9EA1F.js",import.meta.url,"CcP9EA1F");SML.di("./B7hVC8R1.js",import.meta.url,"B7hVC8R1");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("C88aLMqE",["GlDbwxoG","CcP9EA1F","B7hVC8R1","CC2wUKE8"],(async(e,t,n,o)=>{const i=(t,n)=>e.b({source:o.ao,action:o.aF,noun:t},{action_info:{source_name:n??"unknown"}});return {A:class{constructor(t){this.host=t,this.beginOIDCLogin=async e=>{if(!e)return;const t=await this.getOIDCProviderLoginUrl(e);t&&this.redirectToOIDCLogin(t)},this.redirectToOIDCLogin=e=>{window.location.assign(e)},this.dispatchSSOError=e=>{const t=e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();this.dispatchError(`Something went wrong interacting with ${t}`,`auth-flow-provider-error-${e}`)},this.dispatchError=(t,n,o=e.X.error)=>{const i=e.c("faceplate-alert",{level:o,message:t,cause:n});this.host.dispatchEvent(i)},this.host.addController(this)}hostConnected(){this.authFlowManager=document.querySelector("auth-flow-manager")}async show(t,n){const o=e.c("auth-flow-loading:start",{step:t});if(this.host.dispatchEvent(o),o.defaultPrevented)return;return (await (this.authFlowManager?.show(t, n)))?(this.host.dispatchEvent(e.c("auth-flow-loading:success",{step:t})),!0):(this.host.dispatchEvent(e.c("auth-flow-loading:error",{step:t})),!1);}back(){this.authFlowManager?.back()}close(){this.authFlowManager?.close()}async checkIsOIDCRequired(t){if(!t)return!1;try{const n=window.location.origin,o=new URL(e.cX.CheckIsOIDCRequired,n),i=await fetch(o,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({userIdentifier:t,csrf_token:e.ak.get("csrf_token")})}),r=await i.json();if(i.ok)return r.is_sso||!1;throw new Error(r.error?.message||"Unknown error",{cause:r.error?.code||"unknown"})}catch(e){return window.Sentry?.captureError?.(e),!1}}async getOIDCProviderLoginUrl(t){if(!t)return null;const n=this.determineDestinationURL();try{const o=window.location.origin,i=new URL(e.cX.GetOIDCProviderLoginUrl,o),r=await fetch(i,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({userIdentifier:t,destination:n,csrf_token:e.ak.get("csrf_token")})}),a=await r.json();if(r.ok)return a.redirect_url||null;throw new Error(a.error?.message||"Unknown error",{cause:a.error?.code||"unknown"})}catch(e){return window.Sentry?.captureError?.(e),null}}async setOIDCAccountPickerChoice(t,n){if(!t||!n)return null;try{const o=window.location.origin,i=new URL(e.cX.SetOIDCAccountPickerChoice,o),r=await fetch(i,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({accountId:t,selectorSessionToken:n,csrf_token:e.ak.get("csrf_token")})}),a=await r.json();if(r.ok)return a.dest||null;throw new Error(a.error?.message||"Unknown error",{cause:a.error?.code||"unknown"})}catch(e){return window.Sentry?.captureError?.(e),null}}get currentPage(){return window.location.href}get currentPath(){return window.location.pathname}get homePage(){return window.location.origin}determineDestinationURL(){const n=this.currentPage,o=this.currentPath,i=this.homePage;let r=n;o.match(e.cn)&&(r=i);try{const e=new URL(n).searchParams.get("dest");if(e){const n=new URL(e).toString();t.i(n)&&(r=n)}}catch(e){}return r}setLoginDestination(e){if(!e)return;const t=new URL(this.currentPage);t.searchParams.set("dest",e),window.history.replaceState(null,"",t.toString())}async identityProviderSigin(t){try{e.f(this.host,i("sso_signin",t.authFlow));const n=await fetch(e.cX.IdentityProviderSignin,{method:"POST",headers:{Accept:"application/json, text/vnd.reddit.partial+html","Content-Type":"application/json"},body:JSON.stringify({idToken:t.idToken,canCreate:Boolean(!t.isSignedInAutomatically),recaptchaToken:t.recaptchaToken,recaptchaAction:t.recaptchaAction,subscribeToEmailDigest:t.subscribeToEmailDigest,email:t.email,authFlow:t.authFlow,csrf_token:e.ak.get("csrf_token"),auth_modularity:!0})}),o=e.cY(n);switch(n.status){case e.cZ.UserAccountCreated:this.handleSSOAccountResolved({authFlow:t.authFlow||e.A.Unknown,provider:t.provider,operation:"signin",newAccountCreated:!0,requireEmailPermission:t.emailPermissionRequired,subscribeToEmailDigest:t.subscribeToEmailDigest});break;case e.cZ.UserLoggedIn:this.handleSSOAccountResolved({authFlow:t.authFlow||e.A.Unknown,provider:t.provider,operation:"signin",newAccountCreated:!1});break;case e.cZ.MultipleAccountsFound:{if(!o?.includes("json"))break;const{accounts:i}=await n.json();if(!i||0===i.length)break;const r={accounts:JSON.stringify(i),idToken:t.idToken,subscribeToEmailDigest:JSON.stringify(t.subscribeToEmailDigest),email:t.email,authFlow:t.authFlow??e.A.Unknown};this.show(e.A.SSOLinking,{bodyParams:r});break}case e.cZ.GoogleCredentialMismatch:e.c_(t.email);break;default:if("text/vnd.reddit.partial+html"===o){const t=await n.text();e.aG(t,this.host,e.P.Append)}else n.ok||this.dispatchSSOError(t.provider)}}catch(e){this.dispatchSSOError(t.provider)}}handleSSOAccountResolved(t){const o=`${t.operation}_${t.newAccountCreated?"register":"login"}`;if(e.f(this.host,n.a(t.authFlow,t.provider,o)),this.skipOnboardingFlowEventDispatcher(t.authFlow),t.newAccountCreated){const n=t.requireEmailPermission&&!t.subscribeToEmailDigest;this.show(e.A.Onboarding,{bodyParams:{showEmailPermission:encodeURIComponent(n??!1)}})}else this.reloadToLoggedIn(t.newAccountCreated)}skipOnboardingFlowEventDispatcher(e){const t=new CustomEvent("skip-onboarding-flow",{bubbles:!0,composed:!0,detail:{authFlow:e}});this.host.dispatchEvent(t),t.defaultPrevented}async reloadToLoggedIn(e=!1){const t=new CustomEvent("auth-completed",{bubbles:!0,composed:!0});this.host.dispatchEvent(t),t.defaultPrevented||this.authFlowManager?.reloadToLoggedIn(e)}trackSSOFailure(t){const{authFlow:n,provider:o,reason:i}=t;e.f(this.host,((t,n,o)=>e.b({source:"onboarding",action:"fail",noun:t},{action_info:{reason:o,type:n}}))(n,o,i)),window.Sentry?.withScope((e=>{e.setExtra("flow",n),e.setExtra("provider",o),e.setExtra("reason",i),window.Sentry?.captureMessage("SSO authentication failed")})),this.dispatchSSOError(o)}},a:(t,n)=>e.b({source:"onboarding",action:"click",noun:t},{action_info:{type:n}}),b:i,s:t=>e.b({action:"select",noun:"link_account",source:o.ao},{target_user:{id:t}})};}));
SML.di("./BsxA9l1f.js",import.meta.url,"BsxA9l1f");SML.di("./CqON9ZBt.js",import.meta.url,"CqON9ZBt");SML.di("./CDFmhs-S.js",import.meta.url,"CDFmhs-S");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DSgcmNT3.js",import.meta.url,"DSgcmNT3");SML.di("./DzK3xEza.js",import.meta.url,"DzK3xEza");SML.di("./BkErX3_5.js",import.meta.url,"BkErX3_5");SML.di("./ZU4mPORS.js",import.meta.url,"ZU4mPORS");SML.di("./BOloqGL8.js",import.meta.url,"BOloqGL8");SML.di("./Csfdzp9J.js",import.meta.url,"Csfdzp9J");SML.di("./B6yBL9at.js",import.meta.url,"B6yBL9at");SML.di("./DuMDg_pA.js",import.meta.url,"DuMDg_pA");SML.di("./Wj1K4cGE.js",import.meta.url,"Wj1K4cGE");SML.di("./C7Ws8ntA.js",import.meta.url,"C7Ws8ntA");SML.di("./BM-DpnLu.js",import.meta.url,"BM-DpnLu");SML.di("./Be8KYlVI.js",import.meta.url,"Be8KYlVI");SML.di("./Diel-zJV.js",import.meta.url,"Diel-zJV");SML.di("./Dm-LXBi1.js",import.meta.url,"Dm-LXBi1");SML.di("./DrQgO6CS.js",import.meta.url,"DrQgO6CS");SML.di("./BqPzZllT.js",import.meta.url,"BqPzZllT");SML.di("./DzMpUNmB.js",import.meta.url,"DzMpUNmB");SML.di("./BGOkDHmz.js",import.meta.url,"BGOkDHmz");SML.di("./CnjPLu6R.js",import.meta.url,"CnjPLu6R");SML.di("./Bvcfbv8-.js",import.meta.url,"Bvcfbv8-");SML.di("./m5O0vt6a.js",import.meta.url,"m5O0vt6a");SML.di("./DtcD-j6p.js",import.meta.url,"DtcD-j6p");SML.di("./BktidS9F.js",import.meta.url,"BktidS9F");SML.di("./BPjD9jS-.js",import.meta.url,"BPjD9jS-");SML.di("./DK2EuOAl.js",import.meta.url,"DK2EuOAl");SML.di("./B5aCBAWI.js",import.meta.url,"B5aCBAWI");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./B4wbfaco.js",import.meta.url,"B4wbfaco");SML.di("./DWwkEB7i.js",import.meta.url,"DWwkEB7i");SML.di("./CZ7YNHqf.js",import.meta.url,"CZ7YNHqf");SML.di("./DMa5Y6a9.js",import.meta.url,"DMa5Y6a9");SML.di("./wFIF_OFn.js",import.meta.url,"wFIF_OFn");SML.di("./CU4mObWU.js",import.meta.url,"CU4mObWU");SML.di("./TC9gnkab.js",import.meta.url,"TC9gnkab");SML.di("./Dv3oQtz-.js",import.meta.url,"Dv3oQtz-");SML.di("./Baruuhvw.js",import.meta.url,"Baruuhvw");SML.di("./MX9FaClF.js",import.meta.url,"MX9FaClF");SML.di("./FaYkg4Io.js",import.meta.url,"FaYkg4Io");
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("CARPOtl-",["GlDbwxoG","s_Igk1Yn"],(async(e,t)=>{let r=class extends t.s{constructor(){super(...arguments),this.redirect=e=>{window.location.href=e.toString()},this.refreshAndAppendConsent=e=>{if("click"===e.type||"Enter"===e.key||"Space"===e.key){const e=new URL(window.location.href);e.searchParams.set("consent","true"),this.redirect(e)}},this.goBack=e=>{history.length>1&&("click"===e.type||"Enter"===e.key||"Space"===e.key)?this.redirect(new URL(document.referrer||location.origin)):this.redirect(new URL(location.origin))}}render(){return t.x`<slot name="continue" @click="${this.refreshAndAppendConsent}" @keypress="${this.refreshAndAppendConsent}"></slot> <slot name="back" @click="${this.goBack}" @keypress="${this.goBack}"></slot>`}};r.styles=[e.t],r=e._([e.e("blocked-profile-interactions")],r);let n=class extends t.s{constructor(){super(...arguments),this.redirect=e=>{window.location.href=e.toString()},this.goBack=e=>{history.length>1&&("click"===e.type||"Enter"===e.key||"Space"===e.key)?this.redirect(new URL(document.referrer||location.origin)):this.redirect(new URL(location.origin))}}render(){return t.x`<slot name="back" @click="${this.goBack}" @keypress="${this.goBack}"></slot>`}};n.styles=[e.t],n=e._([e.e("back-to-reddit")],n),customElements.whenDefined("faceplate-modal").then((()=>{const e=document.querySelector("#over-18-interstitial-modal");e?.showModal({blur:!0})}))}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("CAd-sfst",["s_Igk1Yn"],(async a=>{const{svg:l}=a.g();return{l:a.m(l`<path d="M14.088 11.843a.9.9 0 01-.637-1.536l1.97-1.971a2.66 2.66 0 000-3.757c-1.003-1.003-2.754-1.005-3.756 0L9.694 6.55A.9.9 0 118.42 5.278l1.97-1.971a4.427 4.427 0 013.152-1.306c1.19 0 2.31.463 3.152 1.305a4.463 4.463 0 010 6.303l-1.971 1.971a.897.897 0 01-.637.264v-.001zm-4.48 4.851l1.97-1.97a.9.9 0 10-1.273-1.272l-1.97 1.97c-1.003 1.004-2.755 1.002-3.757 0a2.66 2.66 0 010-3.757l1.97-1.971a.898.898 0 000-1.272.901.901 0 00-1.272 0l-1.971 1.971a4.463 4.463 0 000 6.303 4.43 4.43 0 003.152 1.305c1.19 0 2.31-.465 3.151-1.307zm-.747-4.282l3.55-3.55a.9.9 0 10-1.272-1.273l-3.551 3.55a.9.9 0 00.637 1.537.9.9 0 00.637-.263l-.001-.001z"></path>`,"0 0 20 20","link")}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./CDFmhs-S.js",import.meta.url,"CDFmhs-S");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./MX9FaClF.js",import.meta.url,"MX9FaClF");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./FaYkg4Io.js",import.meta.url,"FaYkg4Io");
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("CC2wUKE8",["GlDbwxoG","s_Igk1Yn"],(async(e,t)=>{const r=(e,t)=>{if(!e||!t)return!1;if(e===t)return!0;if(0===e.childElementCount&&!(e instanceof HTMLSlotElement))return!1;if(e.contains(t))return!0;if(e instanceof HTMLSlotElement&&e.assignedElements().some((e=>r(e,t))))return!0;if(e instanceof Element&&e.shadowRoot&&r(e.shadowRoot,t))return!0;for(const n of e.querySelectorAll("slot"))if(n.assignedElements().some((e=>r(e,t))))return!0;return!1};const n=new WeakMap;function a(e,t=document){let r=n.get(t);r||(r=new Map,n.set(t,r));let a=r.get(e);return a||(a={key:e},r.set(e,a)),a}const i=Symbol("mixins/pagination"),o=function(t){const r=new WeakMap,n=e.gN();return{getContextKey:(e,t)=>a(e,t),appointLeader(e,a){if(r.has(a)){if(r.get(a).isConnected)throw new Error(`Cannot appoint leader for key "${a.key}" in the same context twice.`)}r.set(a,e);const i=n.getRegisteredElements(a);if(i)for(const r of i)t(e,r)},dismissLeader(e,t){const n=r.get(t);n&&n===e&&r.delete(t)},getLeader:e=>r.get(e),registerFollower(e,a){n.register(a,e);const i=r.get(a);i&&t(i,e)},unregisterFollower(e,t){n.unregister(t,e)},getFollowers:e=>n.getRegisteredElements(e)}}(((e,t)=>{t.syncPagination(e)}));const s="https://www.google.com/recaptcha/enterprise.js",l=1e3,c=3,d=new Map,u=new Map;function h(e=l){return new Promise(((t,r)=>{const n=Math.ceil(e/50);let a=0;const i=()=>{m()?t():a>=n?r(new Error("reCAPTCHA SDK load timeout")):(a++,setTimeout(i,50))};i()}))}function m(){return"function"==typeof window.grecaptcha?.enterprise?.execute}class p{constructor(e){this.checkInteraction=e,this.startingState=null,this.mouseIsDown=!1}create(){this.startingState=this.checkInteraction(),this.mouseIsDown=!0}reset(){this.mouseIsDown=!1,this.startingState=null}get hasStateChanged(){return null!==this.startingState&&this.checkInteraction()!==this.startingState}}const g=({selected:r,selectedIcon:n,size:a=e.a7.Medium,unselectedIcon:i,...o})=>{const{html:s}=t.g();return e.gp({...o,attributes:{...o.attributes},size:a,selected:r,leadingIcon:r?n:i,trailingIcon:s`<span class="inline-flex dropdown-icon ${o.children&&"ml-2xs"}"> ${t.ap({size:a===e.a7.Small?t.h.Small:t.h.Medium})} </span>`,dropdown:!0})},f=e=>!e.hasAttribute("disabled"),b=e=>e.tabIndex=0,v=e=>e.tabIndex=-1,N=e=>0===e.tabIndex&&f(e),I=e=>(b(e),e.focus(),e),_=e=>(v(e),e),k=e=>{for(let t=0;t<e.length;t++){const r=e[t];if(N(r))return[r,t]}return null},T=e=>{for(const t of e)if(f(t))return t;return null},w=e=>{const t=T(e);return t?I(t):null},C=e=>{const t=(e=>{for(let t=0;t<e.length;t++){const r=e[e.length-1-t];if(f(r))return r}return null})(e);return t?I(t):null},y=Symbol.for("rpl-menu-item");function E(e){return e.assignedNodes({flatten:!0}).filter((e=>!!(e.nodeType===Node.ELEMENT_NODE||e.nodeType===Node.TEXT_NODE&&e.textContent?.match(/\S/)))).length>0;}function S(e){const t={};return(r,n)=>{const a=((e,t)=>t?e+JSON.stringify(t):e)(r,n);return Object.prototype.hasOwnProperty.call(t,a)?t[a]:t[a]=new e(r,n)}}const R=S(Intl.NumberFormat),x=S(Intl.RelativeTimeFormat),A=S(Intl.DateTimeFormat);function O(e){return "string"!=typeof e?e:e.startsWith("selector(")?e.replace(/^selector\(/,"").replace(/\)$/,""):e;}function D(e){return{...e,trigger:"object"==typeof e.trigger?$(e.trigger):e.trigger,target:O(e.target),template:O(e.template),triggerElem:O(e.triggerElem)}}function $(e){if("event"in e)return e.filters?`event(${e.event}(${JSON.stringify(e.filters)}))`:`event(${e.event})`;if("topic"in e)return e.filters?`subscribe(${e.topic}(${JSON.stringify(e.filters)}))`:`subscribe(${e.topic})`;if("intersection"in e){if("enter"===e.intersection)return e.observerArgs?`view(args(${JSON.stringify(e.observerArgs)}))`:"view";if("leave"===e.intersection)return e.observerArgs?`leave(${e.observerArgs})`:"leave"}return""}function P(e){return r=>e(t.x,t.l,r)}const M=P((function(e,t,r){return e`<ac-activate ?once="${(r=D(r)).once}" ?scoped="${r.scoped}" args="${t(r.args?JSON.stringify(r.args):void 0)}" debounce="${t(r.debounce)}" delay="${t(r.delay)}" name="${r.name.toString()}" query-params="${t(r.queryParams?JSON.stringify(r.queryParams):void 0)}" render-mode="${t(r.renderMode)}" route-params="${t(r.routeParams?JSON.stringify(r.routeParams):void 0)}" target="${t(r.target)}" throttle="${t(r.throttle)}" trigger-elem="${t(r.triggerElem)}" trigger="${t(r.trigger)}"></ac-activate>`})),L=P((function(e,t,r){return e`<ac-dispatch ?once="${(r=D(r)).once}" debounce="${t(r.debounce)}" delay="${t(r.delay)}" detail="${t(r.detail?JSON.stringify(r.detail):void 0)}" event-name="${r.eventName}" target="${t(r.target)}" throttle="${t(r.throttle)}" trigger-elem="${t(r.triggerElem)}" trigger="${t(r.trigger)}"></ac-dispatch>`})),F=P((function(e,t,r){return e`<ac-set ?once="${(r=D(r)).once}" attribute="${t(r.attribute)}" debounce="${t(r.debounce)}" delay="${t(r.delay)}" property="${r.property}" target="${r.target}" throttle="${t(r.throttle)}" trigger-elem="${t(r.triggerElem)}" trigger="${t(r.trigger)}" value="${r.value}"></ac-set>`})),U=P((function(e,t,r){return e`<ac-track ?once="${(r=D(r)).once}" data-faceplate-tracking-context="${t(r.faceplateTrackingContext?JSON.stringify(r.faceplateTrackingContext):void 0)}" debounce="${t(r.debounce)}" delay="${t(r.delay)}" san="${r.san}" throttle="${t(r.throttle)}" trigger-elem="${t(r.triggerElem)}" trigger="${t(r.trigger)}"></ac-track>`})),H=P((function(e,t,r){return e`<ac-toggle ?once="${(r=D(r)).once}" debounce="${t(r.debounce)}" delay="${t(r.delay)}" force="${t(r.force)}" target-class="${r.targetClass}" target="${t(r.target)}" throttle="${t(r.throttle)}" trigger-elem="${t(r.triggerElem)}" trigger="${t(r.trigger)}"></ac-toggle>`})),z=Symbol.for("lit-nothing");let j="RelativeTimeFormat"in Intl;const G=6e4;function K(e){const t=Math.abs(e.diff);switch(e.unit){case"minutes":return`${t} min. ago`;case"hours":return`${t} hr. ago`;case"days":return t>1?`${t} days ago`:`${t} day ago`;case"months":return`${t} mo. ago`;case"years":return`${t} yr. ago`;default:!function(e){throw new Error("Unexpected object: "+e)}(e.unit)}}const B=()=>e.ak.get(e.kY),V=()=>e.ak.get(e.k_),Z="combined";const J=function(e){return e};const Y=new Map([["image/png",e.l0.Png],["image/x-png",e.l0.Png],["image/gif",e.l0.Gif],["image/jpeg",e.l0.Jpeg],["image/webp",e.l0.Webp],["video/mp4",e.l0.Mp4],["video/quicktime",e.l0.Quicktime]]);let W={uploadErrorMessage:()=>"There was an error uploading the file.",uploadToS3ErrorMessage:()=>"Failed to upload file to S3.",genericErrorMessage:()=>"Something went wrong",unsupportedMimetype:e=>`${e} files are not supported.`};function q(e,t){const r=new FormData;return t?.forEach((({header:e,value:t})=>{t&&r.append(e,t)})),r.append("file",e),r}function X(e){return(new DOMParser).parseFromString(e,"text/xml")}function Q(e){window.Sentry?.captureMessage?.(e)}function ee(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var n=e[r];if("*"!==n&&"+"!==n&&"?"!==n)if("\\"!==n)if("{"!==n)if("}"!==n)if(":"!==n)if("("!==n)t.push({type:"CHAR",index:r,value:e[r++]});else{var a=1,i="";if("?"===e[s=r+1])throw new TypeError('Pattern cannot start with "?" at '.concat(s));for(;s<e.length;)if("\\"!==e[s]){if(")"===e[s]){if(0==--a){s++;break}}else if("("===e[s]&&(a++,"?"!==e[s+1]))throw new TypeError("Capturing groups are not allowed at ".concat(s));i+=e[s++]}else i+=e[s++]+e[s++];if(a)throw new TypeError("Unbalanced pattern at ".concat(r));if(!i)throw new TypeError("Missing pattern at ".concat(r));t.push({type:"PATTERN",index:r,value:i}),r=s}else{for(var o="",s=r+1;s<e.length;){var l=e.charCodeAt(s);if(!(l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||95===l))break;o+=e[s++]}if(!o)throw new TypeError("Missing parameter name at ".concat(r));t.push({type:"NAME",index:r,value:o}),r=s}else t.push({type:"CLOSE",index:r,value:e[r++]});else t.push({type:"OPEN",index:r,value:e[r++]});else t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});else t.push({type:"MODIFIER",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),n=t.prefixes,a=void 0===n?"./":n,i=t.delimiter,o=void 0===i?"/#?":i,s=[],l=0,c=0,d="",u=function(e){if(c<r.length&&r[c].type===e)return r[c++].value},h=function(e){var t=u(e);if(void 0!==t)return t;var n=r[c],a=n.type,i=n.index;throw new TypeError("Unexpected ".concat(a," at ").concat(i,", expected ").concat(e))},m=function(){for(var e,t="";e=u("CHAR")||u("ESCAPED_CHAR");)t+=e;return t},p=function(e){var t=s[s.length-1],r=e||(t&&"string"==typeof t?t:"");if(t&&!r)throw new TypeError('Must have text between two parameters, missing text after "'.concat(t.name,'"'));return!r||function(e){for(var t=0,r=o;t<r.length;t++){var n=r[t];if(e.indexOf(n)>-1)return!0}return!1}(r)?"[^".concat(te(o),"]+?"):"(?:(?!".concat(te(r),")[^").concat(te(o),"])+?")};c<r.length;){var g=u("CHAR"),f=u("NAME"),b=u("PATTERN");if(f||b){var v=g||"";-1===a.indexOf(v)&&(d+=v,v=""),d&&(s.push(d),d=""),s.push({name:f||l++,prefix:v,suffix:"",pattern:b||p(v),modifier:u("MODIFIER")||""})}else{var N=g||u("ESCAPED_CHAR");if(N)d+=N;else if(d&&(s.push(d),d=""),u("OPEN")){v=m();var I=u("NAME")||"",_=u("PATTERN")||"",k=m();h("CLOSE"),s.push({name:I||(_?l++:""),pattern:I&&!_?p(v):_,prefix:v,suffix:k,modifier:u("MODIFIER")||""})}else h("END")}}return s}function te(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1");}const re="moderator";function ne(t){return t===e.dG.Post}const ae=(e,t,r)=>{const n={id:t,title:r};return ne(e)?{post_flair:n}:{user_flair:n}};function ie(){return "Something went wrong";}let oe=e.B;let se=e.B;const le=t.e(class extends t.a{constructor(){super(...arguments),this.key=t.A}render(e,t){return this.key=e,t}update(e,[r,n]){return r!==this.key&&(t.aY(e),this.key=r),n}});const ce={"3xs":"w-[1rem] h-[1rem]","2xs":"w-[1rem] h-[1rem]",xs:"w-[1.5rem] h-[1.5rem]",sm:"w-[2rem] h-[2rem]",md:"w-[2.5rem] h-[2.5rem]",lg:"w-[3rem] h-[3rem]",xl:"w-[3.5rem] h-[3.5rem]","2xl":"w-[4rem] h-[4rem]","3xl":"w-[5.5rem] h-[5.5rem]"},de={"3xs":"w-[1rem] h-[1rem] min-w-[1rem] min-h-[1rem]","2xs":"w-[1rem] h-[1rem] min-w-[1rem] min-h-[1rem]",xs:"w-[1.5rem] h-[1.5rem] min-w-[1.5rem] min-h-[1.5rem]",sm:"w-[2rem] h-[2rem] min-w-[2rem] min-h-[2rem]",md:"w-[2.5rem] h-[2.5rem] min-w-[2.5rem] min-h-[2.5rem]",lg:"w-[3rem] h-[3rem] min-w-[3rem] min-h-[3rem]",xl:"w-[2.875rem] h-[2.875rem] min-w-[2.875rem] min-h-[2.875rem]","2xl":"w-[3.25rem] h-[3.25rem] min-w-[3.25rem] min-h-[3.25rem]","3xl":"w-[4.5rem] h-[4.5rem] min-w-[4.5rem] min-h-[4.5rem]"},ue={"3xs":"outline-offset-[0.125rem]","2xs":"outline-offset-[0.125rem]",xs:"outline-offset-[0.125rem]",sm:"outline-offset-[0.125rem]",md:"outline-offset-[0.125rem]",lg:"outline-offset-[0.1875rem]",xl:"outline-offset-[0.1875rem]","2xl":"outline-offset-[0.1875rem]","3xl":"outline-offset-[.25rem]"},he={"3xs":"border","2xs":"border",xs:"border",sm:"border",md:"border-md",lg:"border-md",xl:"border-md","2xl":"border-lg","3xl":"border-lg"},me={"3xs":"outline-1","2xs":"outline-1",xs:"outline-1",sm:"outline-1",md:"outline-2",lg:"outline-2",xl:"outline-2","2xl":"outline-4","3xl":"outline-4"},pe={"3xs":2,"2xs":2,xs:2,sm:4,md:4,lg:4,xl:6,"2xl":6,"3xl":6},ge={"3xs":-5.4,"2xs":-5.4,xs:-5.4,sm:-7,md:-7,lg:-7,xl:-8.3,"2xl":-8.3,"3xl":-8.3},fe={"3xs":"-right-[0.0625rem]","2xs":"right-0",xs:"right-[0.05rem]",sm:"right-[0.10rem]",md:"-right-[0.0825rem]",lg:"-right-[0.125rem]",xl:"-right-[0.125rem]","2xl":"-right-[.65rem]","3xl":"-right-[.75rem]"},be={"3xs":"w-[.25rem] h-[.25rem] border","2xs":"w-[.25rem] h-[.25rem] border",xs:"w-[.25rem] h-[.25rem] border",sm:"w-[.375rem] h-[.375rem] border-2",md:"w-[.375rem] h-[.375rem] border-2",lg:"w-[.625rem] h-[.625rem] border-2",xl:"w-[.625rem] h-[.625rem] border-2","2xl":"w-[1rem] h-[1rem] border-2","3xl":"w-[1.25rem] h-[1.25rem] border-2"},ve={"3xs":"rounded-1","2xs":"rounded-1",xs:"rounded-1",sm:"rounded-2",md:"rounded-2",lg:"rounded-2",xl:"rounded-[.75rem]","2xl":"rounded-[.75rem]","3xl":"rounded-4"},Ne=({ringColorClassName:e,size:t})=>e?`${e} outline ${me[t]} ${ue[t]}`:"",Ie=({...e})=>{const{html:r,ifDefined:n}=t.g(),{attributes:a,children:i,position:o="relative",size:s,status:l}=e;return r`<span class="inline-flex snoovatar ${o} ${n(a?.className)}">${i}${Te({status:l,size:s})} </span>`},_e=({children:e,snoovatarSrc:r,avatarBgClassName:n,appearance:a})=>{const{html:i}=t.g();return i` <span style="${n||!r?"":`background: ${"media"===a?"var(--color-avatar-media-gradient)":"var(--color-avatar-gradient)"}`}" class="rounded-full absolute h-full w-full inline-flex justify-center ${n||""}"> ${e??t.A} </span>`},ke=e=>{const{appearance:r}=e;return"collectible"===r?(({snoovatarSrc:e,snoovatarAlt:r,size:n,attributes:a,status:i,flip:o,lazy:s})=>{const{html:l}=t.g();return Ie({flip:o,size:n,status:i,children:l`${ye()} ${Ce({size:n})}${we({snoovatarSrc:e,snoovatarAlt:r,size:n,lazy:s})}`,attributes:{...a,className:`${de[n]}`}})})(e):(({attributes:e,ringLayer:r,children:n,snoovatarAlt:a,snoovatarSrc:i,avatarBgClassName:o,size:s,ringColorClassName:l,status:c,appearance:d,flip:u,lazy:h})=>{const{html:m}=t.g(),p="default"===d?"box-border [&>:first-child]:rounded-[inherit] overflow-hidden":"",g=m`<span class="absolute rounded-full inset-0 border border-solid border-neutral-border-weak bg-transparent"></span>`;return Ie({flip:u,size:s,status:c,position:r?"absolute":"relative",attributes:{...e,className:`${Ne({ringColorClassName:l,size:s})} fp-avatar-container rounded-full ${de[s]} isolate box-content`},children:m` ${i?t.A:_e({snoovatarSrc:i,appearance:d,avatarBgClassName:o,children:m`<span class="relative rounded-full overflow-hidden ${r?"border border-solid border-neutral-background":""} inline-flex w-full h-full ${p}">${n} ${"default"===d&&r?g:t.A} </span>`})} ${i?Ee({snoovatarSrc:i,snoovatarAlt:a,size:s,ringColorClassName:l,avatarBgClassName:o,appearance:d,lazy:h}):t.A}`})})(e)},Te=({status:e,size:r})=>{const{html:n}=t.g();return e?n` <span class="${"online"===e?"bg-online":""} flex absolute bottom-0 rounded-full border-solid border-neutral-background bg-neutral-background ${fe[r]} ${he[r]} ${be[r]}"> ${"online"===e?"":e} </span> `:""},we=({size:e,snoovatarAlt:r,snoovatarSrc:n,lazy:a})=>{const{html:i,svg:o}=t.g(),s=Math.random().toString(16).slice(2);return i`<div class="absolute h-full w-full" style="transform:translateY(${ge[e]}%)"> <svg width="100%" height="100%" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg" class="overflow-hidden"> <defs> <clipPath id="${s}"> <path d="M120 0H0V96H22.0602C22.5169 98.2109 23.896 100.155 25.8949 101.309L56          118.691C58.4752 120.12 61.5248 120.12 64 118.691L94.1051 101.309C96.104 100.155 97.4831          98.2109 97.9398 96H120V0Z"/> </clipPath> </defs> ${a?o`<foreignObject clip-path="url(#${s})" width="100%" height="100%"> <img src="${n}" alt="${r}" loading="lazy"> </foreignObject>`:o`<image href="${n}" alt="${r}" clip-path="url(#${s})" height="100%" width="100%">`} </svg> </div>`},Ce=({size:e})=>{const{html:r}=t.g();return r`<span class="absolute h-full w-full start-0"> <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 72 72" fill="none"> <path d="M34 3.4641C35.2376 2.74957 36.7624 2.74957 38 3.4641L63.1769 18C64.4145 18.7145 65.1769 20.035 65.1769 21.4641V50.5359C65.1769 51.965 64.4145 53.2855 63.1769 54L38 68.5359C36.7624 69.2504 35.2376 69.2504 34 68.5359L8.82309 54C7.58548 53.2855 6.82309 51.965 6.82309 50.5359V21.4641C6.82309 20.035 7.58548 18.7145 8.82309 18L34 3.4641Z" stroke="url(#paint0_diamond_26526_186798)" stroke-width="${pe[e]}" stroke-linejoin="round"/> <defs> <radialGradient id="paint0_diamond_26526_186798" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(-7.4247 26.0998) rotate(15.9097) scale(50.0682 24082.5)"> <stop stop-color="#1185B5"/> <stop offset="0.29452" stop-color="#D7F7FF"/> <stop offset="0.526042" stop-color="#5EF6D8"/> <stop offset="0.838434" stop-color="#5EF6D8"/> <stop offset="0.867246" stop-color="#1990B9"/> <stop offset="1" stop-color="#3F9FC6"/> </radialGradient> </defs> </svg> </span>`},ye=()=>{const{html:e}=t.g();return e`<div class="absolute h-full w-full" style="transform:scale(${.95})"> <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 64 64" fill="none"> <path d="M29 1.73205C30.8564 0.660254 33.1436 0.660254 35 1.73205L56.7128 14.2679C58.5692 15.3397 59.7128 17.3205 59.7128 19.4641V44.5359C59.7128 46.6795 58.5692 48.6603 56.7128 49.7321L35 62.2679C33.1436 63.3397 30.8564 63.3397 29 62.2679L7.28719 49.7321C5.43078 48.6603 4.28719 46.6795 4.28719 44.5359V19.4641C4.28719 17.3205 5.43078 15.3397 7.28719 14.2679L29 1.73205Z" fill="url(#paint0_diamond_26026_173944)"/> <path d="M29 1.73205C30.8564 0.660254 33.1436 0.660254 35 1.73205L56.7128 14.2679C58.5692 15.3397 59.7128 17.3205 59.7128 19.4641V44.5359C59.7128 46.6795 58.5692 48.6603 56.7128 49.7321L35 62.2679C33.1436 63.3397 30.8564 63.3397 29 62.2679L7.28719 49.7321C5.43078 48.6603 4.28719 46.6795 4.28719 44.5359V19.4641C4.28719 17.3205 5.43078 15.3397 7.28719 14.2679L29 1.73205Z" fill="url(#paint1_linear_26026_173944)"/> <defs> <radialGradient id="paint0_diamond_26026_173944" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(-6.59974 23.1999) rotate(15.9097) scale(44.5051 21406.7)"> <stop stop-color="#1185B5"/> <stop offset="0.29452" stop-color="#D7F7FF"/> <stop offset="0.526042" stop-color="#5EF6D8"/> <stop offset="0.838434" stop-color="#5EF6D8"/> <stop offset="0.867246" stop-color="#1990B9"/> <stop offset="1" stop-color="#3F9FC6"/> </radialGradient> <linearGradient id="paint1_linear_26026_173944" x1="23.5687" y1="22.7061" x2="44.1183" y2="53.4817" gradientUnits="userSpaceOnUse"> <stop stop-color="#004E5F"/> <stop offset="1" stop-color="#727CD8" stop-opacity="0.81"/> </linearGradient> </defs> </svg> </div>`},Ee=({size:e,snoovatarAlt:r,snoovatarSrc:n,attributes:a,avatarBgClassName:i,appearance:o,lazy:s})=>{const{html:l,svg:c,createElement:d}=t.g(),u=Math.random().toString(16).slice(2);return d("span",{...a,className:"absolute start-0 end-0 bottom-0 mx-auto inline-flex shrink-0 justify-center box-border h-full w-full"},l`${_e({snoovatarSrc:n,avatarBgClassName:i,appearance:o})} <svg viewBox="0 0 121 122" xmlns="http://www.w3.org/2000/svg" class="overflow-hidden absolute bottom-0 ${ce[e]}"> <defs> <clipPath id="${u}"> <path d="M0 0V79L28.1628 105.5C35.013 115.465 46.4934 122 59.5 122C72.5066 122 83.987 115.465 90.8372 105.5L120.5 79V0H0Z"/> </clipPath> </defs> ${s?c`<foreignObject clip-path="url(#${u})" width="100%" height="100%"> <img src="${n}" alt="${r}" loading="lazy"> </foreignObject>`:c`<image href="${n}" alt="${r}" clip-path="url(#${u})" height="100%" width="100%">`} </svg>`)},Se=({size:e="sm",appearance:r="default",snoovatarAlt:n="User Avatar",ringLayer:a,attributes:i,...o})=>{const{html:s,ifDefined:l}=t.g(),c="icon"===r||"subreddit"===r;return s`<span class="inline-flex items-center justify-center ${ce[e]} ${i?.className}" rpl avatar ?flip="${o.flip}" id="${l(i?.id)}" slot="${l(i?.slot)}"> ${a&&!c?a:""} ${c?(({attributes:e,children:r,size:n,appearance:a,status:i,ringColorClassName:o})=>{const s="icon"===a?"rounded-full":ve[n],{html:l,ifDefined:c}=t.g();return l`<span rpl id="${c(e?.id)}" slot="${c(e?.slot)}" class="inline-block ${s} ${Ne({ringColorClassName:o,size:n})} relative [&>:first-child]:h-full [&>:first-child]:w-full [&>:first-child]:mb-0 [&>:first-child]:rounded-[inherit] h-full w-full [&>:first-child]:overflow-hidden [&>:first-child]:max-h-full"> ${r}${Te({status:i,size:n})} </span>`})({size:e,attributes:i,appearance:r,...o}):ke({attributes:i,snoovatarAlt:n,appearance:r,ringLayer:a,size:e,...o})}</span>`},Re=t.e(class extends t.a{constructor(e){super(e),this.tt=new WeakMap}render(e){return[e]}update(e,[r]){if(t.b2(this.et)&&(!t.b2(r)||this.et.strings!==r.strings)){const r=t.b3(e).pop();let n=this.tt.get(this.et.strings);if(void 0===n){const e=document.createDocumentFragment();n=t.B(t.A,e),n.setConnected(!1),this.tt.set(this.et.strings,n)}t.aY(n,[r]),t.b4(n,void 0,r)}if(t.b2(r)){if(!t.b2(this.et)||this.et.strings!==r.strings){const n=this.tt.get(r.strings);if(void 0!==n){const r=t.b3(n).pop();t.b5(e),t.b4(e,void 0,r),t.aY(e,[r])}}this.et=r}else this.et=void 0;return this.render(r)}});const xe={plain:"plain",plainInverted:"plainInverted",error:"destructive",brand:"brand",caution:"plain",success:"success"};const Ae="highlight_card_";const Oe={rootMargin:"0px",threshold:[1]};class De extends e.b2{constructor(t,r){super(t),this._isInViewport=!1,this._hasBeenImpressed=!1,this._hasBeenConsumed=!1,this._hasPageUnloaded=!1,this.onVisible=e=>{this._isInViewport&&e&&(this._hasPageUnloaded=!1,this._becameVisibleOnScreenTimestamp=Date.now())},this.onHidden=e=>{this._isInViewport&&(e||this._hasPageUnloaded||this.handlePotentialConsume())},this.onBeforeUnloadCallback=()=>{this._hasPageUnloaded=!0,this._isInViewport&&this.handlePotentialConsume()},this.onEnter=()=>{this._isInViewport||(this._isInViewport=!0,this._becameVisibleOnScreenTimestamp=Date.now(),this.handlePotentialImpression())},this.onLeave=()=>{this._isInViewport&&(this.handlePotentialConsume(),this._isInViewport=!1)},t.addController(this),this._config={...r,observerConfig:r.observerConfig??Oe},this._observerController=new e.ap(this,t,this._config.observerConfig);const n=new e.E(this,(()=>t));n.define("faceplate-enter",this.onEnter),n.define("faceplate-leave",this.onLeave)}hostConnected(){super.hostConnected(),e.aw(this.onVisible,{immediate:!0}),e.aw(this.onHidden,{immediate:!0,shouldBeCalledFirst:!0}),e.av.subscribe(this.onBeforeUnloadCallback,{shouldBeCalledFirst:!0})}hostDisconnected(){super.hostDisconnected(),e.ax(this.onHidden),e.ax(this.onVisible),e.av.unsubscribe(this.onBeforeUnloadCallback)}handlePotentialImpression(){this._hasBeenImpressed||(this._hasBeenImpressed=!0,this._config.onView?.())}handlePotentialConsume(){!this._hasBeenConsumed&&this._becameVisibleOnScreenTimestamp&&Date.now()-this._becameVisibleOnScreenTimestamp>this._config.consumeThreshold&&(this._hasBeenConsumed=!0,this._observerController.hostDisconnected(),this._config.onConsume?.())}}const $e="component-reload";const Pe=(t,r,n)=>e.b({source:"custom_feeds",...t},{customFeed:{id:r},...(n ? {subreddit:{id:n}} : {})}),Me=new Set,Le=new Set(["reddit","config","special"]),Fe=new Set(["edit","revisions","settings","discussions","pages","create"]),Ue=new Set(["config/description","config/sidebar","config/stylesheet","config/submit_text"]),He="gen_guides",ze="view",je="click",Ge={source:He,action:je,noun:"media_carousel_arrow_forward"},Ke={source:He,action:je,noun:"media_carousel_arrow_backward"},Be={source:He,action:je,noun:"product_carousel_arrow_forward"},Ve={source:He,action:je,noun:"product_carousel_arrow_backward"},Ze={source:He,action:ze,noun:"product_carousel_scroll"};const Je=Object.entries({16:"icon32",24:"icon48",32:"icon64",40:"icon96",48:"icon96",56:"icon96",88:"icon96"});const Ye=1e3,We=1e6,qe=1e9,Xe=({num:e,divider:t,defaultFixed:r=0,maxDigits:n,removeZeroDecimal:a})=>{const i=e/t;if(!n){const e=i.toFixed(r);return a&&Number(e)%1==0?Math.floor(i).toString():i.toFixed(Math.floor(r))}return i.toString().slice(0,n+1)};const Qe=(e,t,r=1)=>{const n=Math.pow(10,r);return(Math.floor(e/(t/n))/n).toFixed(r)},et=/(?:\/|-)nftv2_([a-z0-9%]+)_([a-z]+)_([a-z0-9-]{36})(?:-headshot)?\.(?:png|svg)/i;const tt="selectedCommunities",rt="moderator",nt=(e,t)=>{"complete"!==document.readyState?window.addEventListener("load",e,t):e()},at="preview";return {$:r,A:class{constructor(t,r){this._batchTimer=0,this._batchDisplay=()=>{if(this._batchTimer=0,!this._batchQueue||!this._batchQueue.length)return;const t=e.l1(this._batchQueue);for(const e of t)this.options.onAlert(e);this._batchQueue.length=0},t.addController(this),this.host=t,this.options=r,r.batchWindow&&r.batchWindow>0&&(this._batchQueue=[])}hostConnected(){e.l2(this.host).then((t=>{t&&(this._reporter=t,e.l3.register(t,this))}))}hostDisconnected(){this._reporter&&(e.l3.unregister(this._reporter,this),this._reporter=void 0),this._batchTimer&&window.clearTimeout(this._batchTimer),this._batchQueue&&(this._batchQueue.length=0)}shouldDisplayAlert(e){if(!this.options.isOnline()&&!e.showWhenOffline)return!1;const t=this.options;if("number"==typeof e.level){if(t.max&&e.level>t.max)return!1;if(t.min&&e.level<t.min)return!1}else if(void 0!==t.min||void 0!==t.max)return!1;return!t.name||t.name===e.name}displayAlert(e){if(this._batchQueue){if(this._batchQueue.push(e),this._batchTimer)return;this._batchTimer=window.setTimeout(this._batchDisplay,this.options.batchWindow)}else this.options.onAlert(e)}},B:function(e,t,{className:r,size:n="small",label:a,description:i,leadingContent:o,trailingContent:s,truncateTrailingContent:l,disabled:c=!1,id:d,testId:u}){return e`<div class="flex justify-between gap-[0.5rem] text-secondary py-xs ${c?"opacity-60 pointer-events-none":""} ${r??""}" id="${t(d)}" data-testid="${t(u)}"> <span class="flex items-center gap-xs min-w-0 ${l?"shrink-0 grow":"shrink"}"> ${o?e`<span class="flex shrink-0 items-center justify-center h-xl w-xl"> <span class="text-20 leading-4">${o}</span> </span>`:void 0} <span class="flex flex-col justify-center min-w-0 shrink py-[var(--rem6)]"> <span class="${"small"===n?"text-body-2":"text-body-1"} break-normal">${a}</span> <span class="text-caption-1 text-secondary-weak break-normal">${i}</span> </span> </span> <span class="flex items-center ${l?"shrink pl-[8px] min-w-0":"shrink-0"}"> <span class="flex items-center justify-center h-lg ${l?"min-w-0":""}">${s}</span> </span> </div>`},C:()=>"Comment deleted by user",D:"flair-settings__flair-copy",E:"flair-settings__flair-delete",F:"flair-form-success",G:He,H:"flair-settings__table-feature-id",I:class{constructor(e,t){this.observedElements=[],this.handleSlotChange=e=>{this.observer.disconnect();const t=e.target;t instanceof HTMLSlotElement&&(this.observedElements=t.assignedElements(),this.observedElements.forEach((e=>this.observer.observe(e))))},this.observer=new IntersectionObserver(this.handleIntersection.bind(this),t),(this.host=e).addController(this)}hostConnected(){this.observedElements.forEach((e=>this.observer.observe(e)))}hostDisconnected(){this.observer.disconnect()}isLoadableFaceplatePartial(t){return t instanceof e.fG&&t.loading===e.q.Programmatic&&!t.isLoading}async handleIntersection(e){e.forEach((e=>{e.isIntersecting&&this.isLoadableFaceplatePartial(e.target)&&e.target.load()}))}},J:"flair-settings__flair-delete-modal",K:"flair-settings__flair-form",L:t=>e.b({source:re,action:"click",noun:ne(t)?"remove_post_flair_confirm":"remove_flair_confirm"}),M:function(e){return e.replace(Ae,"")},N:function(e,t=0,r=!1){let n=!1,a=null;const i=function(...o){n?r&&(a=[this,o]):(e.apply(this,o),n=!0,setTimeout((()=>{n=!1,a&&(i.apply(a[0],a[1]),a=null)}),t))};return i},O:"observe-gallery-item-impression",P:Y,Q:async function(e,t){const r=await window.fetch(t.uploadLeaseUrl,{method:"POST",body:q(e,t.uploadLeaseHeaders)});if(r.ok){const e=function(e){const t=X(e);return t.querySelector("Location")?.textContent?.trim()}(await r.text());return e||Q("Unable to retrieve S3 url for uploaded resource."),e}throw (Q(`Failed to upload file to S3 with error code: ${function(e){const t=X(e);return t.querySelector("Code")?.textContent?.trim()}(await r.text())}`), new Error(W.uploadToS3ErrorMessage()))},R:function(e,t){if(!e)return{color:"",icon:"",backgroundColor:""};const r=function(e){const t=e?.primaryColor,r=e?.mobileKeyColor,n=e?.legacyPrimaryColor;return t||r||n||null}(e)||"",n=function(e,t){if(!t)return e?.icon??null;for(const[r,n]of Je){const a=e?.[n];if(a&&t<=parseInt(r,10))return a}return e?.icon??null}(e,t),a=e?.legacyIcon?.url;return{color:r,icon:n||a||"",backgroundColor:e?.backgroundColor||""}},S:"subreddit-posting-eligibility-modal",T:()=>{const e=V(),t=B();return"true"===e||void 0===e&&void 0===t?window.matchMedia("(prefers-reduced-motion: reduce)")?.matches:"false"!==t},U:"user-flair-assign-modal",V:De,W:function(e){if(i in e)return e;class t extends e{constructor(){super(...arguments),this.pages=1,this._pageIndex=1,this._pageNames=void 0}get pageIndex(){return this._pageIndex}set pageIndex(e){if(e===this._pageIndex)return;const t=this._pageIndex;this._pageIndex=e,this.pageIndexChangedCallback(t)}get pageNames(){return this._pageNames}set pageNames(e){e&&(this.pages=e.length),this._pageNames=e}syncLinkedPageables(){if(this._paginationLeaderContext){const e=o.getFollowers(this._paginationLeaderContext);if(!e||!e.size)return;for(const t of e)t.syncPagination(this)}if(this._paginationFollowerContext){const e=o.getLeader(this._paginationFollowerContext);e&&(e.pageIndex=this._pageIndex)}}syncPagination(e){this.pageIndex=e.pageIndex,this.pages=e.pages,this.pageNames=e.pageNames}getPaginationContext(){const e=this.getRootNode();if(e!==this&&(e instanceof Document||e instanceof ShadowRoot))return e}connectedCallback(){super.connectedCallback&&super.connectedCallback();const e=this.getPaginationContext();if(!e)return;const t=this.getAttribute("for");t&&(this._paginationFollowerContext=o.getContextKey(t,e),o.registerFollower(this,this._paginationFollowerContext)),this.id&&!t&&(this._paginationLeaderContext=o.getContextKey(this.id,e),o.appointLeader(this,this._paginationLeaderContext))}disconnectedCallback(){super.connectedCallback&&super.connectedCallback(),this._paginationLeaderContext&&(o.dismissLeader(this,this._paginationLeaderContext),this._paginationLeaderContext=void 0),this._paginationFollowerContext&&(o.unregisterFollower(this,this._paginationFollowerContext),this._paginationFollowerContext=void 0)}nextPage(){this.pageIndex=Math.min(this.pages,this.pageIndex+1)}previousPage(){this.pageIndex=Math.max(1,this.pageIndex-1)}pageIndexChangedCallback(e){this.syncLinkedPageables()}}return t[i]=!0,t},X:"clear-search-input",Y:"reddit-search:close",Z:"pdp-ama-comment-tab-wrapper",_:class{hostConnected(){}constructor(e,t){this.host=e,this.config=t,this._interactionTrigger=null,this.mouseFrame=new p((()=>this.config.isInteractedWith(this.host))),this.eventUsedMap=new WeakMap,this.handleBlur=e=>{if(this.hasTrigger("focus")||this.hasTrigger("focus-visible")){const t=()=>this.host.finishInteraction(e,"focus");this.config.delayOpenOnFocus?this.delayInteraction(t,this.config.hoverDelayEnd(this.host)):t()}},this.handleClick=e=>{if(this.eventUsedMap.has(e))return this.mouseFrame.reset();this.eventUsedMap.set(e,!0),this.hasTrigger("click")&&!this.mouseFrame.hasStateChanged&&(this.config.isInteractedWith(this.host)?this.host.finishInteraction(e,"click"):this.host.startInteraction(e,"click")),this.mouseFrame.reset()},this.handleFocus=e=>{const t=this.hasTrigger("focus"),r=this.hasTrigger("focus-visible");if((!(!t&&r&&e.target instanceof HTMLElement)||e.target.matches(":focus-visible"))&&(t||r)&&!this.mouseFrame.mouseIsDown){const t=()=>this.host.startInteraction(e,"focus");this.config.delayOpenOnFocus?this.delayInteraction(t,this.config.hoverDelayStart(this.host)):t()}},this.handleMouseEnter=e=>{this.hasTrigger("hover")&&this.delayInteraction((()=>this.host.startInteraction(e,"hover")),this.config.hoverDelayStart(this.host))},this.handleMouseLeave=e=>{this.hasTrigger("hover")&&this.delayInteraction((()=>this.host.finishInteraction(e,"hover")),this.config.hoverDelayEnd(this.host))},this.handleMouseDown=()=>{this.hasTrigger("click")&&this.mouseFrame.create()},this.handleMouseUp=()=>{this.hasTrigger("click")&&(this.mouseFrame.mouseIsDown=!1)},this.host.addController(this)}set interactionTrigger(e){this._interactionTrigger=e,this.host.requestUpdate()}get interactionTrigger(){return this._interactionTrigger}delayInteraction(e,t){clearTimeout(this.delayTimeout),this.delayTimeout=window.setTimeout(e,t)}hasTrigger(e){return this.host.trigger.split(" ").includes(e)}},a:()=>e.b({source:rt,action:"click",noun:"assign_flair_dialog"}),a$:t=>e.b({source:re,action:"click",noun:ne(t)?"reorder_post_flair_dialog":"reorder_flair_dialog"}),a0:N,a1:b,a2:v,a3:T,a4:t=>Object.values(e.bP).includes(t),a5:k,a6:_,a7:f,a8:I,a9:w,aA:(e,t)=>new CustomEvent("rpl:menu-clicked-item",{bubbles:!0,composed:!0,cancelable:!0,detail:{type:e,item:t}}),aB:t=>Object.values(e.cU).includes(t),aC:({item:e,reason:t})=>new CustomEvent("rpl:menu-close",{bubbles:!0,composed:!0,detail:{item:e,reason:t,itemPath:[e]}}),aD:t=>Object.values(e.cV).includes(t),aE:y,aF:"request",aG:et,aH:Fe,aI:Le,aJ:"config/automoderator",aK:"config/post_removal_message",aL:Ue,aM:50,aN:100,aO:"templateSelector",aP:async function(t){const r={input:t},{data:n,errors:a}=await oe({operation:e.C.RemoveHighlightedPost,variables:r});if(a?.length)throw new Error(ie());const{removeHighlightedPost:i}=n;if(!i?.ok)throw new Error(ie())},aQ:class{constructor(e){this.isRegistered=!1,this.config=e}async loadScript(){const{siteKey:e,nonce:t,timeout:r=l}=this.config,n=`${s}?render=${e}`;if(this.isRegistered)return await d.get(e),void (await h(r));if(d.has(e)){const t=d.get(e);this.isRegistered=!0;const n=u.get(e)||0;return u.set(e,n+1),await t,void (await h(r));}const a=document.querySelector(`script[src*="${n}"]`);if(a){const t=Promise.resolve(a);d.set(e,t),this.isRegistered=!0;const n=u.get(e)||0;return u.set(e,n+1),void (await h(r));}const i=new Promise(((r,a)=>{const i=document.createElement("script");i.src=n,i.async=!0,t&&(i.nonce=t),i.onload=()=>r(i),i.onerror=()=>a(new Error(`Failed to load reCAPTCHA script for site key: ${e}`)),document.body.appendChild(i)}));d.set(e,i),this.isRegistered=!0;const o=u.get(e)||0;u.set(e,o+1),await i,await h(r)}async generateToken(e){const t=e||this.config.action;if(!t)throw new Error("Action is required for token generation");return this.generateRecaptchaToken({siteKey:this.config.siteKey,action:t,maxRetries:this.config.maxRetries,retryDelay:this.config.retryDelay})}async generateTokenSafe(e){try{return await this.generateToken(e)}catch(e){return window.Sentry?.captureException(e),null}}async loadAndGenerateTokenSafe(e){return await this.loadScript(),this.generateTokenSafe(e)}destroy(){if(!this.isRegistered)return;const{siteKey:e}=this.config,t=u.get(e)||0,r=Math.max(0,t-1);if(0===r){const t=`${s}?render=${e}`,r=document.querySelector(`script[src*="${t}"]`);r&&r.remove(),d.delete(e),u.delete(e)}else u.set(e,r);this.isRegistered=!1}async generateRecaptchaToken(t){const{siteKey:r,action:n,maxRetries:a=c,retryDelay:i=l}=t;let o=0;for(;o<a;)try{if(!m())throw new Error("reCAPTCHA not ready");const e=await(window.grecaptcha?.enterprise?.execute?.(r,{action:n}));if("string"!=typeof e||!e)throw new Error("Failed to retrieve a valid reCAPTCHA token.");return e}catch(t){if(t instanceof Error&&t.message.includes("Invalid site key or not loaded in api.js")&&(o++,o<a)){await e.dB(i);continue}throw t}throw new Error("Failed to generate reCAPTCHA token after maximum retries")}},aR:function(e){return`${Ae}${e}`},aS:(e,t)=>{const r=e.getBoundingClientRect(),n=t.getBoundingClientRect();return Math.floor(r.top)>=Math.floor(n.top)&&Math.ceil(r.bottom)<=Math.ceil(n.bottom)&&Math.ceil(r.right)<=Math.ceil(n.right)&&Math.floor(r.left)>=Math.floor(n.left)},aT:()=>{const e=localStorage.getItem(tt);if(e){const t=JSON.parse(e);return{localStorageValue:t,selectedSubreddits:Object.keys(t).reduce(((e,r)=>(r.startsWith("t5")&&!0===t[r]&&e.push(r),e)),[])}}},aU:t=>e.b({source:re,action:"click",noun:ne(t)?"clear_post_flair_name":"clear_flair_name"}),aV:()=>"CO-HOST",aW:()=>"OP",aX:()=>"ADMIN",aY:()=>"MOD",aZ:(t,r)=>e.b({source:re,action:"click",noun:ne(t)?"enable_post_flair":"enable_user_flair"},{action_info:{setting_value:r?"toggle on":"toggle off"}}),a_:(t,r)=>e.b({source:re,action:"click",noun:ne(t)?"let_users_assign_post_flair":"let_users_assign_flair"},{action_info:{setting_value:r?"toggle on":"toggle off"}}),aa:e=>{const t=k(e);return t?(_(t[0]),t):null},ab:C,ac:(e,t,r)=>{if(!t)return C(e);const n=((e,t,r)=>{for(let n=1;n<e.length;n++){const a=(t-n+e.length)%e.length,i=e[a];if(a>t&&!r)return null;if(f(i))return i}return f(e[t])?e[t]:null})(e,t[1],r);return n?I(n):null},ad:(e,t,r)=>{if(!t)return w(e);const n=((e,t,r)=>{for(let n=1;n<e.length;n++){const a=(t+n)%e.length,i=e[a];if(a<t&&!r)return null;if(f(i))return i}return f(e[t])?e[t]:null})(e,t[1],r);return n?I(n):null},ae:e=>y in e,af:{MenuItem:"menuitem",Button:"button",Link:"link",Checkbox:"menuitemcheckbox",Radio:"menuitemradio"},ag:E,ah:e=>{try{return new URL(e).hostname.endsWith("reddit.com")}catch(e){return!1}},ai:e=>e.startsWith("https://alb.reddit.com/cr"),aj:function(){return"button_appearance"===e.ai(e.k$)||e.ai(e.k$)===Z},ak:z,al:2e3,am:({attributes:r,children:n,selected:a,leadingIcon:i,ariaControls:o,screenReaderContent:s,deleteButtonConfig:l})=>{const{html:c,ifDefined:d}=t.g();return c` <span class="inline-flex relative max-w-full" slot="${d(r?.slot)}"> ${e.gp({hideChildrenOverflow:!0,ariaControls:o,attributes:r,selected:a,size:e.a7.Small,leadingIcon:i&&Se({children:i,appearance:"icon",size:"2xs"}),children:c`<span class="${a?"inline-block me-[calc(var(--size-button-sm-h)-var(--rem10)-var(--button-border-width-default))]":""} overflow-hidden text-ellipsis">${n}</span>`,screenReaderContent:s})} ${a?c` <span style="${"transform: translateY(-50%);\nposition: absolute;\ninset-inline-end: 0;\ntop: 50%;\ntransform: translateY(-50%);\ndisplay: inline-flex;\n"}"> ${e.Y({...l,appearance:"plain",size:e.a7.Small,leadingIcon:t.u({size:t.h.Small})})} </span>`:void 0} </span> `},an:"reddit-search:open",ao:"onboarding",ap:"dismiss",aq:$e,ar:class{constructor(t,r){this.isLoading=!1,this.hasReloadError=!1,this.handleReload=async e=>{if(!this.reloadUrl)return;this._currentAbortController&&this._currentAbortController.abort(),this._currentAbortController=new AbortController;const t=this._currentAbortController;this.isLoading=!0,this.hasReloadError=!1,this.host.requestUpdate();try{await this.getAndReplacePartial(e.detail?.queryParameters,t.signal)}catch(e){t.signal.aborted||(this.hasReloadError=!0)}this._currentAbortController===t&&(this.isLoading=!1,this._currentAbortController=void 0,this.host.requestUpdate())};const{reloadUrl:n,containerSelector:a,mode:i=e.P.Contents}=r||{};(this.host=t).addController(this),this._partialRequest=new e.aF(this.host),this._reloadUrl=n,this.containerSelector=a||this.host.tagName.toLowerCase(),this._mode=i}get reloadUrl(){return this._reloadUrl}set reloadUrl(e){this._reloadUrl=e}get mode(){return this._mode}set mode(e){this._mode=e}hostConnected(){this.host.addEventListener($e,this.handleReload)}hostDisconnected(){this.host.removeEventListener($e,this.handleReload)}async getAndReplacePartial(t={},r){const n=this.reloadUrl&&Array.from(Object.entries(t)).reduce(((t,[r,n])=>e.bU(t,r,n)),this.reloadUrl),a=await this._partialRequest.request(n);if(r?.aborted)return;const i=await(a?.text());if(r?.aborted)return;if(!i)throw new Error("Unable to reload content");const o=(new DOMParser).parseFromString(i,"text/html").querySelector(this.containerSelector);if(!o)throw new Error(`Element ${this.containerSelector} not found in reload response`);if(!r?.aborted)if(this.mode!==e.P.Contents)e.aG(o.outerHTML,this.host,this.mode);else{if(!o?.innerHTML)throw new Error("No content to reload");e.aG(o.innerHTML,this.host,this.mode)}}},as:function(e){return!!e},at:(e,t)=>Pe({action:"add",noun:"subreddit"},e,t),au:(e,t)=>Pe({action:"remove",noun:"subreddit"},e,t),av:le,aw:5,ax:e=>!!e&&(e.indexOf("profileIcon_snoo")>-1||e.indexOf("snoovatar/avatars")>-1||e.endsWith("snoovatar_anonymous.svg")),ay:function(e){return!!e&&et.test(e)},az:"https://chat.reddit.com/",b:(e,t)=>{const r=e.composedPath(),n=Array.isArray(t)?t.map((e=>e.toUpperCase())):[t.toUpperCase()];for(const e of r)if(n.includes(e.tagName))return!0;return!1},b$:"comment-post",b0:()=>e.b({source:"post_detail",action:"click",noun:"load_more_comments"}),b1:t=>e.b({source:re,action:"click",noun:ne(t)?"change_post_flair_color":"change_flair_color"}),b2:"flair-form-can-submit-change",b3:(t,r,n)=>e.b({source:re,action:"click",noun:ne(t)?"post_flair_edit_save":"flair_edit_save"},ae(t,r,n)),b4:(t,r,n)=>e.b({source:re,action:"click",noun:ne(t)?"create_post_flair_confirm":"create_flair_confirm"},ae(t,r,n)),b5:function(r,n){return e.Y({attributes:n,appearance:xe[r],leadingIcon:t.r()})},b6:function(r,n){if(!r)return;const{html:a}=t.g();return a` <span class="flex items-center justify-center">${Array.isArray(r)?a`${r.map((t=>e.Y({...t,appearance:xe[n]})))}`:e.Y(r)}</span>`},b7:"click",b8:"back",b9:()=>e.b({source:"comment",action:"click",noun:"load_more_comments"}),bA:()=>e.b({source:rt,action:"click",noun:"assign_flair_confirm"}),bB:()=>e.b({source:rt,action:"click",noun:"remove_assigned_userflair_dialog"}),bC:()=>e.b({source:rt,action:"click",noun:"remove_assigned_userflair_confirm"}),bD:()=>e.b({source:rt,action:"click",noun:"table_pagination"}),bE:()=>e.b({source:rt,action:"click",noun:"user_search"}),bF:()=>e.b({source:rt,action:"click",noun:"assigned_flair_edit_dialog"}),bG:"user-flair__user-delete",bH:"user-flair__user-edit",bI:"user-flair__user-delete-modal",bJ:"pageNumber",bK:"pageSize",bL:"before",bM:"after",bN:"query",bO:"wiki-banned-users__unban",bP:"wiki-banned-users__ban",bQ:"wiki-banned-users__edit",bR:"wiki-banned-contributors-confirmation-modal",bS:"wiki-banned-contributors-ban-modal",bT:2592e6,bU:e=>{return r=t.x,n=t.l,r`<ac-call ?once="${(a=D(a=e)).once}" debounce="${n(a.debounce)}" delay="${n(a.delay)}" method="${a.method}" target="${a.target}" throttle="${n(a.throttle)}" trigger-elem="${n(a.triggerElem)}" trigger="${n(a.trigger)}"></ac-call>`;var r,n,a},bV:e=>{return r=t.x,n=t.l,r`<ac-toggle-attribute ?once="${(a=D(a=e)).once}" debounce="${n(a.debounce)}" delay="${n(a.delay)}" force="${n(a.force)}" target-attribute="${a.targetAttribute}" target="${n(a.target)}" throttle="${n(a.throttle)}" trigger-elem="${n(a.triggerElem)}" trigger="${n(a.trigger)}"></ac-toggle-attribute>`;var r,n,a},bW:L,bX:H,bY:function(t){return t===e.a5.CompactView},bZ:()=>"[deleted]",b_:function(){return"vote_component"===e.ai(e.k$)||e.ai(e.k$)===Z},ba:()=>e.b({source:"post_detail",action:"click",noun:"comment_image"}),bb:"comment-composer-cancel-draft",bc:"comment-edit-success",bd:"reloadPollingDurationMs",be:()=>e.b({source:"post_detail",action:"click",noun:"collapse_comment"}),bf:()=>e.b({source:"post_detail",action:"click",noun:"expand_comment"}),bg:"/svc/shreddit/edit-comment",bh:(t,{communityId:r,communityName:n})=>e.f(t,e.b({source:"community_page",action:"click",noun:"communities_menu",subreddit:{name:n,id:r}})),bi:ie,bj:e=>Pe({action:"delete",noun:"custom_feed"},e),bk:function(e){return{source:"feed_experience",action:e?"unsubscribe":"subscribe",noun:"subreddit"}},bl:function(){return{source:"feed_experience_overflow",noun:"hide",action:"click"}},bm:function(){return{source:"feed_experience",action:"impression",noun:"feed_experience"}},bn:"login",bo:t=>e.b({source:re,action:"click",noun:ne(t)?"reorder_post_flair_confirm":"reorder_flair_confirm"}),bp:function(){return document&&document.documentElement.lang?document.documentElement.lang:navigator&&navigator.language?navigator.language:"en-US"},bq:function(e,t,r){return!0===(null==r?void 0:r.short)?e.toLocaleDateString(t,{month:"short",day:"numeric"}):e.toLocaleString(t,null==r?void 0:r.options)},br:function(e){return new Date(e.replace("+0000","+00:00"))},bs:function(t){return t===e.a5.ModQueueCompactView},bt:tt,bu:{NAME:"Name",ACTIVITY:"Activity",MEMBER_COUNT:"Members"},bv:function(e){return e?"Settings saved.":"Failed to save settings. Please try again.";},bw:function(e=!1){return e?"Saved":"Save changes";},bx:t=>e.b({source:rt,action:"click",noun:"username_input"},{action_info:t}),by:function(e,{displayFull:t,roundDown:r,maxDigits:n,removeZeroDecimal:a}={}){return t?(e=>{const t=e.split(".");return [t[0].replace(/\B(?=(\d{3})+(?!\d))/g,",")].concat(t.slice(1)).join(".");})(e.toString()):e>=99999999949?`${Xe({num:e,divider:qe,maxDigits:n,removeZeroDecimal:a})}b`:e>=999999949&&e<99999999949?`${Xe({num:e,divider:qe,defaultFixed:1,maxDigits:n,removeZeroDecimal:a})}b`:e>=99999949&&e<999999949?`${Xe({num:e,divider:We,maxDigits:n,removeZeroDecimal:a})}m`:e>=999949&&e<99999949?`${Xe({num:e,divider:We,defaultFixed:1,maxDigits:n,removeZeroDecimal:a})}m`:e>=99949&&e<999949?`${Xe({num:e,divider:Ye,maxDigits:n,removeZeroDecimal:a})}k`:e>=Ye&&e<99949?r?`${Qe(e,Ye)}k`:`${Xe({num:e,divider:Ye,defaultFixed:1,maxDigits:n,removeZeroDecimal:a})}k`:String(e);},bz:()=>e.b({source:rt,action:"click",noun:"assigned_flair_edit_save"}),c:a,c$:"product",c0:async function({responseId:t,subredditId:r,contentId:n,modmailVariables:a}){const{data:i,errors:o}=await se({operation:e.C.RenderSavedResponseTemplateBySubredditId,variables:{responseId:t,subredditId:r,variables:{...(n ? {removalVariables:{contentId:n}} : {}),...(a ? {modmailVariables:a} : {})}}});if(o?.length||"Subreddit"!==i.subredditInfoById?.__typename)throw new Error(ie());return i.subredditInfoById?.moderation?.renderSavedResponseTemplate},c1:"list-reply-comment",c2:(t="post_detail",r)=>e.b({source:t,action:"click",noun:"downvote_comment"},{action_info:{trigger_type:r}}),c3:(t="post_detail",r)=>e.b({source:t,action:"click",noun:"upvote_comment"},{action_info:{trigger_type:r}}),c4:(t="post_detail",r)=>e.b({source:t,action:"click",noun:"clearvote_comment"},{action_info:{trigger_type:r}}),c5:t=>e.b({source:"achievements",action:"click",noun:"card_icon"},{action_info:{page_type:t}}),c6:t=>e.b({source:"achievements",action:"click",noun:"profile_showcase"},{action_info:{page_type:t}}),c7:(r,n)=>n?e.Y({shape:"pill",appearance:"plain",size:e.a7.Small,attributes:{className:"border-0 [:not(:hover)]:bg-transparent text-12 font-semibold text-secondary-plain",slot:"trigger",...r},hideChildrenOverflow:!0,children:t.x`<slot name="trigger-content"></slot>`,trailingIcon:t.aa({size:t.I.Small,attributes:{"aria-hidden":"true",className:"px-[2px]"}})}):g({appearance:"plain",attributes:{className:"border-0 [:not(:hover)]:bg-transparent text-12 font-semibold text-secondary-plain",...r},children:t.x`<slot name="trigger-content"></slot>`,size:e.a7.Small}),c8:A,c9:function(e,t,r){var n;const a=function(e,t){const r=t.getTime()-e.getTime(),n=Math.round(r/31104e6),a=Math.round(r/2592e6),i=Math.round(r/864e5),o=Math.round(r/36e5),s=r/G;let l="minutes",c=0;return Math.abs(Math.round(s))<60?c=s>-1&&s<1?Math.sign(s)*Math.ceil(Math.abs(s)):Math.round(s):Math.abs(o)<24?(l="hours",c=o):Math.abs(i)<29?(l="days",c=i):Math.abs(a)<11?(l="months",c=a):(l="years",c=n),{unit:l,diff:c}}(new Date,e);try{if(j){return function(e,t,r){return x(t,{localeMatcher:"lookup",numeric:"always",style:r}).format(e.diff,e.unit)}(a,t,null!==(n=null==r?void 0:r.format)&&void 0!==n?n:(null==r?void 0:r.short)?"short":"long")}}catch(e){}return ((null==r?void 0:r.short)||"short"===(null==r?void 0:r.format))&&a.diff<0&&t.match(/en.*/)?K(a):A(t,{dateStyle:"short",timeStyle:"short"}).format(e);},cA:"saved-responses__open-reorder-modal",cB:"saved_responses__cancel_update",cC:"saved-responses-table__partial_id",cD:"saved_responses__response_delete_modal_id",cE:function(e){return`add-ama-collaborators-modal-${e}`},cF:function(e,t,r){return e?t():null==r?void 0:r()},cG:"wiki-page-settings-done-button",cH:"wiki-page-settings-close-button",cI:"wiki-page-setting-modal-dialog",cJ:"skip",cK:"https://www.reddit.com/redditchat/",cL:"chat-mobile-xpromo",cM:24,cN:{Total:"#D2DADD",Posts:"#0E8A00",Negative:"#372F8C",Positive:"#008675",Neutral:"#629FFF",Score:"#D93A00",Performance:"#6A5CFF",Comments:"#D93900",Upvotes:"#6A5CFF","Post Upvotes":"#DE019F","Comment Upvotes":"#5BA200","Total Upvotes":"#97AFBC","Total Mentions":"#6A5CFF"},cO:e=>e.startsWith("a2_")?e.replace("a2_",""):e.startsWith("t2_")?e.replace("t2_",""):e,cP:e=>/^award_.+\|t\d_.+$/.test(e),cQ:class{get matches(){return this.mediaQuery.matches}constructor(e,t){this.host=e,this.query=t,this.rafId=null,this.handleMediaChange=()=>{this.rafId&&cancelAnimationFrame(this.rafId),this.rafId=requestAnimationFrame((()=>{this.rafId=null,this.host.requestUpdate("matches",!this.matches)}))},e.addController(this),this.mediaQuery=window.matchMedia(t),this.mediaQuery.addEventListener("change",this.handleMediaChange)}async hostConnected(){}async hostDisconnected(){}},cR:M,cS:({productName:e,productPrice:t,productId:r,retailerId:n,retailerName:a,retailerPrice:i,retailerLink:o})=>{const s={product_name:e,display_price:t};return r&&(s.product_id=r),n&&(s.retailer_id=n),a&&(s.retailer_name=a),i&&(s.retailer_price=i),o&&(s.retailer_link=o),s},cT:B,cU:(t,r,n)=>{e.e2({name:e.kY}),e.z({name:e.kY,country:r,value:`${t}`,options:{...e.D,domain:n}})},cV:V,cW:(t,r,n)=>{e.e2({name:e.k_}),e.z({name:e.k_,country:r,value:`${t}`,options:{...e.D,domain:n}})},cX:()=>e.ak.get(e.kZ),cY:(t,r,n)=>{e.e2({name:e.kZ}),e.z({name:e.kZ,country:r,value:`${t}`,options:{...e.D,domain:n}})},cZ:function(t){return t===e.a5.CardView},c_:ze,ca:"view",cb:"auth_modal",cc:"send",cd:function(e=!1){return e?"Saved":"Save";},get ce(){return W},cf:function*(e,t){if(void 0!==e){let r=0;for(const n of e)yield t(n,r++)}},cg:{STREAK_EXTENDED:"streak_progressed",TROPHY_UNLOCKED:"achievement_unlocked",TROPHY_PROGRESSED:"achievement_progress"},ch:({conversationId:e,position:t,searchQuery:r})=>{const n={conversation_id:e};return t&&(n.query_id=`${t}`),r&&(n.query=r),{search:n}},ci:"saved-responses__reorder",cj:(e,t,r)=>{for(const r of t)if(r[0]===e)return(0,r[1])();return null==r?void 0:r()},ck:"achievement-progress-toast",cl:({attributes:r,title:n,titleDataTestId:a,description:i,buttonProps:o,creative:s,creativeSafe:l=!0})=>{const{html:c,createElement:d}=t.g();return d("div",{...r,className:"flex flex-col items-center w-full",rpl:!0,"rpl-empty-state":!0},c`<div class="w-full flex flex-col items-center overflow-hidden box-border ${!l&&"p-md"}"> ${s} </div> <div class="flex flex-col w-full items-center box-border px-md gap-md ${n||i?"pb-md":""}"> ${n||i?c` <div class="max-w-[480px] flex flex-col items-center text-center"> <div class="text-24 font-bold text-neutral-content-strong" data-testid="${t.l(a)}"> ${n} </div> <div class="text-16 text-neutral-content-weak">${i}</div> </div> `:""} ${o?c`<div>${e.Y(o)}</div>`:""} </div>`)},cm:Re,cn:"saved-responses__saved",co:e=>Pe({action:"duplicate",noun:"custom_feed"},e),cp:e=>Pe({action:"create",noun:"custom_feed"},e),cq:t=>e.f(t,e.b({source:"community_page",action:"click",noun:"all_communities"})),cr:t=>e.f(t,e.b({source:"community_page",action:"click",noun:"favorites"})),cs:t=>e.f(t,e.b({source:"community_search",action:"view",noun:"search_bar"})),ct:t=>e.f(t,e.b({source:"community_search",action:"view",noun:"query_prompt"})),cu:t=>e.f(t,e.b({source:"community_search",action:"click",noun:"search_bar"})),cv:"saved-responses__create",cw:"saved-responses__exit-create-view",cx:"saved-responses__delete",cy:"saved-responses__update-item",cz:"saved-responses__submit",d:function(e){return Array.from(function*(e){for(let t=1;t<=e;t++)yield t}(e))},d0:je,d1:"post",d2:"subreddit",d3:"subscribe",d4:"unsubscribe",d5:Ze,d6:Ge,d7:Ke,d8:Be,d9:Ve,da:"emote|",db:J,dc:"giphy|",dd:F,de:function({fieldErrors:e,defaultMessage:t}){return e?.[0]?.message??t},df:"wiki-revision-note-modal-dialog",dg:"wiki-page-tabs",dh:"hidePostSubmitLink",di:"isTranslatable",dj:"targetLanguage",dk:({adjacentElement:t})=>{if(!e.kd(e.ke()))return()=>{};const r=document.createElement("input");return r.setAttribute("type","text"),r.style.position="absolute",r.style.opacity="0",r.style.height="0",r.style.fontSize="16px",t.insertAdjacentElement("afterend",r),r.focus(),()=>r.remove()},dl:"comment-deletion-modal",dm:t=>e.b({source:t,action:"click",noun:"follow"}),dn:t=>e.b({source:t,action:"undo",noun:"follow"}),dp:"list-reply-comment-button",dq:t=>e.b({source:t,action:"click",noun:"save"}),dr:t=>e.b({source:t,action:"click",noun:"unsave"}),ds:e=>!e||e.includes("avatar_default_"),dt:function(t){const r={[e.hK.Female]:"Woman",[e.hK.Male]:"Man",[e.hK.NonBinary]:"Non-binary",[e.hK.OptOut]:"I prefer not to say",[e.hK.UserDefined]:"I refer to myself as..."};return t?r[t]:r},e:R,f:class{constructor(e){this.host=e,this.slotsCache=new Map,this.hasContentsCache=new Map,this.slotTextCache=new Map,this.handleSlotChange=e=>{if(!(e.target instanceof HTMLSlotElement))return;const t=e.target,r=t.hasAttribute("name")?t.name:"default",n=this.hasContentsCache.get(r),a=E(t);this.slotsCache.set(r,t),this.hasContentsCache.set(r,E(t)),this.slotTextCache.delete(r),n!==a&&this.host.requestUpdate()},e.addController(this)}hostConnected(){}getSlot(e){const t=this.slotsCache.get(e);if(void 0!==t)return t;const r=this.host.shadowRoot?.querySelector("default"===e?"slot:not([name])":`slot[name="${e}"]`);return r instanceof HTMLSlotElement?(this.slotsCache.set(e,r),r):null}hasSlotContent(e){return this.hasContentsCache.get(e)??!1}getSlotText(e){const t=this.slotTextCache.get(e);if(void 0!==t)return t;if(!(this.hasContentsCache.get(e)??!1))return this.slotTextCache.set(e,null),null;const r=this.getSlot(e);if(!r)return null;const n=(e=>{const t=e.assignedNodes({flatten:!0}),r=[];for(const e of t)e.nodeType===Node.TEXT_NODE&&e.textContent?.match(/\S/)&&r.push(e.textContent.trim()),e.nodeType===Node.ELEMENT_NODE&&e.textContent?.match(/\S/)&&r.push(e.textContent.trim());return r.length>0?r.join(" "):null})(r);return this.slotTextCache.set(e,n),n}},g:function(e,t){const r=e.composedPath();for(const e of r){const r=e.dataset,n=r&&r[t];if(null!=n)return n}return null},h:(t,r)=>{e.$.isAvailable()&&e.$.setItem(t,JSON.stringify(r))},i:({listId:e,seeButtonId:t})=>{const r=document.querySelector(`#${e}`),n=r?.querySelectorAll(".hidden"),a=r?.querySelector(`#${t}`),i=a?.getAttribute("data-see-less-label"),o=a?.getAttribute("data-see-more-label");if((!a||!Me.has(a))&&r&&a&&n&&i&&o){let e=!0;a.addEventListener("click",(()=>{Array.from(n).forEach((t=>{e?t.classList.remove("hidden"):t.classList.add("hidden")})),a.textContent=e?i:o,e=!e})),Me.add(a)}},j:U,k:function(e,t){return function(e,t){void 0===t&&(t={});var r=function(e){return e&&e.sensitive?"":"i"}(t),n=t.encode,a=void 0===n?function(e){return e}:n,i=t.validate,o=void 0===i||i,s=e.map((function(e){if("object"==typeof e)return new RegExp("^(?:".concat(e.pattern,")$"),r)}));return function(t){for(var r="",n=0;n<e.length;n++){var i=e[n];if("string"!=typeof i){var l=t?t[i.name]:void 0,c="?"===i.modifier||"*"===i.modifier,d="*"===i.modifier||"+"===i.modifier;if(Array.isArray(l)){if(!d)throw new TypeError('Expected "'.concat(i.name,'" to not repeat, but got an array'));if(0===l.length){if(c)continue;throw new TypeError('Expected "'.concat(i.name,'" to not be empty'))}for(var u=0;u<l.length;u++){var h=a(l[u],i);if(o&&!s[n].test(h))throw new TypeError('Expected all "'.concat(i.name,'" to match "').concat(i.pattern,'", but got "').concat(h,'"'));r+=i.prefix+h+i.suffix}}else if("string"!=typeof l&&"number"!=typeof l){if(!c){var m=d?"an array":"a string";throw new TypeError('Expected "'.concat(i.name,'" to be ').concat(m))}}else{h=a(String(l),i);if(o&&!s[n].test(h))throw new TypeError('Expected "'.concat(i.name,'" to match "').concat(i.pattern,'", but got "').concat(h,'"'));r+=i.prefix+h+i.suffix}}else r+=i}return r}}(ee(e,t),t)},l:Se,m:function(e="#preview"){nt((function(){const t=document.querySelector(e);t?.classList.contains(at)||t?.classList.add(at)}))},n:(...e)=>e.filter(Boolean).join(" "),o:function(){return{source:"feed_experience",action:"consume",noun:"subreddit"}},p:t=>{if(!e.$.isAvailable())return;const r=e.$.getItem(t);if(r)try{return JSON.parse(r)}catch{return}},q:t=>e.b({source:"global",action:"view",noun:"screen"},{action_info:{page_type:e.ah.AchievementDetail,...(t ? {type:t} : {})}}),r:(e,t=e.tagName.toLowerCase())=>{const r=e=>(""===e&&(e="generic"),t+":"+e);return{dispatch:(t,n={bubbles:!0,cancelable:!0,composed:!0})=>e.dispatchEvent(new CustomEvent(r(t),n)),eventId:r}},s:nt,t:function(){return{source:"feed_experience",action:"impression",noun:"subreddit"}},u:g,v:function(e,t){return null!==e.querySelector(`:scope > [slot="${t}"]`)},w:()=>e.b({source:"comment",action:"click",noun:"share"}),x:()=>e.b({source:"comment",action:"click",noun:"share_copy"}),y:e=>{window.location.href=e||window.location.href},z:function(){return window.matchMedia("(pointer: coarse)").matches}};}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./MX9FaClF.js",import.meta.url,"MX9FaClF");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./FaYkg4Io.js",import.meta.url,"FaYkg4Io");
SML.dm("CDFmhs-S",["GlDbwxoG","s_Igk1Yn","MX9FaClF","CC2wUKE8","FaYkg4Io"],(async(o,r,t)=>{var a=r.i`${o.Z}:host{--max-width:20rem;--hide-delay:0ms;--show-delay:750ms;display:contents}:host,:host([appearance=neutral]){--rpl-tooltip-code-background-color:var(--color-neutral-background-hover);--rpl-tooltip-background-color:var(--color-neutral-background);--rpl-tooltip-color:var(--color-neutral-content-strong)}:host([appearance=inverted]){--rpl-tooltip-code-background-color:var(--color-inverted-neutral-background-hover);--rpl-tooltip-background-color:var(--color-inverted-neutral-background);--rpl-tooltip-color:var(--color-inverted-neutral-content-strong)}:host([appearance=primary]){--rpl-tooltip-background-color:var(--color-tooltip-bg-primary);--rpl-tooltip-color:var(--color-tooltip-text-primary)}.tooltip{--arrow-size:var(--rpl-tooltip-arrow-size, 4px);--arrow-color:var(--rpl-tooltip-background-color)}.tooltip[placement^=top]::part(arrow){box-shadow:1px 1px 2px rgba(0,0,0,.05)}.tooltip[placement^=bottom]::part(arrow){box-shadow:-1px -1px 2px rgba(0,0,0,.05)}.tooltip[placement^=left]::part(arrow){box-shadow:0 -2px 2px rgba(0,0,0,.05)}.tooltip[placement^=right]::part(arrow){box-shadow:-2px 0 2px rgba(0,0,0,.05)}.tooltip::part(popup){z-index:var(--rpl-z-index-tooltip,var(--faceplate-tooltip-z-index,1))}.tooltip[placement^=top]::part(popup){transform-origin:bottom}.tooltip[placement^=bottom]::part(popup){transform-origin:top}.tooltip[placement^=left]::part(popup){transform-origin:right}.tooltip[placement^=right]::part(popup){transform-origin:left}.tooltip-body{display:flex;justify-content:center;align-items:center;width:max-content;max-width:var(--max-width);border-radius:var(--rpl-tooltip-border-radius,.25rem);box-shadow:var(--rpl-tooltip-box-shadow,var(--boxshadow-tooltip));background-color:var(--rpl-tooltip-background-color);font:var(--rpl-tooltip-font,var(--font-12-16-semibold));color:var(--rpl-tooltip-color);padding:var(--rpl-tooltip-padding,.5rem);pointer-events:none;user-select:none;-webkit-user-select:none;gap:var(--rem4)}::slotted([slot=shortcut]),::slotted(code[slot=shortcut]){font:var(--rpl-tooltip-font,var(--font-12-16-semibold))!important;color:var(--rpl-tooltip-color)!important;background-color:var(--rpl-tooltip-code-background-color)!important;border:none!important;border-radius:calc(var(--rpl-tooltip-border-radius,.25rem) - var(--rem2))!important;padding:var(--rem4)!important}`;let p=class extends t.T{};return p.styles=a,p=o._([o.e("rpl-tooltip")],p),{get R(){return p}}}));
SML.dm("CGzEIBwW",[],(async()=>{const t=t=>{let r=t.title??"";return t.text&&(r.length&&(r+="\n\n"),r+=t.text),t.url&&(r.length&&(r+="\n\n"),r+=t.url),r};var r;!function(t){t[t.NativeShare=0]="NativeShare",t[t.Clipboard=1]="Clipboard"}(r||(r={}));var a=async(a,e=!0,n=t)=>{if("function"==typeof window.navigator.share&&!e){try{await window.navigator.share(a)}catch(t){}return r.NativeShare}try{await navigator.clipboard.writeText(n(a))}catch(t){}return r.Clipboard};return{get S(){return r},get s(){return a}}}));

SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");
SML.dm("CIi1v1l_",["GlDbwxoG"],(async e=>{const t=new Set([e.ah.ProfileOverview,e.ah.ProfilePosts]),o=new Set([e.ah.BrandMention,e.ah.ProfileAccountStats,e.ah.ProfileComments,e.ah.ProfileDashboard,e.ah.ProfileDownvoted,e.ah.ProfileHidden,e.ah.ProfileOverview,e.ah.ProfilePerformance,e.ah.ProfilePerformanceComments,e.ah.ProfilePosts,e.ah.ProfileRelatedKeywords,e.ah.ProfileSaved,e.ah.ProfileSubmitted,e.ah.ProfileTrendingConvoDetails,e.ah.ProfileCommunityFinder,e.ah.ProfileTrendingConvos,e.ah.ProfileUpvoted,e.ah.ProfileTrendMonitoring,e.ah.ProductCommunitiesPage,e.ah.ProductInsights,e.ah.ProductInsightDetailsPage,e.ah.ProductConversationsPage,e.ah.ArticleDetails,e.ah.ArticleFeed,e.ah.ArticleInsights,e.ah.PublisherCommunities]),a=[e.ah.ProfileOverview,e.ah.ProfilePosts,e.ah.ProfileSaved,e.ah.ProfileUpvoted,e.ah.ProfileDownvoted,e.ah.ProfileHidden];var s;Array.from(o),function(e){e[e.Hour=0]="Hour",e[e.Day=1]="Day",e[e.Month=2]="Month",e[e.Year=3]="Year"}(s||(s={}));const r=e=>({unit:s.Day,value:-e}),n=e=>({unit:s.Month,value:-e});var i,h;!function(e){e[e.Yesterday=0]="Yesterday",e[e.LastWeek=1]="LastWeek",e[e.LastMonth=2]="LastMonth",e[e.Last3Months=3]="Last3Months",e[e.Last6Months=4]="Last6Months",e[e.LastYear=5]="LastYear"}(i||(i={})),function(e){e.Yesterday="day",e.LastWeek="week",e.LastMonth="month",e.Last3Months="last-3-months",e.Last6Months="last-6-months",e.LastYear="year"}(h||(h={})),new Set([h.LastWeek,h.LastMonth,h.Last3Months]),s.Day;const d={[i.LastWeek]:h.LastWeek,[i.LastMonth]:h.LastMonth,[i.Last3Months]:h.Last3Months,[i.Last6Months]:h.Last6Months},l=[{type:i.LastWeek,value:d[i.LastWeek],offset:r(7)},{type:i.LastMonth,value:d[i.LastMonth],offset:r(30)},{type:i.Last3Months,value:d[i.Last3Months],offset:n(3)},{type:i.Last6Months,value:d[i.Last6Months],offset:n(6)}],f=new Map(l.map((({value:e,offset:t})=>[e,t]))),L=h.LastMonth;var M;f.get(L),h.LastWeek,e.b7.Week,h.LastMonth,e.b7.Month,h.Last3Months,e.b7.Months_3,h.Last6Months,e.b7.Months_6,h.LastYear,e.b7.Month,h.Yesterday,e.b7.Month,h.Yesterday,e.b8.Day,h.LastWeek,e.b8.Week,h.LastMonth,e.b8.Month,h.Last3Months,e.b8.Months_3,h.Last6Months,e.b8.Months_3,h.LastYear,e.b8.Months_3,function(e){e.ProfileCreation="profile_creation_step",e.VerifyEmail="verify_email_step"}(M||(M={}));return{A:"reddit-pro-account-stats-content-id",D:"profile-dashboard-performance-overview-content",O:"overview-box-value",P:"reddit_pro_onboarding",get R(){return h},T:"trend-monitoring-add-keyword-modal",a:L,b:"t",get c(){return s},d:"profile-creation-add-description-event",e:"submit-profile-creation",f:"profile-creation-submit-event",g:"profile-creation-complete-event",get h(){return M},i:"/profiles",j:"reddit_pro_recommended_keywords",k:"reddit-pro-recommended-keywords",l:t,m:"profile-active-subreddits-modal",n:"trend-monitoring-manage-keywords-modal",o:"delete-keyword-confirmation-modal",p:"profile-contributions-modal",q:e=>o.has(e),r:"profile-followers-modal",s:l,t:a}}));
SML.di("./CKlTNbKB.js",import.meta.url,"CKlTNbKB");SML.di("./D3HU2XGt.js",import.meta.url,"D3HU2XGt");SML.di("./CVmDfcOX.js",import.meta.url,"CVmDfcOX");SML.di("./LLQHLjSk.js",import.meta.url,"LLQHLjSk");SML.di("./CDFmhs-S.js",import.meta.url,"CDFmhs-S");SML.di("./az2PUDKS.js",import.meta.url,"az2PUDKS");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./D2eAe0e-.js",import.meta.url,"D2eAe0e-");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./CwgKrXUC.js",import.meta.url,"CwgKrXUC");SML.di("./B6yBL9at.js",import.meta.url,"B6yBL9at");SML.di("./DuMDg_pA.js",import.meta.url,"DuMDg_pA");SML.di("./Wj1K4cGE.js",import.meta.url,"Wj1K4cGE");SML.di("./C7Ws8ntA.js",import.meta.url,"C7Ws8ntA");SML.di("./BM-DpnLu.js",import.meta.url,"BM-DpnLu");SML.di("./Be8KYlVI.js",import.meta.url,"Be8KYlVI");SML.di("./Diel-zJV.js",import.meta.url,"Diel-zJV");SML.di("./Dm-LXBi1.js",import.meta.url,"Dm-LXBi1");SML.di("./MX9FaClF.js",import.meta.url,"MX9FaClF");SML.di("./FaYkg4Io.js",import.meta.url,"FaYkg4Io");SML.di("./Dhnopfuf.js",import.meta.url,"Dhnopfuf");
SML.dm("CIri4akm",["CKlTNbKB","D3HU2XGt","CVmDfcOX","LLQHLjSk","CDFmhs-S","az2PUDKS","GlDbwxoG","s_Igk1Yn","D2eAe0e-","CC2wUKE8","CwgKrXUC","B6yBL9at","DuMDg_pA","Wj1K4cGE","C7Ws8ntA","BM-DpnLu","Be8KYlVI","Diel-zJV","Dm-LXBi1","MX9FaClF","FaYkg4Io","Dhnopfuf"],(async()=>{SML.di("./BKWigrHj.js",import.meta.url,"BKWigrHj").then((function(E){return E.r}))}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");
SML.dm("CJ4Bucp-",["GlDbwxoG","DRM-oTYq"],(async(E,R)=>{const D=R=>R===E.a4.ModApproved,e=R=>R===E.a4.AdminApproved,o=R=>R===E.a4.ModRemoved||R===E.a4.ModSpammed,M=R=>R===E.a4.AdminRemoved||R===E.a4.AdminSpammed;var P;!function(E){E.UNMODERATED="UNMODERATED",E.APPROVED="APPROVED",E.REMOVED="REMOVED",E.SPAM="SPAM",E.REPORTED="REPORTED",E.FILTERED="FILTERED"}(P||(P={}));const d=(E,R)=>(E===P.FILTERED||R)&&E!==P.APPROVED&&E!==P.REMOVED;return{get M(){return P},a:d,b:(D,e)=>(D===R.P.ModQueue||D===R.P.ModQueueAll)&&e===E.a5.ModQueueCompactView,c:E=>[P.REPORTED,P.FILTERED,P.UNMODERATED,P.REMOVED,P.SPAM].includes(E),d:E=>[P.APPROVED,P.UNMODERATED,P.REPORTED].includes(E),e:({moderationState:E,isSpamFilteredPost:R,isRemoved:D,isPromotedPost:e})=>(d(E,R)||!D)&&!e,f:({isPromotedPost:E})=>!E,h:E=>D(E)||e(E)||o(E)||M(E),i:E=>D(E)||e(E),s:(E,R,D,e)=>E===P.REMOVED&&!e&&!R&&!d(E,D)}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("CKCUSZ1J",["s_Igk1Yn","GlDbwxoG","CC2wUKE8"],(async(t,c,a)=>{const{svg:n}=t.g();function u(t,c){const n=a.p(t);return n?n.slice(0,c):[]}return{a:(t,c,n)=>{const e=u(c,n),i=new Map,r=[t,...e];for(;r.length&&i.size<n;){const t=r.shift();i.has(t.uuid)||i.set(t.uuid,t)}const E=Array.from(i.values());E.length===e.length&&E.every(((t,c)=>t.uuid===e[c].uuid))||a.h(c,E)},c:t.m(n`<path d="M11.977 13.79h-1.955l4.549-10.715a.81.81 0 00-.381-1.032C12.447 1.12 10.37.747 8.179 1.18c-3.612.716-6.471 3.68-7.059 7.316a9.01 9.01 0 0010.409 10.377c3.735-.616 6.741-3.635 7.347-7.371.453-2.8-.388-5.405-2.017-7.322a.505.505 0 00-.853.119l-4.029 9.49zM9.98 8.118a1.752 1.752 0 00-1.148.167 1.664 1.664 0 00-.651.596 1.703 1.703 0 00-.258.948v3.96H5.998V6.322h1.876v1.074h.035c.251-.344.567-.628.948-.851a2.55 2.55 0 011.311-.335c.172 0 .335.014.488.042.153.028.267.058.342.09l-.774 1.849a.766.766 0 00-.244-.073z"></path>`,"0 0 20 20","community-fill"),g:u,r:()=>c.b({source:"community_nav",action:"click",noun:"community_recent"})}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./D2eAe0e-.js",import.meta.url,"D2eAe0e-");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("CKlTNbKB",["GlDbwxoG","s_Igk1Yn","D2eAe0e-","CC2wUKE8"],(async(e,t,i,a)=>{const r=t.s,n=e=>{e.preventDefault()};let s=class extends r{constructor(){super(...arguments),this.isHamburgerMenuIncluded=!1,this.isLoggedIn=!1,this.showAccountManagerModal=!1,this.hamburgerMenuButton=null,this.menuDialog=null,this.loginButton=void 0,this.shredditInteractableElement=null,this.search=null,this.userDrawerButton=null,this.userDrawerMenu=null,this.userDrawerContent=null,this.userDrawerLoginButton=null,this.advertiseButton=null,this.createAnchor=null,this.recapCampaignLink=void 0,this.mScreenMediaQueryList=window.matchMedia?.("(min-width: 1200px)"),this.cachedIsHamburgerMenuShown=!(this.mScreenMediaQueryList?.matches??1),this.events=new e.E(this),this.googleApiController=new i.G(this),this._track=this.events.define("faceplate-track",(e=>{const{source:t,action:i,noun:a}=e.detail;"nav"===t&&"click"===i&&"create_community"===a&&this._closeDialog()})),this.handleMScreenMediaQueryListChange=({matches:e})=>{e&&this.cachedIsHamburgerMenuShown&&this._closeDialog(),this.cachedIsHamburgerMenuShown=!e},this.handleOpenUserDrawer=t=>{t.stopPropagation(),this._closeDialog(),e.f(this,e.bD())},this.handleCloseUserDrawer=t=>{t?.stopPropagation(),e.f(this,e.bE())},this.setupUserDrawer=async()=>{this.userDrawerButton=this.querySelector("#expand-user-drawer-button"),this.userDrawerMenu=this.userDrawerButton?.closest("rpl-dropdown")??null,this.userDrawerContent=this.querySelector("#user-drawer-content")??null},this.focusSearchInput=()=>{this.search?.shadowRoot?.querySelector("faceplate-search-input")?.focus()},this.handleClickHamburgerMenu=async()=>{await this.initializeHamburgerMenuSlottedElements(),this.menuDialog&&(this.menuDialog.open?this._closeDialog():(this._closeUserDrawer(),this.menuDialog.showModal(),e.f(this,e.bz())),e.f(this,e.bA()))},this.handleSearchDropdownOpen=()=>{this._closeUserDrawer(),this._closeDialog()},this.handleAdvertiseButtonClick=async t=>{const{isAdblockEnabled:i}=await e.cj();if(i){const i=e.c("faceplate-alert",{level:e.X.notice,message:"To advertise, disable your ad blocker or add reddit.com as an exception."});t.target?.dispatchEvent(i)}},this.initializeHotkeys=()=>{this.hotkeySubscriberController=new e.ck(this),this.hotkeySubscriberController?.subscribe(e.cl.CREATE_POST,this.onHotkeyCreatePost)},this.cleanupHotkeys=()=>{this.hotkeySubscriberController?.unsubscribe(e.cl.CREATE_POST,this.onHotkeyCreatePost)},this.onHotkeyCreatePost=()=>{this.createAnchor?.click()}}_closeDialog(){this.menuDialog?.open&&(this.menuDialog.hide(),this.reset(),e.f(this,e.by()))}_closeUserDrawer(){this.userDrawerMenu?.hidden||this.userDrawerMenu?.hide()}connectedCallback(){super.connectedCallback(),this.initializeHotkeys()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListenersFromSlottedElements(),this.cleanupHotkeys()}addEventListenersToSlottedElements(){this.mScreenMediaQueryList?.addEventListener("change",this.handleMScreenMediaQueryListChange),this.userDrawerMenu?.addEventListener("rpl-dropdown:show",this.handleOpenUserDrawer),this.userDrawerMenu?.addEventListener("rpl-dropdown:hide",this.handleCloseUserDrawer),this.advertiseButton?.addEventListener("click",this.handleAdvertiseButtonClick)}removeEventListenersFromSlottedElements(){this.mScreenMediaQueryList?.removeEventListener("change",this.handleMScreenMediaQueryListChange),this.userDrawerMenu?.removeEventListener("rpl-dropdown:show",this.handleOpenUserDrawer),this.userDrawerMenu?.removeEventListener("rpl-dropdown:hide",this.handleCloseUserDrawer)}async initializeHamburgerMenuSlottedElements(){this.isHamburgerMenuIncluded&&(this.menuDialog||(this.menuDialog=this.shadowRoot?.querySelector("slot[name=reddit-header-hamburger-menu]")?.assignedElements({flatten:!0})?.find((e=>e.matches("rpl-dialog#menu")))??null))}initializeSlottedElements(){!this.loginButton&&this.showAccountManagerModal&&(this.loginButton=this.querySelector("a#login-button"),this.loginButton?.addEventListener("click",n)),!this.userDrawerLoginButton&&this.showAccountManagerModal&&(this.userDrawerLoginButton=this.querySelector("#login-list-item"),this.userDrawerLoginButton?.addEventListener("click",(()=>{this._closeUserDrawer()}))),this.search||(this.search=this.querySelector("reddit-search-large"),this.search?.addEventListener(a.an,this.handleSearchDropdownOpen)),this.userDrawerButton||this.setupUserDrawer(),this.advertiseButton||(this.advertiseButton=this.querySelector("#advertise-button")),this.createAnchor||(this.createAnchor=this.querySelector("#create-post")),!this.recapCampaignLink&&this.loginButton&&(this.recapCampaignLink=this.querySelector("a#recap-entrypoint"),this.recapCampaignLink?.addEventListener("click",n))}reset(){this.menuDialog?.scrollTo(0,0)}static get styles(){return[e.t]}firstUpdated(){this.initialize()}async initialize(){this.hamburgerMenuButton||(this.hamburgerMenuButton=this.querySelector("#navbar-menu-button"),this.hamburgerMenuButton?.addEventListener("click",this.handleClickHamburgerMenu)),this.initializeSlottedElements(),this.addEventListenersToSlottedElements(),this.isLoggedIn&&this.googleApiController.initialize()}render(){return t.x` ${this.isHamburgerMenuIncluded?t.x`<slot class="v2" name="reddit-header-hamburger-menu"></slot>`:""} <slot class="v2" name="reddit-search-dialog"></slot> <slot></slot> `}};e._([e.n({type:Boolean,attribute:"is-hamburger-menu-included"})],s.prototype,"isHamburgerMenuIncluded",void 0),e._([e.n({type:Boolean,attribute:"is-logged-in"})],s.prototype,"isLoggedIn",void 0),e._([e.n({type:Boolean,attribute:"show-accountmanager-modal"})],s.prototype,"showAccountManagerModal",void 0),s=e._([e.e("reddit-header-large")],s)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./2Pp2AIeo.js",import.meta.url,"2Pp2AIeo");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DhQW5pQL.js",import.meta.url,"DhQW5pQL");
SML.dm("CLJ5hH8v",["GlDbwxoG","2Pp2AIeo","s_Igk1Yn","DhQW5pQL"],(async(r,e,o,l)=>{var c,i=o.i`${r.Z}.checkmark-icon,::slotted([slot=leading]){display:inline-flex;margin-inline-end:var(--spacer-xs)}a,button{padding:calc(var(--spacer-xs) - var(--rem1))}:host([appearance=bordered]){--rpl-filter-chip-border-color:var(--color-neutral-border);--rpl-filter-chip-text-color:var(--color-secondary-plain);--rpl-filter-chip-disabled-background-color:var(--color-interactive-content-disabled);--rpl-filter-chip-disabled-text-color:var(--color-interactive-content-disabled);--rpl-filter-chip-disabled-border-color:var(--color-neutral-border-weak);--rpl-filter-chip-selected-background-color:var(--color-secondary-background-selected);--rpl-filter-chip-selected-border-color:var(--color-neutral-border);--rpl-filter-chip-hover-background-color:var(--color-secondary-background-hover)}:host([appearance=media]){--rpl-filter-chip-border-color:var(--color-media-border-weak);--rpl-filter-chip-background-color:var(--color-media-background);--rpl-filter-chip-text-color:var(--color-media-onbackground);--rpl-filter-chip-disabled-text-color:var(--color-media-onbackground-disabled);--rpl-filter-chip-disabled-background-color:var(--color-media-background);--rpl-filter-chip-disabled-border-color:var(--color-media-border-weak);--rpl-filter-chip-hover-background-color:var(--color-media-background-hover);--rpl-filter-chip-selected-background-color:var(--color-media-background-selected);--rpl-filter-chip-selected-border-color:var(--color-media-border-selected)}:host{border:1px solid var(--rpl-filter-chip-border-color);color:var(--rpl-filter-chip-text-color);background:var(--rpl-filter-chip-background-color);border-radius:var(--rem8);font-weight:600}:host(.hover:not([disabled])),:host(:hover:not([disabled])){background:var(--rpl-filter-chip-hover-background-color)}:host([selected]){--rpl-filter-chip-background-color:var(--rpl-filter-chip-selected-background-color);--rpl-filter-chip-border-color:var(--rpl-filter-chip-selected-border-color)}:host([disabled]){--rpl-filter-chip-background-color:var(--rpl-filter-chip-disabled-background-color);--rpl-filter-chip-border-color:var(--rpl-filter-chip-disabled-border-color);--rpl-filter-chip-text-color:var(--rpl-filter-chip-disabled-text-color)}`;!function(r){r.Bordered="bordered",r.Media="media"}(c||(c={}));let a=class extends e.R{constructor(){super(...arguments),this.appearance=c.Bordered}static get styles(){return[e.R.styles,i]}renderLeadingContent(){return this.selected?l.c({size:o.I.Small,attributes:{className:"checkmark-icon"}}):super.renderLeadingContent()}};return r._([r.n({type:String})],a.prototype,"appearance",void 0),a=r._([r.e("rpl-filter-chip")],a),{get R(){return c}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./CTwJH_ps.js",import.meta.url,"CTwJH_ps");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./OimaI6pY.js",import.meta.url,"OimaI6pY");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");SML.di("./DBgqsMtO.js",import.meta.url,"DBgqsMtO");
SML.dm("CLcwsfQZ",["GlDbwxoG","CTwJH_ps","CC2wUKE8","OimaI6pY","D-MAMWlw","DBgqsMtO"],(async(e,t,i,s,r)=>{const n=new Set(["t3_103b4tl","t3_u1cuyg","t3_103bmpv","t3_xipqoc","t3_xipsi3"]);function a(e){const t=new Map;return e.forEach((e=>{const i=t.get(e.type)||[];i.push(e),t.set(e.type,i)})),t}function o(e){return!!e.encryptedTrackingId}function d(e,t){return e.encryptedTrackingId+t.additionalEventMetadata}function l({pixelEvent:e,pixelRequestBody:t,metadata:i,target:s}){if(!e.encryptedTrackingId)return;if(u(e.type))return d(e,t);const r=i?function(e){return Object.entries(e).reduce(((e,[t,i])=>(e[t]=i.toString(),e)),{})}(i):{};return fetch("https://alb.reddit.com/track",{method:"POST",mode:"no-cors",body:JSON.stringify({encryptedTrackingId:e.encryptedTrackingId,encryptedTrackingPayload:t.encryptedTrackingPayload,additionalEventMetadata:t.additionalEventMetadata,clientImpressionID:t.impressionId,...r})}).then((()=>{_(s,"succeeded",e)})).catch((t=>{const i="Sentry"in window?window.Sentry:void 0;i?.captureException&&i.captureException(new Error(`Error in POST response from pixel server for pixel of type ${e.type}: ${t}`)),_(s,"failed",e)})),d(e,t)}function h(t){return!!e.e4.includes(t)||e.e5.some((({experimentName:i,pixelEventTypes:s})=>e.ar(i)&&s.includes(t)))}function u(t){return e.e8.some((({experimentName:i,pixelEventTypes:s})=>e.ar(i)&&s.includes(t)))}function m({pixelEvent:t,impressionId:r,displayMetadata:n,videoMetadata:a,pixelRequestBody:d}){const l=s.P[t.type];if(!l)return;const h={impression_id:r,event_timestamp:Math.floor(Date.now()),display_metadata:n,video_metadata:a,additional_metadata:d.additionalEventMetadata};if(o(t))h.encrypted_tracking_id=t.encryptedTrackingId,h.encrypted_tracking_payload=d.encryptedTrackingPayload;else{if(!i.ah(t.url))return;const{encryptedTrackingId:e,encryptedTrackingPayload:s}=function(e){const t=new URL(e);return{encryptedTrackingPayload:t.searchParams.get("za")||"",encryptedTrackingId:t.searchParams.get("zp")||""}}(t.url);h.encrypted_tracking_id=e,h.encrypted_tracking_payload=s}const u={client_ad_event_metadata:h,video_watch_metadata:e.e6[t.type],vendor_fully_in_view_metadata:e.e7[t.type],screen:{height:window.screen.height,width:window.screen.width}},m=document.querySelector("shreddit-app");m&&e.f(m,e.b(l,u))}function _(t,s,r){if(e.ar(e.e9))return;if(!o(r)&&!i.ah(r.url))return;const n=e.ea({name:"ads_igif_requests_total",value:1,label_values:[`tracking_type,${e.bX[r.type]}`,`request_stage,${s}`]});e.f(t,n)}class T{constructor(t,i){this.impressionTimestamp=0,this.wasEverViewableTimer={fired:!1},this.largeAdFullViewTimer={fired:!1},this.hasDispatchedViewEvent=!1,this.resetTimers=()=>{for(const e of this.pixelTimers.keys())this.clearPixelTimer(e);for(const e of this.continuousTimers.keys())this.unsetContinuousTimer(e);for(const e of this.cumulativeTimers.keys())this.pauseCumulativeTimer(e);this.wasEverViewableTimer.timer&&(clearTimeout(this.wasEverViewableTimer.timer),this.wasEverViewableTimer.timer=void 0),this.largeAdFullViewTimer.timer&&(clearTimeout(this.largeAdFullViewTimer.timer),this.largeAdFullViewTimer.timer=void 0)},this.pixelFiringController=i,this.getFiredRedditPixelsCount=t.getFiredRedditPixelsCount,this.postId=t.postId,this.impressionId=t.impressionId,this.postElement=t.postElement,this.galleryItems=t.galleryItems,this.pixelTimers=new Map,this.cumulativeTimers=new Map,this.continuousTimers=new Map,this.setupUnloadFiring(),this.isProductAd=t.events.some((t=>t.type===e.bX.PRODUCT_CLICK||t.type===e.bX.PRODUCT_IMPRESSION))}setupUnloadFiring(){if(window.addEventListener(e.av.eventType,(()=>this.handleUnload())),n.has(this.postId)){const t=new URLSearchParams(e.h.search),i=Number.parseInt(t.get(e.eb)||"");isNaN(i)||window.setTimeout((()=>this.fireUnloadPixel()),i)}}getCumulativeTimes(t){const i=this.updateCumulativeTimer(e.d_.ANY_TOTAL_VIEW_TIME,t),s=this.updateCumulativeTimer(e.d_.FIFTY_TOTAL_VIEW_TIME,t),r=this.updateCumulativeTimer(e.d_.FULL_TOTAL_VIEW_TIME,t),n=this.updateCumulativeTimer(e.d_.EIGHTY_TOTAL_VIEW_TIME,t);return{totalViewTime:i?.cumulativeTime||0,fiftyViewTime:s?.cumulativeTime||0,fullViewTime:r?.cumulativeTime||0,eightyViewTime:n?.cumulativeTime||0}}getContinuousTimes(t){const i=this.updateContinuousTimer(e.d_.ANY_CONTINUOUS_VIEW_TIME,t),s=this.updateContinuousTimer(e.d_.FIFTY_CONTINUOUS_VIEW_TIME,t),r=this.updateContinuousTimer(e.d_.FULL_CONTINUOUS_VIEW_TIME,t),n=this.updateContinuousTimer(e.d_.EIGHTY_CONTINUOUS_VIEW_TIME,t),a=this.updateContinuousTimer(e.d_.THIRTY_CONTINUOUS_VIEW_TIME,t);return{maxAnyViewTime:i?.maxContinuousTime||0,maxFiftyViewTime:s?.maxContinuousTime||0,maxFullViewTime:r?.maxContinuousTime||0,maxEightyViewTime:n?.maxContinuousTime||0,maxThirtyViewTime:a?.maxContinuousTime||0}}getMetadata(t){const i=Date.now(),{totalViewTime:s,fiftyViewTime:r,fullViewTime:n,eightyViewTime:a}=this.getCumulativeTimes(i),{maxAnyViewTime:o,maxFiftyViewTime:d,maxFullViewTime:l,maxEightyViewTime:h,maxThirtyViewTime:u}=this.getContinuousTimes(i),m=this.pixelTimers.get(e.bX.GROUP_M_VIEWABLE)?.fired||t===e.bX.GROUP_M_VIEWABLE,_=t===e.bX.VIEWABLE_IMPRESSION||this.wasEverViewableTimer.fired;t===e.bX.IMPRESSION&&0===this.impressionTimestamp&&(this.impressionTimestamp=i);const T=this.postElement?.getBoundingClientRect(),c=Math.floor(T?.width??0),E=Math.floor(T?.height??0),I=this.getFiredRedditPixelsCount?.()||0,p=new URLSearchParams(e.h.search).get(e.ec);return{[e.d_.ANY_TOTAL_VIEW_TIME]:s,[e.d_.FIFTY_TOTAL_VIEW_TIME]:r,[e.d_.EIGHTY_TOTAL_VIEW_TIME]:a,[e.d_.FULL_TOTAL_VIEW_TIME]:n,[e.d_.ANY_CONTINUOUS_VIEW_TIME]:o,[e.d_.FIFTY_CONTINUOUS_VIEW_TIME]:d,[e.d_.THIRTY_CONTINUOUS_VIEW_TIME]:u,[e.d_.EIGHTY_CONTINUOUS_VIEW_TIME]:h,[e.d_.FULL_CONTINUOUS_VIEW_TIME]:l,[e.d_.GLOBAL_COUNT]:I,[e.d_.GROUP_M_VIEWABLE]:m?1:0,[e.d_.AD_LOAD_TIME]:this.impressionTimestamp,[e.d_.TIMESTAMP]:i,[e.d_.WAS_EVER_VIEWABLE]:_?1:0,[e.d_.LARGE_AD_FULL_VIEW]:this.largeAdFullViewTimer.fired?1:0,[e.d_.HEIGHT]:E,[e.d_.WIDTH]:c,[e.d_.SCREEN_HEIGHT]:window.screen.height,[e.d_.SCREEN_WIDTH]:window.screen.width,...null!==p&&{[e.d_.TEST_ID]:p}}}getAdEventDisplayMetadata(){const e=Date.now(),{totalViewTime:t,fiftyViewTime:i,eightyViewTime:s,fullViewTime:r}=this.getCumulativeTimes(e),{maxAnyViewTime:n,maxThirtyViewTime:a,maxFiftyViewTime:o,maxEightyViewTime:d,maxFullViewTime:l}=this.getContinuousTimes(e),h=this.postElement?.getBoundingClientRect(),u=Math.floor(h?.width??0),m=Math.floor(h?.height??0);return{any_total_view_time_ms:Math.floor(t),fifty_total_view_time_ms:Math.floor(i),eighty_total_view_time_ms:Math.floor(s),full_total_view_time_ms:Math.floor(r),any_continuous_view_time_ms:Math.floor(n),thirty_continuous_view_time_ms:Math.floor(a),fifty_continuous_view_time_ms:Math.floor(o),eighty_continuous_view_time_ms:Math.floor(d),full_continuous_view_time_ms:Math.floor(l),height:m,width:u,screen_width:Math.floor(window.screen.width),screen_height:Math.floor(window.screen.height)}}getAdEventVideoMetadata(){}getPixelScalingFields(e){return{encryptedTrackingPayload:this.postElement.encryptedTrackingPayload||"",additionalEventMetadata:this.postElement.additionalEventMetadata?this.postElement.additionalEventMetadata[e||0]:"",impressionId:this.impressionId}}firePixel(e,t){const i=h(e);this.pixelFiringController.firePixel({pixelEventType:e,metadata:this.getMetadata(e),displayMetadata:i?this.getAdEventDisplayMetadata():void 0,videoMetadata:i?this.getAdEventVideoMetadata():void 0,galleryIndex:t})}fireUnloadPixel(){this.firePixel(e.bX.UNLOAD)}measureViewChange(t){const i=this.postElement?.getBoundingClientRect(),s=Math.floor(i?.width??0),r=Math.floor(i?.height??0),n=r*s,a=n>=242500,o=r>document.documentElement.clientHeight;if(t.intersectionRatio){this.setCumulativeTimer(e.d_.ANY_TOTAL_VIEW_TIME),this.setContinuousTimer(e.d_.ANY_CONTINUOUS_VIEW_TIME),this.measureImpressionPixel(),this.galleryItems?.length?this.measureGalleryItemImpression():this.isProductAd&&this.measureProductImpression(),e.ed.queuePostForUnload(this.postId,this.impressionId,this.getMetadata.bind(this),this.pixelFiringController.firePixel.bind(this),this.getPixelScalingFields.bind(this));const t=this.postElement,i=this.galleryItems;if(!this.hasDispatchedViewEvent&&t&&!t.isBlank){const s=e.c("observe-post-view-ad",{postId:this.postId,post:t,galleryItems:i||[]});this.postElement.dispatchEvent(s),this.hasDispatchedViewEvent=!0}}else this.unsetContinuousTimer(e.d_.ANY_CONTINUOUS_VIEW_TIME),this.pauseCumulativeTimer(e.d_.ANY_TOTAL_VIEW_TIME);if(t.intersectionRatio>=e.bW.LARGE_AD_FULL_VIEW_THRESHOLD?this.setContinuousTimer(e.d_.THIRTY_CONTINUOUS_VIEW_TIME):this.unsetContinuousTimer(e.d_.THIRTY_CONTINUOUS_VIEW_TIME),t.intersectionRatio>=e.bW.VIEWABILITY_THRESHOLD){this.setCumulativeTimer(e.d_.FIFTY_TOTAL_VIEW_TIME),this.setContinuousTimer(e.d_.FIFTY_CONTINUOUS_VIEW_TIME),this.pixelTimers.has(e.bX.VIEWABLE_IMPRESSION)||this.setPixelTimer(e.bX.VIEWABLE_IMPRESSION,1e3),this.wasEverViewableTimer.timer||this.wasEverViewableTimer.fired||(this.wasEverViewableTimer.timer=setTimeout((()=>{this.wasEverViewableTimer.timer&&(this.wasEverViewableTimer.fired=!0,this.wasEverViewableTimer.timer=void 0)}),1e3));const t=this.cumulativeTimers.get(e.d_.FIFTY_TOTAL_VIEW_TIME);t&&(this.pixelTimers.has(e.bX.VENDOR_FULLY_IN_VIEW_5_SECS)||this.setPixelTimer(e.bX.VENDOR_FULLY_IN_VIEW_5_SECS,5e3-t.cumulativeTime),this.pixelTimers.has(e.bX.VENDOR_FULLY_IN_VIEW_15_SECS)||this.setPixelTimer(e.bX.VENDOR_FULLY_IN_VIEW_15_SECS,15e3-t.cumulativeTime))}else this.pixelTimers.has(e.bX.VIEWABLE_IMPRESSION)&&this.clearPixelTimer(e.bX.VIEWABLE_IMPRESSION),this.pixelTimers.has(e.bX.VENDOR_FULLY_IN_VIEW_5_SECS)&&this.clearPixelTimer(e.bX.VENDOR_FULLY_IN_VIEW_5_SECS),this.pixelTimers.has(e.bX.VENDOR_FULLY_IN_VIEW_15_SECS)&&this.clearPixelTimer(e.bX.VENDOR_FULLY_IN_VIEW_15_SECS),this.pauseCumulativeTimer(e.d_.FIFTY_TOTAL_VIEW_TIME),this.unsetContinuousTimer(e.d_.FIFTY_CONTINUOUS_VIEW_TIME);t.intersectionRatio>=e.bW.EIGHTY_VIEWABILITY_THRESHOLD?(this.setCumulativeTimer(e.d_.EIGHTY_TOTAL_VIEW_TIME),this.setContinuousTimer(e.d_.EIGHTY_CONTINUOUS_VIEW_TIME)):(this.pauseCumulativeTimer(e.d_.EIGHTY_TOTAL_VIEW_TIME),this.unsetContinuousTimer(e.d_.EIGHTY_CONTINUOUS_VIEW_TIME)),t.intersectionRatio>=e.bW.FULL_VIEWABILITY_THRESHOLD?(this.setCumulativeTimer(e.d_.FULL_TOTAL_VIEW_TIME),this.setContinuousTimer(e.d_.FULL_CONTINUOUS_VIEW_TIME)):(this.pauseCumulativeTimer(e.d_.FULL_TOTAL_VIEW_TIME),this.unsetContinuousTimer(e.d_.FULL_CONTINUOUS_VIEW_TIME)),t.intersectionRatio<e.bW.VIEWABILITY_THRESHOLD&&this.wasEverViewableTimer.timer&&(clearTimeout(this.wasEverViewableTimer.timer),this.wasEverViewableTimer.timer=void 0);a&&t.intersectionRatio>=e.bW.LARGE_AD_FULL_VIEW_THRESHOLD||t.intersectionRatio>=e.bW.FULL_VIEWABILITY_THRESHOLD?this.largeAdFullViewTimer.timer||this.largeAdFullViewTimer.fired||(this.largeAdFullViewTimer.timer=setTimeout((()=>{this.largeAdFullViewTimer.timer&&(this.largeAdFullViewTimer.fired=!0,this.largeAdFullViewTimer.timer=void 0)}),1e3)):this.largeAdFullViewTimer.timer&&(clearTimeout(this.largeAdFullViewTimer.timer),this.largeAdFullViewTimer.timer=void 0),o?1!==t.intersectionRatio||this.pixelTimers.has(e.bX.GROUP_M_VIEWABLE)?n*t.intersectionRatio<1&&this.pixelTimers.has(e.bX.GROUP_M_VIEWABLE)&&this.clearPixelTimer(e.bX.GROUP_M_VIEWABLE):this.setPixelTimer(e.bX.GROUP_M_VIEWABLE,1e3):t.intersectionRatio>=e.bW.FULL_VIEWABILITY_THRESHOLD?(this.pixelTimers.has(e.bX.GROUP_M_VIEWABLE)||this.setPixelTimer(e.bX.GROUP_M_VIEWABLE,1e3),this.pixelTimers.has(e.bX.VENDOR_FULLY_IN_VIEW)||this.setPixelTimer(e.bX.VENDOR_FULLY_IN_VIEW,100)):(this.pixelTimers.has(e.bX.GROUP_M_VIEWABLE)&&this.clearPixelTimer(e.bX.GROUP_M_VIEWABLE),this.pixelTimers.has(e.bX.VENDOR_FULLY_IN_VIEW)&&this.clearPixelTimer(e.bX.VENDOR_FULLY_IN_VIEW))}clearPixelTimer(e){const t=this.pixelTimers.get(e);t?.timer&&(clearTimeout(t.timer),this.pixelTimers.delete(e))}setPixelTimer(e,t){const i=this.pixelTimers.get(e)?.fired;i||(this.pixelTimers.get(e)?.timer&&this.clearPixelTimer(e),this.pixelTimers.set(e,{timer:setTimeout((()=>{this.pixelTimers.get(e)&&(this.firePixel(e),this.pixelTimers.set(e,{fired:!0,timer:void 0}))}),t)}))}handleClickRedirect(i,s){const r=this.getMetadata(e.bX.CLICK);this.pixelFiringController.fireDebugPixel({pixel:t.a(i,r),pixelEvent:{url:i,type:e.bX.CLICK,metadata:r},impressionId:this.impressionId,postId:this.postId}),this.isProductAd&&this.firePixel(e.bX.PRODUCT_CLICK,s)}measureImpressionPixel(){this.firePixel(e.bX.IMPRESSION)}measureGalleryItemImpression(t=0){this.firePixel(e.bX.GALLERY_ITEM_IMPRESSION,t),this.isProductAd&&this.firePixel(e.bX.PRODUCT_IMPRESSION,t)}measureProductImpression(){this.firePixel(e.bX.PRODUCT_IMPRESSION)}handleUnload(){e.ed.fireQueuedUnloadPixels()}setCumulativeTimer(e){const t=this.cumulativeTimers.get(e),i=Date.now();if(t&&t.previousDate){const s=i-t.previousDate+t.cumulativeTime;this.cumulativeTimers.set(e,{previousDate:i,cumulativeTime:s})}else this.cumulativeTimers.set(e,{previousDate:i,cumulativeTime:t?.cumulativeTime||0})}updateCumulativeTimer(e,t){const i=this.cumulativeTimers.get(e);if(i&&i.previousDate){const s=t-i.previousDate+(i.cumulativeTime||0);this.cumulativeTimers.set(e,{previousDate:t,cumulativeTime:s})}return this.cumulativeTimers.get(e)}pauseCumulativeTimer(e){const t=this.updateCumulativeTimer(e,Date.now());t&&this.cumulativeTimers.set(e,{previousDate:null,cumulativeTime:t.cumulativeTime||0})}setContinuousTimer(e){const t=this.continuousTimers.get(e),i=Date.now();if(t&&t.previousDate){const s=t.currentContinuousTime+(i-t.previousDate),r=Math.max(s,t.maxContinuousTime);this.continuousTimers.set(e,{previousDate:i,currentContinuousTime:s,maxContinuousTime:r})}else this.continuousTimers.set(e,{previousDate:i,currentContinuousTime:t?.currentContinuousTime||0,maxContinuousTime:t?.maxContinuousTime||0})}updateContinuousTimer(e,t){const i=this.continuousTimers.get(e);if(i&&i.previousDate){const s=i.currentContinuousTime+(t-i.previousDate),r=Math.max(s,i.maxContinuousTime);this.continuousTimers.set(e,{previousDate:t,currentContinuousTime:s,maxContinuousTime:r})}return this.continuousTimers.get(e)}unsetContinuousTimer(e){const t=this.continuousTimers.get(e),i=Date.now();if(t&&t.previousDate){const s=Math.max(t.currentContinuousTime+(i-t.previousDate),t.maxContinuousTime);this.continuousTimers.set(e,{previousDate:null,currentContinuousTime:0,maxContinuousTime:s})}}}function c(e=0){return 1e3*e}class E extends T{get visible(){return!!this.videoIntersectionRatio}get viewable(){return(this.videoIntersectionRatio||0)>=e.bW.VIEWABILITY_THRESHOLD}get currentQuartileState(){switch((this.viewable?1:0)+(this.videoVolume&&this.videoVolume>0?2:0)){case 0:return e.ee.NOT_VISIBLE_NOT_AUDIBLE;case 1:return e.ee.VISIBLE_NOT_AUDIBLE;case 2:return e.ee.AUDIBLE_NOT_VISIBLE;case 3:return e.ee.VISIBLE_AND_AUDIBLE;default:return e.ee.NO_EVENT}}constructor(e,i){super(e,i),this.videoDuration=1/0,this.videoCurrentTime=0,this.seekingInitialized=!1,this.hasSeeked=!1,this.accumulatedWatchedTime=0,this.videoWasFullscreen=!1,this.videoWasVisible=!1,this.quartileState=new Map,this.dimensions=e.dimensions,this.thresholds=t.g(t.b)}minTimeRequired({timePercent:e=1/0,time:t=1/0}){const i=Number.isFinite(e)?e*this.videoDuration:1/0,s=Number.isFinite(t)?t:1/0;return Math.min(i,s)}setViewablePixelTimer(e){const t=Date.now(),i=this.pixelTimers.get(e.pixelEvent);if(i?.fired||i?.timer)return;let s=e.time;e.timePercent&&this.videoDuration&&(s=Math.min(this.videoDuration*e.timePercent,e.time));const r=i?.timeLeft?i?.timeLeft:s;this.pixelTimers.set(e.pixelEvent,{timer:setTimeout((()=>{this.firePixel(e.pixelEvent),this.pixelTimers.set(e.pixelEvent,{fired:!0,timer:void 0})}),r),timeLeft:r,lastSetTime:t})}resetViewablePixelTimer(e){const t=this.pixelTimers.get(e.pixelEvent);t?.fired||t&&!t.fired&&this.clearPixelTimer(e.pixelEvent)}pauseViewablePixelTimer(e){const t=this.pixelTimers.get(e.pixelEvent);if(t&&!t?.fired&&void 0!==this.videoCurrentTime&&void 0!==this.videoDuration){const i=Date.now();if(t.timer&&t.lastSetTime){const s=e.time-(i-t.lastSetTime);clearTimeout(t.timer),this.pixelTimers.set(e.pixelEvent,{timeLeft:s})}}}videoStateChange(){this.visible&&!this.videoWasVisible&&(this.videoWasVisible=!0),this.videoPlaying&&(this.updateQuartileState(),this.firePixel(e.bX.VIDEO_STARTED),this.videoVolume&&this.firePixel(e.bX.VIDEO_PLAYED_WITH_SOUND),e.ef.forEach((e=>{this.videoViewabilityStateChange(e)}))),e.eg.forEach((e=>{this.videoWatchedPercentStateChange(e)})),e.eh.forEach((e=>{this.videoWatchedSecondsStateChange(e)})),this.videoGroupMViewableChange()}videoViewabilityStateChange(e){this.videoIntersectionRatio&&this.videoIntersectionRatio>=e.threshold?this.videoPlaying?this.setViewablePixelTimer(e):this.pauseViewablePixelTimer(e):this.resetViewablePixelTimer({pixelEvent:e.pixelEvent,time:e.time})}videoWatchedPercentStateChange(t){if("number"==typeof this.videoCurrentTime&&"number"==typeof this.videoDuration){this.videoCurrentTime/this.videoDuration>=t.timePercent&&(t.quartileKey&&!this.quartileState.has(t.quartileKey)&&(t.quartileKey!==e.ei.VIDEO_STATE_Q0||this.videoPlaying)&&this.quartileState.set(t.quartileKey,this.currentQuartileState),e.ej(t)&&this.firePixel(t.pixelEvent))}}updateQuartileState(){e.eg.forEach((e=>{if(e.quartileKey&&"number"==typeof this.videoCurrentTime&&"number"==typeof this.videoDuration){this.videoCurrentTime/this.videoDuration>=e.timePercent&&e.quartileKey&&!this.quartileState.has(e.quartileKey)&&this.quartileState.set(e.quartileKey,this.currentQuartileState)}}))}videoWatchedSecondsStateChange(e){this.accumulatedWatchedTime>=this.minTimeRequired(e)&&this.firePixel(e.pixelEvent)}setMediaDetails(e){Number.isFinite(e.volume)&&(this.videoVolume=e.muted?0:e.volume),Number.isFinite(e.duration)&&(this.videoDuration=c(e.duration)),Number.isFinite(e.currentTime)&&(this.videoCurrentTime=c(e.currentTime))}updateAccumulatedWatchTime(e){const t=e-this.videoCurrentTime;return this.accumulatedWatchedTime+=t,t}updateThresholds(e){const{visibleThresholds:t}=this.getHiddenAndVisibleThresholds();t.forEach((t=>{this.thresholds[t.key].totalTime+=e,this.thresholds[t.key].currentContinuousTime+=e;const{currentContinuousTime:i,maxContinuousTime:s}=this.thresholds[t.key];i>s&&(this.thresholds[t.key].maxContinuousTime=i)})),this.resetContinuousTimerForHiddenThresholds()}getHiddenAndVisibleThresholds(){const e=[],i=[];return t.V.forEach((t=>{this.meetsViewabilityRequirements(t)?e.push(t):i.push(t)})),{visibleThresholds:e,hiddenThresholds:i}}resetContinuousTimerForHiddenThresholds(){this.resetContinuousTimerForThresholds(this.getHiddenAndVisibleThresholds().hiddenThresholds)}resetContinuousTimerForThresholds(e){e.forEach((e=>{this.thresholds[e.key].currentContinuousTime=0}))}measureViewChange(e){e.isVideoPlayer?this.videoIntersectionRatio=e.intersectionRatio:super.measureViewChange(e),this.videoStateChange(),this.resetContinuousTimerForHiddenThresholds()}measureVideoPlay(e){this.videoPlaying=!0,this.setMediaDetails(e),this.videoStateChange()}measureVideoPause(t){this.videoPlaying=!1,this.setMediaDetails(t),this.videoStateChange(),e.ef.forEach((e=>{this.pauseViewablePixelTimer(e)}))}measureVideoSeek(t){this.hasSeeked=!0,this.seekingInitialized||(this.videoPlaying=!1,this.setMediaDetails(t),e.ef.forEach((e=>{this.resetViewablePixelTimer({pixelEvent:e.pixelEvent,time:e.time})})),this.seekingInitialized=!0)}measureVideoSeeked(e){this.seekingInitialized=!1,this.hasSeeked=!0,this.videoCurrentTime=c(e.currentTime),e.paused||this.measureVideoPlay(e)}measureVolumeChange(t){this.setMediaDetails(t),this.videoStateChange(),t.volume&&!t.muted&&this.videoPlaying&&e.ef.forEach((e=>{this.firePixel(e.pixelEvent),this.pixelTimers.set(e.pixelEvent,{fired:!0})}))}measureFullscreenChange(t){this.videoFullscreen=t.fullscreen,this.videoStateChange(),t.fullscreen&&(this.videoWasFullscreen=!0,this.firePixel(e.bX.VIDEO_PLAYED_EXPANDED),this.videoPlaying&&e.ef.forEach((e=>{this.firePixel(e.pixelEvent),this.pixelTimers.set(e.pixelEvent,{fired:!0})})))}measureVideoTimeUpdate(e){const t=this.updateAccumulatedWatchTime(c(e.currentTime));this.updateThresholds(t),this.videoCurrentTime=c(e.currentTime),this.videoStateChange()}getMetadata(t){const i=super.getMetadata(t),s=this.thresholds.HALF_DURATION_80_IN_VIEW_AUDIBLE.totalTime;return{...i,[e.d$.IS_VIDEO_AD]:1,[e.d$.TOTAL_MRC_VIEWABLE_TIME]:Math.floor(this.thresholds.TOTAL_MRC_VIEWABLE_TIME.totalTime),[e.d$.VIDEO_AD_DURATION]:isFinite(this.videoDuration)?Math.floor(this.videoDuration):0,[e.d$.TOTAL_PLAY_TIME]:Math.floor(this.accumulatedWatchedTime),[e.d$.VOLUME]:Math.floor(100*(this.videoVolume??0)),[e.d$.IS_VISIBLE]:this.visible?1:0,[e.d$.VIDEO_HEIGHT]:this.visible&&this.dimensions?this.dimensions.height:0,[e.d$.TOTAL_AUDIBLE_TIME]:Math.floor(this.thresholds.TOTAL_AUDIBLE_TIME.totalTime),[e.d$.VIDEO_STATE_Q0]:this.quartileState.get(e.ei.VIDEO_STATE_Q0)??e.ee.NO_EVENT,[e.d$.VIDEO_STATE_Q1]:this.quartileState.get(e.ei.VIDEO_STATE_Q1)??e.ee.NO_EVENT,[e.d$.VIDEO_STATE_Q2]:this.quartileState.get(e.ei.VIDEO_STATE_Q2)??e.ee.NO_EVENT,[e.d$.VIDEO_STATE_Q3]:this.quartileState.get(e.ei.VIDEO_STATE_Q3)??e.ee.NO_EVENT,[e.d$.VIDEO_STATE_Q4]:this.quartileState.get(e.ei.VIDEO_STATE_Q4)??e.ee.NO_EVENT,[e.d$.VIDEO_WIDTH]:this.visible&&this.dimensions?this.dimensions.width:0,[e.d$.WAS_FULL_SCREEN]:this.videoWasFullscreen?1:0,[e.d$.HALF_DURATION_80_IN_VIEW_AUDIBLE]:s>=15e3||this.videoDuration&&s>=.5*this.videoDuration?1:0,[e.d$.FULL_IN_VIEW_AUDIBLE_TIME]:Math.floor(this.thresholds.FULL_IN_VIEW_AUDIBLE_TIME.totalTime),[e.d$.EIGHTY_TOTAL_VIDEO_VIEW_TIME]:Math.floor(this.thresholds.EIGHTY_IN_VIEW_TIME.totalTime),[e.d$.FULL_IN_VIEW_TIME]:Math.floor(this.thresholds.FULL_IN_VIEW_TIME.totalTime),[e.d$.WAS_FULL_IN_VIEW_1SEC]:this.thresholds.FULL_IN_VIEW_TIME.maxContinuousTime>=1e3?1:0,[e.d$.ANY_CONTINUOUS_VIDEO_VIEW_TIME]:Math.floor(this.thresholds.ANY_IN_VIEW_TIME.maxContinuousTime),[e.d$.FIFTY_CONTINUOUS_VIDEO_VIEW_TIME]:Math.floor(this.thresholds.FIFTY_IN_VIEW_TIME.maxContinuousTime),[e.d$.FULL_CONTINUOUS_VIDEO_VIEW_TIME]:Math.floor(this.thresholds.FULL_IN_VIEW_TIME.maxContinuousTime),[e.d$.HAS_SEEKED]:this.hasSeeked?1:0}}getAdEventVideoMetadata(){return{is_video:!0,total_mrc_viewable_time_ms:Math.floor(this.thresholds.TOTAL_MRC_VIEWABLE_TIME.totalTime),video_ad_duration:isFinite(this.videoDuration)?Math.floor(this.videoDuration):0,total_play_time:Math.floor(this.accumulatedWatchedTime),volume:Math.floor(100*(this.videoVolume??0)),total_audible_time:Math.floor(this.thresholds.TOTAL_AUDIBLE_TIME.totalTime),was_full_screen:this.videoWasFullscreen,video_state_q1:(this.quartileState.get(e.ei.VIDEO_STATE_Q1)??e.ee.NO_EVENT).toString(),video_state_q2:(this.quartileState.get(e.ei.VIDEO_STATE_Q2)??e.ee.NO_EVENT).toString(),video_state_q3:(this.quartileState.get(e.ei.VIDEO_STATE_Q3)??e.ee.NO_EVENT).toString(),video_state_q4:(this.quartileState.get(e.ei.VIDEO_STATE_Q4)??e.ee.NO_EVENT).toString(),full_in_view_audible_time_ms:Math.floor(this.thresholds.FULL_IN_VIEW_AUDIBLE_TIME.totalTime),full_in_view_time_ms:Math.floor(this.thresholds.FULL_IN_VIEW_TIME.totalTime),video_height:this.visible&&this.dimensions?this.dimensions.height:0,video_width:this.visible&&this.dimensions?this.dimensions.width:0,fifty_continuous_video_view_time_v2_ms:Math.floor(this.thresholds.FIFTY_IN_VIEW_TIME.maxContinuousTime),eighty_total_video_view_time_v2_ms:Math.floor(this.thresholds.EIGHTY_IN_VIEW_TIME.totalTime),any_continuous_video_view_time_v2_ms:Math.floor(this.thresholds.ANY_IN_VIEW_TIME.maxContinuousTime),full_continuous_video_view_time_v2_ms:Math.floor(this.thresholds.FULL_IN_VIEW_TIME.maxContinuousTime)}}isAdequatelyInView(e){return!!this.videoFullscreen||(this.videoIntersectionRatio||0)>=e}meetsViewabilityRequirements(e){return this.isAdequatelyInView(e.threshold)&&(!e.playing||this.videoPlaying)&&(!e.withSound||this.videoVolume&&this.videoVolume>0)}videoGroupMViewableChange(){const t=this.dimensions?.height*this.dimensions?.width;let i=this.thresholds.FULL_IN_VIEW_AUDIBLE_TIME.totalTime;t>=3e5&&(i=this.thresholds.HALF_DURATION_80_IN_VIEW_AUDIBLE.totalTime),i/this.videoDuration>=e.bW.VIEWABILITY_THRESHOLD&&this.firePixel(e.bX.VIDEO_GROUP_M_VIEWABLE)}}const I=(e,{ignoredTags:t=new Set}={})=>{const i=(e=>{const t=window.getComputedStyle(e).borderRadius,i=Number.parseInt(t)/2,s=e.getBoundingClientRect();return document.elementFromPoint(s.left+i,s.top+i)})(e);return{overlappingElement:i,isOverlapped:!(!i||e.isSameNode(i)||e.contains(i)||t.has(i.tagName)||!((e,t)=>{const i=e.getBoundingClientRect(),s=t.getBoundingClientRect();return!(i.top>s.bottom||i.right<s.left||i.bottom<s.top||i.left>s.right)})(e,i))}},p=(e,t)=>{if((e=>{const t=e.getBoundingClientRect();if(t.width*t.height==0)return!0;const i=window.innerWidth||document.documentElement.clientWidth,s=window.innerHeight||document.documentElement.clientHeight;return t.right<0||t.bottom<0||t.left>i||t.top>s})(e))return 0;const i=e.getBoundingClientRect(),s=t.getBoundingClientRect(),r=window.innerHeight||document.documentElement.clientHeight,n=Math.min(r,i.bottom);return Math.max(0,n-s.bottom)/i.height},v=(e,t)=>{if(!e||!e.title)return 0;if(!1===e.renderTitleTruncation)return e.title.length;const i=e?.querySelector('[click-location="title"]')?.shadowRoot?.querySelector("a"),s=document.body,r=document.createElement("div");if(r.id="dummyDiv",r.className=i?.className,r.className=r.className.replace(/line-clamp-\d+/,""),r.classList.add("px-md"),t||(r.classList.add("font-normal"),r.classList.add("text-14")),r.style.position="absolute",r.style.left="-9999px",r.style.top="-9999px",r.style.visibility="hidden",s?.appendChild(r),r.style.width=i?.clientWidth+"px",r.textContent=e.title,r.offsetHeight<=i?.offsetHeight)return r?.remove(),e.title.length;let n=0;r.textContent="";for(let t=0;t<e.title.length;t++){const s=e.title?.slice(0,t+1);if(r.textContent=s+"",r.offsetHeight>i?.offsetHeight)break;n+=1}return r?.remove(),n},g=({postId:t,post:i,galleryItems:r,page_request_id:n,adsCorrelationId:a})=>{const o=i?.querySelector(`[click-location=${e.v.MEDIA}]`);let d;o&&(d=o.getBoundingClientRect());const l={post:{id:t,subreddit_id:i?.subredditId,subreddit_name:i?.subredditPrefixedName,author_id:i?.authorId,promoted:!0,title:i?.postTitle||i?.title,domain:i?.domain,nsfw:i?.nsfw,number_comments:i?.commentCount,type:i?.postType,created_timestamp:e.cs(i?.createdTimestamp||""),spoiler:i?.spoiler,url:i?.outboundLinkUrl},ad_metadata:{impression_id:i?.impressionId||"",placement:s.c({post:i}),ad_correlation_id:a},feed:e.ek(),action_info:{page_request_id:n},screen:{height:window.screen.height,width:window.screen.width}};i&&s.i(i)&&(l.action_info||(l.action_info={}),l.action_info.position=i.feedIndex,l.screen||(l.screen={}),l.screen={},l.screen.view_type=e.el(i.viewType));const h=r&&r.length>0||!1;if(i&&s.d(i)&&(l.view_stats={characters_displayed:v(i,h)},l.parent={post_id:i?.parentElement?.querySelector("shreddit-post")?.id},l.action_info||(l.action_info={}),l.action_info.position=(t=>{if(t.shouldTrackPosition&&!t.isBlank)return t.placement===e.a8.COMMENTS_PAGE?0:[...document.querySelectorAll('shreddit-comments-page-ad[placement="comments_page"], shreddit-comments-page-ad[placement="comment_trees"], shreddit-comment[depth="0"]')].findIndex((e=>e.id===t.id))||void 0})(i)),r&&r.length>0){const e=r.map((e=>e.media?.id||""));l.gallery={num_items:r.length,media_ids:e,id:r[0].id},l.media={id:r[0].media?r[0].media.id:"",width:r[0].media?r[0].media.width:0,height:r[0].media?r[0].media.height:0}}else d&&(l.media={id:t,height:Math.round(d?.height),width:Math.round(d?.width)});return e.b(s.e,l)},V=t=>t.map((t=>{const i=e.bX[t.type];return{...t,type:i}}));class f{constructor(s){this.firedPixels=new Set,this.firedRedditPixels=new Set,this.firePixel=({pixelEventType:e,metadata:t,galleryIndex:i,displayMetadata:s,videoMetadata:r})=>{const n=this.postEvents?.get(e)||[];if(this.host.galleryItems){const t=this.getGalleryUrls(e,i)||[];n.push(...t)}const a=this.getPixelScalingFields(i);return this.firePixelsFromEvents({pixelEvents:n,metadata:t,pixelRequestBody:a,displayMetadata:s,videoMetadata:r})},this.fireDebugPixel=t=>{const i=e.c("pixelFired",t);window.dispatchEvent(i)},this.firePixelsFromEvents=({pixelEvents:e,metadata:t,pixelRequestBody:i,displayMetadata:s,videoMetadata:r})=>{const n=[];return e.forEach((e=>{const a=this.firePixelRequest({pixelEvent:e,metadata:t,pixelRequestBody:i,displayMetadata:s,videoMetadata:r});a&&n.push(a)})),n},this.firePixelRequest=({pixelEvent:s,metadata:r,pixelRequestBody:n,displayMetadata:a,videoMetadata:T})=>{if(this.hasPixelAlreadyFired(s,n))return;let c;return _(this.host,"queued",s),o(s)?c=l({pixelEvent:s,metadata:r,pixelRequestBody:n,target:this.host}):(c=function(e,s,r){const n=!i.ah(e.url);if(u(e.type)&&!n)return e.url;const a=new Image;a.onload=()=>{_(r,"succeeded",e)},a.onerror=t=>{const i="Sentry"in window?window.Sentry:void 0;i?.captureException&&i.captureException(new Error(`Error in GET response from pixel server for pixel of type ${e.type}: ${t}`)),_(r,"failed",e)};let o=e.url;return s&&!n&&(o=t.a(o,s)),a.src=o,e.url}(s,r,this.host),i.ah(s.url)||s.type!==e.bX.IMPRESSION||function(t){const i=t===e.aP.DESKTOP?"shreddit_desktop":"shreddit_mobile";e.af({type:e.ag.Counter,name:"ads_third_party_impression_tracker_total",value:1,labels:{client_platform:i}})}(this.deviceType)),h(s.type)&&m({pixelEvent:s,impressionId:this.host.impressionId,displayMetadata:a,videoMetadata:T,pixelRequestBody:n}),c&&(this.firedPixels.add(c),(o(s)||i.ah(c))&&this.firedRedditPixels.add(c)),o(s)?this.fireDebugPixel({pixel:d(s,n),pixelEvent:{encryptedTrackingId:s.encryptedTrackingId,type:s.type,metadata:r},encryptedTrackingPayload:n.encryptedTrackingPayload,additionalEventMetadata:n.additionalEventMetadata,postId:this.host.postId,impressionId:this.host.impressionId}):this.fireDebugPixel({pixel:s.url,pixelEvent:{url:s.url,type:s.type,metadata:i.ah(s.url)?r:void 0},postId:this.host.postId,impressionId:this.host.impressionId}),c},this.hasPixelAlreadyFired=(e,t)=>o(e)?this.firedPixels.has(d(e,t)):this.firedPixels.has(e.url),this.deviceType=document.querySelector("shreddit-app")?.deviceType||e.aP.MOBILE,this.host=s,this.host.addController(this)}hostConnected(){const e=V(this.host.adEvents);this.postEvents=a(e),this.host.galleryItems&&(this.galleryEvents=this.host.galleryItems.map((e=>a(V(e.adEvents||[])))))}get firedRedditPixelsCount(){return this.firedRedditPixels.size}getPixelScalingFields(e){return{encryptedTrackingPayload:this.host.encryptedTrackingPayload||"",additionalEventMetadata:this.host.additionalEventMetadata?this.host.additionalEventMetadata[e||0]:"",impressionId:this.host.impressionId}}getGalleryUrls(t,i){const s=void 0===i&&t===e.bX.IMPRESSION,r=s?0:i;if(void 0===r)return;const n=s?e.bX.GALLERY_ITEM_IMPRESSION:t;return this.galleryEvents?.[r]&&this.galleryEvents[r].get(n)||[]}}class C{constructor({host:t,isVideoAd:i,onIntersectionEvent:s}){this.host=t,this.isVideoAd=i,this.onIntersectionEvent=s,this.observer=new IntersectionObserver((e=>{e.forEach((e=>{this.triggerIntersectionEventCallback(e)}))}),{threshold:e.em,rootMargin:`-${this._getHeaderHeight()}px 0px 0px 0px`}),this.host.addController(this)}get shredditPlayer(){return this.host.querySelector(e.en)}hostConnected(){this.observer.observe(this.host),this.isVideoAd&&this.shredditPlayer&&this.observer.observe(this.shredditPlayer)}hostDisconnected(){this.observer.disconnect()}triggerIntersectionEventCallback(e){const t=e.target===this.shredditPlayer;this.onIntersectionEvent({isVideoPlayer:t,intersectionRatio:e.intersectionRatio})}_getHeaderHeight(){let e=0;const t=document.querySelector("shreddit-app");if(t){const i=getComputedStyle(t).getPropertyValue("--shreddit-header-height");e=parseInt(i,10)||0}return e}}const y=Symbol("mixins/with-ad-observer"),M=new Set(["SHREDDIT-APP","FACEPLATE-PARTIAL"]);return{W:function(t){const n=t;if(e.da(n,y))return n;class a extends n{constructor(){super(...arguments),this.eventController=new e.E(this),this.pubsub=new e.m(this),this.isOverlapped=!1,this.isVideo=!1,this.isGallery=!1,this.visibilityChangeHandler=this.onVisibilityChange.bind(this),this.isAdObserved=!1,this.onCommentCreated=()=>{this.firePixel(e.bX.COMMENT)},this.onCommentUpvoted=()=>{this.firePixel(e.bX.COMMENT_UPVOTE)},this.onCommentDownvoted=()=>{this.firePixel(e.bX.COMMENT_DOWNVOTE)},this.onHideAd=({impressionId:e,action:t})=>{this.impressionId===e&&t===r.a.hide&&this.adMeasurer?.resetTimers()},this.checkAndMeasureIfAdIsBeingOverlapped=e.a6((()=>{if(!this.postElement||!this.postElement.isConnected)return;const{hidden:e}=this.getHiddenAndVisibilityChangeForDocument();if(document[e])return void this.measureOutOfViewChange();const{isOverlapped:t,overlappingElement:i}=I(this.postElement,{ignoredTags:M});if(t&&i){this.isOverlapped=!0;const e={intersectionRatio:p(this.postElement,i)};this.adMeasurer?.measureViewChange(e),this.updateViewChangeDetails(e)}else this.isOverlapped&&(this.isOverlapped=!1,this.measureBackInViewChange())}),30),this.updateViewChangeDetails=e=>{e.isVideoPlayer?this.lastVideoIOEvent=e:(this.lastAdIOEvent=e,e.intersectionRatio>0&&(this.lastVisibleAdIOEvent=e))},this.measureOutOfViewChange=()=>{const e={intersectionRatio:0};if(this.adMeasurer?.measureViewChange(e),this.updateViewChangeDetails(e),this.isVideo){const t={...e,isVideo:!0};this.adMeasurer?.measureViewChange(t),this.updateViewChangeDetails(t)}},this.measureBackInViewChange=()=>{this.lastVisibleAdIOEvent&&(this.adMeasurer?.measureViewChange(this.lastVisibleAdIOEvent),this.updateViewChangeDetails(this.lastVisibleAdIOEvent),this.isVideo&&this.lastVideoIOEvent&&(this.adMeasurer?.measureViewChange(this.lastVideoIOEvent),this.updateViewChangeDetails(this.lastVideoIOEvent)))},this.handleAnalyticEvent=this.eventController.define("faceplate-track",(t=>{const i=t.detail;if(i.post?.id!==this.postId)return;const{source:s,action:r,noun:n}=i;if("gallery"===s&&this.isGallery){if("forward"!==n&&"backward"!==n)return;const e="forward"===n?this.galleryIndex+1:this.galleryIndex-1;if(e<0||e>=this.galleryItemLength)return;this.galleryIndex=e,this.adMeasurer?.measureGalleryItemImpression(this.galleryIndex),this.lastAdIOEvent&&this.adMeasurer?.measureViewChange(this.lastAdIOEvent)}if("post_detail"===s&&"click"===r)switch(n){case"upvote_comment":this.firePixel(e.bX.COMMENT_UPVOTE);break;case"downvote_comment":this.firePixel(e.bX.COMMENT_DOWNVOTE);break;case"submit_comment":this.firePixel(e.bX.COMMENT)}if("post"===s&&"click"===r)switch(n){case"comments":this.firePixel(e.bX.COMMENTS_VIEW);break;case"upvote":this.firePixel(e.bX.UPVOTE);break;case"downvote":this.firePixel(e.bX.DOWNVOTE)}})),this.handlePostViewAdEvent=this.eventController.define("observe-post-view-ad",(t=>{const i=t.detail.post,{postId:s,galleryItems:r}=t.detail,n=e.ci();e.f(this,g({postId:s,post:i,galleryItems:r,page_request_id:n,adsCorrelationId:i.adsCorrelationId}))})),this.handleAdClickEvent=this.eventController.define("observe-ad-click",(t=>{const{postId:s,impressionId:r,outboundUrl:n,galleryIndex:a}=t.detail;if(s!==this.postId&&r!==this.impressionId)return;i.ai(n)&&(this.adMeasurer?.handleClickRedirect(n,a),this.fireAnalyticsEventForClickRedirect({outboundUrl:n,impressionId:r,galleryIndex:a}));const o=a??this.galleryIndex;this.firePixel(e.bX.CLICK,o)})),this.handleLeadGenSubmissionEvent=this.eventController.define(s.L,(t=>{this.firePixel(e.bX.LEAD_GENERATION)})),this.handleAdEngagedClickEvent=this.eventController.define(s.A,(t=>{this.firePixel(e.bX.ENGAGED_CLICK)}))}getMetadataForPixelEvent(e){return this.adMeasurer?.getMetadata(e)}enableAdObserver(t){try{if(this.isAdObserved)return;const{adType:i,...s}=t;this.postId=t.postId,this.impressionId=t.impressionId,this.postElement=t.postElement,this.isVideo=i===e.eo.VIDEO,Array.isArray(t.galleryItems)&&(this.isGallery=!0,this.galleryIndex=0,this.galleryItemLength=t.galleryItems.length),this.overlappingObserver=new MutationObserver(this.checkAndMeasureIfAdIsBeingOverlapped),new C({host:t.postElement,isVideoAd:this.isVideo,onIntersectionEvent:this.isIntersectingChange.bind(this)}),this.pixelFiringController=new f(t.postElement),s.getFiredRedditPixelsCount=()=>this.pixelFiringController?.firedRedditPixelsCount||0,this.adMeasurer=this.isVideo?new E(s,this.pixelFiringController):new T(s,this.pixelFiringController),this.isVideo&&this.setupVideoEvents(),this.isGallery&&this.setupGalleryEvents(),this.setupVisibilityTracking(),this.isAdObserved=!0,this.impressionId||this.fireInitializationErrorMetricEvent("missing_impression_id")}catch(e){window.Sentry?.captureException?.(`enableAdObserver | ${e.stack}`),this.fireInitializationErrorMetricEvent("exception")}}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(e.T.AdUpdated,this.onHideAd),this.postElement&&this.postElement.isPDP&&(this.pubsub.subscribe(e.T.CommentCreated,this.onCommentCreated),this.pubsub.subscribe(e.T.CommentUpvoted,this.onCommentUpvoted),this.pubsub.subscribe(e.T.CommentDownvoted,this.onCommentDownvoted))}disconnectedCallback(){super.disconnectedCallback(),this.teardownVisibilityTracking(),this.measureOutOfViewChange()}firePixel(e,t){if(!this.adMeasurer||!this.pixelFiringController)return;const i=h(e);this.pixelFiringController.firePixel({pixelEventType:e,metadata:this.adMeasurer.getMetadata(e),displayMetadata:i?this.adMeasurer.getAdEventDisplayMetadata():void 0,videoMetadata:i?this.adMeasurer.getAdEventVideoMetadata():void 0,galleryIndex:t})}measureOutOfViewChangeIgnoringPrompts(e){e.relatedTarget&&this.measureOutOfViewChange()}onVisibilityChange(){const{hidden:e}=this.getHiddenAndVisibilityChangeForDocument();this.lastAdIOEvent&&(document[e]?this.measureOutOfViewChange():this.measureBackInViewChange())}setupVisibilityTracking(){const{visibilityChange:e}=this.getHiddenAndVisibilityChangeForDocument();document.addEventListener(e,this.visibilityChangeHandler),window.addEventListener("blur",this.measureOutOfViewChangeIgnoringPrompts),window.addEventListener("focus",this.measureBackInViewChange),this.overlappingObserver?.observe(document.body,{childList:!0,subtree:!0,attributes:!0,characterData:!1})}teardownVisibilityTracking(){const{visibilityChange:e}=this.getHiddenAndVisibilityChangeForDocument();document.removeEventListener(e,this.visibilityChangeHandler),window.removeEventListener("blur",this.measureOutOfViewChangeIgnoringPrompts),window.removeEventListener("focus",this.measureBackInViewChange),this.overlappingObserver?.disconnect()}isIntersectingChange(e){this.updateViewChangeDetails(e),this.adMeasurer?.measureViewChange(e),(e.intersectionRatio||this.isOverlapped)&&this.checkAndMeasureIfAdIsBeingOverlapped()}getHiddenAndVisibilityChangeForDocument(){let t=e.ep.Standard,i=e.eq.hidden;return void 0!==document.hidden?(t=e.ep.Standard,i=e.eq.hidden):void 0!==document.webkitHidden&&(t=e.ep.Webkit,i=e.eq.webkitHidden),{hidden:t,visibilityChange:i}}setupVideoEvents(){this.handleVideoFullscreenEvent=this.eventController.define(e.er,(e=>{this.adMeasurer?.measureFullscreenChange(e.detail)})),this.handleVideoPauseEvent=this.eventController.define(e.es,(e=>{this.adMeasurer?.measureVideoPause(e.detail)})),this.handleVideoPlayEvent=this.eventController.define(e.et,(e=>{this.adMeasurer?.measureVideoPlay(e.detail)})),this.handleVideoVolumeEvent=this.eventController.define(e.eu,(e=>{this.adMeasurer?.measureVolumeChange(e.detail)})),this.handleVideoSeekingEvent=this.eventController.define(e.ev,(e=>{e.detail.fromReconnect||this.adMeasurer?.measureVideoSeek(e.detail)})),this.handleVideoSeekedEvent=this.eventController.define(e.ew,(e=>{e.detail.fromReconnect||this.adMeasurer?.measureVideoSeeked(e.detail)})),this.handleVideoTimeUpdateEvent=this.eventController.define(e.ex,(e=>{setTimeout((()=>{this.adMeasurer?.measureVideoTimeUpdate(e.detail)}))}))}setupGalleryEvents(){this.handleGalleryItemImpressionEvent=this.eventController.define(i.O,(e=>{const{postId:t,itemIndex:i}=e.detail;t===this.postId&&this.adMeasurer?.measureGalleryItemImpression(i)}))}fireAnalyticsEventForClickRedirect({outboundUrl:t,impressionId:i,galleryIndex:s}){h(e.bX.CLICK)&&this.adMeasurer&&this.postElement&&m({pixelEvent:{type:e.bX.CLICK,url:t},impressionId:i,pixelRequestBody:this.adMeasurer.getPixelScalingFields(s),displayMetadata:this.adMeasurer.getAdEventDisplayMetadata(),videoMetadata:this.adMeasurer.getAdEventVideoMetadata()})}fireInitializationErrorMetricEvent(t){const i=e.ea({name:"shreddit_ad_init_failure",value:1,label_values:[`error_type,${t}`,`post_id,${this.postId}`,`impression_id,${this.impressionId}`]});e.f(this.postElement,i)}}return a[y]=!0,a},e:V}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./FEzVvA-C.js",import.meta.url,"FEzVvA-C");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("CMCPq0sv",["GlDbwxoG","FEzVvA-C","CC2wUKE8","s_Igk1Yn"],(async(t,e,i,n)=>{var a;let s=a=class extends e.F{constructor(){super(...arguments),this._setup=!1,this._bbwidth=0,this._fbwidth=0,this._forwardButtonVisible=!0,this._backButtonVisible=!1,this.selectedClasses=["bg-secondary-background-selected","!text-neutral-content-strong","tab-selected"],this.appearance="fill",this.insetHug=!1,this.underline=!1,this._mutationCallback=t=>{for(const e of t)if("attributes"===e.type&&"faceplate-tab-selected"===e.attributeName&&e.target.nodeType===Node.ELEMENT_NODE){e.target.hasAttribute("faceplate-tab-selected")?this._handleTabSelected(e.target):this._handleTabDeselected(e.target)}},this._setupButtons=()=>{this._setup&&(this.backButtonElements[0]?.removeEventListener("click",this._handleBackButtonClick),this.style.removeProperty("--back-button-width"),this.forwardButtonElements[0]?.removeEventListener("click",this._handleForwardButtonClick),this.style.removeProperty("--forward-button-width")),this.backButtonElements[0]instanceof HTMLElement&&(this._backButtonVisible||this.backButton?.removeAttribute("hidden"),this._bbwidth=this.backButton.clientWidth,this._backButtonVisible||this.backButton?.setAttribute("hidden",""),this.style.setProperty("--back-button-width",`${this._bbwidth}px`),this.backButtonElements[0].addEventListener("click",this._handleBackButtonClick)),this.forwardButtonElements[0]instanceof HTMLElement&&(this._forwardButtonVisible||this.forwardButton?.removeAttribute("hidden"),this._fbwidth=this.forwardButton.clientWidth,this._forwardButtonVisible||this.backButton?.setAttribute("hidden",""),this.style.setProperty("--forward-button-width",`${this._fbwidth}px`),this.forwardButtonElements[0].addEventListener("click",this._handleForwardButtonClick))},this._handleContainerScroll=()=>{this._backButtonVisible=0!==Math.floor(this._containerLeft),this._forwardButtonVisible=Math.round(this._containerBaseRight)!==Math.round(this.container?.scrollWidth??0)},this._handleBackButtonClick=t=>{t.preventDefault(),t.stopPropagation();const e=this._tabs,i=this._leftmostVisibleTab,n=e[i];if(null==n)return;let s=n.right-(this.container?.clientWidth??0);i!==e.length-1&&(s+=(this._fbwidth??0)-a.tabSpacing.raw),this.container?.scroll({behavior:"smooth",left:s})},this._handleForwardButtonClick=t=>{t.preventDefault(),t.stopPropagation();const e=this._tabs,i=this._rightmostVisibleTab,n=e[i];if(null==n)return;let s=n.left;0!==i&&(s-=(this._bbwidth??0)+a.tabSpacing.raw),this.container?.scroll({behavior:"smooth",left:s})},this._scrollToSelected=()=>{const t=this._tabs,e=t.findIndex((t=>"true"===t.el.getAttribute("aria-selected"))),i=t[e];if(null==i)return;const n=i.right-i.left,a=(this.container?.clientWidth??0)-(this._bbwidth+this._fbwidth),s=i.left-this._bbwidth-a/2+n/2;this.container?.scroll({behavior:"smooth",left:s})}}connectedCallback(){super.connectedCallback(),this._mutationObserver=new MutationObserver(this._mutationCallback),this._mutationObserver.observe(this,a.mutationObserverOptions)}disconnectedCallback(){super.disconnectedCallback(),this._mutationObserver.disconnect()}firstUpdated(t){super.firstUpdated(t),this._setupAll()}_setupAll(){this._setup&&this.container&&(this.container.removeEventListener("scroll",this._handleContainerScroll),this._resizeObserver?.unobserve(this.container)),this.container?.addEventListener("scroll",this._handleContainerScroll),this.container?.removeEventListener("resize",this._setupAll),this._setupButtons(),this._resizeObserver||(this._resizeObserver=new ResizeObserver(this._handleContainerScroll)),this.container&&this._resizeObserver?.observe(this.container),this._setup||(this.style.setProperty("--anim-duration","0ms"),this._handleContainerScroll(),requestAnimationFrame((()=>{this.style.removeProperty("--anim-duration")}))),this._setup=!0}_handleTabSelected(t){let e=this.selectedClasses;t.classList.contains("tab-bottom-border")&&t.hasAttribute("rpl")&&(e=e?.filter((t=>"bg-secondary-background-selected"!==t))),t.classList.add(...e??[]),t.tabIndex=0,this._scrollToSelected()}_handleTabDeselected(t){t.tabIndex=-1,t.classList.remove(...this.selectedClasses??[])}get _containerBaseWidth(){return this.container?.clientWidth??0}get _containerBaseLeft(){return this.container?.scrollLeft??0}get _containerLeft(){return 0===this._containerBaseLeft?this._containerBaseLeft:this._containerBaseLeft+(this.backButton?.clientWidth??0)+a.tabSpacing.raw}get _containerBaseRight(){return this._containerBaseLeft+this._containerBaseWidth}get _containerRight(){return this._containerBaseRight===this.container?.scrollWidth?this._containerBaseRight:this._containerBaseRight-((this.forwardButton?.clientWidth??0)+a.tabSpacing.raw)}get _rightmostVisibleTab(){const t=this._tabs;let e=0,i=0;for(let i=t.length-1;i>=0;i--)if(t[i]?.isVisible){e=i;break}if(0===e)for(let i=t.length-1;i>=0;i--)if(t[i]?.partiallyVisible){e=i;break}for(const[e,n]of t.entries()){const a=t[i];n.partiallyVisible&&a&&n.right>a.right&&(i=e)}return i<=e&&e<t.length-1?e+1:t[i]?.isVisible&&i!==t.length-1?i+1:i}get _leftmostVisibleTab(){const t=this._tabs;let e=t.length-1,i=t.length-1;for(let i=0;i<t.length;i++)if(t[i]?.isVisible){e=i;break}if(e===t.length-1)for(let i=0;i<t.length;i++)if(t[i]?.partiallyVisible){e=i;break}for(const[e,n]of t.entries()){const a=t[i];n.partiallyVisible&&a&&n.left<a.left&&(i=e)}return i>=e&&e>0?e-1:t[i]?.isVisible&&0!==i?i-1:i}get _tabs(){const{pageNames:t}=this,e=[];for(const n of i.d(this.pages)){const i=t?t[n-1]:`page-${n}`,a=this.shadowRoot.querySelector(`slot[name="${i}"]`).parentElement,s=a.offsetLeft,r=a.offsetLeft+a.offsetWidth,o=s>this._containerLeft&&s<this._containerRight||r<this._containerRight&&r>this._containerLeft,l=s>this._containerLeft&&r<this._containerRight||s<this._containerLeft&&r>this._containerRight;e.push({el:a,left:s,right:r,isVisible:l,partiallyVisible:o})}return e}render(){const e=super.render();return n.x`<div class="container"> ${e} <div class="${t.H({internalButton:!0,internalForwardButton:!0,hideable:!0,hidden:!this._forwardButtonVisible})}" @resize="${this._setupButtons}"> <slot name="forward-button" @slotchange="${this._setupButtons}"></slot> </div> <div class="${t.H({internalButton:!0,internalBackButton:!0,hideable:!0,hidden:!this._backButtonVisible})}" @resize="${this._setupButtons}"> <slot name="back-button" @slotchange="${this._setupButtons}"></slot> </div> </div>`}};return s.mutationObserverOptions={childList:!0,subtree:!0,attributes:!0,attributeFilter:["faceplate-tab-selected"]},s.tabSpacing={raw:8},s.backButton=()=>t.Y({appearance:"plain",attributes:{type:"button",tabindex:"-1",slot:"back-button"},shape:"pill",size:t.a7.Small,leadingIcon:n.a1({size:n.h.Small}),screenReaderContent:"back"}),s.forwardButton=()=>t.Y({appearance:"plain",attributes:{type:"button",tabindex:"-1",slot:"forward-button"},shape:"pill",size:t.a7.Small,leadingIcon:n.a2({size:n.h.Small}),screenReaderContent:"forward"}),s.styles=n.i`:host{--plain-background:rgba(255, 255, 255, 0);--anim-duration:300ms;--button-gap:var(--spacer-xs, 8);display:flex;width:fit-content;max-width:100%}@media (prefers-color-scheme:dark){:host{--plain-background:rgba(0, 0, 0, 0)}}@media (prefers-reduced-motion){:host{--anim-duration:0ms}}.hideable{transition:opacity var(--anim-duration,300ms) ease;visibility:visible;opacity:1}.hidden{animation-name:hide-button;animation-duration:var(--anim-duration,300ms);animation-fill-mode:forwards;opacity:0}@keyframes hide-button{from{visiblity:visible}to{visiblity:hidden;z-index:-1}}.container{width:fit-content;max-width:100%;overflow:hidden;display:flex;justify-content:center;align-items:center;flex-direction:row;flex-wrap:nowrap;position:relative}.tablist{display:flex;overflow:auto;align-items:center;flex-flow:row nowrap;gap:var(--button-gap);scroll-behavior:smooth;scrollbar-width:none}.tablist::-webkit-scrollbar{display:none}.tablist:focus-visible{outline:0}[role=tab]{display:flex;flex-shrink:0}.internalButton{position:absolute;top:0;bottom:0;display:flex;align-items:center}.internalForwardButton{inset-inline-end:0;padding-inline-start:var(--button-gap);background-image:linear-gradient(to right,var(--plain-background) 0,var(--color-neutral-background) 30%);cursor:pointer}.internalBackButton{inset-inline-start:0;padding-inline-end:var(--button-gap);background-image:linear-gradient(to left,var(--plain-background) 0,var(--color-neutral-background) 30%);cursor:pointer}:host([inset]) .container{margin:0 var(--spacer-md)}:host([appearance=fill]){--button-gap:0;width:100%}:host([appearance=fill]) .container,:host([appearance=fill]) .tablist{width:inherit}:host([appearance=fill]) [role=tab]{flex-grow:1}:host([underline]) .container::after{position:absolute;display:block;content:'';border-bottom:solid var(--rem1) var(--color-neutral-border-weak);inset-inline:0;bottom:0}`,t._([t.Q(".internalForwardButton")],s.prototype,"forwardButton",void 0),t._([t.Q(".internalBackButton")],s.prototype,"backButton",void 0),t._([t.Q(".tablist")],s.prototype,"container",void 0),t._([t.l({slot:"forward-button"})],s.prototype,"forwardButtonElements",void 0),t._([t.l({slot:"back-button"})],s.prototype,"backButtonElements",void 0),t._([t.N()],s.prototype,"_forwardButtonVisible",void 0),t._([t.N()],s.prototype,"_backButtonVisible",void 0),t._([t.n({attribute:!1})],s.prototype,"selectedClasses",void 0),t._([t.n({attribute:!0})],s.prototype,"appearance",void 0),t._([t.n({attribute:!0,type:Boolean})],s.prototype,"insetHug",void 0),t._([t.n({attribute:!0,type:Boolean})],s.prototype,"underline",void 0),s=a=t._([t.e("faceplate-tabgroup")],s),{get F(){return s}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./BTMXBfyY.js",import.meta.url,"BTMXBfyY");SML.di("./CLJ5hH8v.js",import.meta.url,"CLJ5hH8v");SML.di("./CDFmhs-S.js",import.meta.url,"CDFmhs-S");SML.di("./D9o05KHZ.js",import.meta.url,"D9o05KHZ");SML.di("./Bre143cN.js",import.meta.url,"Bre143cN");SML.di("./BStJq-t0.js",import.meta.url,"BStJq-t0");SML.di("./DCovP8x6.js",import.meta.url,"DCovP8x6");SML.di("./FaYkg4Io.js",import.meta.url,"FaYkg4Io");SML.di("./MX9FaClF.js",import.meta.url,"MX9FaClF");SML.di("./CjqcW8YI.js",import.meta.url,"CjqcW8YI");SML.di("./DS7BJDdq.js",import.meta.url,"DS7BJDdq");SML.di("./jOi_w9kT.js",import.meta.url,"jOi_w9kT");SML.di("./B8B7_bfl.js",import.meta.url,"B8B7_bfl");
SML.dm("COiG0TCO",["GlDbwxoG","s_Igk1Yn","BTMXBfyY","CDFmhs-S","FaYkg4Io","MX9FaClF","CjqcW8YI","DS7BJDdq","jOi_w9kT","B8B7_bfl","CLJ5hH8v","D9o05KHZ","Bre143cN","BStJq-t0","DCovP8x6"],(async(e,a,t,i,n,r,o,s,l,d)=>{const m="dont-notify-tooltip-close",u="removal-reason-input-changed",{svg:c}=a.g(),g=a.m(c`<path d="M15.11 8.7l-1.63-.34c-.93-.19-1.65-.91-1.84-1.84l-.34-1.63c-.23-1.12-1.16-1.87-2.3-1.87s-2.07.75-2.3 1.87l-.34 1.63c-.19.93-.92 1.65-1.84 1.84l-1.63.34c-1.12.23-1.87 1.16-1.87 2.3s.75 2.07 1.87 2.3l1.63.34c.93.19 1.65.91 1.84 1.84l.34 1.63c.23 1.12 1.16 1.87 2.3 1.87s2.07-.75 2.3-1.87l.34-1.63c.19-.93.92-1.65 1.84-1.84l1.63-.34c1.12-.23 1.87-1.16 1.87-2.3s-.75-2.07-1.87-2.3zm-.37 2.84l-1.63.34c-1.63.34-2.9 1.61-3.24 3.24l-.34 1.63c-.08.4-.4.44-.54.44s-.46-.04-.54-.44l-.34-1.63a4.178 4.178 0 00-3.24-3.24l-1.63-.34c-.39-.08-.44-.4-.44-.54s.04-.46.44-.54l1.63-.34c1.63-.34 2.9-1.61 3.24-3.24l.34-1.63c.08-.4.4-.44.54-.44s.46.04.54.44l.34 1.63c.34 1.63 1.61 2.9 3.24 3.24l1.63.34c.39.08.44.4.44.54s-.04.46-.44.54zM18 3.1h-1.1V2c0-.5-.4-.9-.9-.9s-.9.4-.9.9v1.1H14c-.5 0-.9.4-.9.9s.4.9.9.9h1.1V6c0 .5.4.9.9.9s.9-.4.9-.9V4.9H18c.5 0 .9-.4.9-.9s-.4-.9-.9-.9z"></path>`,"0 0 20 20","ai");class p extends CustomEvent{constructor(e){super(p.eventName,{detail:e,bubbles:!0,composed:!0})}}p.eventName="select-suggested-removal-reason";let h=class extends a.s{constructor(){super(...arguments),this.reasons=[],this.suggestions=[],this.eventContext={}}getReasonNumber(e){const a=this.reasons.findIndex((a=>a.id===e));return a>=0?a+1:0}getSelectedChip(){return this.shadowRoot?.querySelector('rpl-filter-chip[name="removal-reason-suggestion"][selected]')??null}render(){return a.x` <div class="my-xs w-fit"> ${g({size:a.I.ExtraSmall})} ${"Suggested"} <rpl-tooltip appearance="inverted" trigger="hover focus" placement="right" @click="${e=>e.preventDefault()}"> ${t.i({size:a.I.ExtraSmall})} <span slot="content" class="pointer-events-auto"> ${"Suggestions based on the content, your rules, and your removal reasons."} <a href="https://support.reddithelp.com/hc/articles/15484471320980-Saved-Responses" target="_blank" class="text-inverted-neutral-content-strong" @click="${e=>e.stopPropagation()}"> ${"Learn more"} </a> </span> </rpl-tooltip> <div class="flex flex-col gap-xs mt-xs"> ${this.suggestions.map((e=>{const t=this.getReasonNumber(e.id);return a.x` <faceplate-tracker source="moderator" action="click" noun="removal_reason_recommendation" data-faceplate-tracking-context="${JSON.stringify({action_info:{reason:e.id},subreddit:{id:this.eventContext.subredditId},post:{id:this.eventContext.postId},comment:{id:this.eventContext.commentId}})}" @click="${e=>{e.preventDefault(),e.stopPropagation()}}"> <rpl-filter-chip name="removal-reason-suggestion" class="max-w-fit" appearance="bordered" data-removal-reason-id="${e.id}" ?selected="${this.value===e.id}" @click="${()=>{this.dispatchEvent(new p({reasonId:e.id}))}}">${t?`${t}. `:""}${e.title}</rpl-filter-chip> </faceplate-tracker> `}))} </div> </div> `;}};h.styles=[e.t],e._([e.n({type:Array})],h.prototype,"reasons",void 0),e._([e.n({type:Array})],h.prototype,"suggestions",void 0),e._([e.n({type:Object,attribute:"event-context"})],h.prototype,"eventContext",void 0),e._([e.n()],h.prototype,"value",void 0),h=e._([e.e("removal-reason-suggestions")],h);let v=class extends a.s{constructor(){super(...arguments),this._showCoachmark=!localStorage.getItem(this.getLocalStorageKey()),this.closeCoachmark=e=>{e.stopPropagation(),this._showCoachmark=!1},this.handleLearnMore=e=>{e.stopPropagation(),window.open("https://support.reddithelp.com/hc/articles/15484471320980-Saved-Responses","_blank")}}getLocalStorageKey(){return e.a0.RemovalReasonSuggestionsCoachmarkSeen}connectedCallback(){super.connectedCallback();localStorage.getItem(this.getLocalStorageKey())?this._showCoachmark=!1:(localStorage.setItem(this.getLocalStorageKey(),"true"),this._showCoachmark=!0)}disconnectedCallback(){super.disconnectedCallback()}render(){return a.x`<rpl-coachmark placement="${n.P.Bottom}" appearance="${r.a.Inverted}" ?open="${this._showCoachmark}" class="w-[270px]"> <slot></slot> <rpl-coachmark-card slot="content" aria-live="polite" appearance="${r.a.Inverted}" class="w-[270px]"> <div slot="title" class="pt-xs pb-2xs"> <div> ${"Save time with suggested removal reasons"} </div> </div> ${e.Y({attributes:{className:"close-btn",slot:"close-button",onclick:e=>{e.stopPropagation(),this.closeCoachmark(e)}},appearance:"plainInverted",size:e.a7.Small,leadingIcon:a.c({size:a.I.Small})})} <div class="text-12 mb-sm"> ${"Based on the content, your rules, and your removal reasons, well suggest the most likely removal reasons."} </div> ${e.Y({attributes:{slot:"secondary-button",onclick:this.handleLearnMore},children:"Learn More",appearance:"plainInverted",size:e.a7.Small})} ${e.Y({attributes:{slot:"primary-button",onclick:this.closeCoachmark},children:"Got It",appearance:"plainInverted",size:e.a7.Small})} </rpl-coachmark-card> </rpl-coachmark>`;}};v.styles=[e.t],e._([e.N()],v.prototype,"_showCoachmark",void 0),v=e._([e.e("removal-reason-suggestions-coachmark")],v);class k extends l.F{constructor(){super(...arguments),this.isInputDirty=!1,this.hasInvalidMacro=!1,this.required=!1,this.handleSubmit=()=>{this.isInputDirty=!0},this.handleInvalid=e=>{e.preventDefault()}}get value(){const e=this._internals.getFormValue();return e?e.toString():null}set value(e){e!==this.value&&(this._internals.setFormValue(e),this.updateValidity(),this.dispatchEvent(new CustomEvent(u,{detail:{value:e},bubbles:!0})))}connectedCallback(){super.connectedCallback(),d.c(this).then((e=>{e?.addEventListener("faceplate-submit",this.handleSubmit)})),this.addEventListener("invalid",this.handleInvalid),this.updateValidity()}disconnectedCallback(){super.disconnectedCallback(),this.form?.removeEventListener("faceplate-submit",this.handleSubmit),this.removeEventListener("invalid",this.handleInvalid)}updateValidity(){this.hasInvalidMacro?this._internals.setValidity({valueMissing:!0},this.getInvalidMacroValidationMessage()):this.required&&!this.value?this._internals.setValidity({valueMissing:!0},this.getValueMissingValidationMessage()):this._internals.setValidity(),this.requestUpdate()}getValueMissingValidationMessage(){return""}getInvalidMacroValidationMessage(){return""}renderValidationState(){return this.isInputDirty&&this.validationMessage?a.x`<span class="text-12 text-danger-content px-md">${this.validationMessage}</span>`:null}}e._([e.N()],k.prototype,"isInputDirty",void 0),e._([e.N()],k.prototype,"hasInvalidMacro",void 0),e._([e.n({type:Boolean})],k.prototype,"required",void 0);class N extends CustomEvent{constructor(e){super(N.eventName,{detail:e,bubbles:!0,composed:!0})}}N.eventName="select-removal-reason";let I=class extends k{constructor(){super(...arguments),this.isSitewide=!1,this.selectedRemovalReason=this.value,this.handleSelectSuggestedRemovalReason=e=>{this.selectReasonById(e.detail.reasonId,!1)},this.handleSelect=e=>{const a=e.target;this.selectReasonById(a.value)}}get displayText(){return this.reasons?.find((e=>e.id===this.value))?.title||""}static get styles(){return[e.t,a.i`:host{display:flex;flex-direction:column}`]}getValueMissingValidationMessage(){return "Removal reason is required.";}getInvalidMacroValidationMessage(){return "This removal reason contains an invalid macro. Please update the removal reason and try again.";}getPlatformRuleOption(){return {id:"default-removal-reason",title:"Breaking platform rules",message:""};}selectReasonById(e,a=!0){const t=(this.includePlatformRuleOption?[...(this.reasons || []),this.getPlatformRuleOption()]:this.reasons||[]).find((a=>a.id===e));t&&this.selectedRemovalReason!==t.id&&(this.selectedRemovalReason=t.id,this.value=t.id,this.dispatchEvent(new N({...t,isSitewide:this.isSitewide,trackEvent:a})))}getDropdownPlaceholder(){return this.isSitewide?"Select a platform rule":"Select a removal reason";}setInvalidMacro(e){this.hasInvalidMacro=e,this.isInputDirty=!0,this.updateValidity()}connectedCallback(){super.connectedCallback(),this.addEventListener(p.eventName,this.handleSelectSuggestedRemovalReason)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener(p.eventName,this.handleSelectSuggestedRemovalReason)}render(){return a.x` <label class="text-16 text-neutral-content-strong"> ${super.render()} </label> <faceplate-select-text-input label="${this.getDropdownPlaceholder()}" value="${this.selectedRemovalReason}" readonly="readonly" style="--faceplate-select-menu-max-height:350px;-faceplate-select-menu-max-width:80vw" @faceplate-select-text-input:change="${this.handleSelect}"> ${this.reasons?.map(((e,t)=>a.x`<faceplate-option value="${e.id}" display-text="${e.title}" ?selected="${e.id===this.selectedRemovalReason}"><span slot="leading" class="whitespace-nowrap text-16">${t+1}</span></faceplate-option>`))} ${this.includePlatformRuleOption&&a.x`<faceplate-option value="default-removal-reason" display-text="${this.getPlatformRuleOption().title}"></faceplate-option>`} ${this.includeAddRemovalReasonOption&&a.x`<faceplate-option value="add-removal-reason"> <slot name="link"></slot> </faceplate-option>`} </faceplate-select-text-input> ${this.renderValidationState()} ${this.removalReasonSuggestionsContext?.predictedRemovalSavedResponses&&this.removalReasonSuggestionsContext?.predictedRemovalSavedResponses.length>0?a.x` <removal-reason-suggestions-coachmark> <removal-reason-suggestions class="block w-fit" reasons="${JSON.stringify(this.reasons)}" suggestions="${JSON.stringify(this.removalReasonSuggestionsContext.predictedRemovalSavedResponses)}" event-context="${JSON.stringify(this.removalReasonSuggestionsContext.eventContext)}" value="${this.selectedRemovalReason}"></removal-reason-suggestions> </removal-reason-suggestions-coachmark> `:""} `}};e._([e.n({type:Array})],I.prototype,"reasons",void 0),e._([e.n({type:Boolean,attribute:"is-sitewide"})],I.prototype,"isSitewide",void 0),e._([e.n({type:Boolean,attribute:"include-platform-rule-option"})],I.prototype,"includePlatformRuleOption",void 0),e._([e.n({type:Boolean,attribute:"include-add-removal-reason-option"})],I.prototype,"includeAddRemovalReasonOption",void 0),e._([e.n({type:Object,attribute:"removal-reason-suggestions-context"})],I.prototype,"removalReasonSuggestionsContext",void 0),e._([e.N()],I.prototype,"selectedRemovalReason",void 0),I=e._([e.e("removal-reason-input")],I);let b=class extends i.R{constructor(){super(),this.tooltipVisible=!1,this.trigger="manual",this.placement="top",this.appearance="neutral"}connectedCallback(){super.connectedCallback(),this.initializeTooltip(),this.addEventListener(m,this.hideTooltip)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener(m,this.hideTooltip)}async initializeTooltip(){e.$.getItem(e.a0.RemovalReasonDontNotifyDismissed)||setTimeout((()=>this.showTooltip()),750)}showTooltip(){this.show()}hideTooltip(a){a.stopPropagation(),e.$.setItem(e.a0.RemovalReasonDontNotifyDismissed,"true"),this.hide()}};e._([e.N()],b.prototype,"tooltipVisible",void 0),b=e._([e.e("dont-notify-tooltip")],b);let f=class extends a.s{constructor(){super(...arguments),this.isAIModEnabledForSubreddit=!1}handleClose(){this.dispatchEvent(new CustomEvent(m,{bubbles:!0}))}render(){return a.x` <div class="pointer-events-auto py-xs pl-xs w-[200px]"> <div class="flex flex-row"> <div> <div class="text-14 font-bold text-neutral-content-strong"> ${"Don't want to notify?"} </div> <div class="text-12 font-normal text-neutral-content-strong"> ${this.isAIModEnabledForSubreddit?"Use removal reasons to train automations and track mod actions without notifying users.":"Use removal reasons to track mod actions without notifying users."} </div> </div> ${e.Y({appearance:"secondary",leadingIcon:a.c({size:a.I.Small}),size:e.a7.Small,screenReaderContent:"Close tooltip",attributes:{type:"button",className:"flex-shrink-0 -mt-xs",onclick:this.handleClose}})} </div> <div class="flex justify-end mt-md"> ${e.Y({appearance:"plain",size:e.a7.Small,children:"Okay",attributes:{type:"button",onclick:this.handleClose}})} </div> </div> `;}};var R;f.styles=[e.t],e._([e.n({type:Boolean,attribute:"is-ai-mod-enabled-for-subreddit"})],f.prototype,"isAIModEnabledForSubreddit",void 0),f=e._([e.e("dont-notify-tooltip-content")],f),function(e){e.Comment="Comment",e.Modmail="Modmail",e.DontNotify="DontNotify"}(R||(R={}));let T=class extends k{constructor(){super(...arguments),this.isModmailAllowed=!1,this.isAIModEnabledForSubreddit=!1}static get styles(){return[e.t,a.i`:host{display:flex;flex-direction:column;gap:var(--spacer-xs)}`]}connectedCallback(){super.connectedCallback(),this.value=R.Comment}getValueMissingValidationMessage(){return "Please select the notification method.";}render(){return a.x` <label class="text-16 text-neutral-content-strong"> ${this._internals.input} ${"Notify user via"} </label> <div class="flex flex-row gap-xs"> ${e.Y({appearance:"bordered",children:"Comment",leadingIcon:o.c({size:a.I.Small}),selected:this.value===R.Comment,attributes:{type:"button",onclick:()=>{this.value=R.Comment,this.requestUpdate()}}})} ${this.isModmailAllowed?e.Y({appearance:"bordered",children:"Mod Mail",leadingIcon:s.m({size:a.I.Small}),selected:this.value===R.Modmail,attributes:{type:"button",onclick:()=>{this.value=R.Modmail,this.requestUpdate()}}}):a.A} <dont-notify-tooltip> ${e.Y({appearance:"bordered",children:"Don't Notify",leadingIcon:a.a3({size:a.I.Small}),selected:this.value===R.DontNotify,attributes:{type:"button",onclick:()=>{this.value=R.DontNotify,this.requestUpdate()}}})} <dont-notify-tooltip-content ?is-ai-mod-enabled-for-subreddit="${this.isAIModEnabledForSubreddit}" slot="content"></dont-notify-tooltip-content> </dont-notify-tooltip> </div> ${this.renderValidationState()} `;}};var E;e._([e.n({type:Boolean,attribute:"is-mod-mail-allowed"})],T.prototype,"isModmailAllowed",void 0),e._([e.n({type:Boolean,attribute:"is-ai-mod-enabled-for-subreddit"})],T.prototype,"isAIModEnabledForSubreddit",void 0),T=e._([e.e("removal-reason-notification-method")],T),function(e){e.User="User",e.Mod="Mod"}(E||(E={}));let z=class extends k{static get styles(){return[e.t,a.i`:host{display:flex;flex-direction:column;gap:var(--spacer-xs)}`]}connectedCallback(){super.connectedCallback(),this.value=E.Mod}getValueMissingValidationMessage(){return "Please select the notification sender.";}render(){return a.x` <label class="text-16 text-neutral-content-strong"> ${this._internals.input} ${"Send message as"} </label> <div class="flex flex-row gap-xs"> ${e.Y({appearance:"bordered",children:"Mod Team",leadingIcon:a.x`<slot name="mod-icon"></slot>`,selected:this.value===E.Mod&&!this.disabled,attributes:{type:"button",disabled:this.disabled,onclick:()=>{this.value=E.Mod,this.requestUpdate()}}})} ${e.Y({appearance:"bordered",children:this.user,leadingIcon:a.x`<slot name="user-icon"></slot>`,selected:this.value===E.User&&!this.disabled,attributes:{type:"button",disabled:this.disabled,onclick:()=>{this.value=E.User,this.requestUpdate()}}})} </div> ${this.renderValidationState()} `;}};return e._([e.n()],z.prototype,"user",void 0),z=e._([e.e("removal-reason-notification-sender")],z),{get R(){return T},S:N,get a(){return R},get b(){return I},c:u,get d(){return E}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./rPGPQWBN.js",import.meta.url,"rPGPQWBN");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("CPBi7rr2",["GlDbwxoG","CC2wUKE8","rPGPQWBN","s_Igk1Yn"],(async(t,e,n,i)=>{let s=class extends t.R{constructor(){super(...arguments),this.isHovered=!1,this.hoverDelayStart=150,this.hoverDelayEnd=150,this.preventNextAnimations=!1,this.containerElement=null,this.contentsElement=null,this.expandButton=null,this.collapseButton=null,this.gridTransitionPromise=null,this.gridTransitioning=!1,this.trigger="hover",this.interactionController=new e._(this,{hoverDelayStart:()=>this.hoverDelayStart,hoverDelayEnd:()=>this.hoverDelayEnd,isInteractedWith:t=>t.isHovered}),this.noAnimate=!1,this.parentGridSelector=".grid-container",this.hotkeysController=new t.ck(this),this.handleSlotChange=t=>{const e=document.getElementById(n.a.ContainerDiv),i=document.getElementById(n.a.ContentsDiv),s=document.getElementById(n.a.ExpandButton),a=document.getElementById(n.a.CollapseButton);i&&this.contentsElement!==i&&(this.contentsElement?.removeEventListener("mouseenter",this.interactionController.handleMouseEnter),i.addEventListener("mouseenter",this.interactionController.handleMouseEnter),this.contentsElement=i,this.isExpanded||(this.contentsVisibility=!1)),e&&this.containerElement!==e&&(this.containerElement=e),a&&a!==this.collapseButton&&(this.collapseButton?.removeEventListener("click",this.toggleState),this.collapseButton=a,a.addEventListener("click",this.toggleState)),s&&s!==this.expandButton&&(this.expandButton?.removeEventListener("click",this.toggleState),this.expandButton?.removeEventListener("keydown",this.handleExpandKeydown),this.expandButton=s,s.addEventListener("click",this.toggleState),s.addEventListener("mouseover",this.handleExpandButtonMouseOver),s.addEventListener("keydown",this.handleExpandKeydown))},this.handleExpandKeydown=async t=>{if("Tab"!==t.key)return;t.preventDefault();const e=document.querySelector("reddit-skip-to-sidebar")?.shadowRoot?.querySelector("a");if(e)return this.emitter.dispatch("focus-delegate",{detail:{el:e}}),e.focus();const n=document.getElementById("shreddit-skip-link");n instanceof HTMLElement&&(this.emitter.dispatch("focus-delegate",{detail:{el:n}}),n.focus())},this.handleExpandButtonMouseOver=t=>{this.isHovered?this.interactionController.handleMouseEnter(t):t.stopImmediatePropagation()},this.toggleStateViaHotkey=()=>{this.toggleState(void 0,{viaHotkey:!0})},this.toggleState=(e,i)=>{const s=document.querySelector(this.parentGridSelector);var a,l;void 0!==this.country&&void 0!==this.expanded&&s&&(this.emitTrackingEvent(this.isExpanded?"collapse":"expand",i),this.expanded=this.isExpanded?n.b.Collapsed:n.b.Expanded,s instanceof HTMLElement&&(this.gridTransitioning=!0,this.gridTransitionPromise=this.preventNextAnimations?r():o(s).then((()=>{this.gridTransitioning=!1})),s.classList.remove(...Object.values(n.c)),s.classList.add(n.c[this.expanded])),a=this.expanded,l=this.country,t.z({name:n.F,value:a,country:l}))}}get isExpanded(){return this.expanded===n.b.Expanded}set contentsVisibility(t){this.contentsElement&&(this.contentsElement.hidden=!t)}emitTrackingEvent(e,n){let i;n?.viaHotkey&&(i={action_info:{trigger_type:t.cQ.HOTKEY}});const[s,a,o]={expand:["nav","click","open_community_nav"],collapse:["nav","click","close_community_nav"],hover:["nav","hover","open_community_nav"],unhover:["nav","hover","close_community_nav"]}[e];return t.f(this,{source:s,action:a,noun:o,...i})}async stopAnimations(){const e=[];this.containerElement&&e.push(t.bL(this.containerElement)),this.contentsElement&&e.push(t.bL(this.contentsElement)),await Promise.all(e)}async runAnimations(e,n){if(this.preventNextAnimations)return;const i=[],s=t.bM(this,`flex-left-nav-container.${e}-${n}`),a=t.bM(this,`flex-left-nav-contents.${e}-${n}`);this.containerElement&&i.push(t.bN(this.containerElement,s.keyframes,s.options)),this.contentsElement&&i.push(t.bN(this.contentsElement,a.keyframes,a.options)),await Promise.all(i)}async connectedCallback(){super.connectedCallback(),await this.syncFlexNavStateNoAnimate(),this.isExpanded||this.updateComplete.then((()=>this.contentsVisibility=!1)),this.addEventListener("mouseleave",this.interactionController.handleMouseLeave),this.hotkeysController.subscribe(t.cl.OPEN_NAVIGATION,this.toggleStateViaHotkey)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("mouseleave",this.interactionController.handleMouseLeave),this.hotkeysController.unsubscribe(t.cl.OPEN_NAVIGATION,this.toggleStateViaHotkey)}willUpdate(t){t.has("expanded")&&this.hasUpdated&&this.handleExpandedStateChanged(),super.willUpdate(t)}updated(){}focusContents(){this.isExpanded?this.collapseButton?.focus():this.expandButton?.focus()}async syncFlexNavStateNoAnimate(){const e=(()=>{const e=t.ak.get(n.F);return n.i(e)?e:null})();null!==e&&this.expanded!==e&&(this.preventAnimationsForUpdate(),this.toggleState(),await this.updateComplete)}async preventAnimationsForUpdate(){this.preventNextAnimations=!0;const t=document.querySelector(this.parentGridSelector);t instanceof HTMLElement&&(t.style.transition="none"),this.setAttribute("skip-animation",""),await Promise.all([this.updateComplete,r()]),this.removeAttribute("skip-animation"),t instanceof HTMLElement&&(t.style.transition=""),this.preventNextAnimations=!1}async handleExpandedStateChanged(){this.emitter.dispatch(this.isExpanded?"expand":"collapse");const t=this.updateComplete,e=(this.isExpanded?this.collapseButton:this.expandButton)?.parentElement,n=(this.isExpanded?this.expandButton:this.collapseButton)?.parentElement;if(a(e)&&(e.disabled=!0),a(n)&&n.hide?.(),t.then((async()=>{this.focusContents()})),await this.stopAnimations(),this.isExpanded&&(this.contentsVisibility=!0),!this.isHovered&&this.containerElement){const t=this.isExpanded?"show":"hide";await this.runAnimations("expand",t)}else this.gridTransitioning&&this.gridTransitionPromise?.then((()=>{this.emitter.dispatch("after-grid-transition"),this.isHovered=!1,this.classList.remove("hovered")}));this.isExpanded||(this.contentsVisibility=!1),a(e)&&(e.disabled=!1),this.emitter.dispatch(this.isExpanded?"after-expand":"after-collapse")}async startInteraction(){this.isExpanded||this.isHovered||this.gridTransitioning||(this.emitTrackingEvent("hover"),this.emitter.dispatch("hover"),await this.stopAnimations(),this.classList.add("hover-started"),this.contentsVisibility=!0,this.isHovered=!0,await this.runAnimations("hover","show"),this.classList.remove("hover-started"),this.classList.add("hovered"),this.emitter.dispatch("after-hover"))}async finishInteraction(){!this.isExpanded&&this.isHovered&&(this.emitTrackingEvent("unhover"),this.emitter.dispatch("unhover"),await this.stopAnimations(),await this.runAnimations("hover","hide"),this.classList.remove("hovered"),this.isHovered=!1,this.contentsVisibility=!1,this.emitter.dispatch("after-unhover"))}render(){return i.x` <slot @slotchange="${this.handleSlotChange}"></slot> ${this.isExpanded?i.A:i.x`<div class="hoverable-target ${this.isHovered?"hovered":""}" @mouseenter="${this.interactionController.handleMouseEnter}"></div>`} `}};s.styles=i.i`:host(.hover-started),:host(.hovered){z-index:10!important;border-top:1px solid var(--color-neutral-border)!important}.hoverable-target{position:fixed;top:calc(var(--shreddit-header-height) + 72px);width:calc(var(--flex-nav-closed-size) + 16px);bottom:0;z-index:calc(var(--flex-nav-z-index) + 1)}.hoverable-target.hovered{z-index:calc(var(--flex-nav-z-index) - 1);top:var(--shreddit-header-height);width:calc(var(--flex-nav-expanded-size) + 16px)}`,t._([t.N()],s.prototype,"isHovered",void 0),t._([t.n({type:String,reflect:!0})],s.prototype,"expanded",void 0),t._([t.n({type:String})],s.prototype,"country",void 0),t._([t.n({type:Boolean})],s.prototype,"noAnimate",void 0),t._([t.n({type:String})],s.prototype,"parentGridSelector",void 0),s=t._([t.e("flex-left-nav-container")],s);const a=t=>"rpl-tooltip"===t?.tagName.toLowerCase(),o=(t,e=1200)=>{const n=t=>new Promise((n=>{t.addEventListener("transitionend",n),setTimeout(n,e)}));return Array.isArray(t)?Promise.all(t.map(n)):n(t)},r=()=>new Promise((t=>requestAnimationFrame(t)));return t.bJ("flex-left-nav-container.expand-show",{keyframes:[{transform:"translateX(var(--closed-floating-translation))"},{transform:"translateX(var(--open-floating-translation))"}],options:{duration:250,easing:"cubic-bezier(0.65, 0, 0.35, 1)"}}),t.bJ("flex-left-nav-container.expand-hide",{keyframes:[{transform:"translateX(var(--open-floating-translation))"},{transform:"translateX(var(--closed-floating-translation))"}],options:{duration:300,easing:"cubic-bezier(0.87, 0, 0.13, 1)"}}),t.bJ("flex-left-nav-container.hover-show",{keyframes:[{boxShadow:"var(--left-nav-box-shadow-none)",transform:"translateX(var(--closed-floating-translation))"},{boxShadow:"var(--left-nav-box-shadow-hover)",transform:"translateX(var(--open-floating-translation))"}],options:{duration:250,easing:"cubic-bezier(0.65, 0, 0.35, 1)"}}),t.bJ("flex-left-nav-container.hover-hide",{keyframes:[{boxShadow:"var(--left-nav-box-shadow-hover)",transform:"translateX(var(--open-floating-translation))"},{boxShadow:"var(--left-nav-box-shadow-none)",transform:"translateX(var(--closed-floating-translation))"}],options:{duration:300,easing:"cubic-bezier(0.87, 0, 0.13, 1)"}}),t.bJ("flex-left-nav-contents.show",{keyframes:[{opacity:0},{opacity:1}],options:{duration:250,easing:"linear"}}),t.bJ("flex-left-nav-contents.hide",{keyframes:[{opacity:1},{opacity:0}],options:{duration:300,easing:"linear"}}),{get F(){return s}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./FagDXDzk.js",import.meta.url,"FagDXDzk");SML.di("./B9pe2eYY.js",import.meta.url,"B9pe2eYY");SML.di("./B8B7_bfl.js",import.meta.url,"B8B7_bfl");SML.di("./C-d7BR1A.js",import.meta.url,"C-d7BR1A");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");SML.di("./COiG0TCO.js",import.meta.url,"COiG0TCO");SML.di("./CZPCygeT.js",import.meta.url,"CZPCygeT");SML.di("./Dg8LS6-X.js",import.meta.url,"Dg8LS6-X");SML.di("./DoOFmcQZ.js",import.meta.url,"DoOFmcQZ");SML.di("./DdIwQUSk.js",import.meta.url,"DdIwQUSk");SML.di("./BTMXBfyY.js",import.meta.url,"BTMXBfyY");SML.di("./CLJ5hH8v.js",import.meta.url,"CLJ5hH8v");SML.di("./2Pp2AIeo.js",import.meta.url,"2Pp2AIeo");SML.di("./DhQW5pQL.js",import.meta.url,"DhQW5pQL");SML.di("./CDFmhs-S.js",import.meta.url,"CDFmhs-S");SML.di("./MX9FaClF.js",import.meta.url,"MX9FaClF");SML.di("./FaYkg4Io.js",import.meta.url,"FaYkg4Io");SML.di("./D9o05KHZ.js",import.meta.url,"D9o05KHZ");SML.di("./B4wbfaco.js",import.meta.url,"B4wbfaco");SML.di("./DK2EuOAl.js",import.meta.url,"DK2EuOAl");SML.di("./B5aCBAWI.js",import.meta.url,"B5aCBAWI");SML.di("./jOi_w9kT.js",import.meta.url,"jOi_w9kT");SML.di("./C0I_JWye.js",import.meta.url,"C0I_JWye");SML.di("./DrrjN1Nt.js",import.meta.url,"DrrjN1Nt");SML.di("./Bre143cN.js",import.meta.url,"Bre143cN");SML.di("./BStJq-t0.js",import.meta.url,"BStJq-t0");SML.di("./DCovP8x6.js",import.meta.url,"DCovP8x6");SML.di("./CjqcW8YI.js",import.meta.url,"CjqcW8YI");SML.di("./DS7BJDdq.js",import.meta.url,"DS7BJDdq");
SML.dm("CSQNLuDY",["GlDbwxoG","s_Igk1Yn","CC2wUKE8","FagDXDzk","B9pe2eYY","B8B7_bfl","C-d7BR1A","D-MAMWlw","DRM-oTYq","COiG0TCO","DdIwQUSk","CZPCygeT","Dg8LS6-X","DoOFmcQZ","BTMXBfyY","CLJ5hH8v","2Pp2AIeo","DhQW5pQL","CDFmhs-S","MX9FaClF","FaYkg4Io","D9o05KHZ","B4wbfaco","DK2EuOAl","B5aCBAWI","jOi_w9kT","C0I_JWye","DrrjN1Nt","Bre143cN","BStJq-t0","DCovP8x6","CjqcW8YI","DS7BJDdq"],(async(e,t,a,s,o,n,i,r,l,d,m)=>{class u extends CustomEvent{constructor(e){super(u.eventName,{bubbles:!0,composed:!0,cancelable:!0,detail:e})}}u.eventName="mod-removal-reason-added";class h extends CustomEvent{constructor(e){super(h.eventName,{bubbles:!0,composed:!0,cancelable:!0,detail:e})}}h.eventName="removal-reason-form-element-clicked";let c=class extends o.F{constructor(){super(),this._eventController=new e.E(this),this.handleFormElementClicked=e=>{e.target?.name&&this.dispatchEvent(new h({formElement:e.target.name}))},this.handleRemovalReasonInputChanged=e=>{if(e.target instanceof d.R){const t=e.target.value!==d.a.DontNotify;this.toggleNotificationSender(t),this.toggleMessageInput(t)}e.target instanceof d.b&&"removal-reason"===e.target.name&&this.toggleDefaultPolicyInput("default-removal-reason"===e.target.value)},this.convertFormDataToGql=e=>{const t=e.get("notification-method"),a=e.get("notification-sender"),s={reasonId:this.getRemovalReasonId(e),type:this.parseRemovalReasonMessageType(t,a),message:t===d.a.DontNotify?null:e.get("message"),isLockComment:e.has("lock")},o=e.get("modNote")||void 0,n={itemId:e.get("thing")?.toString()||"",removalReason:s,modNote:o};return this.lastSubmittedData=n,JSON.stringify({...n,csrf_token:e.get("csrf_token")})},this.encoders={...this.encoders,"application/json":this.convertFormDataToGql}}connectedCallback(){super.connectedCallback(),this._eventController.define(d.c,this.handleRemovalReasonInputChanged),this._eventController.define("click",this.handleFormElementClicked)}toggleNotificationSender(e){const t=this.elements["notification-sender"];t&&(e?t.removeAttribute("disabled"):t.setAttribute("disabled",""))}toggleField(e,t){e&&(t?(e.classList.remove("hidden"),e.setAttribute("required","")):(e.classList.add("hidden"),e.removeAttribute("required")))}toggleMessageInput(e){const t=this.elements.message;t&&this.toggleField(t,e)}toggleDefaultPolicyInput(e){const t=this.elements["default-removal-reason"];t&&this.toggleField(t,e)}showError(){const t={level:e.X.error,message:"Something went wrong",cause:e.b6.QueryBadResponse};this.dispatchEvent(e.c("faceplate-alert",t))}async handleResponse(t){if(!t.ok)return this.dispatchEvent(e.c(R.eventName)),this.showError();try{const a=await t.text(),s={level:e.X.success,message:"Removal reason added"},o=this.lastSubmittedData?.itemId||"";if(l.h(o)){const t={postId:o,action:r.a.addRemovalReason,value:!0};e.p(e.T.PostUpdated,t)}else{const t={commentId:o,action:i.C.addRemovalReason,value:!0};e.p(e.T.CommentUpdated,t)}if(a){const t={parentThingId:o,body:a};e.p(e.T.CommentCreated,t)}this.dispatchEvent(e.c(R.eventName)),this.dispatchEvent(e.c("faceplate-alert",s)),this.lastSubmittedData&&this.dispatchEvent(new u(this.lastSubmittedData))}catch{this.showError()}}parseRemovalReasonMessageType(t,a){return t===d.a.Comment?a===d.d.Mod?e.h7.CommentAsSubreddit:e.h7.CommentAsMod:t===d.a.Modmail?a===d.d.Mod?e.h7.MessageAsSubreddit:e.h7.MessageAsMod:null}getRemovalReasonId(e){const t=e.get("removal-reason");return"default-removal-reason"===t?e.get("default-removal-reason"):t}};c=e._([e.e("removal-reason-form")],c),n.r(c);const E={"removal-reason":"subreddit_removal_reason","default-removal-reason":"default_removal_reason",message:"message_to_user","notification-method":"notification_method","notification-sender":"notification_sender",modNote:"mod_note"};class p extends CustomEvent{constructor(e){super(p.eventName,{detail:e,bubbles:!0,composed:!0})}}p.eventName="mod-add-removal-reason-show-modal";class R extends CustomEvent{constructor(){super(R.eventName)}}R.eventName="mod-add-removal-reason-toggle-loading";let v=class extends t.s{constructor(){super(...arguments),this.pubsub=new e.m(this),this.getInputValue=e=>this.removalReasonForm?.querySelector(`input[name="${e}"]`)?.value,this.buildAndTrackEvent=t=>{const a={action:"click",...t,authorId:this.getInputValue("authorId"),subredditId:this.getInputValue("subredditId"),subredditName:this.subredditName,thingId:this.thingId};e.f(this,s.r(a))},this.firstUpdated=()=>{this.isSmartEscalationsCommunityRulesEnabled&&this.updateComplete.then((()=>{this.primaryButton?.addEventListener("click",(()=>{this.removalReasonForm?.isValid&&(this.toggleButtonLoadingIndicator(),this.initSmartEscalations())}))}))},this.handleAddRemovalReasonEvent=({detail:e})=>{""!==e?this.show(e):this.thingId=void 0},this.handleFormElementClicked=e=>{const t={type:E[e.detail.formElement]||e.detail.formElement},a=this.removalReasonForm?.elements[e.detail.formElement]?.value||this.getInputValue(e.detail.formElement);if("lock"===e.detail.formElement&&(t.isLocked="on"===a),"notification-method"===e.detail.formElement){if(!a)return;t.notificationMethod=a}if("notification-sender"===e.detail.formElement){if(!a)return;t.sendAs=a}this.buildAndTrackEvent(t)},this.handleSelectRemovalReason=async e=>{const t=this.removalReasonInput?.removalReasonSuggestionsContext;e.detail.trackEvent&&this.buildAndTrackEvent({type:e.detail.isSitewide?"default_removal_reason":"subreddit_removal_reason",reason:e.detail.id,noun:"removal_reason_select",subredditId:t?.eventContext?.subredditId,postId:t?.eventContext?.postId,commentId:t?.eventContext?.commentId});const a=this.removalReasonForm,s=this.shadowRoot?.querySelector("faceplate-textarea-input");s&&e.detail.message&&(s.value=await this.renderRemovalReasonMessage(e.detail.id,e.detail.message),await s.updateComplete,s.syncInputValidity(),a?.notifyObservers(s))},this.renderRemovalReasonMessage=async(e,t)=>{try{return await this.renderRemovalReasonAsSavedResponseTemplate(e)}catch{return t}},this.renderSavedResponseTemplateBySubredditId=a.c0,this.renderRemovalReasonAsSavedResponseTemplate=async e=>{const t=await this.renderSavedResponseTemplateBySubredditId({responseId:e,subredditId:this.getInputValue("subredditId")||"",contentId:this.thingId});return t?t.templateValidation?.ok?(this.removalReasonInput?.setInvalidMacro(!1),t.response.markdown):(this.removalReasonInput?.setInvalidMacro(!0),""):""},this.handleAddedRemovalReason=t=>{let a=function(t){let a;a=t.type===e.h7.CommentAsMod||t.type===e.h7.CommentAsSubreddit?"comment":t.type===e.h7.MessageAsMod||t.type===e.h7.MessageAsSubreddit?"modmail":"no message";const s=t.type===e.h7.CommentAsSubreddit||t.type===e.h7.MessageAsSubreddit?"subreddit":"self";return{is_locked:t.isLockComment,notify:a,send_as:s}}(t.detail.removalReason);const o=this.removalReasonInput?.removalReasonSuggestionsContext?.predictedRemovalSavedResponses?.map((e=>e.id));o&&(a={...a,suggestion_list:o}),e.f(this,s.d(a,this.removalReasonInput?.value??void 0,this.removalReasonInput?.removalReasonSuggestionsContext?.eventContext)),this.isSmartEscalationsCommunityRulesEnabled&&!this.isExpandSuggestedActionsEnabled?(this.buildAndTrackEvent({type:"submit_button",reason:"default-removal-reason"===this.removalReasonInput?.value?this.defaultRemovalReasonInput?.value??void 0:this.removalReasonInput?.value??void 0,notificationMethod:this.removalReasonForm?.elements["notification-method"]?.value,sendAs:this.removalReasonForm?.elements["notification-sender"]?.value,isLocked:"on"===this.getInputValue("lock"),modNote:this.getInputValue("modNote"),message:this.getInputValue("message")}),this.pubsub.publish(e.T.RemovalReasonStatus,{status:m.R.SUCCESS})):this.close()},this.handleCancel=t=>{t.stopImmediatePropagation(),this.buildAndTrackEvent({type:"close_button"}),e.f(this,s.e()),this.close()},this.toggleButtonLoadingIndicator=()=>{this.primaryButton?.querySelector("faceplate-progress")?.classList.toggle("hidden"),this.primaryButton?.querySelector("span.submit-button-content")?.classList.toggle("opacity-0")},this.showHideSubmitButton=()=>{this.removalReasonInput?this.primaryButton?.classList.remove("hidden"):this.primaryButton?.classList.add("hidden")},this.close=()=>{this.modal?.open&&(this.modal?.close(),document.body.style.overflow="auto",document.body.style.pointerEvents="auto")},this.initSmartEscalations=()=>{const t=this.getInputValue("authorId"),a=this.getInputValue("subredditId"),s=t&&a&&this.thingId;s&&this.pubsub.publish(e.T.SmartEscalationsInit,{thingId:this.thingId,authorId:t,subredditId:a,removalReasonId:(this.defaultRemovalReasonInput?.value||this.removalReasonInput?.value)??"",removalReasonDisplayText:(this.defaultRemovalReasonInput?.displayText||this.removalReasonInput?.displayText)??""}),!s&&this.close()}}get removalReasonInput(){return this.shadowRoot?.querySelector('[name="removal-reason"]')}get defaultRemovalReasonInput(){return this.shadowRoot?.querySelector('[name="default-removal-reason"]')}get removalReasonForm(){return this.shadowRoot?.querySelector("removal-reason-form")}get primaryButton(){return this.shadowRoot?.querySelector('faceplate-modal [slot=primaryButton] button[type="submit"]')}get selectedSuggestionValue(){const e=this.removalReasonInput?.shadowRoot?.querySelector("removal-reason-suggestions"),t=e?.getSelectedChip();return t?.dataset.removalReasonId}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(e.T.AddRemovalReasonClose,this.close,!1),this.addEventListener(d.S.eventName,this.handleSelectRemovalReason),this.addEventListener(u.eventName,this.handleAddedRemovalReason),this.addEventListener(R.eventName,this.toggleButtonLoadingIndicator),this.addEventListener(h.eventName,this.handleFormElementClicked),window.addEventListener(p.eventName,this.handleAddRemovalReasonEvent)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener(p.eventName,this.handleAddRemovalReasonEvent),this.removeEventListener(d.S.eventName,this.handleSelectRemovalReason),this.removeEventListener(u.eventName,this.handleAddedRemovalReason),this.removeEventListener(R.eventName,this.toggleButtonLoadingIndicator),this.addEventListener(h.eventName,this.handleFormElementClicked)}async show(e){e&&(this.thingId=e,await this.updateComplete),this.modal?.showModal(),await(this.partial?.load()),this.buildAndTrackEvent({action:"view"}),this.primaryButton?.querySelector("faceplate-progress")?.classList.add("hidden"),this.primaryButton?.querySelector("span.submit-button-content")?.classList.remove("opacity-0"),this.showHideSubmitButton()}render(){return t.x` <removal-reason-form class="mb-0" enctype="application/json" method="POST" action="/svc/shreddit/mod/removal-reason"> <faceplate-modal class="max-w-[540px] w-[90v w] z-30"> <div slot="closeButton"> ${e.Y({appearance:"secondary",leadingIcon:t.c({size:t.I.Small}),size:e.a7.Small,attributes:{type:"button",onclick:this.handleCancel}})} </div> <input type="hidden" name="thing" value="${this.thingId}"> ${a.av(this.thingId,t.x` <faceplate-partial class="w-100" src="/svc/shreddit/removal-reason-form/${this.thingId}" loading="${e.q.Programmatic}"> <div class="w-100 h-4xl flex items-center justify-center"> <faceplate-progress value="20" class="animate-spin"></faceplate-progress> </div> </faceplate-partial> `)} <div slot="primaryButton"> ${e.Y({children:t.x`<faceplate-progress value="20" class="animate-spin loading-icon hidden absolute left-0 right-0 m-auto w-[16px]" style="--loader-size:1rem"></faceplate-progress> <span class="submit-button-content"> ${"Submit"}</span>`,appearance:"primary",attributes:{type:"submit",className:"w-100 relative"}})} </div> <div slot="secondaryButton"> ${e.Y({children:"Cancel",appearance:"plain",attributes:{className:"w-100",type:"button",onclick:this.handleCancel}})} </div> </faceplate-modal> </removal-reason-form> `;}};return v.styles=[e.t],e._([e.n({type:Boolean,attribute:"is-smart-escalations-community-rules-enabled"})],v.prototype,"isSmartEscalationsCommunityRulesEnabled",void 0),e._([e.n({type:Boolean,attribute:"is-expand-suggested-actions-enabled"})],v.prototype,"isExpandSuggestedActionsEnabled",void 0),e._([e.n({type:String})],v.prototype,"thingId",void 0),e._([e.n({type:String,attribute:"subreddit-name"})],v.prototype,"subredditName",void 0),e._([e.Q("faceplate-modal")],v.prototype,"modal",void 0),e._([e.Q("faceplate-partial")],v.prototype,"partial",void 0),v=e._([e.e("add-removal-reason-modal")],v),{A:p}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DzMpUNmB.js",import.meta.url,"DzMpUNmB");SML.di("./fnKkpEwQ.js",import.meta.url,"fnKkpEwQ");SML.di("./DSgcmNT3.js",import.meta.url,"DSgcmNT3");SML.di("./p53_mOdF.js",import.meta.url,"p53_mOdF");SML.di("./BJSmnD7s.js",import.meta.url,"BJSmnD7s");SML.di("./jTp_btYX.js",import.meta.url,"jTp_btYX");SML.di("./BM-DpnLu.js",import.meta.url,"BM-DpnLu");SML.di("./Be8KYlVI.js",import.meta.url,"Be8KYlVI");SML.di("./BTfAALG-.js",import.meta.url,"BTfAALG-");SML.di("./jzNEIPwx.js",import.meta.url,"jzNEIPwx");SML.di("./BvOcWFza.js",import.meta.url,"BvOcWFza");SML.di("./Ds3iHAvh.js",import.meta.url,"Ds3iHAvh");SML.di("./8tELWdqF.js",import.meta.url,"8tELWdqF");SML.di("./Dhnopfuf.js",import.meta.url,"Dhnopfuf");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");SML.di("./CJ4Bucp-.js",import.meta.url,"CJ4Bucp-");SML.di("./BdueHHHl.js",import.meta.url,"BdueHHHl");SML.di("./DK2EuOAl.js",import.meta.url,"DK2EuOAl");SML.di("./B4wbfaco.js",import.meta.url,"B4wbfaco");SML.di("./wFIF_OFn.js",import.meta.url,"wFIF_OFn");SML.di("./DQ-2YbuL.js",import.meta.url,"DQ-2YbuL");SML.di("./BHW1DH4B.js",import.meta.url,"BHW1DH4B");SML.di("./CvMMXn2K.js",import.meta.url,"CvMMXn2K");SML.di("./CmgOir_w.js",import.meta.url,"CmgOir_w");SML.di("./DIbtn8u6.js",import.meta.url,"DIbtn8u6");SML.di("./CDFmhs-S.js",import.meta.url,"CDFmhs-S");SML.di("./DCovP8x6.js",import.meta.url,"DCovP8x6");SML.di("./BStJq-t0.js",import.meta.url,"BStJq-t0");SML.di("./FaYkg4Io.js",import.meta.url,"FaYkg4Io");SML.di("./MX9FaClF.js",import.meta.url,"MX9FaClF");SML.di("./Cjw2ByTc.js",import.meta.url,"Cjw2ByTc");
SML.dm("CT6o3cIS",["GlDbwxoG","s_Igk1Yn","DzMpUNmB","fnKkpEwQ","DSgcmNT3","p53_mOdF","BJSmnD7s","jTp_btYX","BM-DpnLu","Be8KYlVI","BTfAALG-","jzNEIPwx","BvOcWFza","Ds3iHAvh","8tELWdqF","Dhnopfuf","DRM-oTYq","CJ4Bucp-","BdueHHHl","DIbtn8u6","FaYkg4Io","MX9FaClF","Cjw2ByTc","DK2EuOAl","B4wbfaco","wFIF_OFn","DQ-2YbuL","BHW1DH4B","CvMMXn2K","CmgOir_w","CDFmhs-S","DCovP8x6","BStJq-t0"],(async(e,t,a,i,o,n,r,s,d,l,h,m,u,c,p,I,k,T,N,g,R,E,A)=>{const C="modQueue",S="modQueueChat",M="overflow",v="inline";let b=class extends t.s{constructor(){super(...arguments),this.location=v,this.viewContext=void 0,this.COACHMARK_LABELS={[C]:"NEW! Chat about items in the queue",[S]:"Jump back in",[M]:"NEW! Chat about content",[v]:"Jump back in"},this.COACHMARK_BODY={[C]:"Share content in the queue directly with your mod team",[S]:"Get back to chat threads from the queue",[M]:"Share content directly with your mod team",[v]:"Get back to chat threads from the content"},this.COACHMARK_POSITION={[C]:R.P.Top,[S]:R.P.Top,[M]:R.P.Left,[v]:R.P.Left},this.LOCAL_STORAGE_KEYS={[C]:e.a0.ShareToModChatCoachMarkMQSeen,[S]:e.a0.ShareToModChatCoachMarkMQChatSeen,[M]:e.a0.ShareToModChatCoachMarkOverflowSeen,[v]:e.a0.ShareToModChatCoachMarkInlineSeen},this._showShareToModChatBanner=!e.$.getItem(this.getLocalStorageKey()),this.closeCoachmark=()=>{this._showShareToModChatBanner=!1}}getLocalStorageKey(){return this.LOCAL_STORAGE_KEYS[this.location]}connectedCallback(){super.connectedCallback();const t=e.$.getItem(this.getLocalStorageKey());this.location===M&&this.viewContext&&[k.P.ModQueue,k.P.ModQueueAll].includes(this.viewContext)||t?this._showShareToModChatBanner=!1:(e.$.setItem(this.getLocalStorageKey(),"true"),this._showShareToModChatBanner=!0)}disconnectedCallback(){super.disconnectedCallback()}render(){return t.x`<rpl-coachmark placement="${this.COACHMARK_POSITION[this.location]}" appearance="${E.a.Inverted}" ?open="${this._showShareToModChatBanner}"> <slot></slot> <rpl-coachmark-card slot="content" aria-live="polite" appearance="${E.a.Inverted}" class="w-[220px]"> <div slot="title" class="pt-xs pb-2xs"> <div>${this.COACHMARK_LABELS[this.location]}</div> </div> ${e.Y({attributes:{className:"close-btn",slot:"close-button",onclick:e=>{e.stopPropagation(),this.closeCoachmark()}},appearance:"plainInverted",size:e.a7.Small,leadingIcon:t.c({size:t.I.Small})})} <div class="text-12 w-[170px] mb-sm">${this.COACHMARK_BODY[this.location]}</div> </rpl-coachmark-card> </rpl-coachmark>`}};b.styles=[e.t],e._([e.n({type:String,attribute:"location"})],b.prototype,"location",void 0),e._([e.n({type:String,attribute:"view-context"})],b.prototype,"viewContext",void 0),e._([e.N()],b.prototype,"_showShareToModChatBanner",void 0),b=e._([e.e("share-to-mod-chat-coachmark")],b);const O=t.s;class D extends O{constructor(){super(...arguments),this.size=a.L.Medium,this.appearance="content-action",this.viewContext=k.P.CommentsPage,this.feedViewType=e.a5.ModQueueCompactView,this.itemState=T.M.UNMODERATED,this.verdict=void 0,this.isCurrentUserAuthor=!1,this.isDeleted=!1,this.isRemoved=!1,this.isModModeEnabled=!1,this.isAdmin=!1,this.isLocked=!1,this.isStickied=!1,this.isHighlighted=!1,this.isReportingIgnored=!1,this.areHighlightsEnabled=!1,this.hasReports=!1,this.hasRemovalReason=!1,this.hasPostFlair=!1,this.isProfilePost=!1,this.isPromotedPost=!1,this.isSpamFilteredPost=!1,this.isDesktop=!1,this.permalink="",this.isContentLevelModsCommsEnabled=!1,this.modContentDiscussionContext=void 0,this.isFeedNoApproveEnabled=!1,this.focusChatTextareaFn=A.f,this.pubsub=new e.m(this),this.modActionsController=new N.ModActionsController(this,{getThingIdFn:()=>this.thingId||"",getIsProfilePostFn:()=>this.isProfilePost}),this.getListItemClickHandler=e=>()=>(this.dropdownMenu?.close(),e())}get isPost(){return k.h(this.thingId||"")}get shouldAlwaysShowAction(){return!this.isModModeEnabled&&!this.isOnModqueuePage}shouldAlwaysShowApproveAction(){return this.shouldAlwaysShowAction||this.isModVerdictVisible&&this.itemState!==T.M.APPROVED&&this.shouldShowActionInMenu}shouldAlwaysShowRemoveAction(){return this.shouldAlwaysShowAction||this.isModVerdictVisible&&this.itemState!==T.M.REMOVED&&this.shouldShowActionInMenu}get isOnModqueuePage(){return this.viewContext===k.P.ModQueue||this.viewContext===k.P.ModQueueAll}get isApproved(){return this.itemState===T.M.APPROVED}get shouldShowConfirmRemoval(){return T.a(this.itemState,this.isSpamFilteredPost)}get shouldShowActionInMenu(){return!T.b(this.viewContext,this.feedViewType)||"hover-menu"===this.appearance}get isDistinguishable(){return this.isCurrentUserAuthor&&!this.isDeleted}get isStickyable(){return!(this.viewContext===k.P.ProfileFeed||this.viewContext===k.P.ProfileFeed2||this.isDeleted)}get isModVerdictVisible(){return T.h(this.verdict??null)&&!this.hasReports&&this.itemState!==T.M.FILTERED}renderApproveAction(){return this.isFeedNoApproveEnabled&&!this.isOnModqueuePage&&this.itemState===T.M.UNMODERATED||this.shouldAlwaysShowApproveAction()&&T.c(this.itemState)?a.l({leadingIcon:t.C(),label:"Approve",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleApproveContent)}):null;}renderRemoveAction(){return this.isFeedNoApproveEnabled&&!this.isOnModqueuePage&&this.itemState===T.M.UNMODERATED||this.shouldAlwaysShowRemoveAction()&&T.d(this.itemState)?a.l({leadingIcon:t.c(),label:"Remove",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleRemoveContent)}):null;}renderConfirmRemovalAction(){return this.shouldAlwaysShowRemoveAction()&&this.shouldShowConfirmRemoval?a.l({leadingIcon:c.r(),label:"Confirm Removal",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleConfirmRemoval)}):null;}renderSpamAction(){return T.e({moderationState:this.itemState,isSpamFilteredPost:this.isSpamFilteredPost,isRemoved:this.isRemoved,isPromotedPost:this.isPromotedPost})&&this.shouldShowActionInMenu?a.l({leadingIcon:s.s(),label:"Mark as Spam",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleRemoveContentAsSpam)}):null;}renderShareToModChatAction(e){if(!T.f({isPromotedPost:this.isPromotedPost})||!this.shouldShowActionInMenu||!e?.modChatChannel||e?.modContentDiscussion)return null;const i=e?.modContentDiscussion?`${g.g(e.modContentDiscussion.chatChannel?.roomId,e.modContentDiscussion.chatMessage?.id)}/thread`:g.a(e?.modChatChannel?.roomId);return t.x` <faceplate-tracker source="moderator" action="click" noun="${e?.eventContext?.noun}" data-faceplate-tracking-context="${JSON.stringify({subreddit:{id:e?.eventContext?.subredditId,name:e?.eventContext?.subredditName},action_info:{setting_value:e?.eventContext?.roomId},post:{id:e?.eventContext?.postId},...(e?.eventContext?.commentId && {comment:{id:e?.eventContext?.commentId}})})}"> <reddit-chat-anchor> <a href="${i}?draft=${encodeURIComponent("https://www.reddit.com"+this.permalink)}" class="no-underline"> ${a.l({leadingIcon:p.c(),trailingSlot:t.x` <rpl-badge appearance="${I.R.Alert}">NEW</rpl-badge>`,label:"Share to mod chat",size:this.size,onClick:async()=>{e.modContentDiscussion||(await this.focusChatTextareaFn())}})} </a> </reddit-chat-anchor> </faceplate-tracker>`;}renderIgnoreReportsAction(){return this.isReportingIgnored||!this.hasReports?null:a.l({leadingIcon:s.i(),label:"Ignore reports and approve",size:this.size,onClick:this.getListItemClickHandler((()=>{this.modActionsController.handleIgnoreReports(),this.modActionsController.handleApproveContent()}))});}renderUnignoreReportsAction(){return this.isReportingIgnored?a.l({leadingIcon:s.a(),label:"Unignore reports",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleUnignoreReports)}):null;}renderAddRemovalReasonAction(){return T.s(this.itemState,this.hasRemovalReason,this.isSpamFilteredPost,this.isProfilePost)&&this.shouldShowActionInMenu?a.l({leadingIcon:o.a(),label:"Add Removal Reason",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleAddRemovalReason)}):null;}renderDistinguishAction(){return this.isDistinguishable&&this.distinguishedAs!==e.dC.Moderator?a.l({leadingIcon:r.t(),label:"Show mod label",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleDistinguish)}):null;}renderUndistinguishAction(){return this.isDistinguishable&&this.distinguishedAs===e.dC.Moderator?a.l({leadingIcon:n.t(),label:"Hide mod label",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleUndistinguish)}):null;}renderStickyAction(e){return!this.isStickyable||this.isStickied||!this.shouldShowActionInMenu||this.areHighlightsEnabled||this.isPromotedPost?null:a.l({leadingIcon:u.p(),label:e,size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleSticky)})}renderUnstickyAction(e){return this.isStickyable&&this.isStickied&&this.shouldShowActionInMenu&&!this.areHighlightsEnabled&&!this.isPromotedPost?a.l({leadingIcon:m.p(),label:e,size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleUnsticky)}):null}renderAddToHighlightsAction(){return this.isStickyable&&this.shouldShowActionInMenu&&this.areHighlightsEnabled&&s.H.has(this.viewContext)&&!this.isHighlighted?a.l({leadingIcon:u.p(),label:"Add to highlights",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleUpdateHighlightedPost)}):null;}renderRemoveFromHighlightsAction(){return this.isStickyable&&this.shouldShowActionInMenu&&this.areHighlightsEnabled&&s.H.has(this.viewContext)&&this.isHighlighted?a.l({leadingIcon:m.p(),label:"Remove from highlights",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleRemoveHighlightedPost)}):null;}renderLockAction(e){return this.isLocked||!this.shouldShowActionInMenu?null:a.l({leadingIcon:l.l(),label:e,size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleLock)})}renderUnlockAction(e){return this.isLocked&&this.shouldShowActionInMenu?a.l({leadingIcon:d.l(),label:e,size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleUnlock)}):null}renderEditPostFlairAction(e){return!this.shouldShowActionInMenu||this.isPromotedPost||this.isDeleted?null:a.l({leadingIcon:r.t(),label:e,size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleOpenEditPostFlairModal)})}renderCopyLinkAction(){return"hover-menu"!==this.appearance?null:this.isPost?t.x`<shreddit-post-share-button use-menu ?is-desktop-viewport="${this.isDesktop}" permalink="${this.permalink}"></shreddit-post-share-button>`:t.x`<shreddit-comment-share-button use-menu ?is-desktop-viewport="${this.isDesktop}" permalink="${this.permalink}"></shreddit-comment-share-button>`}closeModal(){this.bottomSheetMenu?.close()}openModal(){this.bottomSheetMenu?.showModal()}renderMenuTrigger(){const a={leadingIcon:h.m({size:t.I.Small}),screenReaderContent:"Moderation actions menu",appearance:"secondary",attributes:{type:"button",onclick:()=>{this.openModal()},slot:"trigger"},size:e.a7.Small};return t.x` <faceplate-tracker source="moderator" action="click" noun="mod_shield_menu"> <rpl-tooltip appearance="inverted" placement="top" distance="8"> <span> ${"hover-menu"===this.appearance?e.Y({...a,appearance:"secondary"}):i.c({...a,appearance:"plain"})} </span> <span slot="content">${"Mod actions"}</span> </rpl-tooltip> </faceplate-tracker> `;}renderMobileActionsMenu(a){return t.x` ${this.renderMenuTrigger()} <faceplate-bottom-sheet> <faceplate-bottom-sheet-header slot="header" has-divider> <span slot="trailing" @click="${this.closeModal}"> ${e.Y({attributes:{"aria-label":"Close"},appearance:"secondary",leadingIcon:t.c({size:t.I.Small}),size:e.a7.Small})}</span> <span>${"Mod actions"}</span> </faceplate-bottom-sheet-header> <faceplate-menu class="w-full nd:hidden" @click="${this.closeModal}"> ${a} <slot name="devvit-context-actions"></slot> </faceplate-menu> </faceplate-bottom-sheet> `;}renderActionsMenu(e){return this.isContentLevelModsCommsEnabled&&!this.modContentDiscussionContext?.modContentDiscussion?t.x` <mod-dropdown-closer> <share-to-mod-chat-coachmark location="${M}" view-context="${this.viewContext}"> <faceplate-dropdown-menu position="bottom-end"> ${this.renderMenuTrigger()} <faceplate-menu slot="menu" class="max-w-xs nd:hidden max-h-[432px] overflow-y-auto overflow-x-hidden styled-scrollbars"> ${e} <slot name="devvit-context-actions"></slot> </faceplate-menu> </faceplate-dropdown-menu> </share-to-mod-chat-coachmark> </mod-dropdown-closer>`:t.x` <mod-dropdown-closer> <faceplate-dropdown-menu position="bottom-end"> ${this.renderMenuTrigger()} <faceplate-menu slot="menu" class="max-w-xs max-h-[432px] overflow-y-auto overflow-x-hidden styled-scrollbars"> ${e} <slot name="devvit-context-actions"></slot> </faceplate-menu> </faceplate-dropdown-menu> </mod-dropdown-closer>`}render(){if(this.viewContext===k.P.AggregateFeed)return t.A;const e=this.renderActions();return 0===e.length||e.every((e=>null===e))?t.x``:this.isDesktop?this.renderActionsMenu(e):this.renderMobileActionsMenu(e)}}return D.styles=[e.t],e._([e.n({type:String,attribute:"thing-id"})],D.prototype,"thingId",void 0),e._([e.n({type:String,attribute:"user-id"})],D.prototype,"userId",void 0),e._([e.n({type:String})],D.prototype,"size",void 0),e._([e.n({type:String})],D.prototype,"appearance",void 0),e._([e.n({type:String,attribute:"view-context"})],D.prototype,"viewContext",void 0),e._([e.n({type:String,attribute:"feed-view-type"})],D.prototype,"feedViewType",void 0),e._([e.n({type:String,attribute:"item-state",reflect:!0})],D.prototype,"itemState",void 0),e._([e.n({type:String,attribute:"distinguished-as"})],D.prototype,"distinguishedAs",void 0),e._([e.n({type:String,attribute:"verdict"})],D.prototype,"verdict",void 0),e._([e.n({type:String,attribute:"verdict-by"})],D.prototype,"verdictBy",void 0),e._([e.n({type:Boolean,attribute:"current-user-author"})],D.prototype,"isCurrentUserAuthor",void 0),e._([e.n({type:Boolean,attribute:"deleted"})],D.prototype,"isDeleted",void 0),e._([e.n({type:Boolean,attribute:"removed"})],D.prototype,"isRemoved",void 0),e._([e.n({type:Boolean,attribute:"mod-mode"})],D.prototype,"isModModeEnabled",void 0),e._([e.n({type:Boolean,attribute:"is-admin"})],D.prototype,"isAdmin",void 0),e._([e.n({type:Boolean,attribute:"locked"})],D.prototype,"isLocked",void 0),e._([e.n({type:Boolean,attribute:"stickied"})],D.prototype,"isStickied",void 0),e._([e.n({type:Boolean,attribute:"highlighted"})],D.prototype,"isHighlighted",void 0),e._([e.n({type:Boolean,attribute:"reporting-ignored"})],D.prototype,"isReportingIgnored",void 0),e._([e.n({type:Boolean,attribute:"highlights-enabled"})],D.prototype,"areHighlightsEnabled",void 0),e._([e.n({type:Boolean,attribute:"has-reports"})],D.prototype,"hasReports",void 0),e._([e.n({type:Boolean,attribute:"has-removal-reason"})],D.prototype,"hasRemovalReason",void 0),e._([e.n({type:Boolean,attribute:"has-post-flair"})],D.prototype,"hasPostFlair",void 0),e._([e.n({type:Boolean,attribute:"is-profile-post"})],D.prototype,"isProfilePost",void 0),e._([e.n({type:Boolean,attribute:"is-promoted-post"})],D.prototype,"isPromotedPost",void 0),e._([e.n({type:Boolean,attribute:"is-spam-filtered-post"})],D.prototype,"isSpamFilteredPost",void 0),e._([e.n({type:Boolean,attribute:"is-desktop"})],D.prototype,"isDesktop",void 0),e._([e.n({type:String,attribute:"permalink"})],D.prototype,"permalink",void 0),e._([e.n({type:Boolean,attribute:"is-content-level-mods-comms-enabled"})],D.prototype,"isContentLevelModsCommsEnabled",void 0),e._([e.n({type:Object,attribute:"mod-content-discussion-context"})],D.prototype,"modContentDiscussionContext",void 0),e._([e.n({type:Boolean,attribute:"is-feed-no-approve-enabled"})],D.prototype,"isFeedNoApproveEnabled",void 0),e._([e.n({attribute:!1})],D.prototype,"focusChatTextareaFn",void 0),e._([e.Q("faceplate-dropdown-menu")],D.prototype,"dropdownMenu",void 0),e._([e.Q("faceplate-bottom-sheet")],D.prototype,"bottomSheetMenu",void 0),{M:D}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./OimaI6pY.js",import.meta.url,"OimaI6pY");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("CTwJH_ps",["GlDbwxoG","s_Igk1Yn","OimaI6pY","CC2wUKE8"],(async(t,e,i,n)=>{const o=[{key:"TOTAL_MRC_VIEWABLE_TIME",playing:!0,threshold:t.bW.VIEWABILITY_THRESHOLD},{key:"TOTAL_AUDIBLE_TIME",playing:!0,threshold:0,withSound:!0},{key:"HALF_DURATION_80_IN_VIEW_AUDIBLE",playing:!0,withSound:!0,threshold:t.bW.EIGHTY_VIEWABILITY_THRESHOLD},{key:"FULL_IN_VIEW_AUDIBLE_TIME",playing:!0,threshold:t.bW.FULL_VIEWABILITY_THRESHOLD,withSound:!0},{key:"FULL_IN_VIEW_TIME",playing:!0,threshold:t.bW.FULL_VIEWABILITY_THRESHOLD},{key:"ANY_IN_VIEW_TIME",playing:!0,threshold:t.bW.VISIBILITY_THRESHOLD},{key:"FIFTY_IN_VIEW_TIME",playing:!0,threshold:t.bW.VIEWABILITY_THRESHOLD},{key:"EIGHTY_IN_VIEW_TIME",playing:!0,threshold:t.bW.EIGHTY_VIEWABILITY_THRESHOLD}];function r(t,e){const i=new URL(t);return Object.entries(e).forEach((([t,e])=>{i.searchParams.set(t,String(e))})),i.toString()}const a=o.map((t=>t.key));const s="noopener nofollow sponsored";let d=class extends e.s{constructor(){super(...arguments),this.impressionId="0",this.clickLocation=t.v.UNKNOWN,this.renderAsButton=!1,this.ButtonProps={},this.anchorStyleClass="",this.isOutboundLinkInitialized=!1}static get styles(){return[t.t,t.J("a {\n  color: inherit;\n  text-decoration: none;\n}\nbutton {\n  all: unset;\n  display: inline-block;\n  height: 100%;\n  width: 100%;\n  background: transparent;\n  cursor: pointer;\n}\n")]}get effectiveOutboundLink(){const t=this.outboundLinkOverride??(this.outboundLinkUrl||"");return n.ah(t)&&this.metadata?r(t,this.metadata):t}get calculatedTabIndex(){return this.disableKeyboardNav?"-1":""===this.effectiveOutboundLink?"0":void 0}connectedCallback(){super.connectedCallback(),void 0===this.outboundLinkOverride&&(this.outboundLinkUrl=this.getOutboundLinkUrlFromParent(),this.isOutboundLinkInitialized=!0)}updated(t){void 0===this.outboundLinkOverride&&t.has("galleryIndex")&&(this.outboundLinkUrl=this.getOutboundLinkUrlFromParent())}getOutboundLinkUrlFromParent(){const t=i.g(this);if(!t)return;if(void 0===this.galleryIndex)return t.getAttribute("outbound-link-url");const e=t.getAttribute("gallery-items");let n;try{n=JSON.parse(e||"[]")}catch{n=[]}return n[this.galleryIndex]?.outboundUrl}fetchAndUpdateMetadata(){if(!n.ah(this.effectiveOutboundLink))return;const e=i.g(this);if(!e)return;const o=e.getMetadataForPixelEvent(t.bX.CLICK);o&&(this.metadata=o)}handleClick(e){if("auxclick"===e.type&&1!==e.button)return;void 0!==this.outboundLinkOverride||this.isOutboundLinkInitialized||(this.outboundLinkUrl=this.getOutboundLinkUrlFromParent(),this.isOutboundLinkInitialized=!0),n.ai(this.effectiveOutboundLink)&&"_blank"===this.target&&t.bY(this.impressionId),this.fetchAndUpdateMetadata(),i.t({el:this,clickLocation:this.clickLocation,galleryIndex:this.galleryIndex});if(this.clickLocation===t.v.PROMOTED_LABEL&&this.hasAttribute("promoted-label-experiment")||i.a({el:this,clickLocation:this.clickLocation,outboundUrl:this.effectiveOutboundLink,galleryIndex:this.galleryIndex}),function(e){const i=t=>{try{return t()}catch{return null}};let n=i((()=>new URL(e)));return n||(n=i((()=>new URL(e,location.origin)))),!!n&&"1"===n.searchParams.get(t.bV)}(this.effectiveOutboundLink)){const t=this.closest("shreddit-ad-post");if(!t)return;i.s({impressionId:this.impressionId,adEvents:t.adEvents,clickRedirectUrl:this.effectiveOutboundLink}),i.b(t.adUserTargeting)}n.ai(this.effectiveOutboundLink)&&"contextmenu"!==e.type&&t.ar(t.bZ)&&(e.preventDefault(),this.fetchAndUpdateMetadata(),window.open(this.effectiveOutboundLink,this.target||"_self"))}render(){const i=this.effectiveOutboundLink||void 0,o=e.x`<slot></slot>`;if(this.renderAsButton)return t.Y({appearance:n.aj()?"secondary":"bordered",children:o,size:t.a7.Medium,attributes:{href:i,onclick:this.handleClick,oncontextmenu:this.handleClick,target:this.target,rel:s,className:this.anchorStyleClass},...this.ButtonProps});const r=this.effectiveOutboundLink||"_self"===this.target,a=n.n(this.anchorStyleClass,r?"cursor-pointer":"cursor-default");return e.x`<a class="${a}" href="${e.l(i)}" target="${e.l(this.target)}" tabindex="${e.l(this.calculatedTabIndex)}" @click="${this.handleClick}" @mouseover="${this.fetchAndUpdateMetadata}" @focus="${this.fetchAndUpdateMetadata}" @contextmenu="${this.handleClick}" @auxclick="${this.handleClick}" rel="${s}" role="${i?"link":"button"}" aria-label="${e.l(this.ariaLabel)}"> ${o} </a>`}};return t._([t.n({type:String,attribute:"outbound-link-override",reflect:!0})],d.prototype,"outboundLinkOverride",void 0),t._([t.n({type:String,attribute:"impression-id"})],d.prototype,"impressionId",void 0),t._([t.n({type:String,attribute:"click-location"})],d.prototype,"clickLocation",void 0),t._([t.n({type:String,attribute:"post-id"})],d.prototype,"postId",void 0),t._([t.n({type:Number,attribute:"gallery-index",reflect:!0})],d.prototype,"galleryIndex",void 0),t._([t.n({type:String})],d.prototype,"target",void 0),t._([t.n({type:Boolean,attribute:"disable-keyboard-nav"})],d.prototype,"disableKeyboardNav",void 0),t._([t.n({type:Boolean,attribute:"render-as-button"})],d.prototype,"renderAsButton",void 0),t._([t.n({type:Object,attribute:"button-props"})],d.prototype,"ButtonProps",void 0),t._([t.n({type:String,attribute:"anchor-style-class"})],d.prototype,"anchorStyleClass",void 0),t._([t.Q("a")],d.prototype,"anchorEl",void 0),t._([t.Q("slot")],d.prototype,"slotEl",void 0),t._([t.N()],d.prototype,"outboundLinkUrl",void 0),t._([t.N()],d.prototype,"metadata",void 0),d=t._([t.e("shreddit-dynamic-ad-link")],d),{get S(){return d},V:o,a:r,b:a,g:t=>t.reduce(((t,e)=>(t[e]={maxContinuousTime:0,currentContinuousTime:0,totalTime:0},t)),{})}}));
SML.dm("CU4mObWU",[],(async()=>{class t{constructor(e,o){this.element=e,this.touch1=null,this.touch2=null,this.touchStartX=null,this.touchStartY=null,this.touchEndX=null,this.touchEndY=null,this.touchMove1=null,this.touchMove2=null,this.touchMoveX=null,this.touchMoveY=null,this.velocityX=null,this.velocityY=null,this.longPressTimer=null,this.doubleTapTimer=null,this.doubleTapWaiting=!1,this.thresholdX=0,this.thresholdY=0,this.disregardVelocityThresholdX=0,this.disregardVelocityThresholdY=0,this.swipingHorizontal=!1,this.swipingVertical=!1,this.swipingDirection=null,this.swipedHorizontal=!1,this.swipedVertical=!1,this.originalDistance=null,this.newDistance=null,this.scale=null,this.originalAngle=null,this.newAngle=null,this.rotation=null,this.handlers={panstart:[],panmove:[],panend:[],swipeleft:[],swiperight:[],swipeup:[],swipedown:[],tap:[],doubletap:[],longpress:[],pinch:[],pinchend:[],rotate:[],rotateend:[]},this._onTouchStart=this.onTouchStart.bind(this),this._onTouchMove=this.onTouchMove.bind(this),this._onTouchEnd=this.onTouchEnd.bind(this),this.opts=Object.assign({},t.defaults,o),this.element.addEventListener("touchstart",this._onTouchStart,i),this.element.addEventListener("touchmove",this._onTouchMove,i),this.element.addEventListener("touchend",this._onTouchEnd,i),this.opts.mouseSupport&&!("ontouchstart"in window)&&(this.element.addEventListener("mousedown",this._onTouchStart,i),document.addEventListener("mousemove",this._onTouchMove,i),document.addEventListener("mouseup",this._onTouchEnd,i))}destroy(){var t,i;this.element.removeEventListener("touchstart",this._onTouchStart),this.element.removeEventListener("touchmove",this._onTouchMove),this.element.removeEventListener("touchend",this._onTouchEnd),this.element.removeEventListener("mousedown",this._onTouchStart),document.removeEventListener("mousemove",this._onTouchMove),document.removeEventListener("mouseup",this._onTouchEnd),clearTimeout(null!==(t=this.longPressTimer)&&void 0!==t?t:void 0),clearTimeout(null!==(i=this.doubleTapTimer)&&void 0!==i?i:void 0)}on(t,i){if(this.handlers[t])return this.handlers[t].push(i),{type:t,fn:i,cancel:()=>this.off(t,i)}}off(t,i){if(this.handlers[t]){const e=this.handlers[t].indexOf(i);-1!==e&&this.handlers[t].splice(e,1)}}fire(t,i){for(let e=0;e<this.handlers[t].length;e++)this.handlers[t][e](i)}onTouchStart(t){var i,e,o,s,h,n,l,u,r,d,c,a,v,p,m,T,g,M,w,f,y,X,Y,E,b,S;let V=!1;if("mousedown"!==t.type){if(this.touch1||(this.touch1=t.changedTouches[0],V=!0),(V&&t.changedTouches.length>1||!V)&&!this.touch2)return this.touch2=[...t.changedTouches].find((t=>{var i;return t.identifier!==(null===(i=this.touch1)||void 0===i?void 0:i.identifier)}))||null,this.originalDistance=Math.sqrt(Math.pow((null!==(e=null===(i=this.touch2)||void 0===i?void 0:i.screenX)&&void 0!==e?e:0)-(null!==(n=null!==(s=null===(o=this.touchMove1)||void 0===o?void 0:o.screenX)&&void 0!==s?s:null===(h=this.touch1)||void 0===h?void 0:h.screenX)&&void 0!==n?n:0),2)+Math.pow((null!==(u=null===(l=this.touch2)||void 0===l?void 0:l.screenY)&&void 0!==u?u:0)-(null!==(a=null!==(d=null===(r=this.touchMove1)||void 0===r?void 0:r.screenY)&&void 0!==d?d:null===(c=this.touch1)||void 0===c?void 0:c.screenY)&&void 0!==a?a:0),2)),void(this.originalAngle=Math.atan2((null!==(p=null===(v=this.touch2)||void 0===v?void 0:v.screenY)&&void 0!==p?p:0)-(null!==(M=null!==(T=null===(m=this.touchMove1)||void 0===m?void 0:m.screenY)&&void 0!==T?T:null===(g=this.touch1)||void 0===g?void 0:g.screenY)&&void 0!==M?M:0),(null!==(f=null===(w=this.touch2)||void 0===w?void 0:w.screenX)&&void 0!==f?f:0)-(null!==(E=null!==(X=null===(y=this.touchMove1)||void 0===y?void 0:y.screenX)&&void 0!==X?X:null===(Y=this.touch1)||void 0===Y?void 0:Y.screenX)&&void 0!==E?E:0))/(Math.PI/180));if(!V)return}(V||"mousedown"===t.type)&&(this.thresholdX=this.opts.threshold("x",this),this.thresholdY=this.opts.threshold("y",this),this.disregardVelocityThresholdX=this.opts.disregardVelocityThreshold("x",this),this.disregardVelocityThresholdY=this.opts.disregardVelocityThreshold("y",this),this.touchStartX="mousedown"===t.type?t.screenX:(null===(b=this.touch1)||void 0===b?void 0:b.screenX)||0,this.touchStartY="mousedown"===t.type?t.screenY:(null===(S=this.touch1)||void 0===S?void 0:S.screenY)||0,this.touchMoveX=null,this.touchMoveY=null,this.touchEndX=null,this.touchEndY=null,this.swipingDirection=null,this.longPressTimer=setTimeout((()=>this.fire("longpress",t)),this.opts.longPressTime),this.scale=1,this.rotation=0,this.fire("panstart",t))}onTouchMove(t){var i,e,o,s,h,n,l,u,r,d,c,a,v;if("mousemove"===t.type&&(!this.touchStartX||null!==this.touchEndX))return;let p,m;if("mousemove"!==t.type&&(p=[...t.changedTouches].find((t=>{var i;return t.identifier===(null===(i=this.touch1)||void 0===i?void 0:i.identifier)})),this.touchMove1=p||this.touchMove1,m=[...t.changedTouches].find((t=>{var i;return t.identifier===(null===(i=this.touch2)||void 0===i?void 0:i.identifier)})),this.touchMove2=m||this.touchMove2),"mousemove"===t.type||p){const u=("mousemove"===t.type?t.screenX:null!==(i=null==p?void 0:p.screenX)&&void 0!==i?i:0)-(null!==(e=this.touchStartX)&&void 0!==e?e:0);this.velocityX=u-(null!==(o=this.touchMoveX)&&void 0!==o?o:0),this.touchMoveX=u;const r=("mousemove"===t.type?t.screenY:null!==(s=null==p?void 0:p.screenY)&&void 0!==s?s:0)-(null!==(h=this.touchStartY)&&void 0!==h?h:0);this.velocityY=r-(null!==(n=this.touchMoveY)&&void 0!==n?n:0),this.touchMoveY=r;const d=Math.abs(this.touchMoveX),c=Math.abs(this.touchMoveY);this.swipingHorizontal=d>this.thresholdX,this.swipingVertical=c>this.thresholdY,this.swipingDirection=d>c?this.swipingHorizontal?"horizontal":"pre-horizontal":this.swipingVertical?"vertical":"pre-vertical",Math.max(d,c)>this.opts.pressThreshold&&clearTimeout(null!==(l=this.longPressTimer)&&void 0!==l?l:void 0),this.fire("panmove",t)}"mousemove"!==t.type&&null!=this.touchMove1&&null!=this.touchMove2&&(this.newDistance=Math.sqrt(Math.pow(this.touchMove2.screenX-this.touchMove1.screenX,2)+Math.pow(this.touchMove2.screenY-this.touchMove1.screenY,2)),this.scale=this.newDistance/(null!==(u=this.originalDistance)&&void 0!==u?u:0),this.fire("pinch",t),this.newAngle=Math.atan2((null!==(r=this.touchMove2.screenY)&&void 0!==r?r:0)-(null!==(d=this.touchMove1.screenY)&&void 0!==d?d:0),(null!==(c=this.touchMove2.screenX)&&void 0!==c?c:0)-(null!==(a=this.touchMove1.screenX)&&void 0!==a?a:0))/(Math.PI/180),this.rotation=this.newAngle-(null!==(v=this.originalAngle)&&void 0!==v?v:0),this.fire("rotate",t))}onTouchEnd(t){var i,e,o,s,h,n,l,u,r,d;let c;if("mouseup"!==t.type&&(c=[...t.changedTouches].find((t=>{var i;return t.identifier===(null===(i=this.touch1)||void 0===i?void 0:i.identifier)})),[...t.touches].find((t=>{var i;return t.identifier===(null===(i=this.touch1)||void 0===i?void 0:i.identifier)}))||(this.touch1=null,this.touchMove1=null),[...t.touches].find((t=>{var i;return t.identifier===(null===(i=this.touch2)||void 0===i?void 0:i.identifier)}))||(this.touch2=null,this.touchMove2=null)),"mouseup"!==t.type||this.touchStartX&&null===this.touchEndX){if("mouseup"===t.type||c){this.touchEndX="mouseup"===t.type?t.screenX:null!==(i=null==c?void 0:c.screenX)&&void 0!==i?i:0,this.touchEndY="mouseup"===t.type?t.screenY:null!==(e=null==c?void 0:c.screenY)&&void 0!==e?e:0,this.fire("panend",t),clearTimeout(null!==(o=this.longPressTimer)&&void 0!==o?o:void 0);const a=this.touchEndX-(null!==(s=this.touchStartX)&&void 0!==s?s:0),v=Math.abs(a),p=this.touchEndY-(null!==(h=this.touchStartY)&&void 0!==h?h:0),m=Math.abs(p),T=Math.sqrt(Math.pow(a,2)+Math.pow(p,2)),g=Math.abs(T),M=m/v;v>this.thresholdX||m>this.thresholdY||this.opts.diagonalSwipes&&(g>this.thresholdX||g>this.thresholdY)?(this.swipedHorizontal=v>this.thresholdX||this.opts.diagonalSwipes&&g>this.thresholdX,this.swipedVertical=m>this.thresholdY||this.opts.diagonalSwipes&&g>this.thresholdY,(!this.opts.diagonalSwipes||M<Math.tan((45-this.opts.diagonalLimit)*Math.PI/180)||M>Math.tan((45+this.opts.diagonalLimit)*Math.PI/180))&&(v>=m&&(this.swipedVertical=!1),m>v&&(this.swipedHorizontal=!1)),this.swipedHorizontal&&(a<0?((null!==(n=this.velocityX)&&void 0!==n?n:0)<-this.opts.velocityThreshold||T<-this.disregardVelocityThresholdX)&&this.fire("swipeleft",t):((null!==(l=this.velocityX)&&void 0!==l?l:0)>this.opts.velocityThreshold||T>this.disregardVelocityThresholdX)&&this.fire("swiperight",t)),this.swipedVertical&&(p<0?((null!==(u=this.velocityY)&&void 0!==u?u:0)<-this.opts.velocityThreshold||T<-this.disregardVelocityThresholdY)&&this.fire("swipeup",t):((null!==(r=this.velocityY)&&void 0!==r?r:0)>this.opts.velocityThreshold||T>this.disregardVelocityThresholdY)&&this.fire("swipedown",t))):v<this.opts.pressThreshold&&m<this.opts.pressThreshold&&(this.doubleTapWaiting?(this.doubleTapWaiting=!1,clearTimeout(null!==(d=this.doubleTapTimer)&&void 0!==d?d:void 0),this.fire("doubletap",t)):(this.doubleTapWaiting=!0,this.doubleTapTimer=setTimeout((()=>this.doubleTapWaiting=!1),this.opts.doubleTapTime),this.fire("tap",t)))}this.touch1||this.touch2||(this.fire("pinchend",t),this.fire("rotateend",t),this.originalDistance=null,this.newDistance=null,this.scale=null,this.originalAngle=null,this.newAngle=null,this.rotation=null)}}}t.defaults={threshold:(t,i)=>Math.max(25,Math.floor(.15*("x"===t?window.innerWidth||document.body.clientWidth:window.innerHeight||document.body.clientHeight))),velocityThreshold:10,disregardVelocityThreshold:(t,i)=>Math.floor(.5*("x"===t?i.element.clientWidth:i.element.clientHeight)),pressThreshold:8,diagonalSwipes:!1,diagonalLimit:15,longPressTime:500,doubleTapTime:300,mouseSupport:!0};let i=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){i={passive:!0}}}))}catch(t){}return{T:t}}));

SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("CUf8pLla",["GlDbwxoG","s_Igk1Yn"],(async(t,e)=>{let s=class extends e.s{constructor(){super(...arguments),this._events=new t.E(this),this.handleSlotChange=this._events.define("slotchange",(t=>{if(t.target.parentNode!==this.shadowRoot)return;const e=this.renderTemplate();e!==this.content&&(this.content=e,this.requestUpdate())})),this.onSetRouteRequested=this._events.define("shreddit-slotter-set-slot-name",(t=>{!t.defaultPrevented&&this.hasSlot(t.detail.slotName)&&(t.preventDefault(),this.slotName=t.detail.slotName)}))}static get styles(){return[t.t]}update(t){t.has("slotName")&&(this.content=this.renderTemplate(),this.requestUpdate()),super.update(t)}updated(e){e.has("slotName")&&this.slotName&&this.dispatchEvent(t.c("shreddit-slotter-slot-name-changed",{slotName:this.slotName})),super.updated(e)}renderTemplate(){if(!this.slotName)return;const s=this.querySelector(`template[slot=${this.slotName}]`);if(!(s instanceof HTMLTemplateElement))return"";const a=t.a3()?"theme-dark":"theme-light";return e.x`<span class="${a} w-full">${t.K(s)}</span>`}hasSlot(t){return this.querySelector(`template[slot=${t}]`)instanceof HTMLTemplateElement}render(){return e.x` ${this.content||""} <slot></slot> `}};t._([t.n({type:String,attribute:"slot-name",reflect:!0})],s.prototype,"slotName",void 0),s=t._([t.e("shreddit-slotter")],s)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("CVmDfcOX",["GlDbwxoG","s_Igk1Yn"],(async(t,e)=>{var a;let i=a=class extends e.s{constructor(){super(...arguments),this.activationIsEnabled=!1,this.onChatButtonClick=()=>{this.toggleUIState()},this.onChatButtonKeyDown=e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t.ar("web_chat_widget_auto_focus_from_header_ks")?this.toggleUIState():this.maximizeAndFocusChat())}}getChatClientHost(){return document.querySelector("reddit-chat-host")}async activateFeature(){try{await t.j({name:t.as})}catch(e){if(!e.message?.endsWith(`${t.as} not found`))throw e}}async setUIState(){if(a.hasInitialized)return;a.hasInitialized=!0;const t=this.initialView;if(!t)return;this.activationIsEnabled&&await this.activateFeature(),await window.customElements.whenDefined("reddit-chat-host");const e=this.getChatClientHost();e&&e.setUIState?.(t)}async toggleUIState(){await this.activateFeature();const t=this.getChatClientHost();t&&t.toggleUIState?.()}async maximizeAndFocusChat(){await this.activateFeature();const t=this.getChatClientHost();t&&(t.setUIState?.("maximized"),t.setFocusOnChatWidget())}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onChatButtonClick),this.addEventListener("keydown",this.onChatButtonKeyDown),this.setUIState()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onChatButtonClick),this.removeEventListener("keydown",this.onChatButtonKeyDown)}render(){return e.x`<slot></slot>`}};i.hasInitialized=!1,t._([t.n({type:Boolean,attribute:"activation-enabled"})],i.prototype,"activationIsEnabled",void 0),t._([t.n({type:String,attribute:"initial-view"})],i.prototype,"initialView",void 0),i=a=t._([t.e("reddit-chat-header-button")],i)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./BTMXBfyY.js",import.meta.url,"BTMXBfyY");SML.di("./B7hVC8R1.js",import.meta.url,"B7hVC8R1");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("CXs0ue6m",["GlDbwxoG","s_Igk1Yn","BTMXBfyY","B7hVC8R1","CC2wUKE8"],(async(e,t,i,o)=>{var n;const a=e=>e instanceof HTMLIFrameElement&&e.src.includes("recaptcha");let s=n=class extends t.s{constructor(){super(...arguments),this.pageName="",this.withBlur=!1,this.contentHiddenTop=!1,this.contentHiddenBottom=!1,this.isVirtualKeyboardVisible=!1,this.loading=!1,this.events=new e.E(this),this.observer=new e.ap(this,this),this.focusManager=new e.ay(this,this),this.inFocusTrap=!1,this.blocking=!0,this.open=!1,this._enter=this.events.define("faceplate-enter",this.showModal),this._leave=this.events.define("faceplate-leave",this.close),this.refreshFocus=e.a6((()=>this.focusManager.refresh()),100),this.checkForHiddenContent=()=>{if(this.content){const{scrollTop:e,scrollHeight:t,clientHeight:i}=this.content;this.contentHiddenTop=t>i&&e>0,this.contentHiddenBottom=this.isVirtualKeyboardVisible||t>i&&Math.ceil(i+e)<t}},this.handleViewport=e.a6((()=>{const e=window.visualViewport;e&&(e.height<this.clientHeight?(this.style.paddingBottom=this.clientHeight-e.height-e.offsetTop+"px",this.isVirtualKeyboardVisible=!0):(this.style.paddingBottom="0px",this.isVirtualKeyboardVisible=!1),this.checkForHiddenContent())}),100),this.onClick=t=>{const i=t.currentTarget;i instanceof e.cw&&"click"!==i.action&&"view"!==i.action&&(t.preventDefault(),i.trackEvent?.())}}disconnectedCallback(){super.disconnectedCallback(),this.close()}showModal(){n.isReported||this.isValidOrigin()||(e.f(this,o.g(this.pageName)),n.isReported=!0),e.f(this,o.h(this.pageName)),e.hx().then((()=>{e.gU.add(this),this.focusManager.focusFirst(),document.body.style.pointerEvents="auto",document.body.addEventListener("focusin",this.ignoreRecaptchaIframeFocus),document.body.addEventListener("keydown",this.ignoreRecaptchaIframeTab)})),this.addEventListener("focusable-content-loaded",this.refreshFocus),this.mutationObserver=new MutationObserver(this.refreshFocus),this.mutationObserver.observe(this,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["disabled","aria-disabled","class","hidden","slot"]}),this.resizeObserver=new ResizeObserver(this.checkForHiddenContent),this.content&&(this.resizeObserver.observe(this.content),this.content.addEventListener("scroll",this.checkForHiddenContent)),window?.visualViewport?.addEventListener("resize",this.handleViewport),window?.visualViewport?.addEventListener("scroll",this.handleViewport),this.backButtonTrackers.forEach((e=>e.addEventListener("click",this.onClick))),this.closeButtonTrackers.forEach((e=>e.addEventListener("click",this.onClick))),this.dispatchEvent(new CustomEvent(e.eK.Open,{bubbles:!0,composed:!0})),this.open=!0}ignoreRecaptchaIframeFocus(e){a(e.target)&&e.stopPropagation()}ignoreRecaptchaIframeTab(e){"Tab"===e.key&&a(e?.target)&&e?.stopPropagation()}close(){this.open&&(window?.visualViewport?.removeEventListener("resize",this.handleViewport),window?.visualViewport?.removeEventListener("scroll",this.handleViewport),e.gU.remove(this),this.mutationObserver?.disconnect(),this.open=!1)}_getLocation(){return window.location}isValidOrigin(){const e=this._getLocation();return!(!("IS_STORYBOOK"in window)||!window.IS_STORYBOOK)||"https:"===e.protocol&&(e.origin.endsWith(".reddit.com")||e.origin.endsWith(".snoo.dev"))}render(){const o=t.x`${this.isValidOrigin()?"":t.x` <div class="w-100 top-0 start-0 bg-danger-background text-global-white flex items-center justify-center box-border p-md"> ${i.i({attributes:{className:"me-xs"},size:t.I.ExtraLarge})} ${"This page was served from a non-Reddit domain. Please be extra careful."} </div> `} <div class="flex justify-between items-end pt-lg pb-xs px-[var(--topbar-horizontal-padding)]"> <div class="inline-flex items-center gap-md"> <slot name="backButton"></slot> <slot name="titleGraphic"></slot> </div> <slot name="closeButton"></slot> </div>`,n={"border-t-sm":this.contentHiddenTop,"border-b-sm":this.contentHiddenBottom};return t.x`<div class="bg-ui-modalbackground max-w-full flex flex-col basis-full font-sans pointer-events-auto"> ${o} <slot name="title" class="inline-flex py-0 px-[var(--horizontal-padding)]"></slot> <slot name="subtitle" class="inline-flex py-0 px-[var(--horizontal-padding)]"></slot> <slot class="flex flex-col grow shrink overflow-y-auto py-0 px-[var(--horizontal-padding)] border-0 border-solid border-neutral-border ${e.H(n)}"></slot> ${this.loading?t.x`<shreddit-loading class="pointer-events-none h-[8rem]"></shreddit-loading>`:t.x` <slot name="primaryButton" class="inline-flex"></slot>`} </div>`}};s.isReported=!1,s.styles=[t.i`:host{--horizontal-padding:80px;--topbar-horizontal-padding:24px;display:flex;position:fixed;box-sizing:border-box;margin:auto;border-radius:var(--rem16);background:var(--color-ui-modalbackground);overflow:hidden;left:0;right:0;top:50%;transform:translateY(-50%);min-width:320px;width:528px;max-width:528px;min-height:400px;height:100%;max-height:700px}:host([withBlur]){box-shadow:0 0 0 max(100vw,100vh) var(--color-scrim)}slot:not([name]){transition:width .1s ease-in}::slotted([slot=primaryButton]){padding:24px var(--horizontal-padding)}@media (max-width:528px){:host{--horizontal-padding:16px;--topbar-horizontal-padding:16px;max-height:none;width:100%;max-width:none;border-radius:0;padding-bottom:0;transition:padding-bottom .2s ease-in-out}}`,e.t],e._([e.n({type:String})],s.prototype,"pageName",void 0),e._([e.n({type:Boolean})],s.prototype,"withBlur",void 0),e._([e.l({slot:"backButton",selector:"faceplate-tracker"})],s.prototype,"backButtonTrackers",void 0),e._([e.l({slot:"closeButton",selector:"faceplate-tracker"})],s.prototype,"closeButtonTrackers",void 0),e._([e.Q("slot:not([name])",!0)],s.prototype,"content",void 0),e._([e.N()],s.prototype,"contentHiddenTop",void 0),e._([e.N()],s.prototype,"contentHiddenBottom",void 0),e._([e.N()],s.prototype,"isVirtualKeyboardVisible",void 0),e._([e.N()],s.prototype,"loading",void 0),s=n=e._([e.e("auth-flow-modal")],s)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./DoOFmcQZ.js",import.meta.url,"DoOFmcQZ");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CKCUSZ1J.js",import.meta.url,"CKCUSZ1J");
SML.dm("CYzNna7d",["GlDbwxoG","DoOFmcQZ","s_Igk1Yn","CKCUSZ1J"],(async(e,t,a,i)=>{const n=e=>{if(!e)return!1;return e.getTime()+864e5>Date.now()},o=e=>{const t=new Date(e);return isNaN(t?.getTime?.())?null:t};let s=class extends a.s{constructor(){super(...arguments),this.subredditId="",this.prefixedSubredditName="",this.banner="",this.icon="",this.iconColor="",this.subredditDescription="",this.allowJoinRequests=!1,this.subredditType="restricted",this.isCommentingRestricted=!1,this.isPostingRestricted=!1,this.modMessageBody="",this.preventDefault=e=>{e.preventDefault()},this.hasPendingRequest=()=>n(this.lastJoinRequest),this.getStatusText=()=>{switch(!0){case"restricted"===this.subredditType&&this.isCommentingRestricted&&this.isPostingRestricted:return "This is a restricted community. Only approved members can contribute.";case"restricted"===this.subredditType&&this.isPostingRestricted:return "This is a restricted community. Only approved users can post, but you can still comment.";case"restricted"===this.subredditType&&this.isCommentingRestricted:return "This is a restricted community. Only approved users can comment, but you can still post.";case"private"===this.subredditType:default:return "This is a private community. Only approved members can view and contribute.";}},this.handleTextChange=e=>{this.modMessageBody=e.target.value},this.hide=()=>this.dialog?.hide(),this.showModal=()=>{var t;this.dialog?.showModal(),e.f(this,(t=this.subredditType,e.b({source:"content_gate",action:"view",noun:"modal"},{action_info:{setting_value:t}})))},this.requestClientGQL=e.B,this.requestToJoin=async()=>{if(!this.modMessageBody||!this.subredditId)return;var t;e.f(this,(t=this.subredditType,e.b({source:"content_gate",action:"click",noun:"request_to_join"},{action_info:{setting_value:t}})));const{data:a,errors:i}=await this.requestClientGQL({operation:e.C.SendMessageToSubreddit,variables:{input:{body:this.modMessageBody,subject:"[join] Request to join",subredditId:this.subredditId}}});a.sendMessageToSubreddit.ok&&!i.length?(this.allowJoinRequests=!1,await this.requestClientGQL({operation:e.C.UpdateContributorRequestTimestamp,variables:{input:{subredditId:this.subredditId,requestDatetime:(new Date).toUTCString()}}}),this.dispatchEvent(e.c("faceplate-alert",{level:e.X.success,message:"Request to join has been sent"}))):this.dispatchEvent(e.c("faceplate-alert",{level:e.X.error,cause:"uncategorized",message:"Request to join failed to send"}))},this.renderTemplate=()=>a.x`<div class="relative max-w-lg w-100 rounded-md overflow-hidden"> <faceplate-img class="h-[88px] w-full object-cover bg-secondary-background" src="${this.banner}"></faceplate-img> <div class="relative flex items-end gap-sm pl-lg -top-[35px] -mb-[35px]"> ${this.icon?a.x`<img loading="lazy" src="${this.icon}" alt="" class="border-solid border-ui-modalbackground border-md w-[80px] aspect-square rounded-full overflow-hidden">`:i.c({size:a.I.ExtraLarge,attributes:{style:this.iconColor?`color: ${this.iconColor}`:void 0,className:"rounded-full w-[80px] h-[80px] border-neutral-background border-lg border-solid"}})} <h4 class="title text-18 font-bold mb-md bg-cover bg-no-repeat"> ${this.prefixedSubredditName} </h4> </div> ${this.open?a.A:e.Y({appearance:"media",attributes:{className:"absolute top-md right-md ",onclick:this.hide},size:e.a7.Small,leadingIcon:a.c({size:a.I.Small})})} <div class="flex flex-col justify-center px-md"> ${this.isPrivate&&this.subredditDescription?a.x`<p class="description text-14 mt-sm mb-0">${this.subredditDescription}</p>`:a.A} <p class="status-text text-14 mt-sm font-bold">${this.getStatusText()}</p> ${this.allowJoinRequests?a.x`<faceplate-textarea-input size="expanded" appearance="${t.a.SECONDARY}" class="mb-sm" name="textarea" faceplate-focusable required .value="${this.modMessageBody}" @input="${this.handleTextChange}"> <span slot="label">${"Request to join"}</span> </faceplate-textarea-input>`:a.A} </div> <div class="flex justify-end gap-md p-md pt-0"> ${this.isPrivate?e.Y({appearance:"secondary",attributes:{onclick:()=>{return e.f(this,(t=this.subredditType,e.b({source:"content_gate",action:"click",noun:"go_to_homepage_button"},{action_info:{setting_value:t}})));var t},href:"/"},children:"Go To Homepage"}):e.Y({appearance:"secondary",attributes:{onclick:()=>{return e.f(this,(t=this.subredditType,e.b({source:"content_gate",action:"click",noun:"go_to_community_button"},{action_info:{setting_value:t}})));var t},href:`/${this.prefixedSubredditName}`},children:"Go To Community"})} ${this.allowJoinRequests?e.Y({appearance:"primary",attributes:{onclick:this.requestToJoin,disabled:!this.modMessageBody},size:e.a7.Medium,children:"Send Request"}):e.Y({appearance:"primary",attributes:{onclick:()=>{return e.f(this,(t=this.subredditType,e.b({source:"content_gate",action:"click",noun:"message_mods_button"},{action_info:{setting_value:t}})));var t},href:`/message/compose?to=${encodeURIComponent(this.prefixedSubredditName)}`},size:e.a7.Medium,children:"Message Mods"})} </div> </div>`}get isPrivate(){return"private"===this.subredditType}getBgImagePath(){const t=this.isLoggedIn?"home":"popular",a=e.a3()?"dark":void 0,i=this.isDesktop?void 0:"mobile";return`${CLIENT_CONFIG.STATIC_BASE_URL}assets/feeds/${[t,a,i].filter(Boolean).join("-")}.jpg`}connectedCallback(){super.connectedCallback(),this.allowJoinRequests&&this.hasPendingRequest()&&(this.allowJoinRequests=!1),"private"===this.subredditType&&this.updateComplete.then((()=>{this?.dialog?.addEventListener("rpl-dialog:request-close",this.preventDefault),this?.dialog?.showModal()}))}disconnectedCallback(){super.disconnectedCallback(),"private"===this.subredditType&&this?.dialog?.removeEventListener("rpl-dialog:request-close",this.preventDefault),this?.dialog?.hide()}render(){return a.x`<rpl-dialog dialog-id="protected-community-modal" overlay-blur ?open="${this.open}" .litTemplateChildren="${this.renderTemplate()}"> </rpl-dialog>${"private"===this.subredditType&&this.open?a.x` <div class="blurred-bg h-screen-without-header w-100 bg-no-repeat bg-cover" style="background-image:url('${this.getBgImagePath()}')"> <div class="shade h-full w-full"></div> </div>`:a.A}`}};s.styles=[e.t],e._([e.n({type:String,attribute:"subreddit-id"})],s.prototype,"subredditId",void 0),e._([e.n({type:String,attribute:"prefixed-name"})],s.prototype,"prefixedSubredditName",void 0),e._([e.n({type:String,attribute:"banner"})],s.prototype,"banner",void 0),e._([e.n({type:String,attribute:"icon"})],s.prototype,"icon",void 0),e._([e.n({type:String,attribute:"icon-color"})],s.prototype,"iconColor",void 0),e._([e.n({type:String,attribute:"subreddit-description"})],s.prototype,"subredditDescription",void 0),e._([e.n({type:Boolean,attribute:"allow-join-requests",reflect:!0})],s.prototype,"allowJoinRequests",void 0),e._([e.n({type:String,attribute:"last-join-request",converter:{fromAttribute:o}})],s.prototype,"lastJoinRequest",void 0),e._([e.n({type:String,attribute:"subreddit-type"})],s.prototype,"subredditType",void 0),e._([e.n({type:Boolean,attribute:"is-commenting-restricted"})],s.prototype,"isCommentingRestricted",void 0),e._([e.n({type:Boolean,attribute:"is-posting-restricted"})],s.prototype,"isPostingRestricted",void 0),e._([e.n({type:Boolean})],s.prototype,"open",void 0),e._([e.n({type:Boolean})],s.prototype,"isLoggedIn",void 0),e._([e.n({type:Boolean})],s.prototype,"isDesktop",void 0),e._([e.N()],s.prototype,"modMessageBody",void 0),e._([e.Q("rpl-dialog")],s.prototype,"dialog",void 0),s=e._([e.e("protected-community-modal")],s);let r=class extends a.s{constructor(){super(...arguments),this.appearance="primary",this.size=e.a7.Medium,this.unstyled=!1,this.hasPendingRequest=()=>n(this.lastJoinRequest),this.handleOpenModal=t=>{var a;this.hasPendingRequest()&&this.pendingLink||!this._modal||(t.preventDefault(),t.stopPropagation(),this._modal.showModal(),e.f(this,(a=this._modal.subredditType,e.b({source:"content_gate",action:"click",noun:"request_approval_button"},{action_info:{setting_value:a}}))))},this.handleKeydown=e=>{"Enter"!==e.key&&"Space"!==e.key||this.handleOpenModal(e)}}get _modal(){return document.querySelector("protected-community-modal")}render(){return this.unstyled?a.x`<slot @click="${this.handleOpenModal}" @keydown="${this.handleKeydown}" name="${a.l(this.hasPendingRequest()?"pending-request":void 0)}"></slot>`:e.Y({appearance:this.appearance,size:this.size,attributes:{href:this.hasPendingRequest()&&this.pendingLink?this.pendingLink:void 0,disabled:this.disabledWhenPending&&this.hasPendingRequest(),onclick:this.handleOpenModal},children:a.x`<slot name="${a.l(this.hasPendingRequest()?"pending-request":void 0)}"></slot>`})}};r.styles=[e.t],e._([e.n({type:String})],r.prototype,"appearance",void 0),e._([e.n({type:String})],r.prototype,"size",void 0),e._([e.n({type:Boolean})],r.prototype,"unstyled",void 0),e._([e.n({type:Boolean,attribute:"disabled-when-pending"})],r.prototype,"disabledWhenPending",void 0),e._([e.n({type:String,attribute:"pending-link"})],r.prototype,"pendingLink",void 0),e._([e.n({type:String,attribute:"last-join-request",converter:{fromAttribute:o}})],r.prototype,"lastJoinRequest",void 0),r=e._([e.e("protected-community-modal-trigger")],r)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("CZ5pw6qE",["GlDbwxoG","s_Igk1Yn"],(async(e,i)=>{let t=class extends i.s{constructor(){super(...arguments),this._imageElem=null,this._traceCompleted=!1,this._imageStartTiming=0,this._imageLoadedTiming=0,this._imageReadyTiming=0,this._observer=new e.bp,this._hasBeenInView=!1,this.placement="image_post",this.onEnter=()=>{this._hasBeenInView=!0,this._imageStartTiming||(this._imageStartTiming=Date.now()),this.applyListeners(),this._timeoutTimer||(this._timeoutTimer=setTimeout((()=>{this._imageElem?.complete&&this._imageElem?.naturalWidth||this.sendImageMetric("download_fail")}),6e4))},this.onLeave=()=>{if(this._traceCompleted||!this._hasBeenInView||!this._imageStartTiming)return;const e=Date.now()-this._imageStartTiming>=150;!this._imageReadyTiming&&e&&this.sendImageMetric("exit_before_visible")},this.onLoad=()=>{this._imageLoadedTiming=Date.now(),this.poll()},this.onError=()=>{this.sendImageMetric("download_fail")},this.checkStatus=e=>{if(e.naturalWidth&&!this._imageReadyTiming)return this._imageLoadedTiming||(this._imageLoadedTiming=Date.now()),this._imageReadyTiming=Date.now(),this.sendImageMetric(),!0;e.complete&&!this._imageLoadedTiming&&(this._imageLoadedTiming=Date.now(),this.poll());const i=Date.now()-this._imageLoadedTiming;return this._pollVisibleInterval&&i>1e4&&this.sendImageMetric("download_fail"),!1}}connectedCallback(){if(super.connectedCallback(),this._traceCompleted)return;if(this._imageElem=this.previousElementSibling,!this._imageElem.tagName.includes("IMG"))throw new Error("<image-observer> must be immediately after the observed <img> in the DOM");this.checkStatus(this._imageElem)||(this._observer.observe(this._imageElem),this._imageElem.addEventListener("faceplate-enter",this.onEnter),this._imageElem.addEventListener("faceplate-leave",this.onLeave))}disconnectedCallback(){super.disconnectedCallback(),this._observer.unobserve(this._imageElem),this._imageElem?.removeEventListener("faceplate-enter",this.onEnter),this._imageElem?.removeEventListener("faceplate-leave",this.onLeave),this.cleanup()}applyListeners(){if(!this._imageElem)return;this.checkStatus(this._imageElem)||(this._imageElem.addEventListener("load",this.onLoad,{once:!0}),this._imageElem.addEventListener("error",this.onError,{once:!0}))}cleanup(){clearInterval(this._pollVisibleInterval),clearTimeout(this._timeoutTimer),this._imageElem?.removeEventListener("load",this.onLoad),this._imageElem?.removeEventListener("error",this.onError),this._imageStartTiming=0,this._imageLoadedTiming=0,this._imageReadyTiming=0}poll(){!this._pollVisibleInterval&&this._hasBeenInView&&(this._pollVisibleInterval=setInterval((()=>{this.checkStatus(this._imageElem)}),25))}sendImageMetric(i=void 0){const t=this._getPostInfo(),s=this._getGalleryInfo();let a,n;t&&({position:n,...a}=t);const m=this._imageStartTiming||this._imageLoadedTiming||this._imageReadyTiming||Date.now(),o=this._imageReadyTiming||Date.now(),r={source:"image",action:"trace",noun:"performance",client_timestamp:Date.now(),image_trace:{get_image_start_timestamp:m,image_ready_timestamp:o,view_visibile_timestamp:m},media:{width:this._imageElem?.naturalWidth,height:this._imageElem?.naturalHeight,url:this._imageElem?.src,placement:this.placement},action_info:{position:n,reason:i,page_type:e.w()}};a&&(r.post=a),s&&(r.gallery=s),this._sendEvent(r),this.cleanup(),"exit_before_visible"!==i&&(this._traceCompleted=!0)}_getPostInfo(){const i=this.closest("shreddit-post, shreddit-ad-post");if(i)return{id:i.id,promoted:i.nodeName.includes("AD"),nsfw:i.nsfw,view_type:i.viewType===e.a5.CompactView?"classic":"card",position:i.feedIndex}}_getGalleryInfo(){if(!this.closest("gallery-carousel"))return;const e=this.closest("li")?.getAttribute("slot");return e?{position:Number(e.split("-")[1])-1}:void 0}_sendEvent(i){e.f(this,i)}createRenderRoot(){return this}};e._([e.n()],t.prototype,"placement",void 0),t=e._([e.e("image-observer")],t)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./DMa5Y6a9.js",import.meta.url,"DMa5Y6a9");
SML.dm("CZ7YNHqf",["GlDbwxoG","s_Igk1Yn","CC2wUKE8","DMa5Y6a9"],(async(e,t,o,n)=>{let a=class extends t.s{constructor(){super(...arguments),this.number=0,this.locale="",this.pretty=!1}getLocale(){return this.locale||o.bp()}createRenderRoot(){return this}render(){const e=this.formatOptions?{options:this.formatOptions}:{short:this.pretty};return n.f(this.number,this.getLocale(),e)}};return e._([e.n({type:Number})],a.prototype,"number",void 0),e._([e.n({type:String})],a.prototype,"locale",void 0),e._([e.n({type:Object})],a.prototype,"formatOptions",void 0),e._([e.n({type:Boolean})],a.prototype,"pretty",void 0),a=e._([e.e("faceplate-number")],a),{a:function(t,o=!1){return o||0!==t?e.bI({one:`Allows up to ${t} emoji`,other:`Allows up to ${t} emojis`,count:t}):"";},b:function(t,o=!1){return o||0!==t?e.bI({one:`${t} question left today.`,other:`${t} questions left today.`,count:t}):"";},c:function(t,o=!1){return o||0!==t?e.bI({one:`${t} question left this week.`,other:`${t} questions left this week.`,count:t}):"";},d:function(e){const{count:t,none:o,single:n,many:a}=e;return 0===t&&void 0!==o?o:1===t?n:a},p:function(t,o=!1){return o||0!==t?e.bI({one:`Allows text and up to ${t} emoji`,other:`Allows text and up to ${t} emojis`,count:t}):"";}};}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("CZPCygeT",["GlDbwxoG","s_Igk1Yn","CC2wUKE8"],(async(e,a,t)=>{let r=class extends e.gZ{constructor(){super(...arguments),this._fullscreenBlurEl=document.createElement("div"),this._appliedBlurFilter=null,this._blurElement=null,this.shouldContentScroll=!1,this.isFooterEmpty=!0,this.render=()=>{const t=a.x`<slot name="closeButton" class="${e.H({floating:this.shouldContentScroll})}"></slot>`,r=a.x`<div id="header" class="${e.H({"with-icon":this._titleGraphic.length>0})}"> <slot name="titleGraphic"></slot> <slot name="title"></slot> </div>`,n=a.x`<slot name="primaryButton" @slotchange="${this.calcFooterChildren}"></slot> <slot name="secondaryButton" @slotchange="${this.calcFooterChildren}"></slot> <slot name="tertiaryButton" @slotchange="${this.calcFooterChildren}"></slot>`;return a.x` ${e.cx(this.modal?"\n  <style>\n    :host {\n      top: 50%;\n      transform: translateY(-50%);\n      position: fixed;\n    }\n  </style>\n":"\n  <style>\n    :host {\n      position: absolute;\n    }\n  </style>\n")} <div id="wrapper" role="${a.l(this.open?"dialog":void 0)}" aria-label="${a.l(this.ariaLabel??void 0)}" aria-labelledby="${a.l(null!=this.ariaLabel?void 0:"header-container")}" aria-modal="${a.l(this.open&&this.modal?"true":void 0)}"> <div id="content"> ${t} <div id="header-container">${r}</div> <slot></slot> </div> <div id="footer" class="${e.H({"sticky-footer":this.shouldContentScroll,empty:this.isFooterEmpty})}"> ${n} <slot name="footer" @slotchange="${this.calcFooterChildren}"></slot> </div> </div> `}}static get styles(){return a.i`${e.gZ.styles}:host{--content-padding:var(--spacer-md);box-sizing:border-box;max-width:none;border-radius:var(--rem16);padding:0;overflow:hidden}#wrapper{display:flex;flex-direction:column;align-items:center;height:100%;position:relative;font-size:16px;box-sizing:border-box;max-height:inherit;min-height:inherit;overflow:hidden}slot[name=closeButton]{display:inline-flex;position:absolute;position:absolute;top:0;inset-inline-end:0;margin:var(--content-padding)}#header{display:flex;flex-direction:column;gap:var(--spacer-sm);align-items:center;text-align:start;width:100%;box-sizing:border-box}#header.with-icon{text-align:center;padding:0 var(--rem40)}slot[name=title]{font-size:var(--rem18);font-weight:700}slot:not([name]){display:flex;flex-grow:1;width:100%;padding:var(--spacer-xs) 0;font-size:var(--rem14)}#footer{display:flex;flex-direction:column;gap:var(--spacer-sm);width:100%;background:var(--color-ui-modalbackground);padding:var(--spacer-md);box-sizing:border-box}slot[name=tertiaryButton]{display:inline-flex;justify-content:center;font-size:14px}#footer.empty{display:none}@media (min-width:640px){#content{padding:var(--content-padding)}#header,#header.with-icon{flex-direction:row;padding-inline:0 var(--spacer-2xl)}#footer{flex-direction:row-reverse;align-items:center;justify-content:end}slot[name=tertiaryButton]{margin-inline-end:auto}slot[name=title]{text-align:start}}#content{height:100%;max-height:100%;width:100%;overflow:auto;position:relative;--content-padding:var(--spacer-md);padding:var(--content-padding);box-sizing:border-box;flex:1}.overflowing-content{max-height:100%;overflow-y:auto}.sticky-footer{box-shadow:var(--elevation-md)}slot[name=closeButton].floating{box-shadow:var(--elevation-sm);border-radius:999px}`}connectedCallback(){super.connectedCallback(),Object.assign(this._fullscreenBlurEl.style,{position:"fixed",top:"0",bottom:"0",right:"0",left:"0",backdropFilter:n(4)})}disconnectedCallback(){this._fullscreenBlurEl.remove(),e.gT.remove(this),this.resizeObserver?.disconnect()}firstUpdated(){this.resizeObserver=new ResizeObserver((()=>{this.measureShouldContentScroll()})),this.resizeObserver.observe(this.content)}calcFooterChildren(){this.isFooterEmpty=!(this._footerSlot?.length||this._primaryButtonSlot?.length||this._secondaryButtonSlot?.length||this._tertiaryButtonSlot?.length)}measureShouldContentScroll(){this.shouldContentScroll=Boolean(this.content?.scrollHeight&&this.content?.scrollHeight>this.content.offsetHeight)}showModal(a){if(e.gT.add(this),super.showModal(),null!=a?.blur){const e=!0===a.blur?4:Number(a.blur);this._appliedBlurFilter=n(e),a?.blurElement?(this._blurElement=a.blurElement,t=this._blurElement,r=this._appliedBlurFilter,t.style.filter=t.style.filter+" "+r):(Object.assign(this._fullscreenBlurEl.style,{backdropFilter:this._appliedBlurFilter}),document.body.append(this._fullscreenBlurEl))}var t,r}close(){this.open&&(super.close(),e.gT.remove(this),null!=this._blurElement&&null!=this._appliedBlurFilter?(!function(e,a){const t=e.style.filter.split(" ").filter(Boolean).reverse(),r=t.indexOf(a);if(-1===r)return;t.splice(r,1),e.style.filter=t.reverse().join(" ")}(this._blurElement,this._appliedBlurFilter),this._appliedBlurFilter=null,this._blurElement=null):this._fullscreenBlurEl.remove())}};function n(e){return`blur(${e}px)`}e._([e.N()],r.prototype,"shouldContentScroll",void 0),e._([e.l({slot:"titleGraphic"})],r.prototype,"_titleGraphic",void 0),e._([e.Q("#content")],r.prototype,"content",void 0),e._([e.Q("#footer")],r.prototype,"footer",void 0),e._([e.N()],r.prototype,"isFooterEmpty",void 0),e._([e.at({slot:"footer",flatten:!0})],r.prototype,"_footerSlot",void 0),e._([e.at({slot:"primaryButton",flatten:!0})],r.prototype,"_primaryButtonSlot",void 0),e._([e.at({slot:"secondaryButton",flatten:!0})],r.prototype,"_secondaryButtonSlot",void 0),e._([e.at({slot:"tertiaryButton",flatten:!0})],r.prototype,"_tertiaryButtonSlot",void 0),r=e._([e.e("faceplate-modal")],r);function i(e){return e?.[0]?.message??"Something went wrong";}const o=e=>({error:e||"There was an error uploading the file."});async function l(a,r){const n=t.P.get(a.type);if(!n)throw new Error(`${a.type} files are not supported.`);try{const l=await async function(a){const t=await e.B({operation:e.C.CreateSubredditStructuredStylesUploadLease,variables:{input:a}});if(t.errors?.length)throw new Error(i(t.errors));const r=t.data.createSubredditStructuredStylesUploadLease;if(r?.ok&&r.uploadLease)return{uploadLeaseUrl:r.uploadLease.uploadLeaseUrl,uploadLeaseHeaders:r.uploadLease.uploadLeaseHeaders};throw new Error(i(r?.errors))}({...r,filepath:a.name,mimetype:n}),s=await t.Q(a,l);return s?{url:s}:o()}catch(e){return l=e.message,window.Sentry?.captureMessage?.(`Media file upload failed with error: ${l}`),o(e.message)}var l}return {C:class{constructor(){this.url=void 0}async makeGQLRequest(...a){return e.B(...a)}async uploadMedia(...e){return l(...e)}async saveImage({subredditId:e,url:a,fileContent:t,uploadType:r,gqlOperation:n}){if(t)try{const n=await this.uploadMedia(t,{subredditId:e,imagetype:r});if(a=n.url?decodeURIComponent(n.url):a,n.error)return this.handleError(r);this.url=a}catch(e){return this.handleError(r)}try{await this.makeGQLRequest({operation:n,variables:{input:{subredditId:e,[this.getOperationArg(r)]:a??""}}})}catch(e){return this.handleError(r)}return null}async saveCommunityIcon(a,t,r){return this.saveImage({subredditId:a,url:t,fileContent:r,uploadType:e.g_.CommunityIcon,gqlOperation:e.C.UpdateSubredditIcon})}async saveBanner(a,t,r){return this.saveImage({subredditId:a,url:t,fileContent:r,uploadType:e.g_.BannerBackgroundImage,gqlOperation:e.C.UpdateSubredditBanner})}async saveMobileBanner(a,t,r){return this.saveImage({subredditId:a,url:t,fileContent:r,uploadType:e.g_.MobileBannerImage,gqlOperation:e.C.UpdateSubredditBanner})}handleError(a){switch(a){case e.g_.BannerBackgroundImage:return "Something went wrong while saving the banner.";case e.g_.MobileBannerImage:return "Something went wrong while saving the mobile banner.";case e.g_.CommunityIcon:default:return "Something went wrong saving the avatar.";}}getOperationArg(a){switch(a){case e.g_.BannerBackgroundImage:return"bannerBackgroundImage";case e.g_.MobileBannerImage:return"mobileBannerImage";case e.g_.CommunityIcon:default:return"communityIcon"}}},get F(){return r},O:"mod-show-post-level-crowd-control-modal",u:l};}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./C-d7BR1A.js",import.meta.url,"C-d7BR1A");SML.di("./CJ4Bucp-.js",import.meta.url,"CJ4Bucp-");SML.di("./CT6o3cIS.js",import.meta.url,"CT6o3cIS");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DSgcmNT3.js",import.meta.url,"DSgcmNT3");SML.di("./Cjw2ByTc.js",import.meta.url,"Cjw2ByTc");SML.di("./8tELWdqF.js",import.meta.url,"8tELWdqF");SML.di("./jTp_btYX.js",import.meta.url,"jTp_btYX");SML.di("./BJSmnD7s.js",import.meta.url,"BJSmnD7s");SML.di("./BM-DpnLu.js",import.meta.url,"BM-DpnLu");SML.di("./Be8KYlVI.js",import.meta.url,"Be8KYlVI");SML.di("./jzNEIPwx.js",import.meta.url,"jzNEIPwx");SML.di("./BvOcWFza.js",import.meta.url,"BvOcWFza");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./DNASVThB.js",import.meta.url,"DNASVThB");SML.di("./UWmwcM6M.js",import.meta.url,"UWmwcM6M");SML.di("./FagDXDzk.js",import.meta.url,"FagDXDzk");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");SML.di("./UW8poupv.js",import.meta.url,"UW8poupv");SML.di("./CvMMXn2K.js",import.meta.url,"CvMMXn2K");SML.di("./CmgOir_w.js",import.meta.url,"CmgOir_w");SML.di("./DIbtn8u6.js",import.meta.url,"DIbtn8u6");SML.di("./DzMpUNmB.js",import.meta.url,"DzMpUNmB");SML.di("./D9vf8s3n.js",import.meta.url,"D9vf8s3n");SML.di("./DR8uYI_f.js",import.meta.url,"DR8uYI_f");SML.di("./S5oUweHp.js",import.meta.url,"S5oUweHp");
SML.dm("C_7yp99g",["GlDbwxoG","C-d7BR1A","CJ4Bucp-","CT6o3cIS","s_Igk1Yn","DSgcmNT3","Cjw2ByTc","8tELWdqF","jTp_btYX","BJSmnD7s","BM-DpnLu","Be8KYlVI","jzNEIPwx","BvOcWFza","CC2wUKE8","DNASVThB","UWmwcM6M","FagDXDzk","DRM-oTYq","D-MAMWlw","DIbtn8u6","DzMpUNmB","D9vf8s3n","DR8uYI_f","S5oUweHp","UW8poupv","CvMMXn2K","CmgOir_w"],(async(e,t,i,a,o,n,s,r,l,d,m,h,c,u,p,k,N,R,I,T,g,A,E,b,S)=>{let v=class extends a.M{constructor(){super(...arguments),this.hasParent=!1,this.pubsub=new e.m(this),this.handleCommentUpdate=({commentId:a,action:o,value:n})=>{if(a===this.thingId)switch(o){case t.C.lock:this.isLocked=Boolean(n);break;case t.C.sticky:this.isStickied=Boolean(n);break;case t.C.distinguishAsMod:this.distinguishedAs=n?e.dC.Moderator:void 0;break;case t.C.distinguishAsAdmin:this.distinguishedAs=n?e.dC.Admin:void 0;break;case t.C.approve:case t.C.approveOptimistic:this.isRemoved=!1,this.hasRemovalReason=!1,this.verdict=e.a4.ModApproved,this.itemState=i.M.APPROVED,this.hasReports=!1;break;case t.C.remove:case t.C.removeAsSpam:case t.C.confirmRemoval:case t.C.removeOptimistic:case t.C.removeAsSpamOptimistic:case t.C.confirmRemovalOptimistic:this.isRemoved=!0,this.verdict=e.a4.ModRemoved,this.itemState=i.M.REMOVED,this.hasReports=!1;break;case t.C.addRemovalReason:this.hasRemovalReason=Boolean(n);break;case t.C.ignoreReports:this.isReportingIgnored=Boolean(n),n&&(this.isRemoved=!1,this.verdict=e.a4.ModApproved,this.itemState=i.M.APPROVED)}}}get isStickyable(){return super.isStickyable&&this.isCurrentUserAuthor&&!this.hasParent}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(e.T.CommentUpdated,this.handleCommentUpdate)}renderActions(){return [this.renderConfirmRemovalAction(),this.renderApproveAction(),this.renderRemoveAction(),this.isContentLevelModsCommsEnabled?this.renderShareToModChatAction(this.modContentDiscussionContext):null,this.renderSpamAction(),this.renderIgnoreReportsAction(),this.renderUnignoreReportsAction(),this.renderAddRemovalReasonAction(),this.renderDistinguishAction(),this.renderUndistinguishAction(),this.renderStickyAction("Sticky comment"),this.renderUnstickyAction("Unsticky comment"),this.renderLockAction("Lock comment"),this.renderUnlockAction("Unlock comment"),this.renderCopyLinkAction()];}};e._([e.n({type:Boolean,attribute:"has-parent"})],v.prototype,"hasParent",void 0),v=e._([e.e("shreddit-comment-mod-actions-menu")],v);let C=class extends o.s{constructor(){super(...arguments),this.feedViewType=e.a5.ModQueueCompactView,this.viewContext=I.P.CommentsPage,this.itemState=i.M.UNMODERATED,this.hasReports=!1,this.isModMode=!1,this.isRemoved=!1,this.isDeleted=!1,this.isLocked=!1,this.isStickied=!1,this.isHighlighted=!1,this.isCurrentUserAuthor=!1,this.hasParent=!1,this.isIconOnly=!1,this.hasRemovalReason=!1,this.permalink="",this.isDesktopViewport=!1,this.isSpamFilteredPost=!1,this.isProfilePost=!1,this.isPromotedPost=!1,this.hasFlairPermissions=!1,this.areHighlightsEnabled=!1,this.hideInlineActions=!1,this.isSmartEscalations=!1,this.isContentLevelModsCommsEnabled=!1,this.modContentDiscussionContext=void 0,this.isFeedNoApproveEnabled=!1,this.focusChatTextareaFn=s.f,this.moderationState=i.M.UNMODERATED,this.pubsub=new e.m(this),this._handleThingUpdate=e=>{let a="";if("awardOnContentId"in e?a=e.awardOnContentId:"commentId"in e?a=e.commentId:"postId"in e&&(a=e.postId),a!==this.thingId)return;const{value:o}=e;switch(e.action){case T.a.approve:case t.C.approve:case N.A.approve:case t.C.approveOptimistic:this.hasRemovalReason=!1,this.isRemoved=!1,this.moderationState=i.M.APPROVED;break;case T.a.remove:case T.a.removeAsSpam:case T.a.confirmRemoval:case t.C.remove:case t.C.removeAsSpam:case t.C.confirmRemoval:case N.A.remove:case N.A.confirmRemoval:case t.C.removeOptimistic:case t.C.removeAsSpamOptimistic:case t.C.confirmRemovalOptimistic:this.isRemoved=!0,this.moderationState=i.M.REMOVED;break;case T.a.addRemovalReason:case t.C.addRemovalReason:this.hasRemovalReason=!0;break;case T.a.updateHighlightedPost:this.isHighlighted=o;break;case T.a.lock:case t.C.lock:this.isLocked=o;break;case T.a.delete:this.isDeleted=o;break;case T.a.sticky:case t.C.sticky:this.isStickied=o}}}get itemType(){return this.thingId?k.i(this.thingId):null}get isPost(){return this.itemType===e.M.Post}get isCompactView(){return this.feedViewType===e.a5.CompactView}get isOnModqueuePage(){return this.viewContext===I.P.ModQueue||this.viewContext===I.P.ModQueueAll}get isApproved(){return this.moderationState===i.M.APPROVED}get shouldShowConfirmRemoval(){return i.a(this.moderationState,this.isSpamFilteredPost)}get shouldShowActionInline(){return i.b(this.viewContext,this.feedViewType)&&!this.isIconOnly&&!this.hideInlineActions}get isStickyable(){const e=!(this.viewContext===I.P.ProfileFeed||this.viewContext===I.P.ProfileFeed2),t=this.isCurrentUserAuthor&&!this.hasParent;return this.isPost?e:e&&t}get itemTopic(){switch(this.itemType){case e.M.Award:return e.T.AwardOnContentUpdated;case e.M.Comment:return e.T.CommentUpdated;case e.M.Post:return e.T.PostUpdated;default:return null}}connectedCallback(){super.connectedCallback(),this.moderationState=this.itemState,this.itemTopic&&this.pubsub.subscribe(this.itemTopic,this._handleThingUpdate)}getApproveButtonAppearance(){const e=p.aj()?"bordered":"secondary";return this.isCompactView?e:this.shouldShowConfirmRemoval||this.hasReports?"primary":(this.moderationState,i.M.REMOVED,e)}renderApproveAction(){return (this.isModMode||this.isOnModqueuePage)&&i.c(this.moderationState)?this.isFeedNoApproveEnabled&&!this.isOnModqueuePage&&this.moderationState===i.M.UNMODERATED?null:o.x` <mod-action-button screen-reader-content="${"Approve content"}" data-mod-action="${R.M.ApproveContent}" button-appearance="${this.getApproveButtonAppearance()}" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center">${o.C({attributes:{"aria-hidden":"true"},size:o.I.Small})}</span> <span slot="text">${"Approve"}</span> </mod-action-button> `:null;}renderRemoveAction(){return (this.isModMode||this.isOnModqueuePage)&&i.d(this.moderationState)?this.isFeedNoApproveEnabled&&!this.isOnModqueuePage&&this.moderationState===i.M.UNMODERATED?null:o.x` <mod-action-button screen-reader-content="${"Remove content"}" data-mod-action="${R.M.RemoveContent}" button-appearance="${p.aj()?"bordered":"secondary"}" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center">${o.c({attributes:{"aria-hidden":"true"},size:o.I.Small})}</span> <span slot="text"> ${"Remove"} </span> </mod-action-button> `:null;}renderConfirmRemovalAction(){return (this.isModMode||this.isOnModqueuePage)&&this.shouldShowConfirmRemoval?o.x` <mod-action-button screen-reader-content="${"Confirm Removal"}" data-mod-action="${R.M.ConfirmRemoval}" button-appearance="${p.aj()?"bordered":"secondary"}" ?show-full-buttons="${!this.isIconOnly}" thing-id="${o.l(this.thingId)}" ?smart-escalations-tracking="${this.isSmartEscalations}"> <span slot="icon" class="flex justify-center">${o.c({attributes:{"aria-hidden":"true"},size:o.I.Small})}</span> <span slot="text"> ${"Confirm Removal"} </span> </mod-action-button> `:null;}renderSpamAction(){return i.e({moderationState:this.moderationState,isSpamFilteredPost:this.isSpamFilteredPost,isRemoved:this.isRemoved,isPromotedPost:this.isPromotedPost})&&this.shouldShowActionInline?o.x` <mod-action-button screen-reader-content="${"Remove content as spam"}" data-mod-action="${R.M.RemoveContentAsSpam}" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center">${l.s({attributes:{"aria-hidden":"true"},size:o.I.Small})}</span> <span slot="text"> ${"Spam"} </span> </mod-action-button> `:null;}renderShareToModChatAction(){if(!i.f({isPromotedPost:this.isPromotedPost})||!this.isContentLevelModsCommsEnabled||!this.modContentDiscussionContext?.modChatChannel||!this.isOnModqueuePage||this.isOnModqueuePage&&!this.shouldShowActionInline&&!this.modContentDiscussionContext.modContentDiscussion)return null;let e=this.modContentDiscussionContext?.modContentDiscussion?`${g.g(this.modContentDiscussionContext.modContentDiscussion.chatChannel?.roomId,this.modContentDiscussionContext.modContentDiscussion.chatMessage?.id)}/thread`:g.a(this.modContentDiscussionContext?.modChatChannel?.roomId);this.modContentDiscussionContext?.modContentDiscussion||(e+=`?draft=${encodeURIComponent("https://www.reddit.com"+this.permalink)}`);const t=this.modContentDiscussionContext?.modContentDiscussion?R.M.ViewChatThread:R.M.ShareToModChat,a=this.modContentDiscussionContext?.modContentDiscussion?"Open chat thread":"Share to mod chat",n=this.modContentDiscussionContext?.modContentDiscussion?"Open chat thread":"Share to mod chat";return o.x` <faceplate-tracker source="moderator" action="click" noun="${this.modContentDiscussionContext?.eventContext?.noun}" data-faceplate-tracking-context="${JSON.stringify({subreddit:{id:this.modContentDiscussionContext?.eventContext?.subredditId,name:this.modContentDiscussionContext?.eventContext?.subredditName},post:{id:this.modContentDiscussionContext?.eventContext?.postId},...(this.modContentDiscussionContext?.eventContext?.roomId && {chat:{id:this.modContentDiscussionContext?.eventContext?.roomId}}),...(this.modContentDiscussionContext?.eventContext?.commentId && {comment:{id:this.modContentDiscussionContext?.eventContext?.commentId}})})}" slot="mod-share-to-mod-chat"> <share-to-mod-chat-coachmark location="${this.modContentDiscussionContext?.modContentDiscussion?"modQueueChat":"modQueue"}" view-context="${this.viewContext}"> <reddit-chat-anchor> <a href="${e}"> <div class="relative"> <mod-action-button screen-reader-content="${a}" button-appearance="plain" data-mod-action="${t}"> <span slot="icon" class="flex justify-center"> ${r.c({attributes:{"aria-hidden":"true"},size:o.I.Small})} </span> <span slot="text"> ${n} </span> </mod-action-button> </div> </a> </reddit-chat-anchor> </share-to-mod-chat-coachmark> </faceplate-tracker> `;}renderFlairAction(){return this.isPost&&this.shouldShowActionInline?o.x` <mod-action-button screen-reader-content="${"Open post flair modal"}" data-mod-action="${R.M.OpenEditPostFlairModal}" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center">${d.t({attributes:{"aria-hidden":"true"},size:o.I.Small})}</span> <span slot="text"> ${"Flair"} </span> </mod-action-button>`:null;}renderAddRemovalReasonAction(){return (this.isModMode||this.isOnModqueuePage)&&this.itemType!==e.M.Award&&i.s(this.moderationState,this.hasRemovalReason,this.isSpamFilteredPost,this.isProfilePost)?o.x` <mod-action-button screen-reader-content="${"Add removal reason"}" data-mod-action="${R.M.AddRemovalReason}" button-appearance="${p.aj()?"bordered":"secondary"}" ?show-full-buttons="${!0}"> <span slot="icon" class="flex justify-center">${n.a({attributes:{"aria-hidden":"true"},size:o.I.Small})}</span> <span slot="text"> ${"Add removal reason"} </span> </mod-action-button> ${this.isIconOnly?o.x`<div class="separator"></div>`:null} `:null;}renderCopyLinkAction(){return this.shouldShowActionInline?this.isPost?o.x`<shreddit-post-share-button ?use-button="${!0}" ?is-desktop-viewport="${this.isDesktopViewport}" permalink="${this.permalink}" size="${e.a7.Small}" ?show-full-buttons="${!this.isIconOnly}"></shreddit-post-share-button>`:o.x`<shreddit-comment-share-button slot="comment-share" ?use-button="${!0}" ?is-desktop-viewport="${this.isDesktopViewport}" permalink="${this.permalink}" ?show-full-buttons="${!this.isIconOnly}"></shreddit-comment-share-button>`:null}renderLockAction(){if(!this.shouldShowActionInline||this.isLocked)return null;const e="Lock";return o.x` <mod-action-button screen-reader-content="${e}" data-mod-action="${R.M.Lock}" event-noun="lock" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center"> ${h.l({attributes:{"aria-hidden":"true"},size:o.I.Small})} </span> <span slot="text"> ${e} </span> </mod-action-button>`}renderUnlockAction(){if(!this.shouldShowActionInline||!this.isLocked)return null;const e="Unlock";return o.x` <mod-action-button screen-reader-content="${e}" data-mod-action="${R.M.Unlock}" event-noun="unlock" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center"> ${m.l({attributes:{"aria-hidden":"true"},size:o.I.Small})} </span> <span slot="text"> ${e} </span> </mod-action-button>`}renderStickyAction(){if(!this.isStickyable||!this.shouldShowActionInline||this.isStickied||this.areHighlightsEnabled)return null;const e="Sticky";return o.x` <mod-action-button screen-reader-content="${e}" data-mod-action="${R.M.Sticky}" event-noun="sticky" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center"> ${u.p({attributes:{"aria-hidden":"true"},size:o.I.Small})} </span> <span slot="text"> ${e} </span> </mod-action-button>`}renderUnstickyAction(){if(!this.isStickyable||!this.shouldShowActionInline||!this.isStickied||this.areHighlightsEnabled)return null;const e="Unsticky";return o.x` <mod-action-button screen-reader-content="${e}" data-mod-action="${R.M.Unsticky}" event-noun="unsticky" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center"> ${c.p({attributes:{"aria-hidden":"true"},size:o.I.Small})} </span> <span slot="text"> ${e} </span> </mod-action-button>`}renderAddToHighlightsAction(){if(!this.isStickyable||!this.shouldShowActionInline||!this.areHighlightsEnabled||!l.H.has(this.viewContext)||this.isHighlighted)return null;const e="Add to highlights";return o.x` <mod-action-button screen-reader-content="${e}" data-mod-action="${R.M.UpdateHighlightedPost}" event-noun="highlight" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center"> ${u.p({attributes:{"aria-hidden":"true"},size:o.I.Small})} </span> <span slot="text"> ${e} </span> </mod-action-button>`}renderRemoveFromHighlightsAction(){if(!(this.isStickyable&&this.shouldShowActionInline&&this.areHighlightsEnabled&&l.H.has(this.viewContext)&&this.isHighlighted))return null;const e="Remove from highlights";return o.x` <mod-action-button screen-reader-content="${e}" data-mod-action="${R.M.RemoveHighlightedPost}" event-noun="unhighlight" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center"> ${c.p({attributes:{"aria-hidden":"true"},size:o.I.Small})} </span> <span slot="text"> ${e} </span> </mod-action-button>`}render(){return o.x` ${this.renderAddRemovalReasonAction()} ${this.renderApproveAction()} ${this.renderRemoveAction()} ${this.renderConfirmRemovalAction()} ${this.renderShareToModChatAction()} ${this.renderSpamAction()} ${this.renderFlairAction()} ${this.renderLockAction()} ${this.renderUnlockAction()} ${this.renderCopyLinkAction()} ${this.renderStickyAction()} ${this.renderUnstickyAction()} ${this.renderAddToHighlightsAction()} ${this.renderRemoveFromHighlightsAction()} `}};C.styles=[e.t,o.i`:host{display:flex;gap:var(--spacer-xs)}.separator{border-left:1px solid rgb(0,0,0,.1);width:1px;height:32px}`],e._([e.n({type:String,attribute:"thing-id"})],C.prototype,"thingId",void 0),e._([e.n({type:String,attribute:"feed-view-type"})],C.prototype,"feedViewType",void 0),e._([e.n({type:String,attribute:"view-context"})],C.prototype,"viewContext",void 0),e._([e.n({type:String,attribute:"item-state"})],C.prototype,"itemState",void 0),e._([e.n({type:Boolean,attribute:"has-reports"})],C.prototype,"hasReports",void 0),e._([e.n({type:Boolean,attribute:"mod-mode"})],C.prototype,"isModMode",void 0),e._([e.n({type:Boolean,attribute:"removed"})],C.prototype,"isRemoved",void 0),e._([e.n({type:Boolean,attribute:"deleted"})],C.prototype,"isDeleted",void 0),e._([e.n({type:Boolean,attribute:"locked"})],C.prototype,"isLocked",void 0),e._([e.n({type:Boolean,attribute:"stickied"})],C.prototype,"isStickied",void 0),e._([e.n({type:Boolean,attribute:"highlighted"})],C.prototype,"isHighlighted",void 0),e._([e.n({type:Boolean,attribute:"current-user-author"})],C.prototype,"isCurrentUserAuthor",void 0),e._([e.n({type:Boolean,attribute:"has-parent"})],C.prototype,"hasParent",void 0),e._([e.n({type:Boolean,attribute:"icon-only"})],C.prototype,"isIconOnly",void 0),e._([e.n({type:Boolean,attribute:"has-removal-reason"})],C.prototype,"hasRemovalReason",void 0),e._([e.n({type:String,attribute:"permalink"})],C.prototype,"permalink",void 0),e._([e.n({type:Boolean,attribute:"is-desktop-viewport"})],C.prototype,"isDesktopViewport",void 0),e._([e.n({type:Boolean,attribute:"is-spam-filtered-post"})],C.prototype,"isSpamFilteredPost",void 0),e._([e.n({type:Boolean,attribute:"is-profile-post"})],C.prototype,"isProfilePost",void 0),e._([e.n({type:Boolean,attribute:"is-promoted-post"})],C.prototype,"isPromotedPost",void 0),e._([e.n({type:Boolean,attribute:"has-flair-permissions"})],C.prototype,"hasFlairPermissions",void 0),e._([e.n({type:Boolean,attribute:"highlights-enabled"})],C.prototype,"areHighlightsEnabled",void 0),e._([e.n({type:Boolean,attribute:"hide-inline-actions"})],C.prototype,"hideInlineActions",void 0),e._([e.n({type:Boolean,attribute:"smart-escalations"})],C.prototype,"isSmartEscalations",void 0),e._([e.n({type:Boolean,attribute:"is-content-level-mods-comms-enabled"})],C.prototype,"isContentLevelModsCommsEnabled",void 0),e._([e.n({type:Object,attribute:"mod-content-discussion-context"})],C.prototype,"modContentDiscussionContext",void 0),e._([e.n({type:Boolean,attribute:"is-feed-no-approve-enabled"})],C.prototype,"isFeedNoApproveEnabled",void 0),e._([e.n({attribute:!1})],C.prototype,"focusChatTextareaFn",void 0),e._([e.N()],C.prototype,"moderationState",void 0),C=e._([e.e("shreddit-mod-inline-actions")],C);let O=class extends a.M{constructor(){super(...arguments),this.isNsfw=!1,this.isSpoiler=!1,this.pubsub=new e.m(this),this._handlePostUpdate=({postId:t,action:a,value:o})=>{if(t===this.thingId)switch(a){case T.a.lock:this.isLocked=Boolean(o);break;case T.a.sticky:this.isStickied=Boolean(o);break;case T.a.updateHighlightedPost:this.isHighlighted=Boolean(o);break;case T.a.distinguishAsMod:this.distinguishedAs=o?e.dC.Moderator:void 0;break;case T.a.approveOptimistic:case T.a.approve:this.isRemoved=!1,this.hasRemovalReason=!1,this.verdict=e.a4.ModApproved,this.itemState=i.M.APPROVED,this.hasReports=!1,this.requestUpdate();break;case T.a.remove:case T.a.removeAsSpam:case T.a.confirmRemoval:case T.a.removeOptimistic:case T.a.removeAsSpamOptimistic:case T.a.confirmRemovalOptimistic:this.isRemoved=!0,this.verdict=e.a4.ModRemoved,this.itemState=i.M.REMOVED,this.hasReports=!1;break;case T.a.addRemovalReason:this.hasRemovalReason=Boolean(o);break;case T.a.markAsNsfw:this.isNsfw=Boolean(o);break;case T.a.markAsSpoiler:this.isSpoiler=Boolean(o);break;case T.a.ignoreReports:this.isReportingIgnored=Boolean(o),o&&(this.isRemoved=!1,this.verdict=e.a4.ModApproved,this.itemState=i.M.APPROVED)}},this._handlePostFlairUpdate=({postId:e,updatedHtml:t})=>{e===this.thingId&&(this.hasPostFlair=!!t&&t.trim().length>0)}}get isStickyable(){return super.isStickyable}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(e.T.PostUpdated,this._handlePostUpdate),this.pubsub.subscribe(e.T.PostFlairUpdated,this._handlePostFlairUpdate)}renderMarkAsNsfwAction(){return this.isDeleted||this.isNsfw?null:A.l({leadingIcon:b.n(),label:"Add NSFW tag",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleMarkNsfw)});}renderUnmarkAsNsfwAction(){return this.isDeleted||!this.isNsfw?null:A.l({leadingIcon:o.O(),label:"Remove NSFW tag",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleUnmarkNsfw)});}renderMarkAsSpoilerAction(){return this.isDeleted||this.isSpoiler?null:A.l({leadingIcon:S.c(),label:"Add spoiler tag",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleMarkSpoiler)});}renderUnmarkAsSpoilerAction(){return this.isDeleted||!this.isSpoiler?null:A.l({leadingIcon:o.ag(),label:"Remove spoiler tag",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleUnmarkSpoiler)});}renderAdjustCrowdControlAction(){return this.isPromotedPost?null:A.l({leadingIcon:E.c(),label:"Adjust crowd control",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleAdjustCrowdControl)});}renderActions(){return [this.renderConfirmRemovalAction(),this.renderApproveAction(),this.renderRemoveAction(),this.isContentLevelModsCommsEnabled?this.renderShareToModChatAction(this.modContentDiscussionContext):null,this.renderSpamAction(),this.renderIgnoreReportsAction(),this.renderUnignoreReportsAction(),this.renderAddRemovalReasonAction(),this.renderDistinguishAction(),this.renderUndistinguishAction(),this.renderStickyAction("Sticky post"),this.renderUnstickyAction("Unsticky post"),this.renderAddToHighlightsAction(),this.renderRemoveFromHighlightsAction(),this.renderLockAction("Lock comments"),this.renderUnlockAction("Unlock comments"),this.renderEditPostFlairAction(s.a(this.hasPostFlair)),this.renderMarkAsNsfwAction(),this.renderUnmarkAsNsfwAction(),this.renderMarkAsSpoilerAction(),this.renderUnmarkAsSpoilerAction(),this.renderAdjustCrowdControlAction(),this.renderCopyLinkAction()];}};e._([e.n({type:Boolean,attribute:"nsfw"})],O.prototype,"isNsfw",void 0),e._([e.n({type:Boolean,attribute:"spoiler"})],O.prototype,"isSpoiler",void 0),O=e._([e.e("shreddit-post-mod-actions-menu")],O)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./BUDNGNBQ.js",import.meta.url,"BUDNGNBQ");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./BTMr9sPC.js",import.meta.url,"BTMr9sPC");SML.di("./DgY18AyY.js",import.meta.url,"DgY18AyY");SML.di("./DwHTSY-I.js",import.meta.url,"DwHTSY-I");SML.di("./CDFmhs-S.js",import.meta.url,"CDFmhs-S");SML.di("./C_OcidZ-.js",import.meta.url,"C_OcidZ-");SML.di("./WQnubpt7.js",import.meta.url,"WQnubpt7");
SML.dm("C_IM__d6",["GlDbwxoG","BUDNGNBQ","s_Igk1Yn","BTMr9sPC","DgY18AyY","DwHTSY-I","C_OcidZ-","WQnubpt7","CDFmhs-S"],(async(t,e,a,i,n,r,o,s)=>{const l=t.W(a.s);let m=class extends l{constructor(){super(...arguments),this.isVisible=!1}connectedCallback(){super.connectedCallback(),this.enableObserver({threshold:1})}disconnectedCallback(){super.disconnectedCallback(),this.disableObserver()}publishEvent(){t.p(t.T.TriggerCommentBlockingAuth,{source:e.C.Scroll})}publishCloseEvent(){t.p(t.T.TriggerCommentBlockingAuth,{source:e.C.Close})}observerIsIntersectingCallback(){this.publishEvent(),this.isVisible=!0}observerIsNotIntersectingCallback(t){const{boundingClientRect:e,rootBounds:a}=t;a&&this.isVisible&&e.top>a.bottom&&(this.isVisible=!1,this.publishCloseEvent())}render(){return a.x`<div></div> `}};m=t._([t.e("cbau-trigger")],m);let d=class extends a.s{constructor(){super(...arguments),this.isCommentPretranslated=!1,this.pubsub=new t.m(this),this.onPostTranslationOverride=t=>{(t.id===this.postId||t.isContextUpdateEvent)&&(this.commentTranslated=t.isTranslationActive)},this.onCommentTranslationOverride=t=>{t.id===this.commentId&&(this.commentTranslated=t.isTranslationActive)},this.handleClick=()=>{if(!this.commentId)return;const e=!this.commentTranslated,a=document.querySelector(`shreddit-comment[thingId*="${this.commentId}"]`),i=o.e({id:this.commentId,parent_id:a?.parentId,post_id:this.postId,score:parseInt(a?.score??"",10)||void 0,type:"comment",created_timestamp:t.cs(a?.created??""),content_type:a?.contentType===s.C.TEXT?void 0:a?.contentType,translation_state:this.commentTranslated,translation_language:document.querySelector(`shreddit-post[id*="${this.postId}"]`)?.translationLanguage});t.f(this,i),this.pubsub.publish(t.T.I18nCommentTranslationOverride,{id:this.commentId,isTranslationActive:e})}}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(t.T.I18nCommentTranslationOverride,this.onCommentTranslationOverride,!1),this.pubsub.subscribe(t.T.I18nPostTranslationOverride,this.onPostTranslationOverride,!1),this.commentTranslated=this.isCommentPretranslated||r.i()}render(){return a.x` <rpl-tooltip appearance="inverted" placement="top" trigger="hover focus" content="${this.commentTranslated?"Show original":"Translate"}"> ${t.Y({appearance:"plain",attributes:{onclick:this.handleClick,"data-testid":"comment-translation-status-icon","aria-label":"Toggle comment translation"},leadingIcon:this.commentTranslated?n.t({size:a.I.ExtraSmall,attributes:{"data-testid":"comment-translation-status-icon-translated-icon","aria-label":"Comment is translated",className:"text-primary-plain"}}):i.t({size:a.I.ExtraSmall,attributes:{"data-testid":"comment-translation-status-icon-original-icon","aria-label":"Comment is in original language",className:"text-primary-plain"}}),size:t.a7.ExtraSmall})} </rpl-tooltip> `;}};d.styles=[t.t],t._([t.N()],d.prototype,"commentTranslated",void 0),t._([t.n({type:String,attribute:"comment-id"})],d.prototype,"commentId",void 0),t._([t.n({type:String,attribute:"post-id"})],d.prototype,"postId",void 0),t._([t.n({type:Boolean,attribute:"comment-pretranslated"})],d.prototype,"isCommentPretranslated",void 0),d=t._([t.e("comment-translation-status-icon")],d);let c=class extends a.s{constructor(){super(...arguments),this.commentId="",this.dedupe=!1,this.shouldTrackPosition=!1,this.pubsub=new t.m(this),this.loadInAd=()=>{const t=this.shouldTrackPosition?this:this.shadowRoot;if(!t||t.childNodes.length>0)return;const e=document.querySelector(`shreddit-comment-tree-ads > template#comment-tree-ad_${this.commentId}`),a=e?.content.querySelector("shreddit-comments-page-ad");e&&a&&this.isNotADuplicate(a)&&(t.replaceChildren(e.content.cloneNode(!0)),a.hasAttribute("is-blank")||this.removeAttribute("class"))},this.isNotADuplicate=t=>{if(!this.dedupe||t.hasAttribute("is-blank"))return!0;const e=document.querySelector("shreddit-comments-page-ad");return!e||t.getAttribute("campaign-id")!==e.getAttribute("campaign-id")}}createRenderRoot(){return this.shouldTrackPosition?this:super.createRenderRoot()}connectedCallback(){super.connectedCallback(),this.commentId&&(this.loadInAd(),this.pubsub.subscribe(t.T.CommentTreeAdsLoaded,this.loadInAd))}render(){return a.A}};c.styles=[t.t],t._([t.n({type:String,attribute:"comment-id"})],c.prototype,"commentId",void 0),t._([t.n({type:Boolean,attribute:"dedupe"})],c.prototype,"dedupe",void 0),t._([t.n({type:Boolean,attribute:"should-track-position"})],c.prototype,"shouldTrackPosition",void 0),c=t._([t.e("shreddit-comment-tree-ad")],c)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");
SML.dm("C_OcidZ-",["GlDbwxoG"],(async t=>{var n;!function(t){t.MULTILINGUAL_ON="multilingual_on",t.ACCOUNT_AGE="account_age",t.BACKEND="backend",t.DEFAULT_OFF="default_off",t.REGULAR_SEO="regular_seo",t.MT_SEO="mt_seo"}(n||(n={}));const o="on",a="off",e="initiated",s=t=>!1===t.isEligibleForImmersive?e:t.isImmersiveTranslationsActive?o:a;return{get T(){return n},a:n=>{const o=n?{post:{id:n}}:{};return t.b({source:"translate_button",action:"view",noun:"post_composer"},{action_info:{reason:"on"},...o})},b:n=>t.b({source:"translate_button",action:"view",noun:"comment"},{comment:{...n,translation_state:n.translation_state,translation_language:n.translation_language?n.translation_language:"original"},post:{id:n.post_id??""},action_info:{reason:n.translation_language?t.b9:t.ba}}),c:(n,o)=>t.b({source:"translate_button",action:"click",noun:"comment_composer"},{action_info:{reason:n?"on":"off"},...o?{comment:{id:o}}:{}}),d:(n,o)=>{const a=o?{post:{id:o}}:{};return t.b({source:"translate_button",action:"click",noun:"post_composer"},{action_info:{reason:n?"on":"off"},...a})},e:n=>t.b({source:"translate_button",action:"click",noun:"comment_indicator"},{comment:{...n,translation_state:n.translation_state,translation_language:n.translation_language?n.translation_language:"original"},post:{id:n.post_id??""},action_info:{reason:n.translation_state?t.bG.SEE_ORIGINAL:t.bG.SEE_TRANSLATION}}),f:n=>t.b({source:"translate_button",action:"dismiss",noun:"translation_intervention"},{action_info:{reason:s(n)},comment:{...n.comment},post:n.post}),g:n=>t.b({source:"translate_button",action:"click",noun:"translation_intervention"},{action_info:{reason:s(n),type:n.actionType},comment:{...n.comment},post:n.post}),h:()=>t.b({source:"translate_button",action:"hide",noun:"comment_composer"}),i:()=>t.b({source:"translate_button",action:"hide",noun:"post_composer"}),j:(n,o)=>t.b({source:"translate_button",action:"submit",noun:"post_composer"},{action_info:{reason:n?"on":"off"},...o?{post:{id:o.id,subreddit_id:o.subredditId,subreddit_name:o.subredditPrefixedName,url:o.permalink}}:{}}),k:n=>t.b({source:"translate_button",action:"dismiss",noun:"post_banner"},{action_info:{reason:s(n)},post:{...n.post,translation_state:n.isPostTranslated}}),l:n=>t.b({source:"overflow_menu",action:"click",noun:"translate_survey"},{post:n?.post,comment:n?.comment}),m:n=>t.b({source:"translate_button",action:"view",noun:"survey"},{post:n?.post,comment:n?.comment}),n:n=>t.b({source:"translate_button",action:"dismiss",noun:"survey"},{post:n?.post,comment:n?.comment}),o:n=>t.b({source:"translate_button",action:"submit",noun:"survey"},{action_info:{reason:n.reason},post:n.post,comment:n.comment,survey:{text:n.survey_text}}),p:({comment:n,post:o})=>t.b({source:"translate_button",action:"view",noun:"feedback"},{post:o,comment:n}),q:(n,o,a)=>t.b({source:"translate_button",action:"click",noun:"toggle"},{action_info:{reason:n?"off":"on"},translation_metrics:{translation_setting_state:n?"off":"on",target_language:o},post:a}),r:({comment:n,post:o})=>t.b({source:"translate_button",action:"click",noun:"feedback"},{post:o,comment:n}),s:(n,o)=>t.b({source:"translate_button",action:"click",noun:"show_post_banner"},{action_info:{reason:n?"on":"off"},post:o}),t:n=>t.b({source:"translate_button",action:"view",noun:"comment_composer"},{action_info:{reason:"on"},...n?{comment:{id:n}}:{}}),u:n=>t.b({source:"translate_button",action:"default",noun:"known_lang"},{action_info:{reason:n.reason,type:n.error,source_name:n.sourceName},setting:{value:n.languages.toString(),values:n.languages,old_value:n.old_languages.toString()}}),v:n=>t.b({source:"translate_button",action:"enabled",noun:"status"},{action_info:{reason:n}}),w:n=>t.b({source:"translate_button",action:"disabled",noun:"status"},{action_info:{reason:n}}),x:n=>t.b({source:"overflow_menu",action:"view",noun:"translate_post"},{action_info:{reason:s(n)},post:{...n.post,translation_state:n.isPostTranslated}}),y:(n,o,a)=>t.b({source:"translate_button",action:"submit",noun:"comment_composer"},{action_info:{reason:n?"on":"off"},...o?{post:{id:o.id,language:o.postLanguage,subreddit_id:o.subredditId,subreddit_name:o.subredditPrefixedName,type:o.postType,url:o.permalink}}:{},...a?{comment:{id:a}}:{}}),z:n=>t.b({source:"overflow_menu",action:"view",noun:"translate_comment"},{action_info:{reason:s(n)},comment:{...n.comment,translation_state:n.isCommentTranslated},post:n.post})}}));
SML.dm("Ca6XYVan",[],(async()=>{var e;!function(e){e.ListingBelow="listing-below",e.PostQuerySearch="post-query-search"}(e||(e={}));var t;!function(e){e.Related="related",e.Recent="recent"}(t||(t={}));return{get P(){return t},S:"variant_1",get a(){return e},b:"tabId",c:"variant_2"}}));

SML.di("./Cp7L3hA_.js",import.meta.url,"Cp7L3hA_");SML.di("./CmuSTQMe.js",import.meta.url,"CmuSTQMe");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./C38sKiaF.js",import.meta.url,"C38sKiaF");SML.di("./C88aLMqE.js",import.meta.url,"C88aLMqE");SML.di("./CcP9EA1F.js",import.meta.url,"CcP9EA1F");SML.di("./DPWYpq70.js",import.meta.url,"DPWYpq70");SML.di("./fnKkpEwQ.js",import.meta.url,"fnKkpEwQ");SML.di("./QTT23FkH.js",import.meta.url,"QTT23FkH");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./DNASVThB.js",import.meta.url,"DNASVThB");SML.di("./B7hVC8R1.js",import.meta.url,"B7hVC8R1");SML.di("./D2eAe0e-.js",import.meta.url,"D2eAe0e-");SML.di("./DJYjNS4q.js",import.meta.url,"DJYjNS4q");
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./DPWYpq70.js",import.meta.url,"DPWYpq70");SML.di("./fnKkpEwQ.js",import.meta.url,"fnKkpEwQ");SML.di("./QTT23FkH.js",import.meta.url,"QTT23FkH");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./DNASVThB.js",import.meta.url,"DNASVThB");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("CcP9EA1F",["GlDbwxoG","DPWYpq70","QTT23FkH","CC2wUKE8","DNASVThB","s_Igk1Yn","fnKkpEwQ"],(async(t,e,i,n,o,s)=>{const a=/^(?:[a-zA-Z0-9-]+\.)?reddit\.com$/,r=/^shreddit\.local\.snoo\.dev:\d+$/,c=["out.reddit.com","alb.reddit.com","blog.reddit.com","status.reddit.com","code.reddit.com","sp.reddit.com"],h=/^\u0020|[\u0000-\u0019\u1680\u180E\u2000-\u2029\u205f\u3000]/,l=["http:","https:"];function d(t){if("string"!=typeof t||h.test(t))return!1;try{const{host:e,protocol:i}=new URL(t.toLowerCase());return!!i&&!!e&&l.includes(i)&&(a.test(e)||r.test(e))&&!c.includes(e)}catch(t){return!1}}let p=window.location;function u(e={}){const{destinationUrl:i,additionalParams:n,suppressLoginToast:o}=e;o||t.cm();try{const e=new URL(p.href);e.pathname.match(t.cn)&&(e.pathname="");let o=i||e.searchParams.get("dest");if(o?.startsWith("/")&&(o=new URL(o,window.location.origin).toString()),o&&d(o)){const t=new URL(o);"old.reddit.com"===t.hostname&&t.searchParams.set("cache-bust",Date.now().toString()),e.href=t.toString()}else e.searchParams.delete("dest");if(n)for(const[t,i]of n)e.searchParams.set(t,i);const s=e.toString();s===p.href?p.reload():p.href=s}catch(t){p.reload()}}let m=u,E=t.aj,S=t.B,T=e.o,g=t.j,_=window.location,b=class extends s.s{constructor(){super(...arguments),this.stepName=null,this.isStandalonePage=!1,this.isNextActionEnabled=!1,this.nextActionExperimentVariant="control_1",this.nextActionExperimentVersion="",this.open=!1,this.authContext={},this.history=[],this.events=new t.E(this),this.scrollBlocker=new i.S(this),this.findStepElement=t=>this.querySelector(`[slot="${t}"]`),this.requestClose=()=>{this.blocking?this.isStandalonePage&&this.redirectToHome():this.close()},this.redirectToHome=()=>{_.href=location.origin},this.reloadToLoggedIn=async(t=!1)=>{let e;const i=await this.handleGatedAction();i&&(e=new URLSearchParams,e.set("aga",`${this.authContext.actionSource}:${this.authContext.thingId}:${t}`)),m({destinationUrl:this.isNextActionEnabled?this.authContext.destination:void 0,additionalParams:e,suppressLoginToast:i})},this.handleEscKey=this.events.define("keydown",(t=>{"Escape"!==t.key||this.blocking||this.close()})),this.handleGatedAction=async()=>{if(E({experimentName:"shreddit_next_action",variant:this.nextActionExperimentVariant,experimentVersion:this.nextActionExperimentVersion}),!this.isNextActionEnabled)return!1;const{actionSource:e,thingId:i}=this.authContext;if(!e||!i)return!1;const n=o.g(i);return e===t.co.Upvote||e===t.co.Downvote?this.handleVoteAction(e,i,n):e===t.co.Join&&this.handleSubscriptionAction(i)},this.handleVoteAction=async(i,n,s)=>{if(s!==o.T.Post&&s!==o.T.Comment)return!1;const a=i===t.co.Upvote?e.V.Upvote:e.V.Downvote;try{return await T(n,s===o.T.Post?"post":"comment",a),!0}catch{return!1}},this.handleSubscriptionAction=async e=>{try{const i=await S({operation:t.C.UpdateSubredditSubscriptions,variables:{input:{inputs:[{subredditId:e,subscribeState:t.cp.Subscribed}]}}});return!!i?.data?.updateSubredditSubscriptions?.ok}catch{return!1}},this.deprecated__onFaceplateTrack=this.events.define("faceplate-track",(e=>{const{source:i,action:o,noun:s}=e.detail;i===n.ao&&o===n.ap&&t.cq.has(s)&&this.requestClose()}))}get blocking(){if(this.isStandalonePage)return!0;if(this.open&&this.stepName){const t=this.findStepElement(this.stepName);return t?.hasAttribute("blocking")}return!1}connectedCallback(){if(super.connectedCallback(),null!==this.stepName){const t=new URLSearchParams(window.location.search).get("action_source");this.show(this.stepName,{queryParams:{...t&&{actionSource:t}}})}}hasStep(t){return!!this.findStepElement(t)}onInitialFlowOpen(){this.open||this.dispatchEvent(t.c("auth-flow-initial-open"))}setAuthContext(t){this.authContext={...t}}async show(e,i){const n=this.findStepElement(e),o=n?.getAttribute("feature-name"),s=t.w();if(!n||!o)return!1;try{const e={...i?.queryParams,is_standalone:this.isStandalonePage};s&&(e.source_page=s.toString()),await g({root:n,name:o,renderMode:t.P.Contents,...i,queryParams:e})}finally{this.onInitialFlowOpen(),this.open=!0,this.history.push(e),this.stepName=e,this.scrollBlocker.blockPageScrolling()}return!0}back(){if(!this.open)return;this.history.pop();const t=this.history.at(-1);if(!t)return this.requestClose();this.stepName=t}close(){this.dispatchEvent(t.c("auth-flow-dismiss")),this.open=!1,this.stepName=null,this.history=[],this.scrollBlocker.unblockPageScrolling(),this.authContext={}}render(){return this.open?s.x` <div class="z-[100] fixed"> <div class="${s.l(this.isStandalonePage?void 0:"fixed top-0 end-0 bottom-0 start-0 bg-black opacity-50 backdrop-blur-sm")}" tabindex="-1" @click="${this.requestClose}"></div> <slot name="${this.stepName}"></slot> <slot></slot> </div> `:s.A}};return b.styles=[t.t],t._([t.n({attribute:"step-name",type:String,reflect:!0})],b.prototype,"stepName",void 0),t._([t.n({attribute:"is-standalone",type:Boolean})],b.prototype,"isStandalonePage",void 0),t._([t.n({type:Boolean,attribute:"next-action-enabled"})],b.prototype,"isNextActionEnabled",void 0),t._([t.n({type:String,attribute:"next-action-variant"})],b.prototype,"nextActionExperimentVariant",void 0),t._([t.n({type:String,attribute:"next-action-version"})],b.prototype,"nextActionExperimentVersion",void 0),t._([t.N()],b.prototype,"open",void 0),t._([t.N()],b.prototype,"authContext",void 0),b=t._([t.e("auth-flow-manager")],b),{i:d,r:u}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("Ccw0cO_g",["GlDbwxoG","CC2wUKE8"],(async(e,a)=>{var t,n,o,r,i,c,d,s,u,l,p,f,m,_,y,h;function w(e){window.Sentry?.captureMessage?.(e)}function g(e){return e?.[0]?.message??a.ce.genericErrorMessage()}async function v(t,n){const o=a.P.get(t);if(!o)throw new Error(a.ce.unsupportedMimetype(t));const r={mimetype:o},i=n?await async function(a,t){try{const n=await fetch("https://gql-fed.reddit.com",{method:"POST",headers:{Accept:"application/json",Authorization:`bearer ${t}`,"Content-Type":"application/json","X-Reddit-Loid":e.ak.get("loid")??""},body:JSON.stringify({extensions:{persistedQuery:{version:1,sha256Hash:"cd9afac180f0cc91f6b6a4be46385de14fc328090a59b2cdc5e9666cb18779f1"}},operationName:e.C.CreateMediaUploadLease,variables:{input:a}})});if(n.ok)return n.json();const o=await n.text();throw w(`Media upload lease request to gql-fed.reddit.com failed with status ${n.status}: ${o}`),new Error(o)}catch(e){throw w(`Unable to complete the media upload lease grant: ${e}`),e}}(r,n):await e.B({operation:e.C.CreateMediaUploadLease,variables:{input:r}});if(i.errors?.length)throw new Error(g(i.errors));const c=i.data.createMediaUploadLease;if(c?.ok)return{mediaId:c.mediaId,uploadLeaseUrl:c.uploadLease.uploadLeaseUrl,uploadLeaseHeaders:c.uploadLease.uploadLeaseHeaders};throw new Error(g(c?.errors))}!function(e){e.Unknown="unknown",e.VOD="vod",e.Gif="gif",e.LiveVideo="live-video",e.Image="image",e.Video="video"}(t||(t={})),function(e){e.Landscape="landscape",e.Portrait="portrait"}(n||(n={})),function(e){e.DirectUpload="direct_upload",e.ScrapedLink="scraped_link",e.ImageOptimizer="image_optimizer"}(o||(o={})),function(e){e.Hls="hls",e.SingleFile="single_file"}(r||(r={})),function(e){e.Hls="hls",e.Mp4="mp4"}(i||(i={})),function(e){e.Autoplay="autoplay",e.Click="click"}(c||(c={})),function(e){e.Buffering="buffering",e.Paused="paused",e.Playing="playing"}(d||(d={})),function(e){e.CommentPlayer="comment_player",e.InFeedPlayer="in_feed_player",e.PostDetailScreen="post_detail_screen",e.GalleryMode="gallery_mode",e.VideoFeedV1="video_feed_v1",e.LiveFeedV1="live_feed_v1",e.TheaterMode="theater_mode",e.DiscoveryUnit="discovery_unit"}(s||(s={})),function(e){e.Videoplayer="videoplayer"}(u||(u={})),function(e){e.Auto="auto",e.Background="background",e.Click="click",e.End="end",e.Error="error",e.Scroll="scroll",e.Served="served",e.Start="start",e.Switch="switch",e.Trace="trace",e.View="view"}(l||(l={})),function(e){e.Autoplay="autoplay",e.Bitrate="bitrate",e.CaptionsDisabled="overflow_captions_disabled",e.CaptionsEnabled="overflow_captions_enabled",e.Download="download",e.Pause="pause",e.Performance="performance",e.Play="play",e.Rebuffer="rebuffer",e.RecommendationOverlay="recommendation_overlay",e.Replay="replay",e.Video="video"}(p||(p={})),function(e){e.Videoplayer="videoplayer"}(f||(f={})),function(e){e.Click="click",e.Continue="continue",e.IsFullyViewable="is_fully_viewable",e.IsViewable="is_viewable",e.Pause="pause",e.PlayExpanded="play_expanded",e.PlayWithSound="play_with_sound",e.Start="start",e.Watch="watch",e.WatchPercent25="watch_25_percent",e.WatchPercent50="watch_50_percent",e.WatchPercent75="watch_75_percent",e.WatchPercent95="watch_95_percent",e.WatchPercent100="watch_100_percent",e.WatchSeconds2="watch_2_seconds",e.WatchSeconds3="watch_3_seconds",e.WatchSeconds5="watch_5_seconds",e.WatchSeconds10="watch_10_seconds"}(m||(m={})),function(e){e.Pause="pause",e.Play="play",e.Seek="seek",e.Mute="mute",e.Unmute="unmute",e.Replay="replay",e.Video="video"}(_||(_={})),function(e){e.Autoplay="autoplay",e.Manual="manual"}(y||(y={})),function(e){e.Auto="auto",e.Buffer="buffer",e.Manual="manual"}(h||(h={}));const b=e=>({error:e||a.ce.uploadErrorMessage()});return{get A(){return c},get F(){return i},get M(){return n},get P(){return r},get Q(){return u},get T(){return m},get a(){return t},get b(){return l},get c(){return p},get d(){return d},get e(){return _},u:async function(n,o={}){const{bearerToken:r,trackEvent:i,eventSource:c}=o,d=!!i&&!!c;let s,u;try{try{s=await v(n.type,r),u=n.type.includes("video")?t.Video:t.Image,d&&i(e.b({source:c,action:"get",noun:"media_lease"},{media:{id:s.mediaId,type:u},action_info:{success:!!s.mediaId}}))}catch(a){throw d&&i(e.b({source:c,action:"get",noun:"media_lease"},{action_info:{success:!1,reason:a?.message}})),new Error(a)}const o=n.size,l=n.type.split("/")[1];d&&i(e.b({source:c,action:"upload_start",noun:u},{media:{id:s.mediaId,type:u,size:o,format:l}}));const p=await a.Q(n,s);return p?(d&&i(e.b({source:c,action:"upload",noun:u},{media:{id:s.mediaId},action_info:{success:!0}})),{url:p,mediaId:s.mediaId}):(d&&i(e.b({source:c,action:"upload",noun:u},{media:{id:s.mediaId},action_info:{success:!1}})),b())}catch(a){return l=a.message,window.Sentry?.captureMessage?.(`Media file upload failed with error: ${l}`),d&&u&&i(e.b({source:c,action:"upload",noun:u},{media:{id:s?.mediaId},action_info:{success:!1,reason:a?.message}})),b(a.message)}var l}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");
SML.dm("CdFYkV-r",["GlDbwxoG"],(async t=>{var p;function e(p){const e={q:p.query};return p.pane&&(e.type=p.pane),p.source&&(e.source=p.source),p.sort&&(e.sort=p.sort),p.time&&(e.t=p.time),p.referrer&&(e.referrer=p.referrer),p.cursor[t.dd.All]&&(e.cursor=p.cursor[t.dd.All]),p.cursor[t.dd.Posts]&&(e.postsCursor=p.cursor[t.dd.Posts]),p.cursor[t.dd.Comments]&&(e.commentsCursor=p.cursor[t.dd.Comments]),p.cursor[t.dd.Subreddits]&&(e.communitiesCursor=p.cursor[t.dd.Subreddits]),p.cursor[t.dd.Users]&&(e.peopleCursor=p.cursor[t.dd.Users]),p.ad&&(e.ad=p.ad),p.conversationId&&(e.cId=p.conversationId),p.impressionId&&(e.iId=p.impressionId),p.flair&&(e.flair=encodeURIComponent(p.flair)),p.disableSpellCorrection&&(e.disableSpellCorrection=p.disableSpellCorrection),p.disableLocation&&(e.disableLocation=p.disableLocation),e}!function(t){t.Ad="ad",t.AllCursor="cursor",t.CommentsCursor="commentsCursor",t.CommunitiesCursor="communitiesCursor",t.ConversationId="cId",t.ImpressionId="iId",t.Pane="type",t.PeopleCursor="peopleCursor",t.PostsCursor="postsCursor",t.Query="q",t.Referrer="referrer",t.Sort="sort",t.Source="source",t.Time="t",t.Flair="flair",t.DisableSpellCorrection="disableSpellCorrection",t.DisableLocation="disableLocation"}(p||(p={}));var a;!function(t){t.SearchBarPill="search_bar_scope_pill",t.SerpScopeSwitcher="serp_scope_switcher"}(a||(a={}));const h=/^\//,y=/\/$/,r=(t="")=>t.replace(h,"").replace(y,""),s=/^\/user\/([\w+-]+)\/m\//,i=/\/$/,d=(t="")=>t.replace(s,"").replace(i,""),$=/^\/u(?:ser)?\//,o=/\/$/,n=(t="")=>t.replace($,"u/").replace(o,""),u=({type:p,path:e})=>({[t.a1.GLOBAL]:t=>t,[t.a1.COMMUNITY]:r,[t.a1.CUSTOM_FEED]:d,[t.a1.PROFILE]:n}[p](e));return {get S(){return p},a:"search-media-post-unit",b:function(t){const p=new URLSearchParams({...e(t)});return`${(t=>t.endsWith("/")?t:`${t}/`)((t=>t.startsWith("/")?t:`/${t}`)(t.scope.path))}search/?${p.toString()}`},c:(p,e=!1,a,h)=>{if((h||a)&&p?.type===t.a1.GLOBAL)return "Find anything";switch(p?.type){case t.a1.COMMUNITY:case t.a1.CUSTOM_FEED:return e?`${u({type:p?.type,path:p.path})}`:`Search in ${u({type:p?.type,path:p.path})}`;case t.a1.PROFILE:return e?`${u({type:p?.type,path:p.path})}`:`Search in ${u({type:p?.type,path:p.path})}`;default:return "Search Reddit";}},get d(){return a},g:u,s:e};}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./B8v3CYv9.js",import.meta.url,"B8v3CYv9");SML.di("./BH4VvyCw.js",import.meta.url,"BH4VvyCw");
SML.dm("CdOEuw7t",["s_Igk1Yn","GlDbwxoG","CC2wUKE8","B8v3CYv9","BH4VvyCw"],(async(e,t,r,s)=>{function i(e){let t=0,r=0;const s=[];for(const i of e)s[t]=r,t++,r+=i.length;return s[t]=r,s}const a={[s.F.bold]:t=>e.x`<strong>${t}</strong>`,[s.F.italic]:t=>e.x`<em>${t}</em>`,[s.F.underline]:t=>e.x`<u>${t}</u>`,[s.F.strikethrough]:t=>e.x`<s>${t}</s>`,[s.F.subscript]:t=>e.x`<sub>${t}</sub>`,[s.F.superscript]:t=>e.x`<sup>${t}</sup>`,[s.F.monospace]:t=>e.x`<code>${t}</code>`},n=(e,t)=>{try{if(t)return new URL(e,t).toString()}catch{}return e},o=e=>{const t=[];for(const r in s.F){if(isNaN(Number(r)))continue;Number(r)&e&&t.push(r)}return t},u=(e,t)=>{let r=e;for(const e of t){const t=a[e];t&&(r=t(r))}return r},c=t=>{const r=function(e,t=[]){const r=i(e),s=[];let a=0;for(const[i,n,o]of t){const t=n+o,u=r[n]??n,c=r[t]??t;a<u&&s.push({text:e.substring(a,u),isFormatted:!1}),s.push({text:e.substring(u,c),isFormatted:!0,bitfield:i}),a=c}return a<e.length&&s.push({text:e.slice(a),isFormatted:!1}),s}(t.t,t.f),s=[];for(const e of r)if(e.isFormatted&&void 0!==e.bitfield){const t=o(e.bitfield),r=u(e.text,t);s.push(r)}else s.push(e.text);return e.x`${s.map((t=>e.x`${t}`))}`},l=e=>"R "===e?"align-right":"C"===e?"align-center":"align-left",d=(t,r)=>{switch(t.e){case s.j:return(e=>c(e))(t);case s.R:return(t=>e.x`${t.t}`)(t);case s.i:return((t,r)=>{const s=r.targetBlankLinks?"_blank":"_self",i=t.u.startsWith("/")?n(t.u,r.baseUrlForRelativeLinks):t.u;return e.x`<a href="${i}" rel="noopener nofollow ugc" target="${s}">${t.t}</a>`})(t,r);case s.h:return((t,r)=>{const s=r.targetBlankSubredditAndUserLinks?"_blank":"_self",i=n(`/${t.e}${t.t}/`,r.baseUrlForRelativeLinks);return e.x`<a href="${i}" target="${s}">r/${t.t}</a>`})(t,r);case s.g:return((t,r)=>{const s=r.targetBlankSubredditAndUserLinks?"_blank":"_self",i=n(`/user/${t.t}/`,r.baseUrlForRelativeLinks);return e.x`<a href="${i}" target="${s}">u/${t.t}</a>`})(t,r);case s.P:return((t,r)=>e.x`<p> ${t.c.map((e=>d(e,r)))} </p>`)(t,r);case s.f:return((t,r)=>{const s=t.c.map((e=>d(e,r)));return t.o?e.x`<ol> ${s} </ol>`:e.x`<ul> ${s} </ul>`})(t,r);case s.e:return((t,r)=>e.x`<li> ${t.c?.map((e=>d(e,r)))??""} </li>`)(t,r);case s.d:return((t,r)=>{const s=t.c?.map((e=>d(e,r)))??"";switch(t.l){case 1:return e.x`<h1 class="text-24-scalable xs:text-20-scalable">${s}</h1>`;case 2:return e.x`<h2 class="text-18-scalable xs:text-20-scalable">${s}</h2>`;case 3:return e.x`<h3 class="text-16-scalable xs:text-18-scalable">${s}</h3>`;case 4:return e.x`<h4 class="font-semibold text-14-scalable xs:text-16-scalable">${s}</h4>`;case 5:return e.x`<h5 class="font-semibold text-14-scalable xs:text-16-scalable">${s}</h5>`;case 6:return e.x`<h6 class="text-14-scalable xs:text-14-scalable">${s}</h6>`}})(t,r);case s.B:return((t,r)=>e.x`<blockquote> ${t.c.map((e=>d(e,r)))} </blockquote>`)(t,r);case s.S:return((t,r)=>e.x`<shreddit-spoiler>${t.c.map((e=>d(e,r)))} </shreddit-spoiler>`)(t,r);case s.c:return(t=>{const r=t.c.map((e=>e.t)).join("\n");return e.x`<pre language="${e.l(t.l)}">${r}</pre>`})(t);case s.b:return(t=>e.x` <faceplate-img class="flair-image" loading="lazy" width="14" height="14" src="${t.u}" alt="emoji${t.a}"></faceplate-img> `)(t);case s.H:return e.x`<hr>`;case s.L:return e.x`<br>`;case s.I:case s.A:case s.V:return e.x`${t.c}`;case s.C:case s.a:case s.U:return e.x`${t.e}${t.t}`;case s.E:return e.x`${t.c}`;case s.T:return((t,r)=>{const s=t.h;return e.x`<table class="overflow-x-auto"> <thead> <tr> ${t.h.map((t=>e.x`<th class="${e.l(t.a?l(t.a):void 0)}"> ${t.c?.map((e=>d(e,r)))??""} </th>`))} </tr> <tr></tr> </thead> <tbody> ${t.c.map((t=>e.x`<tr> ${t.map(((t,i)=>e.x`<td class="${l(s[i].a)}"> ${t.c?.map((e=>d(e,r)))??""} </td>`))} </tr>`))} </tbody> </table>`})(t,r);default:return e.x``}},m=({richtext:t,wrapperClassName:r="",targetBlankLinks:s=!1,targetBlankSubredditAndUserLinks:i=!1,baseUrlForRelativeLinks:a=""})=>null===t?e.x``:"string"==typeof t?e.x`<div class="rendererd-rtjson ${r}"><p>${t}</p></div>`:e.x`<div class="rendererd-rtjson ${r}"> ${e.Q(t.document,(e=>d(e,{targetBlankLinks:s,targetBlankSubredditAndUserLinks:i,baseUrlForRelativeLinks:a})))} </div>`,h=/:(.*?):/g;const p=(t,r)=>e.x`<div class="flair-content [&_.flair-image]:align-bottom max-w-full overflow-hidden whitespace-nowrap text-ellipsis"> ${t?.match(h)&&r?m({richtext:{document:JSON.parse(r)},wrapperClassName:"max-w-full overflow-hidden whitespace-nowrap text-ellipsis"}):t} </div>`;return {M:class{constructor(s){this.userName="",this.subredditId="",this.currentUserName="",this.subredditName="",this.prefixedName="",this.currentRichtext=null,this.isPreviewOpen=!1,this.selectedReplyOption=t.cz.ParticipantSubreddit,this.requestClientGQL=t.B,this.modTeamTooltipText="Send as mod team",this.modNoteTooltipText="Send to mods only",this.updateSubmitTooltip=e=>{this.submitTooltipContent&&(e===t.cz.ParticipantSubreddit?this.submitTooltipContent.textContent=this.modTeamTooltipText:e===t.cz.Moderator?this.submitTooltipContent.textContent=this.modUsernameTooltipText():e===t.cz.Unknown&&(this.submitTooltipContent.textContent=this.modNoteTooltipText))},this.renderSavedResponseTemplateBySubredditId=r.c0,this.onSavedResponseItemSelect=async e=>{const{responseId:t}=e.detail;this.onSavedResponseItemClick({responseId:t})},this.onSavedResponseItemClick=async({responseId:e})=>{let t="";const r="prefixedConversationId"in this.host?this.host.prefixedConversationId:null,s=this.userName?{recipientUsernameOverride:this.userName}:{};try{t=(await this.renderSavedResponseTemplateBySubredditId({responseId:e,subredditId:this.subredditId,modmailVariables:{modmailConversationId:r,...s}}))?.response?.markdown||""}catch{return}const i=this.getShredditComposerValue();await this.setShredditComposerValue(`${i?`${i}\n`:""}${t}\n`),this.updateComposerValue()},this.onSavedResponsesDropdownSearchInputChange=r.N((e=>{e.preventDefault(),e.stopImmediatePropagation();const t=e.target,r=t?.value,s=this.host.querySelector("#modmail-saved-responses-dropdown");if(s){s.querySelectorAll("rpl-menu-item").forEach((e=>{e.style.display=e.textContent?.toLowerCase().includes(r.toLowerCase())?"block":"none"}))}}),100),this.onKeyDown=(e,t,r=!1)=>{"Enter"!==e.key&&"Space"!==e.code||(r&&(e.preventDefault(),e.stopPropagation()),t())},this.scrollToBottom=e=>{const t=this.host.shadowRoot?.querySelector("#scroll-to-container");t&&t.scrollIntoView({behavior:e?"smooth":"instant"})},this._activateFeature=async e=>t.j(e),this.onKeyDownSavedResponsesClick=e=>this.onKeyDown(e,this.onSavedResponsesClick),this.onSavedResponsesClick=async()=>{await this._activateFeature({name:t.h0,routeParams:{subredditId:this.subredditId},renderMode:t.P.Contents});const e=this.host.querySelector("#modmail-saved-responses-dropdown-search-input");e&&e.addEventListener("input",this.onSavedResponsesDropdownSearchInputChange);const r=this.host.querySelector("#modmail-saved-responses-dropdown-close-button");r&&r.addEventListener("click",this.onSavedResponsesDropdownCloseButtonClick)},this.onSavedResponsesDropdownCloseButtonClick=()=>{const e=this.host.querySelector("#modmail-saved-responses-dropdown");e&&e.hide()},this.updateComposerValue=r.N((async()=>{await this.getRichTextComposerValue().then((e=>{this.currentRichtext=e,0===e?.document.length&&(this.isPreviewOpen=!1)})),this.host.requestUpdate()}),100),this.getShredditComposerValue=()=>this.composer?this.composer.value:"",this.getRichTextComposerValue=async()=>{const e=document.querySelector("shreddit-composer");return (await (e?.getValueAs(t.g4.RichText)))??null;},this.setShredditComposerValue=e=>{this.composer&&(this.composer.value=e)},this.getReplyOptionIcon=e=>{if(e===t.cz.Moderator){const e=document.querySelector('div[slot="reply-user-icon"]')?.cloneNode(!0);return e?.classList.remove("hidden"),e}return e===t.cz.ParticipantSubreddit?document.querySelector('div[slot="reply-subreddit-icon"]')?.cloneNode(!0):""},this.onTogglePreview=async()=>{this.isPreviewOpen=!this.isPreviewOpen,await this.host.requestUpdate(),this.isPreviewOpen&&this.scrollToBottom(!0)},this.renderPreview=()=>{const r=this.getReplyOptionIcon(this.selectedReplyOption===t.cz.Unknown?t.cz.Moderator:this.selectedReplyOption),s=this.selectedReplyOption===t.cz.ParticipantSubreddit;return e.x`<div class="pt-sm" id="preview-container"> <div class="text-neutral-content-weak uppercase text-12 leading-4 font-semibold"> ${"Preview"} </div> <div class="mt-xs mb-md rounded-[12px] p-xs border-solid border border-neutral-border"> <div class="flex items-start gap-xs"> ${r} <div class="flex flex-col"> <div> <div class="text-12 leading-4 font-semibold ${s?"":"my-xs"}"> ${s?this.prefixedName:`u/${this.currentUserName}`} </div> ${s?e.x`<span class="text-secondary-plain-weak text-12 leading-4">${`u/${this.currentUserName}`} ${" (hidden)"}</span>`:e.x``} </div> ${m({richtext:this.currentRichtext,targetBlankLinks:!0,targetBlankSubredditAndUserLinks:!0,baseUrlForRelativeLinks:"https://www.reddit.com"})} </div> </div> </div> </div>`;},this.renderPreviewPlacement=()=>e.x` ${this.isPreviewOpen&&this.currentRichtext&&this.currentRichtext?.document?.length>0?this.renderPreview():""}`,this.renderComposer=()=>e.x` <slot name="markdown-composer"></slot>`,this.host=s,s.addController(this)}hostConnected(){this.host.addEventListener("saved-response-click",this.onSavedResponseItemSelect)}hostDisconnected(){this.host.removeEventListener("saved-response-click",this.onSavedResponseItemSelect)}get messageSubmitButton(){return this.host.querySelector("#modmail-message-submit-button")}get composer(){return this.host.querySelector("shreddit-composer")}get submitTooltip(){return this.host.querySelector("rpl-tooltip")}get submitTooltipContent(){return this.submitTooltip?.querySelector('span[slot="content"]')}modUsernameTooltipText(){return `Send as u/${this.currentUserName}`;}},_:d,a:({color:t,backgroundColor:r,text:s="",richText:i,className:a,flairContentRenderer:n=p})=>{if(!s)return"";const o=function(e,t){return!e||!t||"transparent"===t}(t??"",r??"");return e.x` <span class="bg-tone-4 inline-block truncate max-w-full text-12 font-normal align-text-bottom box-border px-[6px] rounded-5 leading-4 ${o?"text-secondary":"DARK"===t?"text-global-black":"text-global-white"} ${"transparent"===r?"border-solid border border-neutral-border-weak":""} ${a??""}" style="${r?`background-color: ${r};`:""}"> ${n(s,i)} </span> `},b:function(e){let t=0,r=0;const s=[];for(const i of e){for(let e=0;e<i.length;e++)s[r]=t,r++;t++}return s[r]=t,s},c:m,d:i};}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DPWYpq70.js",import.meta.url,"DPWYpq70");SML.di("./fnKkpEwQ.js",import.meta.url,"fnKkpEwQ");SML.di("./DkIqVQPv.js",import.meta.url,"DkIqVQPv");SML.di("./BmAQnYV7.js",import.meta.url,"BmAQnYV7");SML.di("./CTwJH_ps.js",import.meta.url,"CTwJH_ps");SML.di("./CZ7YNHqf.js",import.meta.url,"CZ7YNHqf");SML.di("./CLcwsfQZ.js",import.meta.url,"CLcwsfQZ");SML.di("./CykCcTkJ.js",import.meta.url,"CykCcTkJ");SML.di("./OimaI6pY.js",import.meta.url,"OimaI6pY");SML.di("./CjqcW8YI.js",import.meta.url,"CjqcW8YI");SML.di("./C-lRMeGe.js",import.meta.url,"C-lRMeGe");SML.di("./DrxyuPXW.js",import.meta.url,"DrxyuPXW");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./hMhijB38.js",import.meta.url,"hMhijB38");SML.di("./8qD_qMhm.js",import.meta.url,"8qD_qMhm");SML.di("./DCe9eryH.js",import.meta.url,"DCe9eryH");SML.di("./DMa5Y6a9.js",import.meta.url,"DMa5Y6a9");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");SML.di("./FagDXDzk.js",import.meta.url,"FagDXDzk");SML.di("./DBgqsMtO.js",import.meta.url,"DBgqsMtO");SML.di("./Ccw0cO_g.js",import.meta.url,"Ccw0cO_g");SML.di("./HYbNa5uQ.js",import.meta.url,"HYbNa5uQ");SML.di("./DAqoOXDQ.js",import.meta.url,"DAqoOXDQ");SML.di("./CsGy0MYm.js",import.meta.url,"CsGy0MYm");SML.di("./BGOkDHmz.js",import.meta.url,"BGOkDHmz");SML.di("./DoY_u8JV.js",import.meta.url,"DoY_u8JV");SML.di("./DslEtuBZ.js",import.meta.url,"DslEtuBZ");SML.di("./CzlfHowc.js",import.meta.url,"CzlfHowc");SML.di("./CDFmhs-S.js",import.meta.url,"CDFmhs-S");SML.di("./MX9FaClF.js",import.meta.url,"MX9FaClF");SML.di("./FaYkg4Io.js",import.meta.url,"FaYkg4Io");SML.di("./BStJq-t0.js",import.meta.url,"BStJq-t0");SML.di("./DCovP8x6.js",import.meta.url,"DCovP8x6");SML.di("./BXgkCz3E.js",import.meta.url,"BXgkCz3E");SML.di("./DMfuJHXs.js",import.meta.url,"DMfuJHXs");SML.di("./CmgOir_w.js",import.meta.url,"CmgOir_w");SML.di("./DzMpUNmB.js",import.meta.url,"DzMpUNmB");SML.di("./9ZdgYdsr.js",import.meta.url,"9ZdgYdsr");SML.di("./B5aCBAWI.js",import.meta.url,"B5aCBAWI");SML.di("./C38sKiaF.js",import.meta.url,"C38sKiaF");SML.di("./CAd-sfst.js",import.meta.url,"CAd-sfst");SML.di("./CGzEIBwW.js",import.meta.url,"CGzEIBwW");SML.di("./DK2EuOAl.js",import.meta.url,"DK2EuOAl");SML.di("./DNASVThB.js",import.meta.url,"DNASVThB");SML.di("./DEMANhHy.js",import.meta.url,"DEMANhHy");SML.di("./YRJ6wR80.js",import.meta.url,"YRJ6wR80");SML.di("./Co1JScDL.js",import.meta.url,"Co1JScDL");SML.di("./BTgalZoS.js",import.meta.url,"BTgalZoS");SML.di("./BwmVBZAv.js",import.meta.url,"BwmVBZAv");SML.di("./BTMXBfyY.js",import.meta.url,"BTMXBfyY");SML.di("./Dpra1UnG.js",import.meta.url,"Dpra1UnG");SML.di("./DdoeBlGT.js",import.meta.url,"DdoeBlGT");SML.di("./CnmQBnK-.js",import.meta.url,"CnmQBnK-");SML.di("./C_OcidZ-.js",import.meta.url,"C_OcidZ-");SML.di("./CZPCygeT.js",import.meta.url,"CZPCygeT");SML.di("./wFIF_OFn.js",import.meta.url,"wFIF_OFn");SML.di("./CU4mObWU.js",import.meta.url,"CU4mObWU");SML.di("./pMLLCc4b.js",import.meta.url,"pMLLCc4b");SML.di("./CJ4Bucp-.js",import.meta.url,"CJ4Bucp-");SML.di("./DopQd8m2.js",import.meta.url,"DopQd8m2");SML.di("./DYu9Ek9m.js",import.meta.url,"DYu9Ek9m");SML.di("./DwHTSY-I.js",import.meta.url,"DwHTSY-I");SML.di("./i17aYwuT.js",import.meta.url,"i17aYwuT");SML.di("./D0V62KWA.js",import.meta.url,"D0V62KWA");SML.di("./D6Xs8HU5.js",import.meta.url,"D6Xs8HU5");
SML.dm("Cf_E_ju6",["GlDbwxoG","s_Igk1Yn","DPWYpq70","fnKkpEwQ","CLcwsfQZ","CykCcTkJ","OimaI6pY","CjqcW8YI","C-lRMeGe","DrxyuPXW","DRM-oTYq","CC2wUKE8","hMhijB38","8qD_qMhm","DkIqVQPv","BmAQnYV7","CTwJH_ps","CZ7YNHqf","DCe9eryH","DMa5Y6a9","D-MAMWlw","FagDXDzk","DBgqsMtO","Ccw0cO_g","HYbNa5uQ","DAqoOXDQ","CsGy0MYm","BGOkDHmz","DoY_u8JV","DslEtuBZ","CzlfHowc","CDFmhs-S","MX9FaClF","FaYkg4Io","BStJq-t0","DCovP8x6","BXgkCz3E","DMfuJHXs","CmgOir_w","DzMpUNmB","9ZdgYdsr","B5aCBAWI","C38sKiaF","CAd-sfst","CGzEIBwW","DK2EuOAl","DNASVThB","DEMANhHy","YRJ6wR80","Co1JScDL","BTgalZoS","BwmVBZAv","BTMXBfyY","Dpra1UnG","DdoeBlGT","CnmQBnK-","C_OcidZ-","CZPCygeT","wFIF_OFn","CU4mObWU","pMLLCc4b","CJ4Bucp-","DopQd8m2","DYu9Ek9m","DwHTSY-I","i17aYwuT","D0V62KWA","D6Xs8HU5"],(async(t,e,i,a,s,r,n,o,E,d,l,T,m,p)=>{const D=[t.v.BACKGROUND,t.v.PROMOTED_LABEL,t.v.CREDIT_BAR_WHITESPACE,t.v.TITLE,t.v.TEXT_BODY,t.v.ACTION_BAR_WHITESPACE];class h{constructor(t){this._currGalleryIndex=0,this.handleGalleryNavEvent=t=>{const{noun:e,action:i,source:a,post:s}=t.detail;s?.id===this.host.postId&&"gallery"===a&&"click"===i&&("forward"===e&&this._currGalleryIndex+1<this.host.galleryItems.length&&this._currGalleryIndex++,"backward"===e&&this._currGalleryIndex-1>=0&&this._currGalleryIndex--,this.host.querySelectorAll("call-to-action-gallery-links").forEach((t=>t.handleGalleryNavEvent(this._currGalleryIndex))),this.host.querySelectorAll("shreddit-dynamic-ad-link").forEach((t=>{D.includes(t.clickLocation)&&(t.galleryIndex=this._currGalleryIndex)})))},(this.host=t).addController(this)}hostConnected(){this.host.galleryItems?.length&&this.host.addEventListener("faceplate-track",this.handleGalleryNavEvent)}hostDisconnected(){this.host.removeEventListener("faceplate-track",this.handleGalleryNavEvent)}}class _{constructor(t){(this.host=t).addController(this)}hostConnected(){this.host.impressionId||this.host.hasAdEvents||(this.hydrateAdEventsFromStorage(),this.hydrateAdUserTargetingFromStorage(),this.host.hasAdEvents&&(this.updateDynamicLinkUrls(),this.host.setupAdObserver()))}updateDynamicLinkUrls(){this.host.querySelectorAll("shreddit-dynamic-ad-link").forEach((e=>{const i="/"===e.outboundLinkOverride?.charAt(0),a=!!this.host.galleryItems,s=!!this.host.isReminderAd;i||s||!a&&e.outboundLinkOverride===t.eS||(e.outboundLinkOverride=this.host.galleryItems?this.host.galleryItems[e.galleryIndex??0]?.outboundUrl:this.host.outboundLinkUrl)}))}hydrateAdEventsFromStorage(){const e=new URL(t.h.href).searchParams.get(t.eT);this.host.impressionId=e||"";const i=n.f(this.host.impressionId);i&&(this.host.adEvents=i.adEvents,this.host.outboundLinkUrl=i.clickRedirectUrl,this.host.galleryItems&&i.galleryAdData&&(this.host.galleryItems=i.galleryAdData?.map(((t,e)=>({...(this.host.galleryItems||[])[e],adEvents:t.adEvents,outboundUrl:t.clickRedirectUrl})))),this.host.encryptedTrackingPayload=i.encryptedTrackingPayload,this.host.additionalEventMetadata=i.additionalEventMetadata)}hydrateAdUserTargetingFromStorage(){const t=n.h();t&&(this.host.adUserTargeting=t)}}const u=s.W(d.S);let c=class extends u{constructor(){super(...arguments),this.adEvents=[],this.impressionId="0",this.isBlank=!1,this.isCommentingDisabled=!1,this.isSharingDisabled=!1,this.isSurveyAd=!1,this.isPromotedCommunityPost=!1,this.isReminderAd=!1,this.placement=t.a8.FEED,this.AdPostHydrationController=new _(this),this.AdPostGalleryLinksController=new h(this),this.pubSub=new t.m(this),this._trackAdClick=this._events.define("observe-ad-click",(async e=>{const i=this.postType===t.eR.Image,a=this.postType===t.eR.Video,s=a&&this.viewType!==t.a5.CompactView&&e.detail.clickLocation!==t.v.MEDIA,o=a&&this.viewType===t.a5.CompactView;(i||o||s)&&(await this._activateLeadGenDialog(),r.s({leadGenInfo:this.leadGenInfo,postId:this.id,impressionId:this.impressionId,onSuccess:()=>this.dispatchEvent(t.c(n.L))}))})),this.onAdUpdateAction=({action:t,impressionId:e})=>{"hide"===t&&e===this.impressionId&&(this.hidden=!0)}}static get styles(){return[...super.styles,t.J(":host {\n  position: relative;\n}\n.ad-link-bar {\n  grid-column: 1 / 13;\n  height: 40px;\n  border-top: transparent;\n}\n.meta-row {\n  grid-column: 1 / 4;\n}\n.grid-template-col-inherit {\n  grid-template-columns: inherit;\n}\n")]}_activateLeadGenDialog(){return r.a({leadGenInfo:this.leadGenInfo})}get hasAdEvents(){return this.adEvents?.length>0}handleCarouselArrowClick(t){t.preventDefault();const e=t;m.h(this,e,this.impressionId)}handleClickPost(e){if(!this.isReminderAd)return void super.handleClickPost(e);const i=this.querySelector("ad-reminder-button");if(i?.isReminderSet||!1)return void super.handleClickPost(e);p.s(e,{includeFeedChecks:!0})?super.handleClickPost(e):(e.preventDefault(),this.pubSub.publish(t.T.TriggerAdReminderModal,{postId:this.id}))}async handleUpvote(e){if(super.handleUpvote(e),this.isUserLoggedIn&&this.isReminderAd){super.getCurrentVoteType()===i.V.Upvote&&this.pubsub.publish(t.T.TriggerAdReminderModal,{postId:this.id})}}async connectedCallback(){super.connectedCallback(),this.pubSub.subscribe(t.T.AdUpdated,this.onAdUpdateAction),this.setupAdObserver(),await this.resolveCarouselDependencies()}setupAdObserver(){!this.isAdObserved&&this.hasAdEvents&&this.enableAdObserver({postElement:this,events:s.e(this.adEvents),postId:this.id,impressionId:this.impressionId,adType:this.adType,dimensions:this.dimensions,galleryItems:this.galleryItems?.map((t=>({...t,adEvents:s.e(t.adEvents||[])})))})}async resolveCarouselDependencies(){const t=this.querySelector("shreddit-gallery-carousel");t&&(await SML.di("./1bXO5O0S.js",import.meta.url,"1bXO5O0S"),t.classList.remove("flex"))}handleView(t,e){super.handleView(t,e,this.galleryItems?.length)}handleShareClick(){if(this.isSharingDisabled){const e=t.c("faceplate-alert",{level:t.X.notice,message:"Sharing has been disabled for this post"});this.dispatchEvent(e)}else this.handleShareButtonInteraction()}handleClickCommentsButton(e){if(this.isSurveyAd)super.handleClickCommentsButton(e);else if(this.isCommentingDisabled){const e=t.c("faceplate-alert",{level:t.X.notice,message:"Comments have been disabled for this post"});this.dispatchEvent(e)}else this.isFeed?(n.s({impressionId:this.impressionId,adEvents:this.adEvents,clickRedirectUrl:this.outboundLinkUrl,galleryAdData:this.galleryItems?.map((t=>({adEvents:t.adEvents,clickRedirectUrl:t.outboundUrl}))),encryptedTrackingPayload:this.encryptedTrackingPayload,additionalEventMetadata:this.additionalEventMetadata}),n.b(this.adUserTargeting),t.f(this,l.v(this))):super.handleClickCommentsButton(e)}renderCommentsButton(){if(this.isCommentingDisabled)return e.x`${a.c({size:d.D,appearance:T.aj()?"bordered":"secondary",attributes:{type:"button",className:d.a,onclick:this.handleClickCommentsButton,name:"comments-action-button","data-post-click-location":t.eU.COMMENTS_BUTTON},leadingIcon:o.c({attributes:{className:"icon-comment","aria-hidden":"true"},size:a.I[d.D]}),screenReaderContent:"comments",children:e.x`<faceplate-number number="${this.commentCount}" pretty></faceplate-number>`})}`;{const e=new URL(this.permalink,window.location.origin);return e.searchParams.set(t.bV,"1"),e.searchParams.set(t.eT,this.impressionId),this.leadGenInfo?.campaignId&&e.searchParams.set(t.eV,this.leadGenInfo.campaignId),this.isPromotedCommunityPost&&e.searchParams.set(t.eW,this.postId),this.permalink=e.pathname+e.search,super.renderCommentsButton()}}renderShareButton(){if(this.isSharingDisabled){const t="Share";return e.x`${a.c({size:d.D,appearance:T.aj()?"bordered":"secondary",attributes:{type:"button",onclick:this.handleShareClick,onkeydown:this.handleShareClick,className:d.a},leadingIcon:E.s({attributes:{className:"icon-share","aria-hidden":"true"},size:a.I[d.D]}),screenReaderContent:t,children:t})}`}return this.shareButtonSSR=!1,super.renderShareButton()}renderHiddenPost(){return e.x` <div class="hidden-post h-3xl flex items-center justify-between px-md"> <div> <p class="m-0 font-semibold text-neutral-content-strong text-14"> ${"Ad hidden"} </p> </div> </div> `;}renderActionRow(){return this.isSurveyAd?e.x``:super.renderActionRow()}render(){return this.hidden?this.renderHiddenPost():e.x`${this.isBlank?null:super.render()}`}};t._([t.n({type:String,attribute:"post-id"})],c.prototype,"postId",void 0),t._([t.n({type:Array,attribute:"ad-events",reflect:!0})],c.prototype,"adEvents",void 0),t._([t.n({type:Array,attribute:"gallery-items",reflect:!0})],c.prototype,"galleryItems",void 0),t._([t.n({type:Object,attribute:!0})],c.prototype,"dimensions",void 0),t._([t.n({type:String,attribute:"ad-type"})],c.prototype,"adType",void 0),t._([t.n({type:String,attribute:"outbound-link-url",reflect:!0})],c.prototype,"outboundLinkUrl",void 0),t._([t.n({type:String,attribute:"impression-id",reflect:!0})],c.prototype,"impressionId",void 0),t._([t.n({type:Object,attribute:"ad-user-targeting",reflect:!0})],c.prototype,"adUserTargeting",void 0),t._([t.n({type:Boolean,attribute:"is-blank"})],c.prototype,"isBlank",void 0),t._([t.n({type:Boolean,attribute:"is-commenting-disabled"})],c.prototype,"isCommentingDisabled",void 0),t._([t.n({type:Boolean,attribute:"is-sharing-disabled"})],c.prototype,"isSharingDisabled",void 0),t._([t.n({type:Boolean,attribute:"is-survey-ad"})],c.prototype,"isSurveyAd",void 0),t._([t.n({type:Boolean,attribute:"is-promoted-community-post"})],c.prototype,"isPromotedCommunityPost",void 0),t._([t.n({type:Boolean,attribute:"is-reminder-ad"})],c.prototype,"isReminderAd",void 0),t._([t.n({type:String,attribute:"country-code"})],c.prototype,"countryCode",void 0),t._([t.n({type:String,attribute:"placement"})],c.prototype,"placement",void 0),t._([t.n({type:Object,attribute:"lead-gen-info"})],c.prototype,"leadGenInfo",void 0),t._([t.n({type:String,attribute:"campaign-id"})],c.prototype,"campaignId",void 0),t._([t.n({type:String,attribute:"encrypted-tracking-payload"})],c.prototype,"encryptedTrackingPayload",void 0),t._([t.n({type:Array,attribute:"additional-event-metadata"})],c.prototype,"additionalEventMetadata",void 0),t._([t.n({type:String,attribute:"ad-transparency-encoded-data"})],c.prototype,"adTransparencyEncodedData",void 0),t._([t.n({type:String,attribute:"ads-correlation-id"})],c.prototype,"adsCorrelationId",void 0),c=t._([t.e("shreddit-ad-post")],c)}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("CjqcW8YI",["s_Igk1Yn"],(async a=>{const{svg:n}=a.g();return{c:a.m(n`<path d="M10 1a9 9 0 00-9 9c0 1.947.79 3.58 1.935 4.957L.231 17.661A.784.784 0 00.785 19H10a9 9 0 009-9 9 9 0 00-9-9zm0 16.2H6.162c-.994.004-1.907.053-3.045.144l-.076-.188a36.981 36.981 0 002.328-2.087l-1.05-1.263C3.297 12.576 2.8 11.331 2.8 10c0-3.97 3.23-7.2 7.2-7.2s7.2 3.23 7.2 7.2-3.23 7.2-7.2 7.2z"></path>`,"0 0 20 20","comment"),i:a=>!!a&&(a.indexOf("profileIcon_snoo")>-1||a.indexOf("snoovatar/avatars")>-1||a.endsWith("snoovatar_anonymous.svg"))}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("CjqmoMGQ",["GlDbwxoG","s_Igk1Yn"],(async(t,a)=>{let e=class extends a.s{constructor(){super(...arguments),this.data={}}connectedCallback(){super.connectedCallback(),t.p(t.T.PageDataLoaded,this.data)}};t._([t.n({type:Object})],e.prototype,"data",void 0),e=t._([t.e("reddit-page-data")],e)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./FagDXDzk.js",import.meta.url,"FagDXDzk");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");
SML.dm("Cjw2ByTc",["GlDbwxoG","FagDXDzk","DRM-oTYq","D-MAMWlw"],(async(e,a,r,n)=>{let o=e.B;function t(e){return e?.[0]?.message??"Something went wrong";}const i=async(e=document,a=5e3,r=100)=>{const n=Date.now(),o=e=>{const a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null);let r=a.nextNode();for(;r;){if(r instanceof Element&&r.shadowRoot){const e=t(r.shadowRoot);if(e)return e}r=a.nextNode()}return null},t=e=>{const a=e.querySelector('textarea[name="message"]');return a instanceof HTMLTextAreaElement?a:o(e)};return new Promise((t=>{const i=()=>{const s=(()=>{const a=e.querySelector("rs-message-composer");return a?.input?a.input:o(e)})();s?t(s):Date.now()-n>a?t(null):setTimeout(i,r)};i()}))};return {S:class{constructor(a){this.handleAMAStarted=async({startsAt:e,endsAt:a})=>{this.updateSchedule(e,a),this.host.amaState=r.D.Live},this.handleAMAEnded=async()=>{this.updateSchedule(this.host.startsAt,new Date),this.host.amaState=r.D.Ended},this.handleClick=async(a=!1)=>{const n=this.host.amaState===r.D.Scheduled?"start":"end";!a&&"start"===n&&this.host.startsAt>new Date(Date.now()+6e5)?this.host.pubsub.publish(e.T.AMATryStartEarly):await this.updateAmaSchedule(n)},this.updateAmaSchedule=async a=>{if("end"===a)this.host.pubsub.publish(e.T.AMATryEnd);else{const a=this.host.endsAt.getTime()-this.host.startsAt.getTime(),r=new Date,n=new Date(r.getTime()+a);try{const a=await this._updateEventTimeMutation({postId:this.host.postId,event:{startsAt:r.toISOString(),endsAt:n.toISOString()}});this.host.pubsub.publish(e.T.AMAStarted,a)}catch(a){const r=e.c("faceplate-alert",{level:e.X.error,message:"Something went wrong. Please try again later",cause:e.bs(a)});this.host.dispatchEvent(r)}}},this.endAma=async a=>{try{await this._endPostEventMutation({postId:this.host.postId,endNote:a}),this.host.pubsub.publish(e.T.PostUpdated,{postId:this.host.postId,value:!0,action:n.a.updateContent}),this.host.pubsub.publish(e.T.AMAEnded)}catch(a){const r=e.c("faceplate-alert",{level:e.X.error,message:"Something went wrong. Please try again later",cause:e.bs(a)});this.host.dispatchEvent(r)}},this.host=a,this.host.addController(this)}async hostConnected(){this.host.amaState!==r.D.Ended&&(this.host.pubsub.subscribe(e.T.AMAStarted,this.handleAMAStarted),this.host.pubsub.subscribe(e.T.AMAEnded,this.handleAMAEnded))}updateSchedule(e,a){this.host.startsAt=e??this.host.startsAt,this.host.endsAt=a??this.host.endsAt}_updateEventTimeMutation(a){return async function(a){const r={input:a},{data:n,errors:i}=await o({operation:e.C.UpdateEventTime,variables:r});if(i?.length)throw new Error(t(i));const{updatePost:s}=n;if(!s?.ok)throw new Error(t(s?.errors));return{startsAt:new Date(s.startsAt),endsAt:new Date(s.endsAt)}}(a)}_endPostEventMutation(a){return async function(a){const r={input:a},{data:n,errors:i}=await o({operation:e.C.EndPostEvent,variables:r});if(i?.length)throw new Error(t(i));const{endPostEvent:s}=n;if(!s?.ok)throw new Error(t(s?.errors))}(a)}},a:e=>e?"Edit post flair":"Add post flair",f:async(e,a=i)=>{const r=await a();r&&(e?(r.value="",r.focus()):setTimeout((()=>{r.focus()}),1e3))},g:(r,n,o)=>{const t=o===e.M.Post;switch(r){case a.M.MarkSpoiler:return n?t?"Post has been marked spoiler.":"Comment has been marked spoiler.":t?"There was an error marking the post spoiler. Please try again.":"There was an error marking the comment spoiler. Please try again.";case a.M.UnmarkSpoiler:return n?t?"Post has been unmarked spoiler.":"Comment has been unmarked spoiler.":"There was an error unmarking the post spoiler. Please try again.";case a.M.MarkNsfw:return n?t?"Post has been marked nsfw.":"Comment has been marked nsfw.":t?"There was an error marking the post nsfw. Please try again.":"There was an error marking the comment nsfw. Please try again.";case a.M.UnmarkNsfw:return n?t?"Post has been unmarked nsfw.":"Comment has been unmarked nsfw.":"There was an error unmarking the post nsfw. Please try again.";case a.M.IgnoreReports:return n?t?"Reports ignored and post approved.":"Reports ignored and comment approved.":t?"There was an error ignoring the post's reports. Please try again.":"There was an error ignoring the comment's reports. Please try again.";case a.M.UnignoreReports:return n?t?"Reports unignored.":"Reports successfully restored.":t?"There was an error unignoring the post's reports. Please try again.":"There was an error unignoring the comment's reports. Please try again.";case a.M.Distinguish:return n?t?"Post is marked as distinguished.":"Comment is marked as distinguished.":t?"There was an error distinguishing the post. Please try again.":"There was an error distinguishing the comment. Please try again.";case a.M.Undistinguish:return n?t?"Post is marked as undistinguished.":"Comment is marked as undistinguished.":t?"There was an error undistinguishing the post. Please try again.":"There was an error undistinguishing the comment. Please try again.";case a.M.Sticky:return n?t?"Post has been stickied.":"Comment has been stickied.":t?"There was an error stickying the post. Please try again.":"There was an error stickying the comment. Please try again.";case a.M.Unsticky:return n?t?"Post has been unstickied.":"Comment has been unstickied.":t?"There was an error unstickying the post. Please try again.":"There was an error unstickying the comment. Please try again.";case a.M.Lock:return n?t?"Post has been locked.":"Comment has been locked.":t?"There was an error locking the post. Please try again.":"There was an error locking the comment. Please try again.";case a.M.Unlock:return n?t?"Post has been unlocked.":"Comment has been unlocked.":t?"There was an error unlocking the post. Please try again.":"There was an error unlocking the comment. Please try again.";case a.M.ApproveContent:if(n)switch(o){case e.M.Award:return "Award approved.";case e.M.Comment:return "Comment approved.";case e.M.Post:return "Post approved.";default:return""}switch(o){case e.M.Award:return "There was an error approving the award. Please try again.";case e.M.Comment:return "There was an error approving the comment. Please try again.";case e.M.Post:return "There was an error approving the post. Please try again.";default:return""}case a.M.ConfirmRemoval:case a.M.RemoveContent:if(n)switch(o){case e.M.Award:return "Award removed.";case e.M.Comment:return "Comment removed.";case e.M.Post:return "Post removed.";default:return""}switch(o){case e.M.Award:return "There was an error removing the award. Please try again.";case e.M.Comment:return "There was an error removing the comment. Please try again.";case e.M.Post:return "There was an error removing the post. Please try again.";default:return""}case a.A.Distinguish:return n?t?"Post is marked as distinguished as admin.":"Comment is marked as distinguished as admin.":t?"There was an error distinguishing the post as admin. Please try again.":"There was an error distinguishing the comment as admin. Please try again.";case a.A.Undistinguish:return n?t?"Post is marked as undistinguished as admin.":"Comment is marked as undistinguished as admin.":t?"There was an error undistinguishing the post as admin. Please try again.":"There was an error undistinguishing the comment as admin. Please try again.";case a.M.RemoveHighlightedPost:return n?"Highlight removed":"There was an error removing the post from community highlights. Please try again.";default:return""}}};}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DzMpUNmB.js",import.meta.url,"DzMpUNmB");SML.di("./9ZdgYdsr.js",import.meta.url,"9ZdgYdsr");
SML.dm("CmgOir_w",["GlDbwxoG","s_Igk1Yn","DzMpUNmB","9ZdgYdsr"],(async(t,e,s,i)=>{const o=i.W(e.s);let a=class extends o{constructor(){super(...arguments),this.shareButtonText="",this.permalink="",this.size=t.a7.Medium,this.menuSize=s.L.Medium,this.buttonClass="",this.isDesktopViewport=!1,this.ssr=!1,this.appearance="secondary",this.shareMenuFeatureName=t.az,this.shareMenuTemplateId=i.S,this.useButton=!1,this.useMenu=!1,this.showFullButtons=!1,this.translationLanguage=""}static get styles(){return[t.t]}handlePostShareClick(t){this.isAllowedEvent(t)&&(this.isDesktopViewport?this.handleDesktopShareClick(t):this.handleMobileShareClick(t),this.ssr&&(this.isShareDropdownOpened?this.handleShareDropdownClose():this.handleShareDropdownOpen()))}render(){return this.ssr?e.x`<slot name="ssr-share-button" @click="${this.handlePostShareClick}" @keydown="${this.handlePostShareClick}"></slot>`:this.useMenu?this.renderOnlyShareMenuItem({handleShareClick:this.handlePostShareClick,menuSize:this.menuSize,attributes:{className:this.buttonClass}}):this.useButton?this.renderOnlyShareButton({handleShareClick:this.handlePostShareClick,size:this.size,attributes:{className:this.buttonClass},showFullButtons:this.showFullButtons}):this.renderShareDropdown({handleShareClick:this.handlePostShareClick,appearance:this.appearance,size:this.size,shareButtonText:this.shareButtonText,attributes:{className:this.buttonClass}})}};t._([t.n({type:String,attribute:"share-button-text"})],a.prototype,"shareButtonText",void 0),t._([t.n({type:String})],a.prototype,"permalink",void 0),t._([t.n({type:String})],a.prototype,"size",void 0),t._([t.n({type:String})],a.prototype,"menuSize",void 0),t._([t.n({type:String,attribute:"button-class"})],a.prototype,"buttonClass",void 0),t._([t.n({type:Boolean,attribute:"is-desktop-viewport"})],a.prototype,"isDesktopViewport",void 0),t._([t.n({type:Boolean,attribute:"ssr"})],a.prototype,"ssr",void 0),t._([t.n({type:String})],a.prototype,"appearance",void 0),t._([t.n({type:String,attribute:"share-menu-feature-name"})],a.prototype,"shareMenuFeatureName",void 0),t._([t.n({type:String,attribute:"share-menu-template-id"})],a.prototype,"shareMenuTemplateId",void 0),t._([t.n({type:Boolean,attribute:"use-button"})],a.prototype,"useButton",void 0),t._([t.n({type:Boolean,attribute:"use-menu"})],a.prototype,"useMenu",void 0),t._([t.n({type:Boolean,attribute:"show-full-buttons"})],a.prototype,"showFullButtons",void 0),t._([t.n({type:String})],a.prototype,"translationLanguage",void 0),a=t._([t.e("shreddit-post-share-button")],a)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./C88aLMqE.js",import.meta.url,"C88aLMqE");SML.di("./D2eAe0e-.js",import.meta.url,"D2eAe0e-");SML.di("./DJYjNS4q.js",import.meta.url,"DJYjNS4q");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("CmuSTQMe",["GlDbwxoG","C88aLMqE","D2eAe0e-","DJYjNS4q","s_Igk1Yn"],(async(t,e,n,o,i)=>{let r;const s=new Uint8Array(16);function l(){if(!r&&(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(s)}var a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const p=[];for(let t=0;t<256;++t)p.push((t+256).toString(16).slice(1));function c(t,e=0){return(p[t[e+0]]+p[t[e+1]]+p[t[e+2]]+p[t[e+3]]+"-"+p[t[e+4]]+p[t[e+5]]+"-"+p[t[e+6]]+p[t[e+7]]+"-"+p[t[e+8]]+p[t[e+9]]+"-"+p[t[e+10]]+p[t[e+11]]+p[t[e+12]]+p[t[e+13]]+p[t[e+14]]+p[t[e+15]]).toLowerCase()}function u(t){if(!function(t){return"string"==typeof t&&a.test(t)}(t))throw TypeError("Invalid UUID");let e;const n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=255&e,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=255&e,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=255&e,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=255&e,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=255&e,n}function h(t,e,n){function o(t,o,i,r){var s;if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));const e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}(t)),"string"==typeof o&&(o=u(o)),16!==(null===(s=o)||void 0===s?void 0:s.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+t.length);if(l.set(o),l.set(t,o.length),l=n(l),l[6]=15&l[6]|e,l[8]=63&l[8]|128,i){r=r||0;for(let t=0;t<16;++t)i[r+t]=l[t];return i}return c(l)}try{o.name=t}catch(t){}return o.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",o.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",o}function d(t){return 14+(t+64>>>9<<4)+1}function g(t,e){const n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function S(t,e,n,o,i,r){return g((s=g(g(e,t),g(o,r)))<<(l=i)|s>>>32-l,n);var s,l}function A(t,e,n,o,i,r,s){return S(e&n|~e&o,t,e,i,r,s)}function f(t,e,n,o,i,r,s){return S(e&o|n&~o,t,e,i,r,s)}function m(t,e,n,o,i,r,s){return S(e^n^o,t,e,i,r,s)}function w(t,e,n,o,i,r,s){return S(n^(e|~o),t,e,i,r,s)}h("v3",48,(function(t){if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return function(t){const e=[],n=32*t.length,o="0123456789abcdef";for(let i=0;i<n;i+=8){const n=t[i>>5]>>>i%32&255,r=parseInt(o.charAt(n>>>4&15)+o.charAt(15&n),16);e.push(r)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[d(e)-1]=e;let n=1732584193,o=-271733879,i=-1732584194,r=271733878;for(let e=0;e<t.length;e+=16){const s=n,l=o,a=i,p=r;n=A(n,o,i,r,t[e],7,-680876936),r=A(r,n,o,i,t[e+1],12,-389564586),i=A(i,r,n,o,t[e+2],17,606105819),o=A(o,i,r,n,t[e+3],22,-1044525330),n=A(n,o,i,r,t[e+4],7,-176418897),r=A(r,n,o,i,t[e+5],12,1200080426),i=A(i,r,n,o,t[e+6],17,-1473231341),o=A(o,i,r,n,t[e+7],22,-45705983),n=A(n,o,i,r,t[e+8],7,1770035416),r=A(r,n,o,i,t[e+9],12,-1958414417),i=A(i,r,n,o,t[e+10],17,-42063),o=A(o,i,r,n,t[e+11],22,-1990404162),n=A(n,o,i,r,t[e+12],7,1804603682),r=A(r,n,o,i,t[e+13],12,-40341101),i=A(i,r,n,o,t[e+14],17,-1502002290),o=A(o,i,r,n,t[e+15],22,1236535329),n=f(n,o,i,r,t[e+1],5,-165796510),r=f(r,n,o,i,t[e+6],9,-1069501632),i=f(i,r,n,o,t[e+11],14,643717713),o=f(o,i,r,n,t[e],20,-373897302),n=f(n,o,i,r,t[e+5],5,-701558691),r=f(r,n,o,i,t[e+10],9,38016083),i=f(i,r,n,o,t[e+15],14,-660478335),o=f(o,i,r,n,t[e+4],20,-405537848),n=f(n,o,i,r,t[e+9],5,568446438),r=f(r,n,o,i,t[e+14],9,-1019803690),i=f(i,r,n,o,t[e+3],14,-187363961),o=f(o,i,r,n,t[e+8],20,1163531501),n=f(n,o,i,r,t[e+13],5,-1444681467),r=f(r,n,o,i,t[e+2],9,-51403784),i=f(i,r,n,o,t[e+7],14,1735328473),o=f(o,i,r,n,t[e+12],20,-1926607734),n=m(n,o,i,r,t[e+5],4,-378558),r=m(r,n,o,i,t[e+8],11,-2022574463),i=m(i,r,n,o,t[e+11],16,1839030562),o=m(o,i,r,n,t[e+14],23,-35309556),n=m(n,o,i,r,t[e+1],4,-1530992060),r=m(r,n,o,i,t[e+4],11,1272893353),i=m(i,r,n,o,t[e+7],16,-155497632),o=m(o,i,r,n,t[e+10],23,-1094730640),n=m(n,o,i,r,t[e+13],4,681279174),r=m(r,n,o,i,t[e],11,-358537222),i=m(i,r,n,o,t[e+3],16,-722521979),o=m(o,i,r,n,t[e+6],23,76029189),n=m(n,o,i,r,t[e+9],4,-640364487),r=m(r,n,o,i,t[e+12],11,-421815835),i=m(i,r,n,o,t[e+15],16,530742520),o=m(o,i,r,n,t[e+2],23,-995338651),n=w(n,o,i,r,t[e],6,-198630844),r=w(r,n,o,i,t[e+7],10,1126891415),i=w(i,r,n,o,t[e+14],15,-1416354905),o=w(o,i,r,n,t[e+5],21,-57434055),n=w(n,o,i,r,t[e+12],6,1700485571),r=w(r,n,o,i,t[e+3],10,-1894986606),i=w(i,r,n,o,t[e+10],15,-1051523),o=w(o,i,r,n,t[e+1],21,-2054922799),n=w(n,o,i,r,t[e+8],6,1873313359),r=w(r,n,o,i,t[e+15],10,-30611744),i=w(i,r,n,o,t[e+6],15,-1560198380),o=w(o,i,r,n,t[e+13],21,1309151649),n=w(n,o,i,r,t[e+4],6,-145523070),r=w(r,n,o,i,t[e+11],10,-1120210379),i=w(i,r,n,o,t[e+2],15,718787259),o=w(o,i,r,n,t[e+9],21,-343485551),n=g(n,s),o=g(o,l),i=g(i,a),r=g(r,p)}return[n,o,i,r]}(function(t){if(0===t.length)return[];const e=8*t.length,n=new Uint32Array(d(e));for(let o=0;o<e;o+=8)n[o>>5]|=(255&t[o/8])<<o%32;return n}(t),8*t.length))}));var y={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function v(t,e,n){if(y.randomUUID&&!t)return y.randomUUID();const o=(t=t||{}).random||(t.rng||l)();return o[6]=15&o[6]|64,o[8]=63&o[8]|128,c(o)}function C(t,e,n,o){switch(t){case 0:return e&n^~e&o;case 1:case 3:return e^n^o;case 2:return e&n^e&o^n&o}}function b(t,e){return t<<e|t>>>32-e}h("v5",80,(function(t){const e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);const o=t.length/4+2,i=Math.ceil(o/16),r=new Array(i);for(let e=0;e<i;++e){const n=new Uint32Array(16);for(let o=0;o<16;++o)n[o]=t[64*e+4*o]<<24|t[64*e+4*o+1]<<16|t[64*e+4*o+2]<<8|t[64*e+4*o+3];r[e]=n}r[i-1][14]=8*(t.length-1)/Math.pow(2,32),r[i-1][14]=Math.floor(r[i-1][14]),r[i-1][15]=8*(t.length-1)&4294967295;for(let t=0;t<i;++t){const o=new Uint32Array(80);for(let e=0;e<16;++e)o[e]=r[t][e];for(let t=16;t<80;++t)o[t]=b(o[t-3]^o[t-8]^o[t-14]^o[t-16],1);let i=n[0],s=n[1],l=n[2],a=n[3],p=n[4];for(let t=0;t<80;++t){const n=Math.floor(t/20),r=b(i,5)+C(n,s,l,a)+p+e[n]+o[t]>>>0;p=a,a=l,l=b(s,30)>>>0,s=i,i=r}n[0]=n[0]+i>>>0,n[1]=n[1]+s>>>0,n[2]=n[2]+l>>>0,n[3]=n[3]+a>>>0,n[4]=n[4]+p>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}));const O=o.W(i.s);let I=class extends O{constructor(){super(...arguments),this.authFlow=t.A.Unknown,this.locale="en-EN",this.disableGoogleSSOButton=!1,this.disableAppleSSOButton=!1,this.subscribeToEmailDigest=!1,this.shouldNotTrackContinueWithGoogleTelemetry=!1,this.googleApiController=new n.G(this,n.G.ButtonUX),this.googleSSOButtonWidth=0,this.googleSlotName=`${this.tagName.toLowerCase()}-google-${v()}`,this.googleSlotController=new o.L(this,this.googleSlotName),this.appleSlotName=`${this.tagName.toLowerCase()}-apple-${v()}`,this.appleSlotController=new o.L(this,this.appleSlotName),this.authFlowController=new e.A(this),this.googleSigninBoundOnClick=this.onContinueWithGoogleClick.bind(this),this.renderGoogleSSOButton=()=>{const t=this.googleSlotController.slotted;if(t?.classList.add("h-[40px]"),0===this.container.clientWidth)return;const e=Math.max(Math.min(this.container.clientWidth,400),251);if(e===this.googleSSOButtonWidth)return;this.googleSSOButtonWidth=e,window.google?.accounts.id.renderButton(t,{logo_alignment:"left",size:"large",shape:"pill",text:"continue_with",theme:"outline",type:"standard",locale:this.locale,width:this.googleSSOButtonWidth,state:this.googleSlotName,click_listener:this.googleSigninBoundOnClick});const n=t?.querySelector("iframe");n?.setAttribute("tabindex","0")},this.onGoogleCredentialResponse=async e=>{if(!this.isConnected)return;const o=this.getActiveElement();if(o===document.body||this.contains(o)||this.googleSlotController.slotted?.contains(o))try{const o=n.G.parseCredentialResponse(e);return this.dispatchSSOAuthSuccess({email:o.email,idToken:e.credential,isSignedInAutomatically:!1,provider:t.dh.Google})}catch(e){window.Sentry?.captureException?.(e),this.dispatchSSOAuthFailure(t.dh.Google)}},this.initAppleSSOButton=()=>{if(!this.isConnected)return;if(this.disableAppleSSOButton)return;const e=this.appleSlotController.slotted;if(e){e.id=t.di;try{window.AppleID.auth.init({clientId:CLIENT_CONFIG.APPLE_SSO_CLIENT_ID,redirectURI:window.location.origin,scope:"email",state:t.ak.get("csrf_token"),usePopup:!0})}catch(t){window.Sentry?.captureException?.(t)}finally{e.id="",this.dispatchEvent(t.c("focusable-content-loaded"))}}else window.Sentry?.captureMessage?.("Apple SSO button container could not be found")},this.onAppleIDSignInOnSuccess=({detail:e})=>{if(!this.isConnected)return;if(!e?.authorization)return window.Sentry?.captureMessage?.("Apple sign in success event is missing authorization data"),void this.dispatchSSOAuthFailure(t.dh.Apple,"missing_data");const n=e.authorization.id_token;if(!n)return window.Sentry?.captureMessage?.("Apple sign in success event is missing an id token"),void this.dispatchSSOAuthFailure(t.dh.Apple,"missing_token");this.dispatchSSOAuthSuccess({email:e.user?.email||"",idToken:n,isSignedInAutomatically:!1,provider:t.dh.Apple})},this.onAppleIDSignInFailure=({detail:e})=>{this.isConnected&&"popup_closed_by_user"!==e?.error&&this.dispatchSSOAuthFailure(t.dh.Apple,e?.error)}}connectedCallback(){super.connectedCallback?.(),this.googleSSOButtonWidth=0,this.initGoogleSSOButton(),document.addEventListener("AppleIDSignInOnFailure",this.onAppleIDSignInFailure),document.addEventListener("AppleIDSignInOnSuccess",this.onAppleIDSignInOnSuccess),this.insertRecaptchaScript()}disconnectedCallback(){super.disconnectedCallback?.(),document.removeEventListener("AppleIDSignInOnFailure",this.onAppleIDSignInFailure),document.removeEventListener("AppleIDSignInOnSuccess",this.onAppleIDSignInOnSuccess),this.resizeObserver?.disconnect()}firstUpdated(){this.injectScript(t.dj,this.initAppleSSOButton)}async injectScript(t,e){try{await n.l(`script#${t}`),e()}catch(t){window.Sentry?.captureException?.(t)}}getActiveElement(){return document.activeElement}async initGoogleSSOButton(){this.isConnected&&(await this.googleApiController.initialize(),window.google&&(this.resizeObserver=new ResizeObserver(this.renderGoogleSSOButton),this.resizeObserver.observe(this.container)),this.dispatchEvent(t.c("focusable-content-loaded")))}renderGoogleSSOButtonContainer(){return this.disableGoogleSSOButton?i.A:i.x` <div class="focusable"> <div class="rounded-5 h-[40px] flex justify-center items-center box-border overflow-hidden relative capitalize"> <slot class="${t.dk}" name="${this.googleSlotName}"></slot> </div> </div> `}renderAppleSSOButtonContainer(){return this.disableAppleSSOButton?i.A:i.x` <div class="relative focusable"> <div class="rounded-5 h-[40px] bg-white border-sm border-solid border-[#dadce0] cursor-pointer px-sm overflow-hidden relative text-center select-none align-middle whitespace-nowrap"> <div class="text-[#131313] flex flex-nowrap flex-row h-100 items-center justify-between relative w-100"> <svg height="18" viewBox="0 0 18 18" width="18" xmlns="http://www.w3.org/2000/svg"> <path fill="currentColor" strike="inherit" d="m8.8162 4.15385c.78824 0 1.7763-.54927 2.3647-1.28163.5329-.6637.9215-1.59059.9215-2.517484 0-.125875-.0111-.251748-.0333-.354736-.8771.0343293-1.9318.606484-2.56458 1.37317-.49959.5836-.95477 1.49905-.95477 2.43738 0 .13732.02221.27464.03331.32041.05551.01144.14433.02289.23314.02289zm-2.77549 13.84615c1.07689 0 1.55427-.7438 2.89761-.7438 1.36558 0 1.66528.7209 2.86428.7209 1.1768 0 1.9651-1.1214 2.7089-2.2199.8327-1.2588 1.1768-2.4946 1.199-2.5519-.0777-.0228-2.3314-.9726-2.3314-3.63887 0-2.3115 1.7763-3.35283 1.8762-3.43293-1.1768-1.73935-2.9642-1.78512-3.4527-1.78512-1.3211 0-2.39799.8239-3.07521.8239-.73274 0-1.69861-.77813-2.84211-.77813-2.17599 0-4.38528 1.85378-4.38528 5.35537 0 2.17418.82155 4.47428 1.83183 5.96188.86595 1.2587 1.62088 2.2886 2.70888 2.2886z"/> </svg> <span class="flex-grow font-[500] text-14 overflow-hidden overflow-ellipsis align-top"> ${"Continue With Apple"} </span> </div> <div class="opacity-0 absolute top-0 start-0 end-0 bottom-0"> <slot class="${t.di}" name="${this.appleSlotName}" @click="${this.onContinueWithAppleClick}" @keydown="${this.onContinueWithAppleKeydown}"></slot> </div> </div> </div> `;}dispatchSSOAuthFailure(t,e="unknown"){this.authFlowController.trackSSOFailure({authFlow:this.authFlow,provider:t,reason:e})}async dispatchSSOAuthSuccess(e){const n=(await this.getRecaptchaTokenSafe())??void 0,o=t.c("sso-auth-success",e);if(this.dispatchEvent(o),!o.defaultPrevented)return this.authFlowController.identityProviderSigin({...e,recaptchaToken:n,recaptchaAction:this.captchaAction,authFlow:this.authFlow,subscribeToEmailDigest:this.subscribeToEmailDigest})}onContinueWithGoogleClick(){this.trackContinueWithGoogle()}onContinueWithAppleClick(){this.trackContinueWithApple()}onContinueWithAppleKeydown(t){"Enter"!==t.key&&"Space"!==t.key||this.trackContinueWithApple()}trackContinueWithGoogle(){this.shouldNotTrackContinueWithGoogleTelemetry||t.f(this,e.a(this.authFlow,t.dh.Google))}trackContinueWithApple(){t.f(this,e.a(this.authFlow,t.dh.Apple))}render(){return i.x` <div id="container" class="flex flex-col gap-xs mx-auto max-w-[400px]"> ${this.renderGoogleSSOButtonContainer()} ${this.renderAppleSSOButtonContainer()} </div> `}};I.styles=[i.i`.focusable:focus-within{outline:var(--color-global-focus) auto 1px;outline-offset:2px}`,t.t],t._([t.n({type:String,attribute:"auth-flow"})],I.prototype,"authFlow",void 0),t._([t.n({type:String,attribute:"locale"})],I.prototype,"locale",void 0),t._([t.n({type:Boolean,attribute:"disable-google-sso-button"})],I.prototype,"disableGoogleSSOButton",void 0),t._([t.n({type:Boolean,attribute:"disable-apple-sso-button"})],I.prototype,"disableAppleSSOButton",void 0),t._([t.n({type:Boolean,attribute:"subscribe-to-email"})],I.prototype,"subscribeToEmailDigest",void 0),t._([t.n({type:Boolean,attribute:"should-not-track-continue-with-google-telemetry"})],I.prototype,"shouldNotTrackContinueWithGoogleTelemetry",void 0),t._([t.Q("#container")],I.prototype,"container",void 0),I=t._([t.e("auth-flow-sso-buttons")],I)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("CnEX8an6",["GlDbwxoG","s_Igk1Yn"],(async(e,t)=>{let r=class extends t.s{constructor(){super(...arguments),this.overlayId="",this._registered=!1}static get styles(){return[e.t,e.J(":host {\n  position: relative;\n  z-index: 100;\n}\n")]}async connectedCallback(){super.connectedCallback(),this._registered||(this._registered=!0,await this.updateComplete,this.registerWithOverlayManager())}disconnectedCallback(){super.disconnectedCallback(),this._registered=!1,this.unregisterFromOverlayManager()}registerWithOverlayManager(){this.dispatchEvent(e.c("register-overlay-display",{display:this}))}unregisterFromOverlayManager(){this.dispatchEvent(e.c("unregister-overlay-display",{display:this}))}displayOverlay(e,t){this.overlayId=e,this.overlayProperties=t}renderTemplate(){if(!this.overlayId)return"";const t=this.querySelector(`template[slot=${this.overlayId}]`);return t instanceof HTMLTemplateElement?e.K(t):""}dismissOverlay(){this.overlayId=""}render(){return this.renderTemplate()||""}};e._([e.n({type:String,attribute:"overlay-id"})],r.prototype,"overlayId",void 0),e._([e.n({type:Object})],r.prototype,"overlayProperties",void 0),r=e._([e.e("shreddit-overlay-display")],r)}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("CnjPLu6R",["s_Igk1Yn"],(async a=>{const{svg:c}=a.g();return{H:"enabled_copy2",a:"enabled_copy1",n:a.m(c`<path d="M18.176 14.218l-.925-1.929A2.577 2.577 0 0117 11.184V8c0-3.86-3.141-7-7-7S3 4.14 3 8v3.184c0 .38-.087.762-.251 1.105l-.927 1.932A1.103 1.103 0 002.82 15.8h3.26A4.007 4.007 0 009.999 19a4.008 4.008 0 003.919-3.2h3.26c.381 0 .729-.192.934-.514a1.1 1.1 0 00.062-1.068h.002zM10 17.2c-.93 0-1.722-.583-2.043-1.4h4.087a2.197 2.197 0 01-2.043 1.4H10zm8.584-12.178a.9.9 0 01-.82-.527 8.542 8.542 0 00-2.073-2.827.9.9 0 011.207-1.335 10.386 10.386 0 012.504 3.417.9.9 0 01-.818 1.272zm-17.168 0a.898.898 0 01-.818-1.273A10.385 10.385 0 013.101.332a.9.9 0 011.208 1.335 8.564 8.564 0 00-2.073 2.827.902.902 0 01-.82.528z"></path>`,"0 0 20 20","notifications-active-fill")}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./C_OcidZ-.js",import.meta.url,"C_OcidZ-");SML.di("./CZPCygeT.js",import.meta.url,"CZPCygeT");SML.di("./wFIF_OFn.js",import.meta.url,"wFIF_OFn");
SML.dm("CnmQBnK-",["GlDbwxoG","s_Igk1Yn","C_OcidZ-","CZPCygeT","wFIF_OFn"],(async(t,a,e)=>{const i=a.s,n="translation-intervention-modal",{I18nPostTranslationOverride:s,I18nCommentTranslationOverride:o}=t.T,r=()=>!!t.$.getItem(t.a0.I18nTranslationInterventionShown),d=()=>t.$.setItem(t.a0.I18nTranslationInterventionShown,"true");let l=class extends i{constructor(){super(...arguments),this.translationContextValue=t.aB,this.open=!1,this.pubsub=new t.m(this),this.handleTranslationOverride=t=>{t.isContextUpdateEvent||r()||this.open||(this.translationOverrideActive=t.isTranslationActive,this.translationSourceId=t.id,this.show())},this.show=()=>{r()||(this.open=!0,this.modal?.showModal(),d())},this.close=()=>{this.translationOverrideActive=void 0,this.translationSourceId=void 0,this.open&&(this.modal?.close(),this.open=!1,this.dispatchEvent(new CustomEvent("translation-intervention-modal:close",{bubbles:!0,composed:!0})))},this.getThingTelemetryMetadata=()=>({post:"post"===this.mode?{id:this.translationSourceId,translation_state:!!this.translationOverrideActive}:"mtseo-post"===this.mode?{id:this.translationSourceId}:void 0,comment:"comment"===this.mode?{id:this.translationSourceId,translation_state:!!this.translationOverrideActive}:void 0}),this.handleDismiss=()=>{t.f(this,e.f({isImmersiveTranslationsActive:!!this.translationContextValue.isTranslationActive,isImmersiveVisit:this.isImmersiveVisit,...this.getThingTelemetryMetadata()})),this.close()},this.handleClick=a=>{t.f(this,e.g({actionType:a,isImmersiveTranslationsActive:"keep"===a?!!this.translationContextValue.isTranslationActive:!this.translationContextValue.isTranslationActive,isImmersiveVisit:this.isImmersiveVisit,...this.getThingTelemetryMetadata()})),"keep"===a?this.close():this.handleSubmit()},this.handleSubmit=()=>{"mtseo-post"===this.mode&&t.$.setItem(t.a0.I18nTranslationInterventionShown,"mtseo-disabled");const a=this.translationOverrideActive;this.dispatchContextUpdateEvent(a),this.close()}}connectedCallback(){super.connectedCallback(),r()||("post"===this.mode&&this.pubsub.subscribe(s,this.handleTranslationOverride,!1),"comment"===this.mode&&this.pubsub.subscribe(o,this.handleTranslationOverride,!1))}dispatchContextUpdateEvent(a){const e=new CustomEvent("update-translation-context",{bubbles:!0,composed:!0,detail:{...this.translationContextValue,isTranslationActive:a}});this.dispatchEvent(e),this.pubsub.publish(t.T.I18nPostTranslationOverride,{isTranslationActive:a,id:"",isContextUpdateEvent:!0,pageType:"feed"===this.pageType?"FEED":"PDP"})}render(){const e=this.translationOverrideActive?{body:"It looks like you know another language. Would you like all your content automatically translated?",confirmButton:"Continue Without Translations",cancelButton:"Turn On Translations"}:{body:"It looks like you know another language. Would you like to keep automatic translations turned on?",confirmButton:"Continue With Translations",cancelButton:"Turn off Translations"};return a.x` <faceplate-modal blocking ?open="${this.open}" class="${n} w-[350px] m:w-[320px] h-fit z-10"> <div slot="title" class="w-full m:w-fit"> <h3 class="my-0 font-bold inline-flex text-18" data-testid="i18n-modal-title"> ${"Update translations on Reddit"} </h3> </div> <div slot="closeButton" class="flex items-center"> ${t.Y({attributes:{"aria-label":"Close","data-testid":"i18n-modal-close-button",onclick:this.handleDismiss},appearance:"secondary",leadingIcon:a.c({size:a.I.Small}),size:t.a7.Small})} </div> <div class="flex flex-col w-full box-border"> <span class="text-16 my-lg text-pretty">${e.body}</span> <div class="flex flex-col w-full items-stretch gap-xs"> ${t.Y({appearance:"primary",size:t.a7.Large,shape:"pill",attributes:{className:"flex box-border w-full","data-testid":"i18n-modal-confirm-button",onclick:this.handleClick.bind(this,"keep")},children:a.x`<span class="font-semibold text-14">${e.confirmButton}</span>`})} ${t.Y({appearance:"secondary",size:t.a7.Large,shape:"pill",attributes:{className:"flex box-border w-full","data-testid":"i18n-modal-cancel-button",onclick:this.handleClick.bind(this,"change")},children:a.x`<span class="font-semibold text-14">${e.cancelButton}</span>`})} </div> </div> </faceplate-modal> `;}};l.styles=[t.t],t._([t.aA({context:t.aC,subscribe:!0}),t.N()],l.prototype,"translationContextValue",void 0),t._([t.n({type:String,attribute:"mode"})],l.prototype,"mode",void 0),t._([t.n({type:Boolean,attribute:"open"})],l.prototype,"open",void 0),t._([t.n({type:String,attribute:"page-type"})],l.prototype,"pageType",void 0),t._([t.n({type:Boolean,attribute:"is-immersive-visit"})],l.prototype,"isImmersiveVisit",void 0),t._([t.N()],l.prototype,"translationOverrideActive",void 0),t._([t.N()],l.prototype,"translationSourceId",void 0),t._([t.Q(`faceplate-modal.${n}`)],l.prototype,"modal",void 0),l=t._([t.e("translation-intervention-modal")],l)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./BTgalZoS.js",import.meta.url,"BTgalZoS");
SML.dm("Co1JScDL",["GlDbwxoG","BTgalZoS"],(async(i,e)=>{class t{constructor(e){this.isActivatingExplainer=!1,this.handleExplainerClosed=({explainerId:i,dismissed:e})=>{this.resolver&&this.resolver.explainerId===i&&(this.resolver.resolve({dismissed:e}),this.resolver=void 0)},(this.host=e).addController(this),this.pubsub=new i.m(this.host)}hostConnected(){this.pubsub.subscribe(i.T.ExplainerClosed,this.handleExplainerClosed,!1)}getExplainerDialogByExplainerId(i){return document.querySelector(`[dialog-id=explainer-dialog][data-explainer-id="${i}"]`)}async showExplainer({explainerExperience:e,explainerId:a,explainerVariantId:r,correlationId:n}){if(this.isActivatingExplainer||t.activatedExplainers.has(a))return{dismissed:!1};try{this.isActivatingExplainer=!0,await i.j({name:i.aI,routeParams:{explainerId:a},queryParams:{...null!=e&&{explainerExperience:e},...null!=r&&{explainerVariantId:r},...null!=n&&{correlationId:n}},renderMode:i.P.Contents});if(!this.getExplainerDialogByExplainerId(a))throw new Error(`Explainer dialog for explainer ID \`${a}\` not found after activation`);t.activatedExplainers.add(a)}catch(i){window.Sentry?.captureError?.(i)}finally{this.isActivatingExplainer=!1}return t.activatedExplainers.has(a)?new Promise((i=>this.resolver={explainerId:a,resolve:i})):{dismissed:!1}}}t.activatedExplainers=new Set;return{A:class{constructor(e,a){this.isActivatingDialog=!1,this.handleAwardContent=({thingId:i,award:e})=>{i===this.getThingId()&&this.onAward?.(e)},(this.host=e).addController(this),this.pubsub=new i.m(this.host),this.explainerController=new t(this.host),this.getThingId=a.getThingId,this.getAwardsPromoConfig=a.getAwardsPromoConfig,this.onAward=a.onAward}hostConnected(){this.onAward&&this.pubsub.subscribe(i.T.AwardContent,this.handleAwardContent,!1)}async activateDialog(){if(!this.isActivatingDialog)try{this.isActivatingDialog=!0;const{experience:t,variantId:a,id:r,type:n}=this.getAwardsPromoConfig?.()??{},s=t&&a&&r&&n===i.aJ.EducationalModule?await this.explainerController.showExplainer({explainerExperience:t,explainerVariantId:a,explainerId:r,correlationId:e.a.getCorrelationId()}):void 0;s?.dismissed||await i.j({name:i.aK,routeParams:{thingId:this.getThingId()},renderMode:i.P.Contents})}finally{this.isActivatingDialog=!1}}}}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("Codm-qGC",["s_Igk1Yn"],(async t=>{const{svg:E}=t.g();return{s:t.m(E`<path d="M10 2.8A7.2 7.2 0 112.8 10 7.208 7.208 0 0110 2.8zM10 1a9 9 0 100 18 9 9 0 000-18zm4 8.1H6v1.8h8V9.1z"></path>`,"0 0 20 20","subtract-circle")}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./C38sKiaF.js",import.meta.url,"C38sKiaF");SML.di("./C88aLMqE.js",import.meta.url,"C88aLMqE");SML.di("./CcP9EA1F.js",import.meta.url,"CcP9EA1F");SML.di("./DPWYpq70.js",import.meta.url,"DPWYpq70");SML.di("./fnKkpEwQ.js",import.meta.url,"fnKkpEwQ");SML.di("./QTT23FkH.js",import.meta.url,"QTT23FkH");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./DNASVThB.js",import.meta.url,"DNASVThB");SML.di("./B7hVC8R1.js",import.meta.url,"B7hVC8R1");
SML.dm("Cp7L3hA_",["GlDbwxoG","s_Igk1Yn","C38sKiaF","C88aLMqE","CcP9EA1F","DPWYpq70","fnKkpEwQ","QTT23FkH","CC2wUKE8","DNASVThB","B7hVC8R1"],(async(t,e,s,r)=>{const i={[t.fs.Login]:"login",[t.fs.Password]:"password",[t.fs.Register]:"register",[t.fs.RegisterPrompt]:"register",[t.fs.RegisterEmailOnly]:"register",[t.fs.PasswordRecovery]:"passwordrecovery",[t.fs.Onboarding]:"onboarding",[t.fs.PhoneAuth]:"login",[t.fs.HighFlyerRegister]:"register",[t.fs.LoggedInAction]:"register",[t.fs.AnswersRegister]:"register",[t.fs.CommunityValueRegister]:"register",[t.fs.MagicLinkLogin]:"login"};const o=e.s;let a=class extends o{constructor(){super(...arguments),this.step=t.fs.Register,this.hasRegularFont=!1,this.hideUnderline=!1,this.hasFullWidth=!1,this.hasLargeText=!1,this.params={},this.authFlowController=new r.A(this),this.sendCustomEvent=t=>{t.preventDefault(),t.stopPropagation(),this.authFlowController.show(this.step,this.params)}}static get styles(){return[t.t]}render(){return s.a({attributes:{className:this.hasFullWidth?"block":"inline-block",href:(t=this.step,`${CLIENT_CONFIG.ORIGIN}/${i[t]}/`),onclick:this.sendCustomEvent},children:e.x`<slot></slot>`,fontWeight:this.hasRegularFont?s.b.Regular:s.b.Semibold,size:this.hasLargeText?s.A.Medium:s.A.Small,suppressVisitedStyle:!0,underline:this.hideUnderline?"none":"always"});var t}};t._([t.n({type:String})],a.prototype,"step",void 0),t._([t.n({type:Boolean,attribute:"has-regular-font"})],a.prototype,"hasRegularFont",void 0),t._([t.n({type:Boolean,attribute:"hide-underline"})],a.prototype,"hideUnderline",void 0),t._([t.n({type:Boolean,attribute:"full-width"})],a.prototype,"hasFullWidth",void 0),t._([t.n({type:Boolean,attribute:"large-text"})],a.prototype,"hasLargeText",void 0),t._([t.n({type:Object})],a.prototype,"params",void 0),a=t._([t.e("auth-flow-link")],a)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./wFIF_OFn.js",import.meta.url,"wFIF_OFn");SML.di("./TC9gnkab.js",import.meta.url,"TC9gnkab");SML.di("./Dv3oQtz-.js",import.meta.url,"Dv3oQtz-");
SML.dm("CqON9ZBt",["GlDbwxoG","s_Igk1Yn","TC9gnkab","wFIF_OFn","Dv3oQtz-"],(async(t,e,s)=>{var i;!function(t){t.small="small",t.medium="medium"}(i||(i={}));let o=class extends e.s{constructor(){super(...arguments),this.size=i.medium}render(){return e.x` <button class="flex items-center justify-center p-0 m-0 border-none rounded-1 h-[var(--emote-btn-size)] w-[var(--emote-btn-size)] bg-transparent hover:bg-neutral-background-hover cursor-pointer"> <slot class="emote"></slot> </button> `}};function r({pageType:t,url:e}){return {page_type:t,...(e ? {pane_name:e} : {})};}function a({subredditId:t,subredditName:e}){return {id:t,...(e ? {name:e} : {})};}o.styles=[e.i`:host{--emote-btn-size:2.25rem;--emote-size:1.75rem;display:block}:host([size=small]){--emote-btn-size:1.25rem;--emote-size:1.25rem}.emote::slotted(img){width:var(--emote-size);height:var(--emote-size);object-fit:contain;margin:0!important;padding:0!important}`,t.t],t._([t.n({type:String,reflect:!0})],o.prototype,"size",void 0),o=t._([t.e("community-status")],o);const n=e=>t.b({source:s.S.COMMUNITY_STATUS,action:s.A.CLICK,noun:s.N.STATUS_LINK},{action_info:r(e),subreddit:a(e)}),l=e.s;let d=class extends l{constructor(){super(...arguments),this.subredditId="",this.subredditName="",this.open=()=>{this.bottomSheet?.showModal()},this.close=()=>{this.bottomSheet?.close()},this.handleKeyUp=t=>{"Enter"!==t.key&&"Space"!==t.key||this.close()},this.handleStatusClicks=e=>{const s=e.composedPath().find((t=>t instanceof HTMLAnchorElement));s&&t.f(this,n({subredditId:this.subredditId,subredditName:this.subredditName,pageType:this._getPageType(),url:s.href}))},this._getPageType=t.w}render(){return e.x` <button @click="${this.open}" class="m-0 p-0 border-none bg-transparent"> <slot name="trigger"></slot> </button> <faceplate-bottom-sheet id="bottom-sheet"> <div class="flex flex-col w-full box-border px-md py-xl"> <div class="flex justify-center align-center"> <slot name="emote"></slot> </div> <p class="text-center m-0 line-clamp-8 text-14 font-semibold"> ${""} <slot name="status" @click="${this.handleStatusClicks}"></slot> </p> <slot @click="${this.close}" @keyup="${this.handleKeyUp}" name="primary-btn"></slot> ${t.Y({appearance:"secondary",attributes:{onclick:this.close,className:"mt-sm",id:"close-button"},children:"Close"})} </div> </faceplate-bottom-sheet> `;}};d.styles=[e.i`:host{display:inline-flex}slot[name=emote]::slotted(img){max-height:148px;margin-bottom:32px!important}slot[name=primary-btn]::slotted(*){margin-top:24px}`,t.t],t._([t.n({type:String,attribute:"subreddit-id"})],d.prototype,"subredditId",void 0),t._([t.n({type:String,attribute:"subreddit-name"})],d.prototype,"subredditName",void 0),t._([t.Q("#bottom-sheet")],d.prototype,"bottomSheet",void 0),d=t._([t.e("community-status-bottom-sheet")],d);const m=e.s;let c=class extends m{constructor(){super(...arguments),this.subredditId="",this.subredditName="",this.handleClick=()=>{this.hovercard?.close()},this.handleKeyUp=t=>{"Enter"===t.key&&this.handleClick()},this.handleStatusClicks=e=>{const s=e.composedPath().find((t=>t instanceof HTMLAnchorElement));s&&t.f(this,n({subredditId:this.subredditId,subredditName:this.subredditName,pageType:this._getPageType(),url:s.href}))},this._getPageType=t.w}render(){return e.x` <faceplate-hovercard position="bottom" appearance="inverted"> <span> <slot name="trigger"></slot> </span> <article slot="content" class="flex flex-col relative py-sm w-[184px]"> <div class="absolute right-2xs top-2xs"> <slot name="edit-btn" @click="${this.handleClick}" @keyup="${this.handleKeyUp}"></slot> </div> <div class="flex justify-center align-center"> <slot name="emote"></slot> </div> <p class="text-center m-0 mt-md line-clamp-12 text-12"> ${""} <slot name="status" @click="${this.handleStatusClicks}"></slot> </p> </article> </faceplate-hovercard> `}};c.styles=[e.i`slot[name=emote]::slotted(img){max-height:140px;max-width:148px!important;margin-bottom:0!important}faceplate-hovercard::part(content-container){background:var(--color-neutral-content-strong)}`,t.t],t._([t.n({type:String,attribute:"subreddit-id"})],c.prototype,"subredditId",void 0),t._([t.n({type:String,attribute:"subreddit-name"})],c.prototype,"subredditName",void 0),t._([t.Q("faceplate-hovercard")],c.prototype,"hovercard",void 0),c=t._([t.e("community-status-tooltip")],c)}));
SML.di("./DrfUuQzt.js",import.meta.url,"DrfUuQzt");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./CMCPq0sv.js",import.meta.url,"CMCPq0sv");SML.di("./I6Px4IX3.js",import.meta.url,"I6Px4IX3");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DdoeBlGT.js",import.meta.url,"DdoeBlGT");SML.di("./FEzVvA-C.js",import.meta.url,"FEzVvA-C");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("CsGy0MYm",["s_Igk1Yn"],(async e=>{const{svg:a}=e.g();return{C:"product-carousel-item",E:"toggleable-video-player-element",G:"gallery-images-container",T:"thumbnail-video-toggle-container",V:"toggleable-video-player-close-btn",a:"thumbnail-image-video-toggle",b:"thumbnail-playback-action-circle",c:"hiddenClassnames",d:"visibleClassnames",r:e.m(a`<path d="M17.1 10.1a.9.9 0 00-.9.9c0 3.42-2.781 6.2-6.2 6.2A6.207 6.207 0 013.8 11c0-3.419 2.781-6.2 6.2-6.2h3.552l-1.517 1.264a.9.9 0 101.153 1.384l3.426-2.855a.9.9 0 000-1.382L13.188.354a.9.9 0 10-1.153 1.383l1.517 1.264H10c-4.411 0-8 3.588-8 8s3.589 8 8 8 8-3.589 8-8a.9.9 0 00-.9-.9z"></path>`,"0 0 20 20","refresh",!0)}}));
SML.dm("Csfdzp9J",[],(async()=>{var t;!function(t){t.Main="main",t.TextArea="text-area",t.Button="button",t.SubredditRules="subreddit-rules",t.Image="image",t.CommunityList="community-list",t.Calendar="calendar",t.Custom="custom",t.IdCard="id-card",t.PostFlair="post-flair",t.Menu="menu"}(t||(t={}));const e={[t.Main]:"",[t.TextArea]:"text_widget",[t.Button]:"button_widget",[t.SubredditRules]:"rules_widget",[t.Image]:"image_widget",[t.CommunityList]:"community_list_widget",[t.Calendar]:"calendar_widget",[t.Custom]:"custom_widget",[t.IdCard]:"id_card",[t.PostFlair]:"post_flair_widget",[t.Menu]:"bookmarks_widget"};return{C:"community-widget-edit-modal",get E(){return t},W:e}}));

SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("Ct5172UI",["s_Igk1Yn"],(async c=>{const{svg:h}=c.g();return{a:c.m(h`<path d="M15.7 1H4.3C2.48 1 1 2.48 1 4.3v2.76c0 .5.4.9.9.9H2v6.74C2 16.52 3.48 18 5.3 18h9.4c1.82 0 3.3-1.48 3.3-3.3V7.96h.1c.5 0 .9-.4.9-.9V4.3C19 2.48 17.52 1 15.7 1zM2.8 4.3c0-.83.67-1.5 1.5-1.5h11.4c.83 0 1.5.67 1.5 1.5v1.86H2.8V4.3zm13.4 10.4c0 .83-.67 1.5-1.5 1.5H5.3c-.83 0-1.5-.67-1.5-1.5V7.96h12.4v6.74z"></path><path d="M13 10.06H7v1.8h6v-1.8z"></path>`,"0 0 20 20","archive")}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("Ctavlk6m",["GlDbwxoG","s_Igk1Yn"],(async(e,t)=>{let n=class extends t.s{constructor(){super(...arguments),this.open=!1,this._eventsDefined=!1,this.updated=e=>{e.has("open")&&(this.open&&(this.details.open=!0),this._animator.open=this.open,this._summary.setAttribute("aria-expanded",this.open.toString()))},this._onClick=e=>{e.target&&this._summary?.contains(e.target)&&(e.preventDefault(),this.open=!this.open,this._animator.open=this.open)},this._onTransitionEnd=e=>{e.target&&this._animator?.contains(e.target)&&(this.details.open=this.open)}}get details(){return this.querySelector("details")}get _summary(){return this.details?this.details.querySelector("summary"):null}get _animator(){return this.querySelector("faceplate-auto-height-animator")}connectedCallback(){super.connectedCallback(),this._eventsDefined||(this.addEventListener("click",this._onClick),this.addEventListener("transitionend",this._onTransitionEnd),this._eventsDefined=!0),async function(){return new Promise((e=>{"loading"===document.readyState?document.addEventListener("readystatechange",(()=>{e(!0)}),{once:!0}):e(!0)}))}().then((()=>{null!=this.details&&null!=this._summary&&null!=this._animator&&(this.open=this.details.open)}))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this._onClick),this.removeEventListener("transitionend",this._onTransitionEnd),this._eventsDefined=!1}createRenderRoot(){return this}};return e._([e.n({type:Boolean,reflect:!0})],n.prototype,"open",void 0),n=e._([e.e("faceplate-expandable-section-helper")],n),{get FaceplateExpandableSectionHelper(){return n}}}));
SML.dm("CtbLRG6p",[],(async()=>{var t;!function(t){t.ALL="all",t.AWARD="award",t.POST="posts",t.COMMENT="comments",t.POST_COMMENT="postsandcomments"}(t||(t={}));var e,s;return function(t){t[t.SelectAll=1]="SelectAll",t[t.DeselectAll=2]="DeselectAll",t[t.SpamFiltered=3]="SpamFiltered",t[t.HasReports=4]="HasReports",t[t.SelfPosts=5]="SelfPosts",t[t.PostsWithFlair=6]="PostsWithFlair",t[t.Posts=7]="Posts",t[t.Comments=8]="Comments"}(e||(e={})),function(t){t.translated="translated",t.untranslated="untranslated",t.none="none"}(s||(s={})),{get D(){return e},M:3,get T(){return s},get a(){return t}}}));

SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DdoeBlGT.js",import.meta.url,"DdoeBlGT");
SML.dm("CuKkkr9D",["GlDbwxoG","s_Igk1Yn","DdoeBlGT"],(async(t,e,i)=>{const r="rpl-dialog-trigger:trigger-clicked",s=[];function n(t,e){const i=e.getBoundingClientRect();Object.assign(t.style,{position:"fixed",left:`${i.left}px`,height:`${i.height}px`})}function a(t){Object.assign(t.style,{position:"",left:"",height:"",opacity:"",transform:""})}let o=class extends(t.bt(t.bu(e.s))){constructor(){super(...arguments),this.open=!1,this.dialogId="",this.triggerElement=null,this.entityDialogRootContainer=null,this.prefersReducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches,this.shouldEnableNavPersistence=!1,this.handleAfterNavigation=()=>{this.open&&(window.removeEventListener("afterRoute",this.handleAfterNavigation),this.connectedCallback(),this.rightSidebar.classList.add("hidden"));const t=this.rightSidebar.classList.contains("hidden");!s.length&&t&&this.close(!1)},this.handleTriggerEvent=t=>{const e=t.detail;if(e.dialogId===this.dialogId&&!this.open&&!this.triggerElement)return this.triggerElement=e.triggerElement,this.show()}}connectedCallback(){super.connectedCallback(),document.addEventListener(r,this.handleTriggerEvent),this.rightSidebar=document.getElementById("right-sidebar-container"),this.entityDialogRootContainer=document.getElementById(i.R),this.rightSidebar?.parentElement||console.log("Missing right sidebar element. Please make sure right sidebar is rendered before trigger this overlay."),super.portalRoot=this.entityDialogRootContainer??document.body,this.prefersReducedMotion||(this.portalContainer.style.transition="opacity 120ms linear, transform 280ms cubic-bezier(0.54, 1.15, 1, 1)",this.rightSidebar.style.transition="opacity 80ms linear, transform 200ms cubic-bezier(0.54, 1.15, 1, 1)"),this.portalContainer.className="\n    rounded-4 w-[316px] min-w-[316px] xs:max-h-[calc(100vh-var(--shreddit-header-height)-32px)]\n    xs:sticky xs:top-[calc(var(--shreddit-header-height)+16px)] xs:overflow-hidden box-border\n    flex flex-col border border-solid border-neutral-border-weak shadow-neutral-border-weak shadow-[0px_1px_8px_0px] hidden xs:flex",this.shouldEnableNavPersistence&&window.addEventListener("afterRoute",this.handleAfterNavigation)}disconnectedCallback(){document.removeEventListener(r,this.handleTriggerEvent),super.disconnectedCallback(),this.shouldEnableNavPersistence&&!this.open&&window.removeEventListener("afterRoute",this.handleAfterNavigation)}closeAllOpenOverlays(){s.forEach((t=>t.close(!1)))}handleTransitionEnd(t){t?(this.rightSidebar.classList.add("hidden"),a(this.portalContainer)):(this.removePortal(),a(this.rightSidebar))}runAnimation(t){const e={opening:{portal:{start:{transform:"translateX(32px)",opacity:"0"},end:{transform:"translateX(0px)",opacity:"1"}},rightSidebar:{start:{transform:"translateX(0px)",opacity:"1"},end:{transform:"translateX(-16px)",opacity:"0"}}},closing:{portal:{start:{transform:"translateX(0px)",opacity:"1"},end:{transform:"translateX(32px)",opacity:"0"}},rightSidebar:{start:{transform:"translateX(-16px)",opacity:"0"},end:{transform:"translateX(0px)",opacity:"1"}}}},i=t?e.opening:e.closing;Object.assign(this.portalContainer.style,i.portal.start),Object.assign(this.rightSidebar.style,i.rightSidebar.start),requestAnimationFrame((()=>{Object.assign(this.portalContainer.style,i.portal.end),Object.assign(this.rightSidebar.style,i.rightSidebar.end)})),this.portalContainer.addEventListener("transitionend",(()=>this.handleTransitionEnd(t)),{once:!0})}show(){this.open=!0,this.triggerElement?.addOpenAttributes();const t=s.length>0;this.closeAllOpenOverlays(),s.push(this),n(this.portalContainer,this.rightSidebar),this.appendTemplateContentTo(this.portalContainer,{cache:!0}),this.attachPortal();this.prefersReducedMotion||t?this.handleTransitionEnd(!0):this.runAnimation(!0)}close(t=!0){this.open=!1,s.splice(s.indexOf(this),1),n(this.rightSidebar,this.portalContainer),this.rightSidebar.classList.remove("hidden");this.prefersReducedMotion||!t?this.handleTransitionEnd(!1):this.runAnimation(!1),this.triggerElement&&(this.triggerElement.removeOpenAttributes(),this.triggerElement=null)}userClose(){this.close(),this.dispatchEvent(new CustomEvent("shreddit-right-rail-overlay:user-closed"))}render(){return e.x` <div class="sticky top-0 bg-neutral-background z-10"> <div class="flex justify-between items-center"> <div class="flex justify-between py-md pl-md pr-0 items-center"> <slot name="header" class="font-semibold text-18 text-neutral-content-strong"></slot> </div> ${t.Y({appearance:"secondary",attributes:{type:"button",onclick:()=>this.userClose(),className:"shrink-0 mx-sm mr-sm ml-xs"},size:t.a7.Small,leadingIcon:e.c({size:e.I.Small})})} </div> <hr class="border-neutral-border-weak border-0 border-t mx-md my-0"> </div> <slot></slot> `}};o.styles=[t.t],t._([t.n({type:Boolean,reflect:!0})],o.prototype,"open",void 0),t._([t.n({type:String,reflect:!0,attribute:"dialog-id"})],o.prototype,"dialogId",void 0),t._([t.n({type:Boolean,attribute:"should-enable-nav-persistence"})],o.prototype,"shouldEnableNavPersistence",void 0),o=t._([t.e("shreddit-right-rail-overlay")],o)}));
SML.di("./BbX3H2B5.js",import.meta.url,"BbX3H2B5");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./C5MIbR3s.js",import.meta.url,"C5MIbR3s");SML.di("./Bdma5j3T.js",import.meta.url,"Bdma5j3T");SML.di("./DrrjN1Nt.js",import.meta.url,"DrrjN1Nt");SML.di("./B8B7_bfl.js",import.meta.url,"B8B7_bfl");SML.di("./jOi_w9kT.js",import.meta.url,"jOi_w9kT");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./C0I_JWye.js",import.meta.url,"C0I_JWye");SML.di("./DopQd8m2.js",import.meta.url,"DopQd8m2");SML.di("./B9LG8aGh.js",import.meta.url,"B9LG8aGh");SML.di("./DDVMeV6m.js",import.meta.url,"DDVMeV6m");SML.di("./BCmR6Ymi.js",import.meta.url,"BCmR6Ymi");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");SML.di("./CdFYkV-r.js",import.meta.url,"CdFYkV-r");SML.di("./B5upT-N6.js",import.meta.url,"B5upT-N6");SML.di("./2Pp2AIeo.js",import.meta.url,"2Pp2AIeo");SML.di("./DzMpUNmB.js",import.meta.url,"DzMpUNmB");SML.di("./DOd9aHN1.js",import.meta.url,"DOd9aHN1");SML.di("./CKCUSZ1J.js",import.meta.url,"CKCUSZ1J");SML.di("./BC4TFJx3.js",import.meta.url,"BC4TFJx3");SML.di("./B_YWV8CL.js",import.meta.url,"B_YWV8CL");SML.di("./CLcwsfQZ.js",import.meta.url,"CLcwsfQZ");SML.di("./CTwJH_ps.js",import.meta.url,"CTwJH_ps");SML.di("./OimaI6pY.js",import.meta.url,"OimaI6pY");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");SML.di("./FagDXDzk.js",import.meta.url,"FagDXDzk");SML.di("./DBgqsMtO.js",import.meta.url,"DBgqsMtO");SML.di("./Ccw0cO_g.js",import.meta.url,"Ccw0cO_g");SML.di("./CykCcTkJ.js",import.meta.url,"CykCcTkJ");SML.di("./HYbNa5uQ.js",import.meta.url,"HYbNa5uQ");SML.di("./DAqoOXDQ.js",import.meta.url,"DAqoOXDQ");SML.di("./CsGy0MYm.js",import.meta.url,"CsGy0MYm");SML.di("./BGOkDHmz.js",import.meta.url,"BGOkDHmz");SML.di("./DoY_u8JV.js",import.meta.url,"DoY_u8JV");SML.di("./DhiXEqBo.js",import.meta.url,"DhiXEqBo");SML.di("./Ctavlk6m.js",import.meta.url,"Ctavlk6m");SML.di("./827J5oU2.js",import.meta.url,"827J5oU2");SML.di("./Ca6XYVan.js",import.meta.url,"Ca6XYVan");SML.di("./Do2tmTAb.js",import.meta.url,"Do2tmTAb");SML.di("./DMfuJHXs.js",import.meta.url,"DMfuJHXs");SML.di("./Dwuzm5vN.js",import.meta.url,"Dwuzm5vN");SML.di("./CdOEuw7t.js",import.meta.url,"CdOEuw7t");SML.di("./B8v3CYv9.js",import.meta.url,"B8v3CYv9");SML.di("./BH4VvyCw.js",import.meta.url,"BH4VvyCw");
SML.dm("CuV-i145",["GlDbwxoG","s_Igk1Yn","C5MIbR3s","Bdma5j3T","BbX3H2B5","DrrjN1Nt","B8B7_bfl","jOi_w9kT","CC2wUKE8","C0I_JWye","DopQd8m2","B9LG8aGh","DDVMeV6m","BCmR6Ymi","DRM-oTYq","CdFYkV-r","B5upT-N6","2Pp2AIeo","DzMpUNmB","DOd9aHN1","CKCUSZ1J","BC4TFJx3","B_YWV8CL","CLcwsfQZ","CTwJH_ps","OimaI6pY","D-MAMWlw","FagDXDzk","DBgqsMtO","Ccw0cO_g","CykCcTkJ","HYbNa5uQ","DAqoOXDQ","CsGy0MYm","BGOkDHmz","DoY_u8JV","DhiXEqBo","Ctavlk6m","827J5oU2","Ca6XYVan","Do2tmTAb","DMfuJHXs","Dwuzm5vN","CdOEuw7t","B8v3CYv9","BH4VvyCw"],(async(t,E,e,r)=>{class o{constructor(E){this.onKeyDown=t=>{const E="Escape"===t.key,e="Tab"===t.key,r=Boolean(e&&this.host.shadowRoot&&this.host.input&&this.host.shadowRoot.activeElement===this.host.input),o=e&&!t.shiftKey;E&&t.preventDefault(),(E||r||o)&&this.host.handleBlur()},this.getKeyboardNavigableDropdownItems=()=>{const E=`[role="menuitem"],summary[aria-controls*="${t.fW}"],${r.R}`,e=[];return[this.host.suggestedSearchResultsContainer,this.host.recentSearchesContainer,this.host.trendingSearchesContainer,this.host.typeaheadResultsContainer].forEach((t=>{if(!t)return;t.querySelectorAll(E).forEach((t=>{const E=null!==t.offsetParent&&t.offsetHeight>0,r="SUMMARY"===t.tagName,o=t.closest("faceplate-expandable-section-helper");E&&(r||!o||o.open)&&e.push(t)}))})),e},this.handleDropdownKeyDown=t=>{if("ArrowDown"===t.key||"ArrowUp"===t.key){t.preventDefault();const E=t.target,e=this.getKeyboardNavigableDropdownItems();let r=-1;e.forEach(((t,e)=>{t===E&&(r=e)}));const o="ArrowDown"===t.key?r+1:r-1,T=r>=0&&r<e.length?e[o]:void 0;T?T.focus():this.focusSearchInputWithArrowKeys()}},this.host=E}hostConnected(){this.host.addEventListener("keydown",this.onKeyDown)}hostDisconnected(){this.host.removeEventListener("keydown",this.onKeyDown)}handleKeyDown(t){if(!["ArrowDown","ArrowUp"].includes(t.key))return;t.preventDefault();const E=this.getKeyboardNavigableDropdownItems();0!==E.length&&("ArrowDown"===t.key?E[0].focus():"ArrowUp"===t.key&&E[E.length-1].focus())}focusSearchInputWithArrowKeys(){const t=this.host.input?.shadowRoot?.querySelector("input");t?.focus();const E=t?.value.length;E&&t?.setSelectionRange(E,E)}}let T=class extends e.R{constructor(){super(...arguments),this.handleDropdownKeyDown=t=>{super.handleDropdownKeyDown(t),this.keyboardNavigationController?.handleDropdownKeyDown(t)}}handleFocus(){super.handleFocus(),this.keyboardNavigationController||(this.keyboardNavigationController=new o(this),this.addController(this.keyboardNavigationController))}handleBlur(){super.handleBlur(),this.handleScreenLeaveTracking()}handleKeyDown(t){super.handleKeyDown(t),this.keyboardNavigationController?.handleKeyDown(t)}render(){const r=this.showDropdown&&(this.showAskButton||this.homeRevampEnabled);return E.x` <div class="flex w-100"> <div class="reddit-search-bar rounded-5 flex-1 box-border ${t.H({"shadow-sm":this.isFocused,"bg-neutral-background-strong":this.isFocused,"bg-secondary-background":!this.isFocused,outline:r,"outline-1":r,"outline-[--color-neutral-border-strong]":r})}" data-faceplate-tracking-context="${JSON.stringify(this.searchTelemetryData)}"> <div class="${t.H({"pb-[.5rem]":this.showDropdown&&!this.isSearchScopeEnabled,"pb-xs":this.showDropdown&&this.isSearchScopeEnabled,"border-b-sm":this.showDropdown,"border-t-0":this.showDropdown,"border-e-0":this.showDropdown,"border-s-0":this.showDropdown,"border-solid":this.showDropdown,"border-neutral-border-weak":this.showDropdown})}"> <form autocomplete="off" class="flex relative items-center text-neutral-content-strong" @submit="${this.handleSubmit}"> ${this.renderSearchInput(!0)} </form> </div> <div class="max-h-[calc(100vh-var(--shreddit-header-height)-15px-10px)] overflow-y-auto overflow-x-hidden m-t ${t.H({hidden:!this.showDropdown})}" id="${e.S}"> ${this.renderDropdownContent(!0)} </div> </div> ${this.renderShowFiltersEntryPoint()} </div> `}};T=t._([t.e("reddit-search-large")],T)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./C88aLMqE.js",import.meta.url,"C88aLMqE");SML.di("./CcP9EA1F.js",import.meta.url,"CcP9EA1F");SML.di("./D2eAe0e-.js",import.meta.url,"D2eAe0e-");SML.di("./DJYjNS4q.js",import.meta.url,"DJYjNS4q");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./B7hVC8R1.js",import.meta.url,"B7hVC8R1");SML.di("./DPWYpq70.js",import.meta.url,"DPWYpq70");SML.di("./fnKkpEwQ.js",import.meta.url,"fnKkpEwQ");SML.di("./QTT23FkH.js",import.meta.url,"QTT23FkH");SML.di("./DNASVThB.js",import.meta.url,"DNASVThB");
SML.dm("Cv6LP2GL",["GlDbwxoG","C88aLMqE","CcP9EA1F","D2eAe0e-","DJYjNS4q","CC2wUKE8","s_Igk1Yn","B7hVC8R1","DPWYpq70","fnKkpEwQ","QTT23FkH","DNASVThB"],(async(e,t,i,s,o,a,r)=>{const n="onboarding",h="google_one_tap";const l=new Set(e.eI.map((t=>e.aY({source:a.ao,action:a.ap,noun:t})))),c=o.W(r.s);let E=class extends c{constructor(){super(...arguments),this.isEmailPermissionRequired=!1,this.delay=0,this.hasCredentials=!1,this.googleApiController=new s.G(this,s.G.OneTapUX),this.authFlowController=new t.A(this),this.events=new e.E(this),this.showPrompt=async()=>{await new Promise((e=>{this.promptTimeout=setTimeout(e,this.delay)})),await this.googleApiController.initialize(),window.google?.accounts.id.prompt(this.momentListener),e.f(this,e.b({source:n,action:"request",noun:h}))},this.onGoogleCredentialResponse=async t=>{let i;const{credential:o,select_by:a}=t;try{const r=s.G.parseCredentialResponse(t);this.captchaSiteKey&&(i=await this.getRecaptchaToken()),this.authFlowController.identityProviderSigin({authFlow:e.A.OneTap,email:r.email,idToken:o,isSignedInAutomatically:"auto"===a||"fedcm_auto"===a,provider:e.dh.Google,recaptchaToken:i,recaptchaAction:this.captchaAction,emailPermissionRequired:this.isEmailPermissionRequired})}catch(t){window.Sentry?.captureException?.(t),this.authFlowController.trackSSOFailure({authFlow:e.A.OneTap,provider:e.dh.Google,reason:"unknown"})}},this.momentListener=t=>{if(t.isDismissedMoment()){const i=t.getDismissedReason();"credential_returned"!==i&&console.error(`Google One Tap prompt was dismissed: ${i}`),e.f(this,function(t){return e.b({source:n,action:"dismiss",noun:h},{action_info:{reason:t,success:"credential_returned"===t}})}(i))}},this.onFaceplateResponse=this.events.define("faceplate-response",(t=>{const{response:i}=t.detail,s=e.gA(i.url)?.pathname;s===e.cX.IdentityProviderSignin&&i.status!==e.cZ.MultipleAccountsFound&&i.status!==e.cZ.UserAccountCreated&&i.status!==e.cZ.UserLoggedIn&&this.dismiss()})),this.onFaceplateTrack=this.events.define("faceplate-track",(e=>{e.SAN&&l.has(e.SAN)&&this.dismiss()}))}connectedCallback(){super.connectedCallback(),this.showPrompt(),this.insertRecaptchaScript()}disconnectedCallback(){this.promptTimeout&&clearTimeout(this.promptTimeout),super.disconnectedCallback()}reloadThePage(){i.r()}dismiss(){this.parentNode?.removeChild(this)}};e._([e.n({type:Boolean,attribute:"is-email-permission-required"})],E.prototype,"isEmailPermissionRequired",void 0),e._([e.n({type:Number})],E.prototype,"delay",void 0),e._([e.N()],E.prototype,"hasCredentials",void 0),E=e._([e.e("auth-flow-google-one-tap-prompt")],E)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DzMpUNmB.js",import.meta.url,"DzMpUNmB");SML.di("./9ZdgYdsr.js",import.meta.url,"9ZdgYdsr");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("CvMMXn2K",["GlDbwxoG","s_Igk1Yn","DzMpUNmB","9ZdgYdsr","CC2wUKE8"],(async(t,e,s,i,n)=>{const o=i.W(e.s);let a=class extends o{constructor(){super(...arguments),this.permalink="",this.disabled=!1,this.isDesktopViewport=!1,this.isListItem=!1,this.ssr=!1,this.shareMenuFeatureName=t.aT,this.shareMenuTemplateId=i.C,this.useButton=!1,this.useMenu=!1,this.showFullButtons=!1,this.menuSize=s.L.Medium}static get styles(){return[t.t,t.J("/*\n * :host and button.share-button-list-item is necessary to increase specificity to override the default styles of the button\n */\n:host button.share-button-list-item {\n  padding: 0;\n  height: 2rem !important;\n  border: none;\n  border-radius: 0;\n  color: var(--color-secondary);\n  background-color: transparent;\n  /*\n   * This CSS was added to fix the flex gap spacing when re-styling the share button component as a list item in the comment action overflow menu.\n   * It needs to be added here as we cannot otherwise directly target the span's styling.\n   */\n}\n:host button.share-button-list-item > span.flex {\n  font-weight: normal;\n}\n:host button.share-button-list-item > span.flex > span:first-child {\n  width: 2rem;\n  display: flex;\n  justify-content: center;\n  margin-right: 0.5rem;\n}\n")]}handleCommentShareClick(t){this.isAllowedEvent(t)&&(!this.isListItem&&this.isDesktopViewport?this.handleCommentDesktopShareClick(t):this.handleCommentMobileShareClick(t),this.ssr&&(this.isShareDropdownOpened?this.handleShareDropdownClose():this.handleShareDropdownOpen()))}handleCommentDesktopShareClick(e){t.f(this,n.w()),this.handleDesktopShareClick(e)}handleCommentMobileShareClick(e){t.f(this,n.x()),this.handleMobileShareClick(e)}render(){return this.ssr?e.x`<slot name="ssr-share-button" @click="${this.handleCommentShareClick}" @keydown="${this.handleCommentShareClick}"></slot>`:this.useMenu?this.renderOnlyShareMenuItem({handleShareClick:this.handleCommentShareClick,menuSize:this.menuSize}):this.useButton?this.renderOnlyShareButton({handleShareClick:this.handleCommentShareClick,attributes:{disabled:this.disabled,className:"font-semibold"},showFullButtons:this.showFullButtons}):this.renderShareDropdown({handleShareClick:this.handleCommentShareClick,size:this.isListItem?t.a7.Large:t.a7.Small,appearance:this.isListItem?"plain":"plain-weak",attributes:{disabled:this.disabled,className:this.isListItem?"share-button-list-item w-full":"font-semibold"}})}};t._([t.n({type:String})],a.prototype,"permalink",void 0),t._([t.n({type:Boolean})],a.prototype,"disabled",void 0),t._([t.n({type:Boolean,attribute:"is-desktop-viewport"})],a.prototype,"isDesktopViewport",void 0),t._([t.n({type:Boolean,attribute:"is-list-item"})],a.prototype,"isListItem",void 0),t._([t.n({type:Boolean,attribute:"ssr"})],a.prototype,"ssr",void 0),t._([t.n({type:String,attribute:"share-menu-feature-name"})],a.prototype,"shareMenuFeatureName",void 0),t._([t.n({type:String,attribute:"share-menu-template-id"})],a.prototype,"shareMenuTemplateId",void 0),t._([t.n({type:Boolean,attribute:"use-button"})],a.prototype,"useButton",void 0),t._([t.n({type:Boolean,attribute:"use-menu"})],a.prototype,"useMenu",void 0),t._([t.n({type:Boolean,attribute:"show-full-buttons"})],a.prototype,"showFullButtons",void 0),t._([t.n({type:String})],a.prototype,"menuSize",void 0),a=t._([t.e("shreddit-comment-share-button")],a)}));
SML.di("./9zvN-JDO.js",import.meta.url,"9zvN-JDO");SML.di("./CZ5pw6qE.js",import.meta.url,"CZ5pw6qE");SML.di("./BDjNXHKi.js",import.meta.url,"BDjNXHKi");SML.di("./6vFpI7Hj.js",import.meta.url,"6vFpI7Hj");SML.di("./Du8UC0gt.js",import.meta.url,"Du8UC0gt");SML.di("./CZ7YNHqf.js",import.meta.url,"CZ7YNHqf");SML.di("./Dg8LS6-X.js",import.meta.url,"Dg8LS6-X");SML.di("./CTwJH_ps.js",import.meta.url,"CTwJH_ps");SML.di("./BmAQnYV7.js",import.meta.url,"BmAQnYV7");SML.di("./BA_-Y74k.js",import.meta.url,"BA_-Y74k");SML.di("./B91qGC0A.js",import.meta.url,"B91qGC0A");SML.di("./QkEG1nHt.js",import.meta.url,"QkEG1nHt");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./EI0o9e89.js",import.meta.url,"EI0o9e89");SML.di("./FaYkg4Io.js",import.meta.url,"FaYkg4Io");SML.di("./hMhijB38.js",import.meta.url,"hMhijB38");SML.di("./i17aYwuT.js",import.meta.url,"i17aYwuT");SML.di("./CU4mObWU.js",import.meta.url,"CU4mObWU");SML.di("./D0V62KWA.js",import.meta.url,"D0V62KWA");SML.di("./D6Xs8HU5.js",import.meta.url,"D6Xs8HU5");SML.di("./DMa5Y6a9.js",import.meta.url,"DMa5Y6a9");SML.di("./OimaI6pY.js",import.meta.url,"OimaI6pY");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");SML.di("./FagDXDzk.js",import.meta.url,"FagDXDzk");
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("CwgKrXUC",["s_Igk1Yn"],(async t=>{const{svg:e}=t.g();return{C:"https://reddithelp.com/hc/articles/6213869034132",P:"https://www.redditinc.com/policies/previews-terms",a:t.m(e`<path d="M17.5 9.1H4.679l5.487-5.462a.898.898 0 00.003-1.272.898.898 0 00-1.272-.003l-7.032 7a.898.898 0 000 1.275l7.03 7a.896.896 0 001.273-.003.898.898 0 00-.002-1.272l-5.487-5.462h12.82a.9.9 0 000-1.8z"></path>`,"0 0 20 20","arrow-back",!0),b:"https://support.reddithelp.com/hc/requests/new?ticket_form_id=16510899084308"}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("Cxc0RZl1",["s_Igk1Yn"],(async m=>{const{svg:t}=m.g();return{i:m.m(t`<path d="M10 1a9 9 0 10.001 18.001A9 9 0 0010 1zm.93 13.84H9.07v-6.3h1.86v6.3zm.05-8.09c-.1.17-.24.31-.41.41-.17.1-.36.15-.57.15-.21 0-.4-.05-.57-.15-.17-.1-.31-.24-.41-.41-.1-.17-.15-.36-.15-.57 0-.21.05-.4.15-.57.1-.17.24-.31.41-.41.17-.1.36-.15.57-.15.21 0 .4.05.57.15.17.1.31.24.41.41.1.17.15.36.15.57 0 .21-.05.4-.15.57z"></path>`,"0 0 20 20","info-fill")}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");
SML.dm("CykCcTkJ",["s_Igk1Yn","GlDbwxoG"],(async(a,o)=>{const{svg:e}=a.g(),l=a.m(e`<path d="M9.8 3.908V8.9a.9.9 0 01-.9.9H3.908a.9.9 0 010-1.8h2.82L2.406 3.678a.898.898 0 010-1.272.898.898 0 011.272 0L8 6.728v-2.82a.9.9 0 011.8 0zm7.794 12.414L13.272 12h2.82a.9.9 0 000-1.8H11.1a.9.9 0 00-.9.9v4.992a.9.9 0 001.8 0v-2.82l4.322 4.322a.898.898 0 001.272 0 .898.898 0 000-1.272z"></path>`,"0 0 20 20","collapse-left"),n=()=>document.getElementById(o.gc);return{a:async({leadGenInfo:a})=>{a&&!n()&&await o.j({name:o.gb})},c:l,s:({leadGenInfo:a,postId:o,impressionId:e,onSuccess:l})=>{a&&n()?.showModal({...a,postId:o,impressionId:e,onSuccess:l,prompt:a.prompt??"",privacyPolicyUrl:a.privacyPolicyUrl??"",leadFormFields:a.leadFormFields??[],formId:a.formId??null,publicEncryptionKey:a.publicEncryptionKey??null})}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("CzlfHowc",["GlDbwxoG","s_Igk1Yn"],(async(e,r)=>{var t;!function(e){e.CIRCLE="circle",e.RECTANGLE="rectangle",e.PILL="pill"}(t||(t={}));const i=2500;let s=0,a=null,o=class extends r.s{constructor(){super(...arguments),this.shape=t.RECTANGLE,this.calcDelay=e=>{if(0===e)return 0;let r=0;const t=a?.getAnimations()[0];return t&&(r=t.effect?.getComputedTiming().progress*i),(r+200*e)%i}}static get styles(){return r.i`:host{display:inline-flex}:host([shape=pill]) #loader{border-radius:var(--rem8)}:host([shape=circle]) #loader{border-radius:50%}#loader{background:var(--color-shimmer-background);height:100%;width:100%;position:relative;overflow-x:hidden}#shimmer-object{background:var(--color-shimmer-gradient-overlay);border-radius:.5rem;height:100%;width:200%;position:absolute;top:0;inset-inline-start:0;transform:translateX(-100%)}`}firstUpdated(){this.shimmer(s++)}async shimmer(e){await new Promise((e=>requestAnimationFrame(e)));a||(a=this.shimmerObject);const r={duration:i,delay:-1*this.calcDelay(e),iterations:1/0};this.shimmerObject?.animate([{transform:"translateX(50%)"}],r)}render(){return r.x`<div id="loader"> <span id="shimmer-object"></span> </div> `}};e._([e.n({type:String})],o.prototype,"shape",void 0),e._([e.Q("#shimmer-object")],o.prototype,"shimmerObject",void 0),o=e._([e.e("faceplate-shimmer")],o);var n=Object.freeze({__proto__:null,get FaceplateShimmer(){return o},get LOADER_SHAPES(){return t}});return{get L(){return t},get f(){return n}}}));
SML.di("./FagDXDzk.js",import.meta.url,"FagDXDzk");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");
SML.dm("D-MAMWlw",["FagDXDzk","GlDbwxoG"],(async(t,e)=>{var o;!function(t){t.follow="follow",t.hide="hide",t.save="save",t.delete="delete",t.markAsSpoiler="mark_as_spoiler",t.markAsNsfw="mark_as_nsfw",t.markAsCommercialCommunication="mark_as_commercial_communication",t.distinguishAsMod="distinguish_as_mod",t.distinguishAsAdmin="distinguish_as_admin",t.updatePostFlair="update_post_flair",t.lock="lock",t.sticky="sticky",t.addRemovalReason="add_removal_reason",t.edit="edit",t.updateContent="update_content",t.updatePostBodyPending="update_post_body_pending",t.approve="approve",t.remove="remove",t.removeAsSpam="remove_as_spam",t.ignoreReports="ignore_reports",t.confirmRemoval="confirm_removal",t.updateSendReplies="update_send_replies",t.snoozeReporter="snooze_reporter",t.unsnoozeReporter="unsnooze_reporter",t.updateHighlightedPost="update_highlighted_post",t.approveOptimistic="approve_optimistic",t.removeOptimistic="remove_optimistic",t.removeAsSpamOptimistic="remove_as_spam_optimistic",t.confirmRemovalOptimistic="confirm_removal_optimistic",t.shareToModChat="share_to_mod_chat"}(o||(o={}));const i={isPostFollowed:o.follow,isPostHidden:o.hide,isPostSaved:o.save,isPostSpoiler:o.markAsSpoiler,isPostNsfw:o.markAsNsfw,isPostCommercialCommunication:o.markAsCommercialCommunication,isPostDistinguishedAsAdmin:o.distinguishAsAdmin,isPostStickied:void 0,isReceivingPostReplies:o.updateSendReplies,[t.M.Distinguish]:o.distinguishAsMod,[t.M.Undistinguish]:o.distinguishAsMod,[t.M.Lock]:o.lock,[t.M.Unlock]:o.lock,[t.M.Sticky]:o.sticky,[t.M.Unsticky]:o.sticky,[t.M.AddRemovalReason]:o.addRemovalReason,[t.M.ApproveContent]:o.approve,[t.M.RemoveContent]:o.remove,[t.M.RemoveContentAsSpam]:o.removeAsSpam,[t.M.ConfirmRemoval]:o.confirmRemoval,[t.M.IgnoreReports]:o.ignoreReports,[t.M.UnignoreReports]:o.ignoreReports,[t.M.SnoozeReporter]:o.snoozeReporter,[t.M.UnsnoozeReporter]:o.unsnoozeReporter,[t.M.RemoveHighlightedPost]:o.updateHighlightedPost,[t.A.Distinguish]:o.distinguishAsAdmin,[t.A.Undistinguish]:o.distinguishAsAdmin,[t.M.ApproveContentOptimistic]:o.approveOptimistic,[t.M.RemoveContentOptimistic]:o.removeOptimistic,[t.M.RemoveContentAsSpamOptimistic]:o.removeAsSpamOptimistic,[t.M.ConfirmRemovalOptimistic]:o.confirmRemovalOptimistic};o.hide,o.markAsSpoiler,o.markAsNsfw,o.markAsCommercialCommunication;var r;!function(t){t[t.Follow=5]="Follow",t[t.Edit=10]="Edit",t[t.Report=20]="Report",t[t.Save=30]="Save",t[t.TranslationSetting=35]="TranslationSetting",t[t.LanguageAndTranslations=40]="LanguageAndTranslations",t[t.Delete=70]="Delete",t[t.AdminDistinguish=80]="AdminDistinguish",t[t.BrandAffiliate=90]="BrandAffiliate",t[t.Notifs=100]="Notifs",t[t.Reply=110]="Reply",t[t.Award=120]="Award",t[t.Insights=130]="Insights",t[t.ShareAsPost=140]="ShareAsPost"}(r||(r={}));const s="429";function a(t){return t?.[0]?.message??"Something went wrong";}return{get C(){return r},E:"post__click_unrsvp",P:["isPostFollowed","isPostHidden","isPostSaved","isPostSpoiler","isPostNsfw","isPostCommercialCommunication","isPostDistinguishedAsAdmin","isPostStickied","isReceivingPostReplies"],R:s,S:i,get a(){return o},b:"post__click_rsvp",c:"edit",d:async function(t){const o={input:t},{data:i,errors:r}=await e.B({operation:e.C.DeletePost,variables:o});if(r?.length)throw new Error(a(r));const{deletePost:s}=i;if(!s?.ok)throw new Error(a(s?.errors))},e:"overflow__click_comments",f:"overflow__click_share",g:async function(t,o){const i={input:{postId:t,saveState:o?e.gG.None:e.gG.Saved}},{data:r,errors:s}=await e.B({operation:e.C.UpdatePostSaveState,variables:i});if(s?.length)throw new Error(a(s));if(r?.updatePostSaveState?.ok)return!o;throw new Error(a(r?.updatePostSaveState?.errors))},h:async function(t,o){const i={input:{postId:t,followState:o?e.gH.Unfollowed:e.gH.Followed}},{data:r,errors:s}=await e.B({operation:e.C.UpdatePostFollowState,variables:i});if(s?.length)throw new Error(a(s));if(r?.updatePostFollowState?.ok)return!o;throw new Error(a(r?.updatePostFollowState?.errors))},i:async function(t,o){const i={input:{postId:t,distinguishState:o?e.d4.None:e.d4.Distinguished,distinguishType:o?e.d0.None:e.d0.AdminDistinguished}},{data:r,errors:s}=await e.B({operation:e.C.UpdatePostDistinguishedState,variables:i});if(s?.length)throw new Error(a(s));if(r?.updatePostDistinguishState?.ok)return r.updatePostDistinguishState.distinguishType===e.d0.AdminDistinguished;throw new Error(a(r?.updatePostDistinguishState?.errors))},j:async function(t,o){const i={input:{postId:t,spoilerState:o?e.gD.None:e.gD.Spoiler}},{data:r,errors:s}=await e.B({operation:e.C.UpdatePostSpoilerState,variables:i});if(s?.length)throw new Error(a(s));if(r?.updatePostSpoilerState?.ok)return r.updatePostSpoilerState.spoilerState===e.gD.Spoiler;throw new Error(a(r?.updatePostSpoilerState?.errors))},k:async function(t,o){const i={input:{postId:t,nsfwState:o?e.gE.None:e.gE.Nsfw}},{data:r,errors:s}=await e.B({operation:e.C.UpdatePostNsfwState,variables:i});if(s?.length)throw new Error(a(s));if(r?.updatePostNsfwState?.ok)return r.updatePostNsfwState.nsfwState===e.gE.Nsfw;throw new Error(a(r?.updatePostNsfwState?.errors))},l:async function(t,o){const i={input:{thingId:t,commercialCommunicationState:!o}},{data:r,errors:s}=await e.B({operation:e.C.UpdateCommercialCommunicationState,variables:i});if(s?.length)throw new Error(a(s));if(r?.updateCommercialCommunicationState?.ok)return!o;throw new Error(a(r?.updateCommercialCommunicationState?.errors))},m:async function(t,o){const i={postId:t,sendRepliesState:o?e.gF.DoNotSend:e.gF.Send},{data:r,errors:s}=await e.B({operation:e.C.UpdatePostSendRepliesState,variables:{input:i}});if(s?.length)throw new Error(a(s));if(r?.updatePostSendRepliesState?.ok)return r.updatePostSendRepliesState?.sendRepliesState===e.gF.Send;throw new Error(a(r?.updatePostSendRepliesState?.errors))},n:async function(t,o){const i={input:{postId:t,hideState:o?e.gC.None:e.gC.Hidden}},{data:r,errors:s}=await e.B({operation:e.C.UpdatePostHideState,variables:i});if(s?.length)throw new Error(a(s));if(r?.updatePostHideState?.ok)return r.updatePostHideState.hideState===e.gC.Hidden;throw new Error(a(r?.updatePostHideState?.errors))},o:async function(t){const o={input:t},{data:i,errors:r}=await e.B({operation:e.C.UpdatePostStickyState,variables:o});if(r?.length)throw new Error(a(r));if(!i?.updatePostStickyState?.ok)throw new Error(a(i?.updatePostStickyState?.errors))},u:async function(t){const o={input:t},{data:i,errors:r}=await e.B({operation:e.C.UpdateAdHideState,variables:o});if(r?.length)throw new Error(a(r));if(i?.updateAdHideState?.ok)return i.updateAdHideState.hideState===e.gC.Hidden;if(i?.updateAdHideState?.errors&&(i?.updateAdHideState?.errors[0]).code===s)throw new Error(s);throw new Error(a(i?.updateAdHideState?.errors))}}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("D0V62KWA",["s_Igk1Yn"],(async n=>{var e;!function(n){n.NEUTRAL="NEUTRAL",n.SUCCESS="SUCCESS",n.WARNING="WARNING",n.ALERT="ALERT",n.PLAIN="PLAIN",n.DISABLED="DISABLED",n.DANGER="DANGER",n.INVERTED="INVERTED",n.SECONDARY="SECONDARY",n.MEDIA="MEDIA",n.BRAND="BRAND"}(e||(e={}));const r="bg-brand-background text-brand-onBackground",t="bg-secondary-background text-secondary-onBackground",a={[e.WARNING]:"bg-warning-background text-neutral-background",[e.SUCCESS]:"bg-success-background text-primary-onBackground",[e.NEUTRAL]:"bg-neutral-content text-neutral-background",[e.PLAIN]:t,[e.ALERT]:r,[e.BRAND]:r,[e.DANGER]:"bg-danger-background text-primary-onBackground",[e.DISABLED]:"bg-interactive-content-disabled text-neutral-background",[e.INVERTED]:"bg-inverted-neutral-background text-neutral-background",[e.SECONDARY]:t,[e.MEDIA]:"bg-media-background text-media-onBackground"};return{get B(){return e},b:({attributes:r,appearance:t=e.NEUTRAL,content:o,outline:c=!1})=>{const{html:d,createElement:E}=n.g(),u=d`<span class="font-semibold inline-block text-10 text-center ${o&&"min-h-[1rem] min-w-[0.5rem]"} px-2xs">${o}</span>`;let g="rounded-full inline-flex";return o||(g+=" h-xs w-xs"),c&&(g+=" border-md border-solid border-neutral-background"),E("span",{...r,className:`${[a[t]]} ${g} ${r?.className}`,rpl:!0},u)}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");
SML.dm("D2eAe0e-",["GlDbwxoG"],(async e=>{const t=new WeakMap;function i(e){const i=document.querySelector(e);if(!i)return Promise.reject(`lazy script "${e}" cannot be found`);const s=t.get(i);if(s)return s;if(!i.nonce)return Promise.reject('loadLazyScriptWithNonce should only be used to load scripts with "nonce"s');const n=i?.getAttribute("data-src");if(!n)return Promise.reject('loadLazyScriptWithNonce expects a script tag with a "data-src" attribute');const o=document.querySelector(`script[src="${n}"]`);if(o)return Promise.resolve(o);const r=new Promise(((e,t)=>{const s=document.createElement("script");s.nonce=i.nonce,s.onload=function(){e(s)},s.onerror=function(e){t(e?.toString())},s.src=n,s.dataset.lazy="true",document.body.appendChild(s)}));return t.set(i,r),r}var s;class n{constructor(e,t){this.host=e,this.uxTypes=t,this.host.addController(this)}static initialize(){return this.initializePromise||(this.initializePromise=this._initialize()),this.initializePromise}static async _initialize(){try{await i(`script#${e.aS}`)}catch(e){return void window.Sentry?.captureException?.(e)}try{window.google.accounts.id.initialize({client_id:CLIENT_CONFIG.GOOGLE_SSO_CLIENT_ID,callback:this.onGoogleCredentialResponse,itp_support:!0,auto_select:!0,cancel_on_tap_outside:!1,use_fedcm_for_prompt:!0})}catch(e){window.Sentry?.captureException?.(e)}}static registerListener(e,t){for(const i of e){const e=this.listenersByUX[i];e.includes(t)||e.push(t)}}static deregisterListener(e,t){for(const i of e){const e=this.listenersByUX[i],s=e.indexOf(t);s>-1&&e.splice(s,1)}}static parseCredentialResponse(e){const t=e?.credential;if(!t)throw new Error("No credential in response");try{const e=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),i=decodeURIComponent(atob(e).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join(""));return JSON.parse(i)}catch(e){throw new Error("Error decoding and parsing JWT")}}initialize(){return this.uxTypes&&this.host.onGoogleCredentialResponse&&s.registerListener(this.uxTypes,this.host.onGoogleCredentialResponse),s.initialize()}hostDisconnected(){this.uxTypes&&this.host.onGoogleCredentialResponse&&s.deregisterListener(this.uxTypes,this.host.onGoogleCredentialResponse)}}return s=n,n.ButtonUX=["btn","btn_confirm","btn_add_session","btn_confirm_add_session","fedcm_button"],n.OneTapUX=["auto","user","user_1tap","user_2tap","fedcm_auto","fedcm","itp"],n.listenersByUX=[...s.ButtonUX,...s.OneTapUX].reduce(((e,t)=>(e[t]=[],e)),{}),n.onGoogleCredentialResponse=e=>{const t=s.listenersByUX[e.select_by];if(t)for(const i of t)i(e)},{G:n,l:i}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DgY18AyY.js",import.meta.url,"DgY18AyY");SML.di("./BTMr9sPC.js",import.meta.url,"BTMr9sPC");SML.di("./DwHTSY-I.js",import.meta.url,"DwHTSY-I");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");SML.di("./Bvty6Dj7.js",import.meta.url,"Bvty6Dj7");SML.di("./CDFmhs-S.js",import.meta.url,"CDFmhs-S");
SML.dm("D32ZWk0Z",["GlDbwxoG","s_Igk1Yn","DgY18AyY","BTMr9sPC","DwHTSY-I","DRM-oTYq","Bvty6Dj7","CDFmhs-S"],(async(t,a,e,i,s,r,n)=>{let o=class extends a.s{constructor(){super(...arguments),this.translationContextValue=t.aB,this.pubsub=new t.m(this),this.getIsTranslationActive=()=>{const a=s.i();return(!this.translationState||this.translationState!==t.bm.DISABLED)&&("boolean"==typeof this.postTranslated?this.postTranslated:a||!!this.translationContextValue?.isTranslationActive)},this.onPostTranslationOverride=t=>{(t.id===this.postId||t.isContextUpdateEvent)&&(this.postTranslated=t.isTranslationActive)},this.handleClick=()=>{if(!this.postId)return;const a=this.getPageTypeForTranslation(t.w()),e=this.getIsTranslationActive();this.pubsub.publish(t.T.I18nPostTranslationOverride,{id:this.postId,isTranslationActive:!e,pageType:a});const i=document.querySelector(`shreddit-post[id*="${this.postId}"]`);t.f(this,r.o({archived:i?.archived,authorId:i?.authorId,createdTimestamp:i?.createdTimestamp,domain:i?.domain,id:this.postId,nsfw:i?.nsfw,promoted:i?.promoted,score:i?.score,spoiler:i?.spoiler,subredditId:i?.subredditId,subredditPrefixedName:i?.subredditPrefixedName,postTitle:i?.postTitle,postType:i?.postType,recommendationSource:i?.recommendationSource,commentCount:i?.commentCount,permalink:i?.permalink,postLanguage:i?.postLanguage,translationLanguage:this.translationLanguage,isPostTranslated:e}))}}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(t.T.I18nPostTranslationOverride,this.onPostTranslationOverride,!1);const a=s.P.get();this.isPdpBannerSettingEnabled=a?.isPdpBannerSettingEnabled??!0,this.pageType=t.w()}getPageTypeForTranslation(a){return!!a&&[t.ah.PostDetail,t.ah.ModQueue,t.ah.ModQueueAll,t.ah.ModQueuePdp].includes(a)?n.T.Pdp:n.T.Feed}render(){return this.isPdpBannerSettingEnabled&&this.pageType===t.ah.PostDetail?a.A:a.x` <rpl-tooltip appearance="inverted" placement="top" trigger="hover focus" content="${this.getIsTranslationActive()?"Show original":"Translate"}"> ${t.Y({appearance:"plain",attributes:{onclick:this.handleClick,"aria-label":"Toggle post translation"},leadingIcon:this.getIsTranslationActive()?e.t({size:a.I.ExtraSmall,attributes:{"data-testid":"post-translation-status-icon-translated-icon","aria-label":"Post is translated",className:"text-primary-plain"}}):i.t({size:a.I.ExtraSmall,attributes:{"data-testid":"post-translation-status-icon-original-icon","aria-label":"Post is in original language",className:"text-primary-plain"}}),size:t.a7.ExtraSmall})} </rpl-tooltip> `;}};o.styles=[t.t],t._([t.n({type:String,attribute:"post-id"})],o.prototype,"postId",void 0),t._([t.n({type:String,attribute:"translation-language"})],o.prototype,"translationLanguage",void 0),t._([t.n({type:String,attribute:"translation-state"})],o.prototype,"translationState",void 0),t._([t.aA({context:t.aC,subscribe:!0}),t.N()],o.prototype,"translationContextValue",void 0),t._([t.N()],o.prototype,"postTranslated",void 0),t._([t.N()],o.prototype,"isPdpBannerSettingEnabled",void 0),t._([t.N()],o.prototype,"pageType",void 0),o=t._([t.e("post-translation-status-icon")],o)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CwgKrXUC.js",import.meta.url,"CwgKrXUC");SML.di("./B6yBL9at.js",import.meta.url,"B6yBL9at");
SML.dm("D3HU2XGt",["GlDbwxoG","s_Igk1Yn","CwgKrXUC","B6yBL9at"],(async(e,t,i,a)=>{let n=class extends t.s{constructor(){super(...arguments),this._windowEvents=new e.E(this,(()=>window)),this.enableEscapeKey=!1,this.handleBackClick=()=>{if(void 0===window.navigation)return void history.back();if(!this.subredditPrefixedName&&!this.postId)return void history.back();const e=window.navigation.currentEntry;if(e&&e.url){const t=e.index,i=new URL(e.url);for(let e=t-1;e>=0;e--){const t=window.navigation.entries()[e];if(t.url){const e=new URL(t.url);if(e.host===i.host&&e.pathname!==i.pathname)return void window.navigation.traverseTo(t.key)}}}window.navigation.navigate(this.destinationUrl)},this.handleEscKey=this._windowEvents.define("keydown",(e=>{if(this.enableEscapeKey&&"Escape"===e.key){if(e.target instanceof Element){const t=null!==e.target.closest('[contenteditable="true"]'),i=null!==e.target.closest("faceplate-hovercard"),a=i&&"dialog"===e.target.getAttribute("aria-haspopup");if(t||i&&!a)return}this.handleBackClick()}}))}get destinationUrl(){return this.mtSeoSubredditLink||a.b(this.subredditPrefixedName)}render(){const a="Back";return t.x` ${e.Y({appearance:"secondary",attributes:{type:"button","aria-label":a,onclick:this.handleBackClick},size:e.a7.Small,screenReaderContent:a,leadingIcon:i.a({size:t.I.Small})})} `}};n.styles=[e.t],e._([e.n({attribute:"subreddit-prefixed-name"})],n.prototype,"subredditPrefixedName",void 0),e._([e.n({type:String,attribute:"mt-seo-subreddit-link"})],n.prototype,"mtSeoSubredditLink",void 0),e._([e.n({attribute:"post-id"})],n.prototype,"postId",void 0),e._([e.n({type:Boolean,attribute:"enable-escape-key"})],n.prototype,"enableEscapeKey",void 0),n=e._([e.e("pdp-back-button")],n)}));
SML.di("./CnEX8an6.js",import.meta.url,"CnEX8an6");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./CcP9EA1F.js",import.meta.url,"CcP9EA1F");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DPWYpq70.js",import.meta.url,"DPWYpq70");SML.di("./fnKkpEwQ.js",import.meta.url,"fnKkpEwQ");SML.di("./QTT23FkH.js",import.meta.url,"QTT23FkH");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./DNASVThB.js",import.meta.url,"DNASVThB");
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("D6Xs8HU5",["GlDbwxoG","s_Igk1Yn"],(async(t,e)=>{var a;!function(t){t.PLAIN="plain",t.MEDIA="media"}(a||(a={}));const i=12;let r=class extends e.s{constructor(){super(...arguments),this.pages=0,this.pageIndex=0,this.appearance=a.PLAIN,this.animationDuration=0,this.containerLabel="",this.numVisible=2,this.centerIndexPosition=3,this.setTransitionDuration=async()=>{this._dotsContainer&&(await this.updateComplete,this._dotsContainer.style.setProperty("--pagination-transition-duration",`${this.animationDuration}ms`))},this.animateInfiniteCurrentPage=t=>{if(this._currentPageIndicator){const e=[{transform:t?`translateX(${i*this.pages}px)`:"translateX(-12px)",opacity:0},{opacity:0,transform:t?"translateX(-12px)":`translateX(${i*this.pages}px)`},{opacity:1,transform:t?"translateX(0px)":`translateX(${i*(this.pages-1)}px)`}],a={duration:this.animationDuration,fill:"forwards",iterations:1};this.setDotsTrackTransform(!t),this._currentPageIndicator.animate(e,a)}},this.animateCurrentPage=async()=>{this.setDotsTrackTransform(),this.animateCurrentPageNumber()},this.animateCurrentPageNumber=()=>{if(this._currentPageIndicator){const t=[{width:"var(--rem6)"},{width:"var(--rem18)",borderRadius:"4px"},{width:"var(--rem6)",transform:`translateX(${i*this.pageIndex}px)`}],e={duration:this.animationDuration,fill:"forwards",iterations:1};this._currentPageIndicator.animate(t,e)}},this.onSelect=t=>{const e=new CustomEvent("pagination-click",{detail:{pageIndex:t},bubbles:!0,composed:!0});this.dispatchEvent(e)},this.isEdgeDot=t=>{if(this.pages>=6){const e=t===this.pageIndex-3,a=t===this.pageIndex+3;return e||a}return!1},this.getDotButton=a=>{const i=Math.abs(a-this.pageIndex),r=t=>t===this.pageIndex?`(${this.currentPageLabel??"Current Page"})`:"",n=this.getPageLabels?`${this.getPageLabels(a)} ${r(a)}`:`Page ${a+1} ${r(a)}`,o=0===i||1===i;return e.x`<button class="${t.H({dot:!0,edge:this.isEdgeDot(a)})}" aria-hidden="${!o}" tabindex="${o?0:-1}" @click="${t=>{0===t.target.tabIndex&&this.onSelect(a)}}" @keydown="${t=>{"Enter"!==t.key&&"Space"!==t.key||this.onSelect(a)}}"> <faceplate-screen-reader-content>${n}</faceplate-screen-reader-content> </button>`},this.render=()=>{if(0!==this.pages)return e.x` <div id="dots-container" dir="ltr"> <div class="dots-track-container"> <div id="dots-track" role="group" aria-label="${this.containerLabel}"> ${this.currentPageIndicator} ${[...Array(this.pages).keys()].map(((t,e)=>this.getDotButton(e)))} </div> </div> </div> `}}static get styles(){return e.i`:host{display:inline-flex;height:var(--rem16,1rem);width:100%;justify-content:center}:host(:dir(rtl)){transform:scaleX(-1)}:host #dots-container{display:inline-flex;position:relative;height:100%;overflow:hidden;align-items:center;border-radius:var(--rem8,.5rem);padding:0 var(--rem2,.125rem);transition:width ease-in-out var(--pagination-transition-duration)}:host .dots-track-container{position:relative;height:100%;width:100%;display:flex;align-items:center}:host #dots-track{display:flex;position:absolute;inset-inline-start:0;height:var(--rem12,.75rem);overflow:hidden;box-sizing:border-box;font-size:var(--rem10,.625rem);align-items:center;transition:transform ease-in-out var(--pagination-transition-duration)}:host([appearance=media]) #dots-container{background-color:var(--color-media-background)}:host([appearance=media]) .dot{background-color:var(--color-media-onbackground-disabled)}:host .dot:focus-visible{outline:solid 1px var(--color-global-focus)}:host([appearance=media]) #current-page-indicator.number{color:var(--color-media-onbackground)}:host([appearance=media]) #current-page-indicator.dot{background-color:var(--color-media-onbackground)}:host #current-page-indicator{z-index:2;position:absolute}:host #current-page-indicator.number{color:var(--color-neutral-content);display:flex;align-items:center;justify-content:center;transition:transform ease-in-out var(--pagination-transition-duration)}:host #current-page-indicator.dot{background-color:var(--color-neutral-content)}:host .dot{height:var(--rem6,.375rem);width:var(--rem6,.375rem);border-radius:50%;box-sizing:content-box;display:inline-block;margin:calc(var(--rem2,.125rem) + var(--rem1,.0625rem));padding:0;border:none}:host #current-page-indicator.number{height:var(--rem15,.9375rem);width:var(--rem16,1rem);margin:0}:host .dot{background-color:var(--color-neutral-border);background-clip:content-box;transition:all ease-in-out var(--pagination-transition-duration)}:host .dot[tabindex='0']{cursor:pointer}:host .dot:focus{transition:none}:host .dot.edge{transform:scale(.5);flex-shrink:0}`}willUpdate(t){t.has("pageIndex")&&(this.pageIndex<0||this.pageIndex>this.pages-1)&&(this.pageIndex=0)}async updated(t){await this.updateComplete,(t.has("pageIndex")||t.has("pages"))&&this.shrinkOrStretch();const e=t.get("pageIndex")===this.pages-1&&0===this.pageIndex,a=0===t.get("pageIndex")&&this.pageIndex===this.pages-1;e||a?this.animateInfiniteCurrentPage(e):t.has("pageIndex")&&await this.animateCurrentPage(),t.has("animationDuration")&&this.setTransitionDuration()}shrinkOrStretch(){this.pages>=6?0===this.pageIndex||this.pageIndex===this.pages-1?this.numVisible=4:1===this.pageIndex||this.pageIndex===this.pages-2?this.numVisible=5:2===this.pageIndex||this.pageIndex===this.pages-3?this.numVisible=6:this.pageIndex>=3&&this.pageIndex<=this.pages-4&&(this.numVisible=7):this.numVisible=this.pages,this._dotsContainer&&(this._dotsContainer.style.width=`calc(var(--rem12, 0.75rem) * ${this.numVisible})`)}setDotsTrackTransform(t){const e=this.pageIndex-this.centerIndexPosition,a=e>0?e:0;if(this._dotsTrack){const e=`translateX(${i*a*-1}px)`;e!==this._dotsTrack.style.transform?this._dotsTrack.style.transform=e:t&&"translateX(0px)"!==this._dotsTrack.style.transform&&(this._dotsTrack.style.transform="translateX(0px)")}}get currentPageIndicator(){return e.x`<span id="current-page-indicator" class="dot" aria-hidden="true"></span>`}};return t._([t.n({type:Number})],r.prototype,"pages",void 0),t._([t.n({type:Number,attribute:"page-index"})],r.prototype,"pageIndex",void 0),t._([t.n({type:String})],r.prototype,"appearance",void 0),t._([t.n({type:Number,attribute:"animation-duration"})],r.prototype,"animationDuration",void 0),t._([t.n({type:String,attribute:"current-page-label"})],r.prototype,"currentPageLabel",void 0),t._([t.n()],r.prototype,"getPageLabels",void 0),t._([t.n({type:String,attribute:"container-label"})],r.prototype,"containerLabel",void 0),t._([t.Q("#dots-container")],r.prototype,"_dotsContainer",void 0),t._([t.Q("#dots-track")],r.prototype,"_dotsTrack",void 0),t._([t.Q("#current-page-indicator")],r.prototype,"_currentPageIndicator",void 0),t._([t.aU(".dot")],r.prototype,"_dots",void 0),r=t._([t.e("faceplate-pagination-indicator")],r),{get P(){return a}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("D8TsswlF",["GlDbwxoG","s_Igk1Yn"],(async(t,e)=>{let n;const s=new Uint8Array(16);function i(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(s)}var o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const r=[];for(let t=0;t<256;++t)r.push((t+256).toString(16).slice(1));function c(t,e=0){return(r[t[e+0]]+r[t[e+1]]+r[t[e+2]]+r[t[e+3]]+"-"+r[t[e+4]]+r[t[e+5]]+"-"+r[t[e+6]]+r[t[e+7]]+"-"+r[t[e+8]]+r[t[e+9]]+"-"+r[t[e+10]]+r[t[e+11]]+r[t[e+12]]+r[t[e+13]]+r[t[e+14]]+r[t[e+15]]).toLowerCase()}function a(t){if(!function(t){return"string"==typeof t&&o.test(t)}(t))throw TypeError("Invalid UUID");let e;const n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=255&e,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=255&e,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=255&e,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=255&e,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=255&e,n}function m(t,e,n){function s(t,s,i,o){var r;if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));const e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}(t)),"string"==typeof s&&(s=a(s)),16!==(null===(r=s)||void 0===r?void 0:r.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let m=new Uint8Array(16+t.length);if(m.set(s),m.set(t,s.length),m=n(m),m[6]=15&m[6]|e,m[8]=63&m[8]|128,i){o=o||0;for(let t=0;t<16;++t)i[o+t]=m[t];return i}return c(m)}try{s.name=t}catch(t){}return s.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",s.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",s}function d(t){return 14+(t+64>>>9<<4)+1}function u(t,e){const n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function h(t,e,n,s,i,o){return u((r=u(u(e,t),u(s,o)))<<(c=i)|r>>>32-c,n);var r,c}function l(t,e,n,s,i,o,r){return h(e&n|~e&s,t,e,i,o,r)}function _(t,e,n,s,i,o,r){return h(e&s|n&~s,t,e,i,o,r)}function p(t,e,n,s,i,o,r){return h(e^n^s,t,e,i,o,r)}function f(t,e,n,s,i,o,r){return h(n^(e|~s),t,e,i,o,r)}m("v3",48,(function(t){if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return function(t){const e=[],n=32*t.length,s="0123456789abcdef";for(let i=0;i<n;i+=8){const n=t[i>>5]>>>i%32&255,o=parseInt(s.charAt(n>>>4&15)+s.charAt(15&n),16);e.push(o)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[d(e)-1]=e;let n=1732584193,s=-271733879,i=-1732584194,o=271733878;for(let e=0;e<t.length;e+=16){const r=n,c=s,a=i,m=o;n=l(n,s,i,o,t[e],7,-680876936),o=l(o,n,s,i,t[e+1],12,-389564586),i=l(i,o,n,s,t[e+2],17,606105819),s=l(s,i,o,n,t[e+3],22,-1044525330),n=l(n,s,i,o,t[e+4],7,-176418897),o=l(o,n,s,i,t[e+5],12,1200080426),i=l(i,o,n,s,t[e+6],17,-1473231341),s=l(s,i,o,n,t[e+7],22,-45705983),n=l(n,s,i,o,t[e+8],7,1770035416),o=l(o,n,s,i,t[e+9],12,-1958414417),i=l(i,o,n,s,t[e+10],17,-42063),s=l(s,i,o,n,t[e+11],22,-1990404162),n=l(n,s,i,o,t[e+12],7,1804603682),o=l(o,n,s,i,t[e+13],12,-40341101),i=l(i,o,n,s,t[e+14],17,-1502002290),s=l(s,i,o,n,t[e+15],22,1236535329),n=_(n,s,i,o,t[e+1],5,-165796510),o=_(o,n,s,i,t[e+6],9,-1069501632),i=_(i,o,n,s,t[e+11],14,643717713),s=_(s,i,o,n,t[e],20,-373897302),n=_(n,s,i,o,t[e+5],5,-701558691),o=_(o,n,s,i,t[e+10],9,38016083),i=_(i,o,n,s,t[e+15],14,-660478335),s=_(s,i,o,n,t[e+4],20,-405537848),n=_(n,s,i,o,t[e+9],5,568446438),o=_(o,n,s,i,t[e+14],9,-1019803690),i=_(i,o,n,s,t[e+3],14,-187363961),s=_(s,i,o,n,t[e+8],20,1163531501),n=_(n,s,i,o,t[e+13],5,-1444681467),o=_(o,n,s,i,t[e+2],9,-51403784),i=_(i,o,n,s,t[e+7],14,1735328473),s=_(s,i,o,n,t[e+12],20,-1926607734),n=p(n,s,i,o,t[e+5],4,-378558),o=p(o,n,s,i,t[e+8],11,-2022574463),i=p(i,o,n,s,t[e+11],16,1839030562),s=p(s,i,o,n,t[e+14],23,-35309556),n=p(n,s,i,o,t[e+1],4,-1530992060),o=p(o,n,s,i,t[e+4],11,1272893353),i=p(i,o,n,s,t[e+7],16,-155497632),s=p(s,i,o,n,t[e+10],23,-1094730640),n=p(n,s,i,o,t[e+13],4,681279174),o=p(o,n,s,i,t[e],11,-358537222),i=p(i,o,n,s,t[e+3],16,-722521979),s=p(s,i,o,n,t[e+6],23,76029189),n=p(n,s,i,o,t[e+9],4,-640364487),o=p(o,n,s,i,t[e+12],11,-421815835),i=p(i,o,n,s,t[e+15],16,530742520),s=p(s,i,o,n,t[e+2],23,-995338651),n=f(n,s,i,o,t[e],6,-198630844),o=f(o,n,s,i,t[e+7],10,1126891415),i=f(i,o,n,s,t[e+14],15,-1416354905),s=f(s,i,o,n,t[e+5],21,-57434055),n=f(n,s,i,o,t[e+12],6,1700485571),o=f(o,n,s,i,t[e+3],10,-1894986606),i=f(i,o,n,s,t[e+10],15,-1051523),s=f(s,i,o,n,t[e+1],21,-2054922799),n=f(n,s,i,o,t[e+8],6,1873313359),o=f(o,n,s,i,t[e+15],10,-30611744),i=f(i,o,n,s,t[e+6],15,-1560198380),s=f(s,i,o,n,t[e+13],21,1309151649),n=f(n,s,i,o,t[e+4],6,-145523070),o=f(o,n,s,i,t[e+11],10,-1120210379),i=f(i,o,n,s,t[e+2],15,718787259),s=f(s,i,o,n,t[e+9],21,-343485551),n=u(n,r),s=u(s,c),i=u(i,a),o=u(o,m)}return[n,s,i,o]}(function(t){if(0===t.length)return[];const e=8*t.length,n=new Uint32Array(d(e));for(let s=0;s<e;s+=8)n[s>>5]|=(255&t[s/8])<<s%32;return n}(t),8*t.length))}));var w={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function v(t,e,n){if(w.randomUUID&&!t)return w.randomUUID();const s=(t=t||{}).random||(t.rng||i)();return s[6]=15&s[6]|64,s[8]=63&s[8]|128,c(s)}function g(t,e,n,s){switch(t){case 0:return e&n^~e&s;case 1:case 3:return e^n^s;case 2:return e&n^e&s^n&s}}function y(t,e){return t<<e|t>>>32-e}m("v5",80,(function(t){const e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);const s=t.length/4+2,i=Math.ceil(s/16),o=new Array(i);for(let e=0;e<i;++e){const n=new Uint32Array(16);for(let s=0;s<16;++s)n[s]=t[64*e+4*s]<<24|t[64*e+4*s+1]<<16|t[64*e+4*s+2]<<8|t[64*e+4*s+3];o[e]=n}o[i-1][14]=8*(t.length-1)/Math.pow(2,32),o[i-1][14]=Math.floor(o[i-1][14]),o[i-1][15]=8*(t.length-1)&4294967295;for(let t=0;t<i;++t){const s=new Uint32Array(80);for(let e=0;e<16;++e)s[e]=o[t][e];for(let t=16;t<80;++t)s[t]=y(s[t-3]^s[t-8]^s[t-14]^s[t-16],1);let i=n[0],r=n[1],c=n[2],a=n[3],m=n[4];for(let t=0;t<80;++t){const n=Math.floor(t/20),o=y(i,5)+g(n,r,c,a)+m+e[n]+s[t]>>>0;m=a,a=c,c=y(r,30)>>>0,r=i,i=o}n[0]=n[0]+i>>>0,n[1]=n[1]+r>>>0,n[2]=n[2]+c>>>0,n[3]=n[3]+a>>>0,n[4]=n[4]+m>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}));const b=e.s;let C=class extends b{constructor(){super(...arguments),this.totalComments=0,this.pubsub=new t.m(this),this.pageUnloaded=!1,this.initialViewStats={num_comments_viewed:0,comments_viewed_json:[],comments_viewed_list:[],num_comments_consumed:0,comments_consumed_json:[],comments_consumed_list:[]},this.view_stats=this.cloneObject(this.initialViewStats),this.viewedEntityFilterChips=new Set,this.correlation_id=v(),this.page_request_id=t.ci(),this.handleCommentCreated=()=>{this.totalComments+=1},this.handleVisibilityChange=t=>{t?(this.pageUnloaded=!1,this.resetViewStats()):this.pageUnloaded||this.flushEvents()},this.onBeforeUnload=()=>{this.pageUnloaded=!0,this.flushEvents()},this.flushEvents=()=>{const e=((e,n,s,i,o,r)=>{let c={};const a=t.fX("post"),m=n.slice(0,1e3);return c={correlation_id:o,view_stats:{num_comments_viewed:e,comments_viewed_json:JSON.stringify(m),comments_viewed_list:s},post:{...a,number_comments:i},action_info:{page_request_id:r}},t.b({source:"post",action:"view",noun:"comments"},c)})(this.view_stats.num_comments_viewed,this.view_stats.comments_viewed_json,this.view_stats.comments_viewed_list,this.totalComments,this.correlation_id,this.page_request_id);t.f(this,e);const n=((e,n,s,i,o,r)=>{let c={};const a=t.fX("post"),m=n.slice(0,1e3);return c={correlation_id:o,view_stats:{num_comments_consumed:e,comments_consumed_json:JSON.stringify(m),comments_consumed_list:s},post:{...a,number_comments:i},screen:{height:window?.screen.height,width:window?.screen.width},action_info:{page_request_id:r}},t.b({source:"post",action:"consume",noun:"comments"},c)})(this.view_stats.num_comments_consumed,this.view_stats.comments_consumed_json,this.view_stats.comments_consumed_list,this.totalComments,this.correlation_id,this.page_request_id);if(t.f(this,n),this.viewedEntityFilterChips.size){const e=((e,n,s)=>{let i={};return i={correlation_id:n,view_stats:{entity_ids:e},post:{...t.fX("post")},action_info:{page_request_id:s}},t.b({source:"post_detail",action:"view",noun:"comment_filter"},i)})(Array.from(this.viewedEntityFilterChips),this.correlation_id,this.page_request_id);t.f(this,e)}this.resetViewStats()},this.commentsViewedListener=t=>{this.updateCommentsViewedStats(t.detail)},this.commentsConsumedListener=t=>{this.updateCommentsConsumedStats(t.detail)},this.handleEntityFilterViewTracking=t=>{t.entity_id&&this.viewedEntityFilterChips.add(t.entity_id)}}cloneObject(t){return JSON.parse(JSON.stringify(t))}connectedCallback(){super.connectedCallback(),this.parentElement.addEventListener("comments-viewed-event",this.commentsViewedListener),this.parentElement.addEventListener("comments-consumed-event",this.commentsConsumedListener),this.pubsub.subscribe(t.T.EntityFilterView,this.handleEntityFilterViewTracking),this.pubsub.subscribe(t.T.CommentCreated,this.handleCommentCreated),t.av.subscribe(this.onBeforeUnload,{unloadOnly:!0}),t.cg(this.handleVisibilityChange,{immediate:!0}),window.addEventListener("beforeRoute",this.flushEvents)}disconnectedCallback(){super.disconnectedCallback(),this.parentElement.removeEventListener("comments-viewed-event",this.commentsViewedListener),this.parentElement.removeEventListener("comments-consumed-event",this.commentsConsumedListener),t.av.unsubscribe(this.onBeforeUnload),t.ch(this.handleVisibilityChange),window.removeEventListener("beforeRoute",this.flushEvents)}resetViewStats(){this.correlation_id=v(),this.view_stats=this.cloneObject(this.initialViewStats),this.viewedEntityFilterChips=new Set}includesComment(t,e){return t.some((t=>t.comment_id===e))}updateCommentsViewedStats(t){const e=t?.detail;this.includesComment(this.view_stats.comments_viewed_json,e.comment_id)||(this.view_stats.comments_viewed_json.push(e),this.view_stats.comments_viewed_list.push(e.comment_id),this.view_stats.num_comments_viewed=this.view_stats.comments_viewed_json.length)}updateCommentsConsumedStats(t){const e=t?.detail;this.includesComment(this.view_stats.comments_consumed_json,e.comment_id)||(this.view_stats.comments_consumed_json.push(e),this.view_stats.comments_consumed_list.push(e.comment_id),this.view_stats.num_comments_consumed=this.view_stats.comments_consumed_json.length)}};t._([t.n({type:Number,attribute:"total-comments"})],C.prototype,"totalComments",void 0),C=t._([t.e("shreddit-comment-tree-stats")],C)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./B8B7_bfl.js",import.meta.url,"B8B7_bfl");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./B4wbfaco.js",import.meta.url,"B4wbfaco");SML.di("./DK2EuOAl.js",import.meta.url,"DK2EuOAl");SML.di("./jOi_w9kT.js",import.meta.url,"jOi_w9kT");SML.di("./C0I_JWye.js",import.meta.url,"C0I_JWye");
SML.dm("D9o05KHZ",["GlDbwxoG","B8B7_bfl","s_Igk1Yn","B4wbfaco","jOi_w9kT","C0I_JWye","DK2EuOAl"],(async(e,t,i,l,a,r)=>{let s=class extends a.F{constructor(){super(...arguments),this.appearance=r.T.SECONDARY,this.label="",this.clearable=!1,this.multiple=!1,this.required=!1,this.prefix=null,this.helperTextLevel=null,this.helperTextPlaceholder="",this.helperTextAriaLive="polite",this.helperTextMessage="",this.readonly=!1,this.inputRef=e.U(),this._selectController=new l.S(this),this.focus=()=>{this.inputRef.value?.focus()},this.syncInputValidation=(e=!1)=>{const t=this.options.map((e=>e.value)),i=this.inputRef?.value?.value,l=this.value||this.arbitrary&&i||!this.arbitrary&&t.includes(i);if(this.required&&!l){const t=this.inputRef?.value?._internals.validationMessage;this.dropdownMenu?.hidden&&t&&(e?this.form?.invalidateFieldWithMessage(this.name,t):this.setCustomValidity(t))}else this.form?.invalidateFieldWithMessage(this.name,"")},this.resetFaceplateDirty=()=>{this.removeAttribute("faceplate-dirty")},this.matchOptionsToInput=e=>{if(this.autocomplete&&!this.multiple){const t=e.currentTarget?.value;this.options.forEach((e=>{const i=e.displayText?.toLowerCase().trim();if(this.onFilterOption?this.onFilterOption?.(t,e):i?.startsWith(t.toLowerCase())){if(!t)return e.removeAttribute("hidden"),void(e.matchedText="");e.hasAttribute("hidden")&&e.removeAttribute("hidden"),e.matchedText=e.displayText?.slice(0,t.length)}else e.setAttribute("hidden","")})),this._selectController.focusedIndex=0}},this.clear=e=>{e.preventDefault(),e.stopPropagation(),this._selectController.selectedOptions.forEach((e=>{e.resetSelection()})),this._selectController.value="",this.inputRef.value&&(this.inputRef.value.value="")},this.handleKeyBindings=e=>{this.readonly||this.multiple?e.preventDefault():"Backspace"!==e.key||this.multiple||(this._selectController.value="")},this.getTextField=()=>i.x`<faceplate-text-input ?disabled="${this.disabled}" novalidate ${e.V(this.inputRef)} appearance="${this.appearance}" role="combobox" aria-controls="menu" aria-expanded="${!this.hidden}" id="trigger" faceplate-popper-trigger aria-label="${this.label}" value="${this._selectController.getSelectedOptionsAsStr()}" ?required="${this.required}" @input="${this.matchOptionsToInput}" suppress-internal-clicks persistent-trailing-icon with-select helper-text-aria-live="${i.l(this.helperTextAriaLive??void 0)}" helper-text-message="${i.l(this.helperTextMessage)}" helper-text-level="${i.l(this.helperTextLevel??void 0)}" helper-text-placeholder="${i.l(this.helperTextPlaceholder)}" helper-text-screen-reader-msg="${i.l(this.helperTextScreenReaderMsg)}" aria-autocomplete="list" name="${this.name}" prefix="${i.l(this.prefix)}"> <span slot="label">${this.label}</span> <slot name="clearButton" slot="clearButton" @click="${this.clear}"></slot> <span slot="trailingIconButton">${i.y({attributes:{"aria-hidden":"true"}})}</span> </faceplate-text-input>`}get referenceElement(){return this.inputRef.value}get selectedOptions(){return this._selectController.selectedOptions}get selectedIndex(){return this._selectController.selectedIndex}get value(){return this._selectController.value}set value(e){e!==this.value&&(this._selectController.value=e)}connectedCallback(){super.connectedCallback(),this.addEventListener("focus",this.resetFaceplateDirty),this.addEventListener("keydown",this.handleKeyBindings)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("focus",this.resetFaceplateDirty),this.removeEventListener("keydown",this.handleKeyBindings)}async firstUpdated(){super.firstUpdated(),this.setupValidationSync()}async setupValidationSync(){const e=await t.c(this);e&&this.isConnected&&(this.inputRef.value?.hasValidationHelpers||this.inputRef.value?.setFormValidationHelpers(e),this.syncInputValidation(),this.addEventListener(e.validationTrigger,(()=>this.syncInputValidation(!0))),e.addEventListener("faceplate-submit",(()=>this.syncInputValidation(!0))))}static get styles(){return i.i`:host{display:inline-block}:host([disabled]){cursor:not-allowed}faceplate-text-input{flex:1}:host([readonly]){caret-color:transparent}faceplate-menu{height:var(--faceplate-select-menu-height,auto);width:var(--faceplate-select-menu-width,auto);max-height:var(--faceplate-select-menu-max-height,auto);max-width:var(--faceplate-select-menu-max-width,auto);overflow:auto}`}render(){return i.x` <faceplate-dropdown-menu ?disabled="${this.disabled}" position="bottom-start" manual-trigger-focus> ${this.getTextField()} <faceplate-menu part="menu" slot="menu" id="menu" ariarole="listbox" faceplate-popper-content disable-auto-focus> <slot></slot> </faceplate-menu> </faceplate-dropdown-menu> `}};e._([e.n({type:String})],s.prototype,"appearance",void 0),e._([e.n({type:String})],s.prototype,"label",void 0),e._([e.n({type:Boolean})],s.prototype,"clearable",void 0),e._([e.n({type:Boolean})],s.prototype,"multiple",void 0),e._([e.n({type:Boolean})],s.prototype,"required",void 0),e._([e.n({type:String})],s.prototype,"prefix",void 0),e._([e.n({type:String})],s.prototype,"autocomplete",void 0),e._([e.n({type:Boolean})],s.prototype,"arbitrary",void 0),e._([e.n({type:String,reflect:!0,attribute:"helper-text-level"})],s.prototype,"helperTextLevel",void 0),e._([e.n({type:String,attribute:"helper-text-placeholder"})],s.prototype,"helperTextPlaceholder",void 0),e._([e.n({type:String,reflect:!0,attribute:"helper-text-aria-live"})],s.prototype,"helperTextAriaLive",void 0),e._([e.n({type:String,attribute:"helper-text-message"})],s.prototype,"helperTextMessage",void 0),e._([e.n({type:String,attribute:"helper-text-screen-reader-msg"})],s.prototype,"helperTextScreenReaderMsg",void 0),e._([e.n()],s.prototype,"onFilterOption",void 0),e._([e.n({type:Boolean})],s.prototype,"readonly",void 0),e._([e.l()],s.prototype,"options",void 0),e._([e.l({selector:"faceplate-option:not([hidden])"})],s.prototype,"visibleOptions",void 0),e._([e.l()],s.prototype,"triggerSlot",void 0),e._([e.Q("faceplate-dropdown-menu")],s.prototype,"dropdownMenu",void 0),s=e._([e.e("faceplate-select-text-input")],s)}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("D9vf8s3n",["s_Igk1Yn"],(async a=>{const{svg:h}=a.g();return{c:a.m(h`<path d="M17.033 3H2.967A1.967 1.967 0 001 4.967v5.066C1 11.119 1.881 12 2.967 12H5.1v5.1a.9.9 0 001.8 0V12h6.427v5.1a.9.9 0 001.8 0V12h1.906A1.967 1.967 0 0019 10.033V4.967A1.967 1.967 0 0017.033 3zm-6.919 1.8h4.732l-5.367 5.4H4.746l5.368-5.4zm-7.147 0H7.57L2.8 9.602V4.967c0-.092.075-.167.167-.167zm14.066 5.4h-5.008L17.2 5.025v5.008a.167.167 0 01-.167.167z"></path>`,"0 0 20 20","crowd-control")}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./CsGy0MYm.js",import.meta.url,"CsGy0MYm");
SML.dm("DAqoOXDQ",["s_Igk1Yn","GlDbwxoG","CsGy0MYm"],(async(t,e,i)=>{const{svg:l}=t.g(),s=t.m(l`<path d="M3.018 13.566a3.858 3.858 0 01-1.483-1.462A4.09 4.09 0 011 10.027c0-.774.183-1.474.551-2.102A3.939 3.939 0 013.09 6.44c.657-.361 1.407-.542 2.247-.542a4.753 4.753 0 011.642.29.813.813 0 01.473 1.08l-.011.028a.818.818 0 01-1.058.43l-.094-.034a3.025 3.025 0 00-1.001-.166c-.469 0-.894.1-1.274.302a2.27 2.27 0 00-.9.86c-.22.373-.33.806-.33 1.299 0 .486.105.92.314 1.304.209.384.496.682.861.897.365.214.775.32 1.231.32.37 0 .705-.07 1.003-.212.298-.142.532-.34.701-.591a1.47 1.47 0 00.249-.847H5.687a.74.74 0 110-1.48h2.4a.74.74 0 01.742.74v.55c0 .65-.151 1.236-.451 1.756-.3.52-.727.93-1.281 1.228-.554.299-1.197.447-1.928.447-.8 0-1.517-.178-2.15-.534h-.001zm7.082-.453V6.887c0-.49.403-.887.9-.887s.9.397.9.887v6.226c0 .49-.403.887-.9.887a.894.894 0 01-.9-.887zm3.918.094V6.792c0-.438.355-.793.794-.793h3.394a.793.793 0 110 1.586h-2.405v1.83h1.921a.793.793 0 110 1.586h-1.921v2.207a.793.793 0 01-.794.793h-.195a.793.793 0 01-.794-.793v-.001z"></path>`,"0 0 20 20","gif"),{svg:a}=t.g(),r=t.m(a`<path d="M6.348 1.5c-1.66 0-3.2 1.32-3.2 3.2v10.6c0 1.87 1.54 3.2 3.2 3.2.57 0 1.16-.16 1.7-.5l8.32-5.3c1.97-1.25 1.97-4.13 0-5.39L8.048 2c-.54-.35-1.13-.5-1.7-.5z"></path>`,"0 0 20 20","play-fill");var h=Object.freeze({__proto__:null,ToggleableVideoAdController:class{constructor(t,i){this.expandVideoPlayer=()=>{this.toggleElVisibility(this.videoPlayerEl,!0),this.toggleElVisibility(this.thumbnailContainerEl,!1),this.toggleElVisibility(this.thumbnailImageEl,!1),this.toggleElVisibility(this.thumbnailPlayBtnEl,!1),setTimeout((()=>{this.shredditPlayer&&this.updateVideoAdMeasurerDimensions(this.shredditPlayer.offsetHeight,this.shredditPlayer.offsetWidth)}),300)},this.hideVideoPlayer=()=>{this.toggleElVisibility(this.videoPlayerEl,!1),this.toggleElVisibility(this.thumbnailContainerEl,!0),this.toggleElVisibility(this.thumbnailImageEl,!0),this.toggleElVisibility(this.thumbnailPlayBtnEl,!0),this.shredditPlayer?.mediaUI?.hasAttribute(e.gm.PLAYING)&&this.host.dispatchEvent(new CustomEvent(e.es,{detail:{currentTime:this.shredditPlayer?.videoElement.currentTime,duration:this.shredditPlayer?.videoElement.duration}}))},(this.host=t).addController(this),this.updateVideoAdMeasurerDimensions=i}get videoPlayerEl(){return this.host.querySelector(`.${i.E}`)}get videoPlayerCloseBtnEl(){return this.host.querySelector(`.${i.V}`)}get thumbnailContainerEl(){return this.host.querySelector(`.${i.T}`)}get thumbnailImageEl(){return this.host.querySelector(`.${i.a}`)}get thumbnailPlayBtnEl(){return this.host.querySelector(`.${i.b}`)}get shredditPlayer(){return e.bd.map((t=>this.host.querySelector(t))).find((t=>null!==t))||null}toggleElVisibility(t,e){if(null===t)return;const l=e?t.dataset[i.c]:t.dataset[i.d];l&&l?.split(" ").forEach((e=>{t.classList.remove(e)}));const s=e?t.dataset[i.d]:t.dataset[i.c];s&&s?.split(" ").forEach((e=>{t.classList.add(e)}))}async hostConnected(){this.host.adType===e.eo.VIDEO&&(this.thumbnailContainerEl?.addEventListener("click",this.expandVideoPlayer),this.videoPlayerCloseBtnEl?.addEventListener("click",this.hideVideoPlayer))}hostDisconnected(){this.host.adType===e.eo.VIDEO&&(this.thumbnailContainerEl?.removeEventListener("click",this.expandVideoPlayer),this.videoPlayerCloseBtnEl?.removeEventListener("click",this.hideVideoPlayer))}}});return{g:s,get i(){return h},p:r}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./Ccw0cO_g.js",import.meta.url,"Ccw0cO_g");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./CykCcTkJ.js",import.meta.url,"CykCcTkJ");SML.di("./HYbNa5uQ.js",import.meta.url,"HYbNa5uQ");SML.di("./DAqoOXDQ.js",import.meta.url,"DAqoOXDQ");SML.di("./BGOkDHmz.js",import.meta.url,"BGOkDHmz");SML.di("./CsGy0MYm.js",import.meta.url,"CsGy0MYm");SML.di("./DoY_u8JV.js",import.meta.url,"DoY_u8JV");
SML.dm("DBgqsMtO",["GlDbwxoG","s_Igk1Yn","Ccw0cO_g","CC2wUKE8","CykCcTkJ","HYbNa5uQ","DAqoOXDQ","BGOkDHmz","CsGy0MYm","DoY_u8JV"],(async(e,t,i,o,s,r,n,a,l,d)=>{class h{constructor(e){this.fromReconnect=!1,(this.host=e).addController(this)}async hostConnected(){await this._enableAutoplayIfApplicable()}fullscreenChange(){this.trackEvent(e.er)}pause(){this.trackEvent(e.es)}play(){this.trackEvent(e.et)}timeUpdate(){this.trackEvent(e.ex)}volumeChange(){this.trackEvent(e.eu)}seeking(){this.trackEvent(e.ev)}seeked(){this.trackEvent(e.ew)}trackEvent(t){if(!this.host.postPromoted)return;const{currentTime:i,duration:o,muted:s,paused:r,volume:n}=this.host.videoElement,a=this.host.mediaUI?.hasAttribute(e.gm.FULLSCREEN)||!1;let l=!1;t!==e.ew&&t!==e.ev||(l=this.fromReconnect),t===e.ew&&(this.fromReconnect=!1);const d=e.c(t,{currentTime:i,duration:o,fullscreen:a,muted:s,paused:r,timeStamp:Date.now(),volume:n,fromReconnect:l});this.host.dispatchEvent(d)}async _enableAutoplayIfApplicable(){if(!this.host.postPromoted)return;const t=(await e.cj()).isAdblockEnabled;("true"===new URL(e.h.href).searchParams.get(e.k4)||!t&&this.host.autoplayPref)&&(this.host.autoplay=!0,this.host.volumeController.setInitialVolumeSetting(),this.host.mediaVisibilityController.shouldVideoAutoplay()?this.host.mediaVisibilityController.attemptAutoplay():this.host.checkVisibility?.()&&!this.host.stopLoad&&this.host.load())}}function u(e){void 0!==window.requestIdleCallback?window.requestIdleCallback(e):window.setTimeout(e,0)}function c({msg:e,error:t,debugOverlay:i}){const o=m(e,t);window.Sentry?window.Sentry.captureMessage?.(o):console.log(o),i?.log("logMessage",o)}function p({msg:e,error:t,debugOverlay:i}){const o=m(e,t);window.Sentry?window.Sentry.captureException?.(o):console.error(o),i?.log("logException",o)}function m(e,t){return["shreddit-player-2",e,t].filter(Boolean).join(" | ")}class v{constructor(t){this._retryCount=0,this._logException=p,this._logMessage=c,this.setMediaErrorCode=t=>{const i=this.host.mediaUI;i&&(i.setAttr(e.gm.ERROR),i.setPausedState(),i.hideLoadingSpinner(),this.mediaErrorCode=t,i.errorOverlay&&(i.errorOverlay.mediaErrorCode=t))},this.handleVideoError=()=>{u((()=>{const e=this.videoElement?.error,{hlsController:t,isHls:i}=this.host;if(e?.code){if(e.code===y.SrcNotSupported&&i&&this._retryCount<5)return this._retryCount+=1,t.initializeHlsJs(),void this._logMessage({msg:`Video error, reinitializing Hls.js: [${e.code}] ${e.message}`,debugOverlay:this.host.debugOverlay});this._logException({msg:`Video error: [${e.code}] ${e.message}`,debugOverlay:this.host.debugOverlay}),this.setMediaErrorCode(e.code),this.host.telemetryController.error(),this.host.updateSubSession()}}))},this.handleHlsError=async(e,t)=>{const{hlsController:i}=this.host,{hls:o}=i;if(o){if(this._retryCount>=5)return this._logException({msg:`HLS error: exceeded max retries: [${t.details}]`,error:t.error,debugOverlay:this.host.debugOverlay}),void this._handleHlsIrrecoverableError();switch(this._retryCount+=1,t.type){case"networkError":(t.networkDetails?.status||0)>=500?(this._logException({msg:`HLS error: network error: [${t.networkDetails?.status}] [${t.details}]`,error:t.error,debugOverlay:this.host.debugOverlay}),this._handleHlsIrrecoverableError()):403===t.networkDetails?.status?(this._logMessage({msg:`HLS error: network error: [${t.networkDetails?.status}] [${t.details}]`,error:t.error,debugOverlay:this.host.debugOverlay}),this._handleHlsIrrecoverableError()):(this._logMessage({msg:`HLS error: network error: [${t.networkDetails?.status}] [${t.details}]`,error:t.error,debugOverlay:this.host.debugOverlay}),this.setMediaErrorCode(y.Network),o.startLoad());break;case"mediaError":"audioTrackLoadError"===t.details?(this._logMessage({msg:`HLS error: audioTrackLoadError, switching to audio track 0: [${t.details}]`,error:t.error,debugOverlay:this.host.debugOverlay}),o.audioTrack=0):(this._logMessage({msg:`HLS error: mediaError: [${t.details}]`,error:t.error,debugOverlay:this.host.debugOverlay}),t.fatal&&o.recoverMediaError());break;default:t.fatal&&(this._logException({msg:`HLS error: unknown fatal error: [${t.details}]`,error:t.error,debugOverlay:this.host.debugOverlay}),this._handleHlsIrrecoverableError())}}},this.resetRetryCount=()=>{this._retryCount=0},(this.host=t).addController(this),this.videoElement=t.videoElement,this.host.errorImprovements}hostConnected(){this.host.errorImprovements||this.videoElement.addEventListener("error",this.handleVideoError)}hostDisconnected(){this.host.errorImprovements||this.videoElement.removeEventListener("error",this.handleVideoError)}_handleHlsIrrecoverableError(){this.host.hlsController.destroyHlsEngine(),this.setMediaErrorCode(y.Network),this.host.telemetryController.error(),this.host.updateSubSession()}}var y;!function(e){e[e.Aborted=1]="Aborted",e[e.Network=2]="Network",e[e.Decode=3]="Decode",e[e.SrcNotSupported=4]="SrcNotSupported"}(y||(y={}));const g=new Map([[MediaError.MEDIA_ERR_ABORTED,0],[MediaError.MEDIA_ERR_NETWORK,5],[MediaError.MEDIA_ERR_DECODE,2],[MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED,1]]);class E{constructor(t){this._retryAttempts=new Map,this._logException=p,this._logMessage=c,this.setMediaError=t=>{const i=this.host.mediaUI;i&&(i.setAttr(e.gm.ERROR),i.setPausedState(),i.hideLoadingSpinner(),this.mediaErrorCode=t,i.errorOverlay&&(i.errorOverlay.mediaErrorCode=t))},this.handleVideoError=()=>{u((()=>{const e=this.videoElement.error;e?.code&&(e.code!==MediaError.MEDIA_ERR_ABORTED?this._shouldRetry(e.code)?this._attemptRetry(e.code,e.message):this._handleIrrecoverableError(e.code,e.message):this.host.pause("scroll"))}))},this.handleHlsError=async(e,t)=>{const{hlsController:i}=this.host,{hls:o}=i;if(o)if(this._shouldRetry(MediaError.MEDIA_ERR_NETWORK))switch(this._incrementRetryCount(MediaError.MEDIA_ERR_NETWORK),t.type){case"networkError":"manifestLoadError"===t.details||"manifestParsingError"===t.details?o.loadSource(this.host.src):o.startLoad(),this._attemptPlayback("HLS network error recovery");break;case"mediaError":if("audioTrackLoadError"===t.details&&0!==o.audioTrack)o.audioTrack=0;else if(this._logMessage({msg:`HLS error: mediaError: [${t.details}]`,error:t.error,debugOverlay:this.host.debugOverlay}),t.fatal)o.recoverMediaError();else if("bufferStalledError"===t.details)return;this._attemptPlayback("HLS media error recovery");break;default:o.startLoad(),this._attemptPlayback("HLS default error recovery")}else this._handleHlsIrrecoverableError(t)},this.resetRetryCount=()=>{this._retryAttempts=new Map},this._incrementRetryCount=e=>{const t=this._retryAttempts.get(e)||0;this._retryAttempts.set(e,t+1)},this._shouldRetry=e=>{if(!this.host.isConnected)return!1;if(!this.videoElement||this.videoElement.error?.code===MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED)return!1;if(!e)return!1;const t=g.get(e)??3;return(this._retryAttempts.get(e)||0)<t},this._attemptRetry=(e,t)=>{this._incrementRetryCount(e);const i=this._retryAttempts.get(e)||0,o=g.get(e)??3;if(this._logMessage({msg:`Video error: [${e}] ${t} - retrying (${i}/${o})`,debugOverlay:this.host.debugOverlay}),e===MediaError.MEDIA_ERR_DECODE){const e=this.videoElement.src;this.videoElement.removeAttribute("src"),this.videoElement.load(),this.videoElement.src=e,this._attemptPlayback("decode error retry")}else this._attemptPlayback("network error retry")},this._attemptPlayback=e=>{this.videoElement.play().catch((t=>{this._logMessage({msg:`Play failed during ${e}: ${t.message}`,debugOverlay:this.host.debugOverlay})}))},this._handleIrrecoverableError=(e,t)=>{this._logException({msg:`Irrecoverable video error: [${e}] ${t}`,debugOverlay:this.host.debugOverlay}),this.setMediaError(e),this.host.telemetryController.error(),this.host.updateSubSession()},this._handleHlsIrrecoverableError=e=>{const t={...Object.fromEntries(["manifestLoadError","levelLoadError","fragLoadError","bufferStalledError"].map((e=>[e,MediaError.MEDIA_ERR_NETWORK]))),...Object.fromEntries(["keyLoadError","bufferAppendingError","fragDecryptError","levelSwitchError","keySystemNoKeys"].map((e=>[e,MediaError.MEDIA_ERR_DECODE]))),manifestParsingError:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED};let i;i=e.details in t?t[e.details]:"networkError"===e.type?MediaError.MEDIA_ERR_NETWORK:MediaError.MEDIA_ERR_DECODE,this._logException({msg:`Irrecoverable HLS error: ${e.type} ${e.details}`,debugOverlay:this.host.debugOverlay}),this.setMediaError(i),this.host.telemetryController.error(),this.host.hlsController.destroyHlsEngine(),this.host.updateSubSession()},(this.host=t).addController(this),this.videoElement=t.videoElement,t.errorImprovements}hostConnected(){this.host.errorImprovements&&this.videoElement.addEventListener("error",this.handleVideoError)}hostDisconnected(){this.host.errorImprovements&&this.videoElement.removeEventListener("error",this.handleVideoError)}}class b{constructor(e){this.handleClick=()=>{this.host.isMobile&&!this.host.videoElement?.paused&&this.host.userIdleController?.isIdle||this.host.mediaActionsController?.togglePlay()},this.handleDblClick=()=>{this.host.mediaActionsController?.toggleFullscreen()},(this.host=e).addController(this)}hostConnected(){this.host.gif||(this.host.videoElement.addEventListener("click",this.handleClick),this.host.videoElement.addEventListener("dblclick",this.handleDblClick))}hostDisconnected(){this.host.gif||(this.host.videoElement.removeEventListener("click",this.handleClick),this.host.videoElement.removeEventListener("dblclick",this.handleDblClick))}}const f=new RegExp("(^https://v.redd.it/)([a-zA-Z0-9]+)/");function _(e){const t=e?.match(f);return 3===t?.length?t[2]:""}const C="@reddit/shreddit-player-media-quality";function k(e){return e>=1080?1080:e>=720?720:e>=540?540:e>=480?480:e>=360?360:e>=240?240:144}function T({hlsEngine:e,mp4Sources:t}){return t?t.some((e=>e.source.dimensions.height>e.source.dimensions.width&&e.source.dimensions.height>768)):!!e&&e.levels.some((e=>e.height>e.width&&e.height>768))}function I(e=[]){return e.sort(((e,t)=>e.quality>t.quality?-1:1))}function A(e,t=[]){for(let i=0;i<t.length;i++)if(e>=t[i].quality)return i;return t.length-1}function S(){const t=e.$.getItem(C);return t?parseInt(t):void 0}let R;class w{constructor(e){(this.host=e).addController(this),this.videoElement=e.videoElement}hostDisconnected(){this.destroyHlsEngine()}get isHlsStream(){return this.host.src.includes(".m3u8")}async initializeHlsJs(){R=R||this.host.HLS_JS||(await this._importHlsJs())?.default,R&&R.isSupported()?(this.hls=new R((({cmcdSessionId:e,src:t})=>({capLevelToPlayerSize:!0,cmcd:{sessionId:e,contentId:_(t),useHeaders:!0},maxBufferLength:20,maxMaxBufferLength:20,backBufferLength:3}))({authToken:this.host.streamingAuthToken,cmcdSessionId:this.host.subSessionId,src:this.host.src})),this.hls.once(R.Events.MANIFEST_PARSED,(()=>{this.host.qualityLevels=this.createQualityLevels(),this.host.currentQualityLevelIndex=this.getInitialQualityLevel()})),this.hls.on(R.Events.MANIFEST_LOADING,(()=>{this.host.telemetryController.startDownload()})),this.hls.on(R.Events.MANIFEST_LOADED,(()=>{this.host.telemetryController.endDownload()})),this.hls.on(R.Events.FRAG_LOADED,(()=>{this.host.errorController.resetRetryCount()})),this.hls.on(R.Events.LEVEL_SWITCHED,(()=>{this.host.telemetryController.switchBitrate()})),this.hls.on(R.Events.BUFFER_APPENDED,(()=>{this.host.errorController.resetRetryCount()})),this.hls.on(R.Events.LEVEL_LOADED,(()=>{this.host.errorController.resetRetryCount()})),this.hls.on(R.Events.ERROR,this.host.errorController.handleHlsError),this.hls.loadSource(this.host.src),this.hls.attachMedia(this.videoElement)):this.videoElement.src||(this.videoElement.src=this.host.src)}setQualityLevel(e){this.host.currentQualityLevelIndex=e,this.hls&&(this.hls.nextLevel=e)}createQualityLevels(){if(!this.hls)return[];const e=[],t=T({hlsEngine:this.hls});return(this.hls.levels||[]).map(((e,t)=>({...e,hlsLevelIndex:t}))).sort(((e,t)=>e.bitrate>t.bitrate?-1:1)).forEach((i=>{const o=k(t?i?.width:i?.height);o&&-1===e.map((e=>e.quality)).indexOf(o)&&e.push({hlsLevelIndex:i.hlsLevelIndex,quality:o})})),I(e)}getInitialQualityLevel(){const e=S();if(e&&this.hls){const t=this.host.qualityLevels.filter((t=>t.quality===e))[0]?.hlsLevelIndex;if(void 0!==t)return this.hls.startLevel=t,this.hls.loadLevel=t,t}return-1}updateCmcdSessionId(e){this.hls&&this.hls.cmcdController&&(this.hls.cmcdController.sid=e)}destroyHlsEngine(){this.hls?.destroy(),this.hls=void 0}getCurLevel(){return this.hls?.levels&&void 0!==this.hls?.currentLevel?this.hls.levels[this.hls.currentLevel]:void 0}getCurAudioTrack(){return this.hls?.audioTracks&&void 0!==this.hls?.audioTrack?this.hls.audioTracks[this.hls.audioTrack]:void 0}async _importHlsJs(){return await SML.di("./yUP_ybnQ.js",import.meta.url,"yUP_ybnQ")}}var L={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},P=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],N=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],O=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],M="undefined"!=typeof window&&void 0!==window.document?window.document:{},x="fullscreenEnabled"in M&&Object.keys(L)||P[0]in M&&P||N[0]in M&&N||O[0]in M&&O||[],D={requestFullscreen:function(e){return e[x[L.requestFullscreen]]()},requestFullscreenFunction:function(e){return e[x[L.requestFullscreen]]},get exitFullscreen(){return M[x[L.exitFullscreen]].bind(M)},get fullscreenPseudoClass(){return":"+x[L.fullscreen]},addEventListener:function(e,t,i){return M.addEventListener(x[L[e]],t,i)},removeEventListener:function(e,t,i){return M.removeEventListener(x[L[e]],t,i)},get fullscreenEnabled(){return Boolean(M[x[L.fullscreenEnabled]])},set fullscreenEnabled(e){},get fullscreenElement(){return M[x[L.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return M[("on"+x[L.fullscreenchange]).toLowerCase()]},set onfullscreenchange(e){return M[("on"+x[L.fullscreenchange]).toLowerCase()]=e},get onfullscreenerror(){return M[("on"+x[L.fullscreenerror]).toLowerCase()]},set onfullscreenerror(e){return M[("on"+x[L.fullscreenerror]).toLowerCase()]=e}};class ${constructor(t){this._logMessage=c,this._playRequested=!1,this._loadRequested=!1,this.play=async(e=!1)=>{if(this.host.hasHadPlayAttempt=!0,this._playRequested=!0,this.videoElement.paused)if(e?this.host.telemetryController.autoplay():this.host.telemetryController.clickPlay(),this.host.mediaUI?.showLoadingSpinner(),this.host.initializeVideoElement(),this.host.isHls&&!this.host.hlsController.hls&&(await (this.host.hlsController?.initializeHlsJs())),this.host.mediaVisibilityController?.isVideoInView()||this.host.playOutOfViewport){this.host.subSessionPlayStartTime=this.host.subSessionPlayStartTime||Date.now();try{await this.videoElement.play(),this.host.debugOverlay?.log("Load time",(Date.now()-(this.host.subSessionInstructionTime??0))/1e3+"s")}catch(e){this._logMessage({msg:"Play failed",error:e,debugOverlay:this.host.debugOverlay}),this.host.pause("scroll")}}else this.pause("scroll")},this.pause=e=>{if(this._playRequested){if("click"===e)this.host.telemetryController.clickPause();else if("scroll"===e)this.host.telemetryController.scrollPause();else if("background"===e)this.host.telemetryController.backgroundVideo();else if("ended"===e&&(this.host.playCount++,this.host.telemetryController.servedVideo(),this._shouldLoop()))return this.loop();this.host.updateSubSession()}this._playRequested=!1,"click"===e&&this.host.autoplay&&(this.host.autoplay=!1),this.videoElement.pause(),this.host.mediaUI?.setPausedState()},this.loop=()=>{this.host.telemetryController.looped=!0,this.host.updateSubSession(),this.play(!0)},this._shouldLoop=()=>!(!this.host.gif&&!this.host.loop)&&(!this.host.loopLimit||this.host.playCount<=this.host.loopLimit),this.togglePlay=()=>{this.videoElement.paused?this.play(!1):this.pause("click")},this.load=async(t=e.k5.AUTO)=>{this._loadRequested||this._playRequested||this.host.hasHadPlayAttempt||(this._loadRequested=!0,this.host.mediaUI?.showLoadingSpinner(),this.host.initializeVideoElement(),this.host.isHls&&!this.host.hlsController.hls&&(await (this.host.hlsController?.initializeHlsJs())),this.videoElement.preload=t,this.videoElement.load())},this.stop=()=>{this.host.stopLoad&&this.host.initialized&&(this.host.stoppedState={currentTime:this.videoElement.currentTime},this.videoElement.pause(),this.host.isHls&&this.host.hlsController.destroyHlsEngine(),this.videoElement.removeAttribute("src"),this.videoElement.load(),this.host.initialized=!1)},this.toggleFullscreen=()=>{if(D.fullscreenElement===this.host)D.exitFullscreen();else{this.host.mediaSyncController.syncPlayback();try{D.fullscreenEnabled?(D.requestFullscreen(this.host),this.host.telemetryController.enterFullscreen()):"function"==typeof this.host.videoElement.webkitSetPresentationMode?(this.host.videoElement.webkitSetPresentationMode?.("fullscreen"),this.host.telemetryController.enterFullscreen()):this._logMessage({msg:"Could not enter fullscreen for device",debugOverlay:this.host.debugOverlay})}catch(e){this._logMessage({msg:"Error entering fullscreen",error:e,debugOverlay:this.host.debugOverlay})}}},this.setQualityLevel=e=>{this.host.isHls?this.host.hlsController.setQualityLevel(e):this.host.isMp4&&this.host.packagedMediaController.setQualityLevel(e)},this.toggleCaptions=()=>this.host.mediaUI?.captionController?.toggleCaptions(),this.setVolume=e=>this.host.volumeController.setVolume(e),this.increaseVolume=()=>this.host.volumeController.increaseVolume(),this.decreaseVolume=()=>this.host.volumeController.decreaseVolume(),this.toggleMute=()=>this.host.volumeController.toggleMute(),(this.host=t).addController(this),this.videoElement=t.videoElement}hostDisconnected(){this._playRequested=!1,this._loadRequested=!1}}class U{constructor(t){this.initializeSubscribers=()=>{this.hotkeyController?.contextualSubscribe(e.k6.TOGGLE_PLAY,this.mediaActionsController?.togglePlay),this.hotkeyController?.contextualSubscribe(e.k6.TOGGLE_FULLSCREEN,this.mediaActionsController?.toggleFullscreen),this.hotkeyController?.contextualSubscribe(e.k6.REWIND_5,(()=>this.timeController?.skipTime(-5))),this.hotkeyController?.contextualSubscribe(e.k6.FAST_FORWARD_5,(()=>this.timeController?.skipTime(5))),this.hotkeyController?.contextualSubscribe(e.k6.INCREASE_VOLUME,this.mediaActionsController?.increaseVolume),this.hotkeyController?.contextualSubscribe(e.k6.DECREASE_VOLUME,this.mediaActionsController?.decreaseVolume),this.hotkeyController?.contextualSubscribe(e.k6.REWIND_10,(()=>this.timeController?.skipTime(-10))),this.hotkeyController?.contextualSubscribe(e.k6.FAST_FORWARD_10,(()=>this.timeController?.skipTime(10))),this.hotkeyController?.contextualSubscribe(e.k6.RESTART,(()=>this.timeController?.setTime(0))),this.hotkeyController?.contextualSubscribe(e.k6.TOGGLE_MUTE,this.mediaActionsController?.toggleMute),this.hotkeyController?.contextualSubscribe(e.k6.TOGGLE_CAPTIONS,this.mediaActionsController?.toggleCaptions)},(this.host=t).addController(this)}get mediaActionsController(){return this.host.mediaActionsController}get timeController(){return this.host.mediaUI?.timeController}hostConnected(){this.hotkeyController=new e.ck(this.host),this.initializeSubscribers()}}const V="@reddit/shreddit-player-media-volume";let z=!1;class H{constructor(e){this.setVolume=e=>{let t=parseFloat(Math.pow(e,2).toFixed(2));t=Math.min(Math.max(t,0),1),this.videoElement.volume=t,this.videoElement.muted=!t,t>0&&(z=!0),F({volume:t,muted:this.videoElement.muted})},this.increaseVolume=()=>{const e=Math.min(this.sliderPosition+.1,1);this.setVolume(e)},this.decreaseVolume=()=>{const e=Math.max(this.sliderPosition-.1,0);this.setVolume(e)},this.toggleMute=()=>{const e=!this.videoElement.muted;this.videoElement.muted=e,this.host.telemetryController.clickMute(e),e||(z=!0,0===this.videoElement.volume&&(this.videoElement.volume=this.defaultVolumeSetting.volume)),F({volume:this.videoElement.volume,muted:this.videoElement.muted})},(this.host=e).addController(this),this.videoElement=e.videoElement}hostConnected(){}hostDisconnected(){}get defaultVolumeSetting(){return{volume:.25,muted:!1}}setInitialVolumeSetting(){const{autoplay:t,gif:i}=this.host;if(i)return this.videoElement.volume=0,void(this.videoElement.muted=!0);const o=function(){try{return JSON.parse(e.$.getItem(V))}catch(e){return}}(),s={...this.defaultVolumeSetting,...o};t?(z?(this.videoElement.volume=s.volume,this.videoElement.muted=s.muted,this.host.mediaUI?.setAttr(e.gm.MUTED,this.videoElement.muted)):(this.videoElement.volume=s.volume,this.videoElement.muted=!0,this.host.mediaUI?.setAttr(e.gm.MUTED)),this.updateVolumeFillRate()):(this.videoElement.volume=s.volume,this.videoElement.muted=s.muted)}get sliderPosition(){return this.videoElement.muted?0:Math.sqrt(this.videoElement.volume)}updateVolumeFillRate(){this.host.mediaUI?.style.setProperty(e.k7.VOLUME_FILL_RATE,this.sliderPosition.toString())}}function F({volume:t,muted:i}){e.$.setItem(V,JSON.stringify({volume:t,muted:i}))}class B{constructor(t){this.syncPlayback=()=>{this.pubSubController.publish(e.T.MediaSyncPlayback,{subSessionId:this.host.subSessionId})},this.handlePlaybackSync=({subSessionId:e})=>{e!==this.host.subSessionId&&this.host.pause("scroll")},this.syncVolume=()=>{this.pubSubController.publish(e.T.MediaSyncVolume,{volume:this.videoElement.volume,muted:this.videoElement.muted})},this.handleVolumeSync=({volume:e,muted:t})=>{t||function(e=!0){z=e}(!0),this.videoElement.volume===e&&this.videoElement.muted===t||(this.videoElement.volume=e,this.videoElement.muted=t)},(this.host=t).addController(this),this.videoElement=t.videoElement,this.pubSubController=new e.m(this.host)}hostConnected(){this.host.singlePlayback&&(this.videoElement?.addEventListener("playing",this.syncPlayback),this.pubSubController.subscribe(e.T.MediaSyncPlayback,this.handlePlaybackSync)),this.host.gif||u((()=>{this.videoElement?.addEventListener("volumechange",this.syncVolume),this.pubSubController.subscribe(e.T.MediaSyncVolume,this.handleVolumeSync)}))}hostDisconnected(){this.host.singlePlayback&&this.videoElement?.removeEventListener("playing",this.syncPlayback),this.host.gif||this.videoElement?.removeEventListener("volumechange",this.syncVolume)}}const j=.5;class q{constructor(t){this._isWithinAutoplayThreshold=!1,this._canAutoplay=!0,this._autoplayAttemptFailures=0,this.handleAutoplayAttempt=({isAttempting:e})=>{this._canAutoplay=!e},this.legacyIntersectionCallback=t=>{t.forEach((async t=>{t.target===this.host&&(this._isWithinAutoplayThreshold=t.intersectionRatio>j,this._isWithinAutoplayThreshold?this.attemptAutoplay():(this.host.playOutOfViewport||(this.host.pause("scroll"),this.pubSubController.publish(e.T.MediaAutoplayAttempt,{isAttempting:!1})),this.host.autoplay&&t.intersectionRatio>0&&this.host.load()))}))},this.preloadIntersectionCallback=e=>{e.forEach((e=>{e.isIntersecting&&this.host.autoplay?this.host.load():e.isIntersecting||this.host.playOutOfViewport||this.host.stop()}))},this.autoplayIntersectionCallback=t=>{t.forEach((t=>{this._isWithinAutoplayThreshold=t.intersectionRatio>=j,this._isWithinAutoplayThreshold?this.attemptAutoplay():this.host.playOutOfViewport||(this.host.pause("scroll"),this.pubSubController.publish(e.T.MediaAutoplayAttempt,{isAttempting:!1}))}))},this.attemptAutoplay=async()=>{if(this.shouldVideoAutoplay())if(this.host.initializeVideoElement(),this.host.singlePlayback){if(D.fullscreenElement)return;if(this._canAutoplay){this.pubSubController.publish(e.T.MediaAutoplayAttempt,{isAttempting:!0});try{await this.host.play(!0),this.pubSubController.publish(e.T.MediaAutoplayAttempt,{isAttempting:!1})}catch(t){if(this.pubSubController.publish(e.T.MediaAutoplayAttempt,{isAttempting:!1}),this._autoplayAttemptFailures++,this._autoplayAttemptFailures<3)return void this.attemptAutoplay();this.host.pause("scroll"),this.host.mediaUI?.showPoster()}}else this.host.mediaUI?.showPoster()}else this.host.play(!0)},(this.host=t).addController(this),this.pubSubController=new e.m(this.host)}hostConnected(){this.pubSubController.subscribe(e.T.MediaAutoplayAttempt,this.handleAutoplayAttempt),this.host.stopLoad?(this.preloadObserver=new IntersectionObserver(this.preloadIntersectionCallback,{threshold:0,rootMargin:"500px 0px"}),this.preloadObserver.observe(this.host),this.autoplayObserver=new IntersectionObserver(this.autoplayIntersectionCallback,{threshold:j}),this.autoplayObserver.observe(this.host)):(this.legacyObserver=new IntersectionObserver(this.legacyIntersectionCallback,{threshold:[0,j]}),this.legacyObserver.observe(this.host))}hostDisconnected(){this.legacyObserver?.unobserve(this.host),this.legacyObserver?.disconnect(),this.preloadObserver?.unobserve(this.host),this.preloadObserver?.disconnect(),this.autoplayObserver?.unobserve(this.host),this.autoplayObserver?.disconnect(),this._isWithinAutoplayThreshold=!1,this._autoplayAttemptFailures=0}isVideoInView(){return"visible"===document.visibilityState&&this._isWithinAutoplayThreshold}shouldVideoAutoplay(){return Boolean(this.host.autoplay&&this.isVideoInView()&&!this.host.mediaUI?.hasAttribute(e.gm.ENDED))}}let G=e.B;class Q{constructor(e){this._logException=p,(this.host=e).addController(this),this.videoElement=e.videoElement}async hostDisconnected(){this.host.stopLoad&&(this.packagedMedia=void 0)}get hasPackagedMedia(){return!!this.host.packagedMediaJSON}initialize(){if(!this.videoElement)throw new Error("Video element not found");this.hasPackagedMedia&&(this.parsePackagedMedia(),this.host.qualityLevels=this.createQualityLevels(),this.setQualityLevel(this.getInitialQualityLevel()))}parsePackagedMedia(){try{this.packagedMedia=JSON.parse(this.host.packagedMediaJSON),this.packagedMedia?.playbackMp4s?.permutations?.length||this.errorParsingPackagedMedia()}catch(e){this.errorParsingPackagedMedia(e)}}errorParsingPackagedMedia(e){this._logException({msg:"Could not parse packaged-media-json",error:e,debugOverlay:this.host.debugOverlay}),this.host.packagedMediaJSON=void 0,this.packagedMedia=void 0}setQualityLevel(e){this.host.currentQualityLevelIndex=e;const t=this.packagedMedia?.playbackMp4s.permutations[-1===e?function(e){let t=0;const i=navigator?.connection||navigator?.mozConnection||navigator?.webkitConnection,o=i?.effectiveType;return t="4g"===o||(i?.downlink??0)>3?0:A("3g"===o?360:"2g"===o||"slow-2g"===o?144:480,e),e[t].mp4SourceIndex??0}(this.host.qualityLevels):e]?.source.url,i=this.videoElement.currentTime;if(t){const e=new URL(t);i&&(e.hash=`t=${i}`);const o=!this.videoElement.paused;this.videoElement.src=e.toString(),o&&this.host.play()}}updateAuthTokenParam(){this.videoElement.src=function(t,i){if(!i)return t;const o=new URL(t);return o.searchParams.set(e.k8,i),o.toString()}(this.videoElement.src,this.host.packagedAuthToken)}createQualityLevels(){const e=this.packagedMedia?.playbackMp4s.permutations;if(!e)return[];const t=[],i=T({mp4Sources:e});return(e||[]).forEach(((e,o)=>{const s=k(i?e.source.dimensions.width:e.source.dimensions.height);s&&-1===t.map((e=>e.quality)).indexOf(s)&&t.push({mp4SourceIndex:o,quality:s})})),I(t)}getInitialQualityLevel(){const e=S();if(e){const t=this.host.qualityLevels.filter((t=>t.quality===e))[0]?.mp4SourceIndex;if(void 0!==t)return t}return-1}}class W{constructor(e){this.handleVisibilityChange=e=>{e||this.host.playOutOfViewport||this.host.pause("background"),e&&this.host.mediaVisibilityController.attemptAutoplay()},this.onBeforeUnload=()=>{this.host.pause("background")},(this.host=e).addController(this)}hostConnected(){e.cg(this.handleVisibilityChange),e.av.subscribe(this.onBeforeUnload)}hostDisconnected(){e.ch(this.handleVisibilityChange),e.av.unsubscribe(this.onBeforeUnload)}}class K{constructor(){this.firstStartedAt=0,this.startedAt=null,this._laps=[],this._time=0}get paused(){return null===this.startedAt}get time(){if(this.paused)return this._time;const e=Date.now()-this.startedAt;return this._time+e}start(){this.firstStartedAt=this.firstStartedAt||Date.now(),this.paused&&(this.startedAt=Date.now())}pause(){this.paused||(this._time=this.time,this.startedAt=null)}reset(){this._laps=[],this.startedAt=null,this._time=0}lap(){const{_laps:e,time:t}=this,i=e[e.length-1],o={time:i?t-i.cumulativeTime:t,cumulativeTime:t};return e.push(o),o}}const J=[25,50,75,95,100],Y=[2,3,5,10];function Z(e){const{host:t}=e,{videoElement:o}=t,s=t.isHls?t.src:o.src,{hostname:r,pathname:n,id:a}=function(e){let t,i,o="";try{const s=new URL(e);if(t=s.hostname,i=s.pathname,"v.redd.it"===t){const e=i.split("/");o=e[1]||"";const t=e.findIndex((e=>"asset"===e)),s=-1!==t?t+1:-1;s>=0&&s<e.length&&(o=e[s])}}catch{}return{hostname:t,pathname:i,id:o}}(s),{height:l,width:d}=function(e){return{height:e?.videoHeight||0,width:e?.videoWidth||0}}(o),h=d>=l?i.M.Landscape:i.M.Portrait;let u,c,p,m;t.isHls?(c=i.F.Hls,p=!!t.hlsController?.getCurAudioTrack(),u=t.hlsController.hls?.streamController?.fragCurrent?.byteRange):(c=i.F.Mp4,p=o?.mozHasAudio||Boolean(o?.webkitAudioDecodedByteCount)||Boolean(o?.audioTracks?.length)),Array.isArray(u)&&2===u.length&&(m=u[1]-u[0]);let v=i.a.VOD;t.gif&&(v=i.a.Gif),t.commentId&&!t.gif&&(v=i.a.Video);const y=D.fullscreenElement===t||"fullscreen"===t.videoElement.webkitPresentationMode;return{duration:Math.round(1e3*o.duration),height:l,width:d,id:a,domain:r,orientation:h,origin:t.mediaOrigin,size:m,type:v,packaging_format:t.isHls?i.P.Hls:i.P.SingleFile,byte_range:Array.isArray(u)?u.toString():void 0,time:Math.round(1e3*o.currentTime),zoomed:y,format:c,has_audio:p,file_name:n,url:s,captions_present:t.mediaUI?.captionController?.captionsPresent}}function X(e){const{host:t}=e;return{id:t.commentId}}function ee(){return{device_name:navigator.userAgent,os_name:navigator.platform,browser_name:navigator.userAgent,browser_version:navigator.appVersion}}function te(t,{source:o,action:s,noun:r}){const{host:n}=t,{videoElement:a}=n,l=se(t),d=l?`[${l.error_code}] ${l.error_message||l.reason||l.custom_response}`:void 0,h=n.hlsController?.getCurLevel()?.bitrate,u=n.hlsController?.getCurAudioTrack()?.bitrate,{height:c,width:p}=function(e){return{height:e?.clientHeight||0,width:e?.clientWidth||0}}(a),m=o===i.Q.Videoplayer&&s===i.b.Switch&&r===i.c.Bitrate;return{id:n.playbackId,sub_session_id:n.subSessionId,is_live:!1,is_looped:t.looped,state:re(t),error:d,watch_duration_ms:Math.round(t.stopwatch.time),heartbeat_duration_ms:t.stopwatch.lap().time,playhead_offset_ms:Math.round(1e3*(a.duration-a.currentTime)),timestamp_ms:Math.round(1e3*a.currentTime),start_time_ms:t.stopwatch.firstStartedAt,volume:a.muted?0:Math.round(100*a.volume),total_bitrate:(h??0)+(u??0),video_bitrate:h,audio_bitrate:u,player_type:n.playerType??null,player_width:p,player_height:c,autoplay_setting:n.autoplay?i.A.Autoplay:i.A.Click,sequence_number:t.sequenceNumber+=1,user_bitrate_switch:m&&t.manualQualityChange,captions_enabled:n.mediaUI?.hasAttribute(e.gm.CAPTIONS_ENABLED)}}function ie(t){const{host:i}=t;return{created_timestamp:i.postCreatedAt?e.cs(i.postCreatedAt):void 0,domain:i.postDomain,id:i.postId||"",nsfw:!!i.postNsfw,promoted:!!i.postPromoted,score:i.postScore,spoiler:!!i.postSpoiler,subreddit_name:i.subredditName,subreddit_id:i.subredditId,type:i.postType}}function oe({instructionTimestamp:e}={}){return{event_timestamp:Date.now(),instruction_timestamp:e}}function se(e){const{error:t}=e.host.videoElement,{errorController:i}=e.host;if(!t&&!i?.mediaErrorCode)return;return{reason:undefined,custom_response:undefined,error_code:i?.mediaErrorCode||t?.code,error_message:t?.message}}function re(t){return t.host.mediaUI?.hasAttribute(e.gm.LOADING)?i.d.Buffering:t.host.mediaUI?.hasAttribute(e.gm.PLAYING)?i.d.Playing:t.host.mediaUI?.hasAttribute(e.gm.PAUSED)?i.d.Paused:i.d.Buffering}class ne{get complete(){return 0===this._thresholds.length}constructor(e){const t=Array.isArray(e)?Array.from(e):[e];this._thresholds=t.sort(((e,t)=>e-t))}test(e){const t=[];for(;!this.complete;){const i=this._thresholds[0];if(e<i)return t;this._thresholds.shift(),t.push(i)}return t}}class ae{constructor(e){this.stopwatch=new K,this.started=!1,this.looped=!1,this.sequenceNumber=-1,this._buffering=!1,this._playedInFullscreen=!1,this._playedWithSound=!1,this.watchPercentThresholdObserver=new ne(J),this.watchSecondsThresholdObserver=new ne(Y),this.manualQualityChange=!1,(this.host=e).addController(this)}hostConnected(){}hostDisconnected(){}autoplay(){this.host.subSessionInstructionTime=Date.now();const t=this.host.mediaUI?.hasAttribute(e.gm.ENDED);t?this.trackEvent({action:i.b.Auto,noun:i.c.Replay}):this.trackEvent({action:i.b.View,noun:i.c.Autoplay})}clickPlay(){this.host.subSessionInstructionTime=Date.now();const t=this.host.mediaUI?.hasAttribute(e.gm.ENDED);t?this.trackEvent({action:i.b.Click,noun:i.c.Replay}):this.trackEvent({action:i.b.Click,noun:i.c.Play})}backgroundVideo(){this.stopwatch.pause(),this.trackEvent({action:i.b.Background,noun:i.c.Video}),this.tracePerformance()}scrollPause(){this.stopwatch.pause(),this.trackEvent({action:i.b.Scroll,noun:i.c.Pause}),this.tracePerformance()}clickPause(){this.stopwatch.pause(),this.trackEvent({action:i.b.Click,noun:i.c.Pause}),this.tracePerformance()}servedVideo(){this.trackEvent({action:i.b.Served,noun:i.c.Video}),this.tracePerformance()}startVideo(){this.stopwatch.start(),this.endRebuffer(),this.started=!0,this.trackEvent({action:i.b.Start,noun:i.c.Video}),this.checkPlayedWithSound(),this.host.subSessionInstructionTime=void 0}enterFullscreen(){this.trackEvent({action:i.T.IsFullyViewable,noun:i.e.Video}),this.started&&!this._playedInFullscreen&&this.trackEvent({action:i.T.PlayExpanded,noun:i.e.Video})}clickMute(e){this.trackEvent({action:i.T.Click,noun:e?i.e.Mute:i.e.Unmute}),this.checkPlayedWithSound()}clickCaptions(e){this.trackEvent({action:i.b.Click,noun:e?i.c.CaptionsEnabled:i.c.CaptionsDisabled})}startDownload(){this.trackEvent({action:i.b.Start,noun:i.c.Download})}endDownload(){this.trackEvent({action:i.b.End,noun:i.c.Download})}startRebuffer(){!this._buffering&&this.started&&(this.trackEvent({action:i.b.Start,noun:i.c.Rebuffer}),this._buffering=!0),this.stopwatch.pause()}endRebuffer(){this._buffering&&(this.trackEvent({action:i.b.End,noun:i.c.Rebuffer}),this._buffering=!1)}switchBitrate(){this.trackEvent({action:i.b.Switch,noun:i.c.Bitrate})}clickSeek(){this.trackEvent({action:i.T.Click,noun:i.e.Seek})}error(){const{errorController:e,videoElement:t}=this.host;(e?.mediaErrorCode||t.error?.code)&&this.trackEvent({action:i.b.Error,noun:i.c.Video})}timeUpdate(){const e=function(e){if(!e.started||e.watchPercentThresholdObserver?.complete)return[];const{currentTime:t,duration:i}=e.host.videoElement,o=100*(i>=t?t/i:0);return e.watchPercentThresholdObserver?.test(o)}(this);for(const t of e||[])this.trackEvent({action:`watch_${t}_percent`,noun:i.e.Video});const t=function(e){if(e.watchSecondsThresholdObserver?.complete)return[];const t=e.stopwatch.time/1e3;return e.watchSecondsThresholdObserver?.test(t)}(this);for(const e of t||[])this.trackEvent({action:`watch_${e}_seconds`,noun:i.e.Video})}checkPlayedWithSound(){this.started&&!this._playedWithSound&&this._isAudible()&&(this._playedWithSound=!0,this.trackEvent({action:i.T.PlayWithSound,noun:i.e.Video}))}viewRecommendationOverlay(){this.trackEvent({action:i.b.View,noun:i.c.RecommendationOverlay})}tracePerformance(){if(this.host.isBot)return;const t=e.b({source:i.Q.Videoplayer,action:i.b.Trace,noun:i.c.Performance},{platform:ee(),video_performance_report:{loading_report:{file_load_started_timestamp:this.host.subSessionPlayStartTime,file_load_completed_timestamp:this.host.subSessionPlayingStartTime},playback_report:{session_id_v2:this.host.subSessionId}}});e.f(this.host,t)}trackEvent({source:t=i.Q.Videoplayer,action:o,noun:s}){if(this.host.isBot)return;const r=e.b({source:t,action:o,noun:s},{comment:X(this),media:Z(this),media_system_info:oe({instructionTimestamp:this.host.subSessionInstructionTime}),platform:ee(),playback:te(this,{source:t,action:o,noun:s}),post:ie(this),subreddit:{name:this.host.subredditName,id:this.host.subredditId},video_error_report:se(this)});e.f(this.host,r)}_isAudible(){const{videoElement:e}=this.host;return!e.muted&&e.volume>0}}const le=e=>"object"==typeof e&&Promise.resolve(e)===e;async function de(e){let t=!1,i=e&&e.updateComplete;return le(i)&&(await i,t=!0),i=!(!e||!e.componentOnReady)&&e.componentOnReady(),le(i)&&(await i,t=!0),t||(await new Promise((e=>{requestAnimationFrame((()=>e()))}))),window.ShadyDOM&&"function"==typeof window.ShadyDOM.flush&&window.ShadyDOM.flush(),e;}const he=[];function ue(){he.forEach((e=>{document.body.removeChild(e)})),he.length=0}try{"afterEach"in window&&afterEach((()=>{ue()})),"teardown"in window&&teardown((()=>{ue()}))}catch(e){}const ce=["click","pointerup","pointermove","focus","keydown","mouseleave"];class pe{constructor(e){this.isIdle=!1,this._handleIdleChange=()=>{requestAnimationFrame((()=>{const e=this.host.mediaUI?.progressBar?.hasAttribute("dragging");return this.host.isMobile||this.host.matches(":hover")||e?!this.host.isMobile&&this.host.mediaUI?.controlBar?.matches(":hover")||e?(this._stopIdleTimer(),void this._setIdleState(!1)):void this._startIdleTimer():(this._stopIdleTimer(),void this._setIdleState(!0))}))},(this.host=e).addController(this)}async hostConnected(){ce.forEach((e=>{this.host.addEventListener(e,this._handleIdleChange)})),this._startIdleTimer(),await de(this.host)}hostDisconnected(){ce.forEach((e=>{this.host.removeEventListener(e,this._handleIdleChange)})),this._stopIdleTimer()}restartIdleTimer(){this._startIdleTimer()}_startIdleTimer(){this._stopIdleTimer(),this._idleTimeout=window.setTimeout((()=>{this._setIdleState(!0)}),1500)}_stopIdleTimer(){window.clearTimeout(this._idleTimeout),this._idleTimeout=void 0,this._setIdleState(!1)}_setIdleState(t){this.isIdle=t,this.host.mediaUI?.setAttr(e.gm.USER_IDLE,t)}}let me=o.db({videoPlayerLabel:()=>"video player"});const{svg:ve}=t.g(),ye=t.m(ve`<path d="M15.696 3H4.297c-1.819 0-3.3 1.48-3.3 3.3v7.4c0 1.82 1.48 3.301 3.3 3.301h11.4c1.82 0 3.301-1.48 3.301-3.301V6.3c0-1.819-1.48-3.3-3.302-3.3zM8.521 13.201a3.833 3.833 0 01-1.07.149 3.597 3.597 0 01-1.764-.443 3.386 3.386 0 01-1.277-1.214 3.19 3.19 0 01-.473-1.705c0-.615.155-1.177.464-1.687.31-.51.728-.912 1.256-1.208a3.48 3.48 0 011.726-.443 3.698 3.698 0 012.021.601L8.7 8.792a1.863 1.863 0 00-1.268-.485c-.336 0-.63.076-.883.228a1.553 1.553 0 00-.583.61 1.761 1.761 0 00-.203.837c0 .312.071.598.212.859a1.623 1.623 0 001.451.853c.251 0 .865-.07 1.3-.443l.685 1.572a3.6 3.6 0 01-.889.379v-.001zm6.541 0a3.833 3.833 0 01-1.07.149 3.597 3.597 0 01-1.764-.443 3.386 3.386 0 01-1.277-1.214 3.19 3.19 0 01-.473-1.705c0-.615.155-1.177.464-1.687.31-.51.728-.912 1.256-1.208a3.48 3.48 0 011.726-.443c.368 0 .726.053 1.074.158.344.104.656.249.936.436.006.004.01.012.005.019l-.699 1.53a1.863 1.863 0 00-1.268-.485c-.336 0-.63.076-.883.228a1.553 1.553 0 00-.583.61 1.761 1.761 0 00-.203.837c0 .312.071.598.212.859a1.623 1.623 0 001.451.853c.25 0 .855-.069 1.288-.434a.01.01 0 01.016.004l.68 1.559a3.6 3.6 0 01-.889.379l.001-.002z"></path>`,"0 0 20 20","closed-caption-fill"),{svg:ge}=t.g(),Ee=t.m(ge`<path d="M6.167 12.777a3.243 3.243 0 01-1.22-1.159 3.054 3.054 0 01-.452-1.629c0-.587.148-1.125.443-1.612a3.22 3.22 0 011.2-1.154A3.311 3.311 0 017.787 6.8a3.505 3.505 0 011.93.574l-.672 1.472a1.784 1.784 0 00-1.212-.464c-.321 0-.602.072-.843.217a1.486 1.486 0 00-.557.583c-.13.244-.194.51-.194.8 0 .298.068.571.203.82s.324.447.565.594c.241.147.515.22.82.22.24 0 .826-.067 1.241-.423l.655 1.501a3.45 3.45 0 01-.849.362 3.68 3.68 0 01-1.023.142 3.432 3.432 0 01-1.684-.423v.002zm5.809 0a3.243 3.243 0 01-1.22-1.159 3.054 3.054 0 01-.452-1.629c0-.587.148-1.125.443-1.612a3.22 3.22 0 011.2-1.154 3.311 3.311 0 011.649-.423 3.505 3.505 0 011.92.567.014.014 0 01.005.018l-.667 1.461a1.784 1.784 0 00-1.212-.464c-.321 0-.602.072-.843.217a1.486 1.486 0 00-.557.583c-.13.244-.194.51-.194.8 0 .298.068.571.203.82s.324.447.565.594c.241.147.515.22.82.22.238 0 .817-.066 1.231-.415.005-.004.013-.003.015.003l.65 1.489a3.45 3.45 0 01-.849.362 3.648 3.648 0 01-1.023.142 3.432 3.432 0 01-1.684-.423v.003zM15.7 17H4.3C2.481 17 1 15.52 1 13.7V6.3C1 4.481 2.48 3 4.3 3h11.4C17.519 3 19 4.48 19 6.3v7.4c0 1.819-1.48 3.3-3.3 3.3zM4.3 4.8c-.827 0-1.499.673-1.499 1.5v7.4c0 .827.672 1.5 1.499 1.5h11.4c.827 0 1.499-.673 1.499-1.5V6.3c0-.827-.672-1.5-1.499-1.5H4.3z"></path>`,"0 0 20 20","closed-caption"),{svg:be}=t.g(),fe=t.m(be`<path d="M8.6 5.3a3.3 3.3 0 10-6.6 0v9.4a3.3 3.3 0 006.6 0V5.3zM18 5.3a3.3 3.3 0 00-6.6 0v9.4a3.3 3.3 0 006.6 0V5.3z"></path>`,"0 0 20 20","pause-fill"),{svg:_e}=t.g(),Ce=t.m(_e`<g clip-path="url(#a)"><path d="M12.998 15.9v-1.801a4.103 4.103 0 004.1-4.099 4.104 4.104 0 00-4.1-4.099V4.1c3.253 0 5.9 2.647 5.9 5.9 0 3.253-2.647 5.9-5.9 5.9zm0-7.9v4a2 2 0 100-4zM9.131 1.5c.91 0 1.757.721 1.757 1.752v13.496c0 1.031-.847 1.752-1.757 1.752-.336 0-.68-.098-.993-.316l-5.88-4.081c-2.866-1.988-2.866-6.219 0-8.207l5.88-4.08c.313-.217.658-.316.993-.316z"></path></g><defs><clipPath id="a"><path d="M0 0h20v20H0z"></path></clipPath></defs>`,"0 0 20 20","volume-on-fill",!0),ke="@reddit/shreddit-player-media-captions";class Te{constructor(t){this.captionsPresent=!1,this.initializeCaptions=async()=>{if(!this.captionsEnabled())return;const{captionUrl:e,captionOverlay:t}=this.host;if(!e||!t?.captionsTarget)return void this._disableCaptionButton();const i=await this._requestCaptions();if(i?.ok){await async function(){"undefined"==typeof ResizeObserver&&(window.ResizeObserver=(await SML.di("./keewa-up.js",import.meta.url,"keewa-up"))?.default)}();const{CaptionsRenderer:e,parseResponse:o}=await SML.di("./BGOkDHmz.js",import.meta.url,"BGOkDHmz").then((function(e){return e.p})),s=await o(i);s?.cues?.length>0?(this.destroyCaptionsRenderer(),this.captionsRenderer=new e(t.captionsTarget),this.captionsRenderer.changeTrack(s),this.captionsPresent=!0,this._handleTimeUpdate(),this.videoElement?.addEventListener("timeupdate",this._handleTimeUpdate)):this._disableCaptionButton()}else this._disableCaptionButton()},this.captionsEnabled=()=>this.host.hasAttribute(e.gm.CAPTIONS_ENABLED),this.toggleCaptions=async()=>{const t=!this.captionsEnabled();var i;this.host.playerRoot?.telemetryController.clickCaptions(t),this.host.setAttr(e.gm.CAPTIONS_ENABLED,t),i=t,e.$.setItem(ke,i.toString()),t&&this.initializeCaptions()},this._disableCaptionButton=()=>{this.host.captionButton&&(this.host.captionButton.disabled=!0)},this._handleTimeUpdate=()=>{this.captionsRenderer&&(this.captionsRenderer.currentTime=this.videoElement?.currentTime||0)},this._requestCaptions=async()=>{const{captionUrl:t}=this.host;if(!t)return;const i=new Headers,o=this.host.playerRoot?.streamingAuthToken;return o&&i.set(e.k9,o),fetch(t,{headers:i})},(this.host=t).addController(this)}async hostConnected(){this.videoElement=this.host.videoElement,"true"===(e.$.getItem(ke)||"").toLowerCase()&&this.host.setAttr(e.gm.CAPTIONS_ENABLED)}hostDisconnected(){this.videoElement=void 0,this.captionsPresent=!1,this.destroyCaptionsRenderer()}destroyCaptionsRenderer(){this.captionsRenderer?.destroy(),this.captionsRenderer=void 0,this.videoElement?.removeEventListener("timeupdate",this._handleTimeUpdate)}}function Ie(e,t){return e.toString().padStart(t,"0")}var Ae;function Se(e){const t=Math.round(1e3*e)/1e3,i=Math.trunc(t/3600),o=Math.trunc(t%3600/60),s=Math.trunc(t%60),r=Number((t-Math.trunc(t)).toPrecision(3));return{[Ae.Hours]:i,[Ae.Minutes]:o,[Ae.Seconds]:s,[Ae.Fraction]:r}}function Re(e,t=!1,i=!1){if(Number.isNaN(e))return"0:00";const{hours:o,minutes:s,seconds:r}=Se(e),n=t?Ie(o,2):o,a=Ie(s,2),l=Ie(r,2);return o>0||i?`${n}:${a}:${l}`:`${s}:${l}`}function we(e){const t=[],{hours:i,minutes:o,seconds:s}=Se(e),r=(e,t)=>1===e?t:`${t}s`;return i>0&&t.push(`${i} ${r(i,"hour")}`),o>0&&t.push(`${o} ${r(o,"minute")}`),(s>0||0===t.length)&&t.push(`${s} ${r(s,"second")}`),t.join(", ")}function Le(e){return"number"==typeof e&&!Number.isNaN(e)}function Pe(e){return Math.round(10*e)/10}!function(e){e.Hours="hours",e.Minutes="minutes",e.Seconds="seconds",e.Fraction="fraction"}(Ae||(Ae={}));const{ENDED:Ne,ERROR:Oe,FULLSCREEN:Me,MUTED:xe,PLAYING:De,PAUSED:$e,SHOW_POSTER:Ue}=e.gm;class Ve{constructor(e){this._logException=p,this._started=!1,this.handleWaiting=()=>{this.videoElement&&this.videoElement.readyState<3&&(this.host.showLoadingSpinner(),this._started&&this.host.playerRoot?.telemetryController.startRebuffer())},this.handlePlay=()=>{this.host.setAttr(Ue,!1),this.host.setAttr($e,!1),this.host.setAttr(Ne,!1)},this.handlePlaying=()=>{this._started=!0,this.host.hideLoadingSpinner(),this.host.setAttr(Ue,!1),this.host.setAttr(De),this.host.setAttr($e,!1),this.host.setAttr(Ne,!1),this.host.setAttr(Oe,!1),this.host.playerRoot?.errorController?.resetRetryCount(),this.host.recommendationOverlayController.handlePlaying(),this.host.playerRoot&&(this.host.playerRoot.subSessionPlayingStartTime=this.host.playerRoot.subSessionPlayingStartTime||Date.now(),this.host.playerRoot.telemetryController.startVideo(),this.host.playerRoot.adController.play())},this.handlePause=()=>{this.host.setPausedState(),this.host.playerRoot?.adController.pause()},this.handleEnded=()=>{this.host.hideLoadingSpinner(),this.host.setAttr(Ne),this.host.setPausedState(),this.host.recommendationOverlayController.handleEnded(),this.host.playerRoot&&this.host.playerRoot.pause("ended")},this.handleLoadStart=()=>{this.host.setAttr(Oe,!1)},this.handleLoadedData=()=>{this.host.hideLoadingSpinner(),this.host.setAttr(Oe,!1),this.host.playerRoot?.errorController?.resetRetryCount()},this.handleCanPlay=()=>{this.host.hideLoadingSpinner(),this.host.setAttr(Oe,!1),this.host.playerRoot?.errorController?.resetRetryCount()},this.handleError=()=>{this.host.hideLoadingSpinner()},this.handleVolumeChange=()=>{const{muted:e,volume:t}=this.videoElement||{};this.host.setAttr(xe,e||0===t),this.host.playerRoot?.volumeController.updateVolumeFillRate(),this.host.playerRoot?.adController.volumeChange()},this.handleFullscreenChange=e=>{e?.target===this.host.playerRoot&&(D.fullscreenElement?this.host.setAttr(Me):this.host.setAttr(Me,!1),this.host.playerRoot?.adController.fullscreenChange())},this.handleTimeUpdate=()=>{Le(this.videoElement?.currentTime)&&Le(this.videoElement?.duration)&&(this.videoElement?.currentTime&&this.videoElement?.duration&&Pe(this.videoElement.currentTime)>=Pe(this.videoElement.duration)?this.host.setAttr(Ne):this.host.setAttr(Ne,!1),this.host.playerRoot?.telemetryController.timeUpdate(),this.host.playerRoot?.adController.timeUpdate(),this.host.recommendationOverlayController.handleTimeUpdate())},this.handleSeeking=()=>{this.host.playerRoot?.adController.seeking()},this.handleSeeked=()=>{this.host.playerRoot?.adController.seeked()},this.handlePresentationModeChange=()=>{const e="fullscreen"===this.videoElement?.webkitPresentationMode;this.host.setAttr(Me,e),this.host.playerRoot?.adController.fullscreenChange()},(this.host=e).addController(this)}hostConnected(){if(this.videoElement=this.host.videoElement,!this.videoElement){const e="MediaEventsController: videoElement is not defined";throw (this._logException({msg:e,debugOverlay:this.host.playerRoot?.debugOverlay}), new Error(e))}this.eventListeners.forEach((({eventName:e,callback:t})=>{this.videoElement?.addEventListener(e,t)})),D.addEventListener("fullscreenchange",this.handleFullscreenChange)}hostDisconnected(){this.eventListeners.forEach((({eventName:e,callback:t})=>{this.videoElement?.removeEventListener(e,t)})),D.removeEventListener("fullscreenchange",this.handleFullscreenChange),this.videoElement=void 0,this._started=!1}get eventListeners(){return[{eventName:"play",callback:this.handlePlay},{eventName:"playing",callback:this.handlePlaying},{eventName:"pause",callback:this.handlePause},{eventName:"ended",callback:this.handleEnded},{eventName:"loadstart",callback:this.handleLoadStart},{eventName:"loadeddata",callback:this.handleLoadedData},{eventName:"canplay",callback:this.handleCanPlay},{eventName:"error",callback:this.handleError},{eventName:"volumechange",callback:this.handleVolumeChange},{eventName:"timeupdate",callback:this.handleTimeUpdate},{eventName:"seeking",callback:this.handleSeeking},{eventName:"seeked",callback:this.handleSeeked},{eventName:"webkitpresentationmodechanged",callback:this.handlePresentationModeChange},{eventName:"waiting",callback:this.handleWaiting},{eventName:"stalled",callback:this.handleWaiting}]}}class ze{constructor(t){this._isActivated=!1,this._activateFeature=e.j,this.handlePlaying=()=>{this.hideRecommendationOverlay()},this.handleEnded=()=>{this.showRecommendationOverlay()},this.handleTimeUpdate=()=>{const{currentTime:e,duration:t}=this.videoElement||{};Le(e)&&Le(t)&&this.isPostSupported()&&(t-e<=3&&this._activateRecommendedMediaOverlay(),Pe(e)>=Pe(t)?this.showRecommendationOverlay():this.hideRecommendationOverlay())},this._activateRecommendedMediaOverlay=async()=>{if(this._isActivated||!this.isPostSupported())return;this._isActivated=!0;const{postId:t,subredditId:i,isMobile:o,playerRoot:s}=this.host,r=this.host.playerRoot?.closest("shreddit-app")?.pageType;try{await this._activateFeature({name:e.ka,routeParams:{postId:t,subredditId:i,limit:o?"1":"4",navigationSessionId:s?.navigationSessionId,pageType:r},renderMode:e.P.Contents,root:s??void 0})}catch(e){this._isActivated=!1}},(this.host=t).addController(this)}hostConnected(){this.videoElement=this.host.videoElement}hostDisconnected(){this.videoElement=void 0}showRecommendationOverlay(){this.host.hasAttribute(e.gm.SHOW_RECOMMENDATION_OVERLAY)||(this.host.setAttr(e.gm.SHOW_RECOMMENDATION_OVERLAY),this.host.playerRoot?.telemetryController?.viewRecommendationOverlay())}hideRecommendationOverlay(){this.host.setAttr(e.gm.SHOW_RECOMMENDATION_OVERLAY,!1)}isPostSupported(){return Boolean(!this.host.playerRoot?.postPromoted&&!this.host.playerRoot?.gif&&!this.host.playerRoot?.loop&&!this.host.playerRoot?.hideControls&&this.host.playerRoot?.postId&&this.host.playerRoot?.subredditId)}}class He{constructor(t){this._timeRAF=void 0,this.skipTime=e=>{this.currentTime+=e},this.setTime=e=>{this.currentTime=e},this._updateTimeProperties=()=>{Le(this.videoElement?.duration)&&(this._updateStyleProperties(),this._updateFormattedTime(),this.host.playerRoot?.adController.timeUpdate())},this._updateStyleProperties=()=>{if(!this.videoElement)return;const t=this.currentTime/this.videoElement.duration||0;this.host.style.setProperty(e.k7.PROGRESS_FILL_RATE,t.toFixed(4))},this._updateFormattedTime=()=>{if(!this.videoElement)return;const e=this.currentTime;if((this.formattedCurrentTime!==Re(e)||this.formattedDuration!==Re(this.videoElement.duration))&&(this.formattedCurrentTime=Re(e),this.formattedDuration=Re(this.videoElement.duration),this.host.currentTimeElement?.requestUpdate(),this.host.progressBar)){this.host.progressBar.ariaValueMax=this.formattedDuration,this.host.progressBar.ariaValueNow=this.formattedCurrentTime;const t=`${we(e)} out of ${we(this.videoElement.duration)}`;this.host.progressBar.ariaValueText=t}},this._cancelTimeUpdates=()=>{Le(this._timeRAF)&&window.cancelAnimationFrame(this._timeRAF),this._timeRAF=void 0},this._requestTimeUpdates=()=>{this._timeRAF||this._requestTimeUpdate()},this._requestTimeUpdate=()=>{this.videoElement&&(this._updateTimeProperties(),this._timeRAF=window.requestAnimationFrame((()=>{void 0!==this._timeRAF&&this._requestTimeUpdate()})))},(this.host=t).addController(this),this.host.style.setProperty(e.k7.PROGRESS_FILL_RATE,"0")}hostConnected(){this.videoElement=this.host.videoElement,this.host.gif||(this.videoElement?.addEventListener("loadedmetadata",this._updateTimeProperties),this.videoElement?.addEventListener("timeupdate",this._updateTimeProperties),this.videoElement?.addEventListener("playing",this._requestTimeUpdates),this.videoElement?.addEventListener("pause",this._cancelTimeUpdates))}hostDisconnected(){this.host.gif||(this.videoElement?.removeEventListener("loadedmetadata",this._updateTimeProperties),this.videoElement?.removeEventListener("timeupdate",this._updateTimeProperties),this.videoElement?.removeEventListener("playing",this._requestTimeUpdates),this.videoElement?.removeEventListener("pause",this._cancelTimeUpdates)),this._cancelTimeUpdates(),this.videoElement=void 0}get currentTime(){return Math.min(this.videoElement?.currentTime||0,this.videoElement?.duration||0)}set currentTime(e){this.videoElement&&(this.host.playerRoot?.telemetryController?.clickSeek(),this.videoElement.currentTime=e,this._updateTimeProperties())}get duration(){return this.videoElement?.duration||0}}const Fe=({icon:i,onClick:o,disabled:s,ariaLabel:r,ariaKeyshortcuts:n,ariaHidden:a,additionalClasses:l=""})=>t.x` <button class="min-h-[42px] min-w-[42px] p-0 bg-transparent border-none transition-all pointer-events-auto enabled:cursor-pointer enabled:hover:scale-[1.2] disabled:opacity-60${l?` ${l}`:""}" @click="${e=>{o&&(o(e),e.stopPropagation())}}" @keydown="${t=>{!o||"Enter"!==t.key&&" "!==t.key||(o(t),e.kb(t))}}" ?disabled="${s}" aria-label="${r||t.A}" aria-keyshortcuts="${n||t.A}" aria-hidden="${a||t.A}"> ${i} </button> `,Be=({icon:e,additionalClasses:i="",size:o=t.I.Medium})=>e({attributes:{className:`text-white ease duration-150 ${i}`.trim()},size:o});var je=t.i`:host{--slider-bg:#434343;--slider-fill:#fff;position:absolute;inset:0}.poster-play-button svg{filter:drop-shadow(3px 3px 2px rgba(0, 0, 0, .5));-webkit-filter:drop-shadow(3px 3px 2px rgba(0, 0, 0, .5))}:host(:not([show-poster]):not([gif])) .poster-play-button,:host([gif][playing]) .poster-play-button{display:none}:host(:not([show-poster])) .poster-play-button,:host([loading]) .poster-play-button{display:none}:host(:not([loading])) shreddit-loading-spinner{display:none}:host([show-poster]) .controls{display:none}.scrim{background:linear-gradient(to top,rgba(0,0,0,.4) 40px,transparent 80px)}:host(:not([captions-enabled])) .caption-disabled-icon,:host(:not([fullscreen])) .expand-icon,:host(:not([muted])) .volume-icon,:host(:not([paused])) .pause-icon,:host([captions-enabled]) .caption-enabled-icon,:host([ended]) .refresh-icon,:host([fullscreen]) .collapse-icon,:host([muted]) .mute-icon,:host([paused]:not([ended])) .play-icon{display:inline-block}:host([user-idle]:not([paused])) .disappearing-controls,:host([user-idle]:not([paused])) .scrim{opacity:0;pointer-events:none}:host ::slotted([slot=recommendation-overlay]){transition:opacity .2s}:host([show-rec-overlay]) ::slotted([slot=recommendation-overlay]){opacity:1;visibility:visible;pointer-events:auto}:host(:not([show-rec-overlay])) ::slotted([slot=recommendation-overlay]){opacity:0;visibility:hidden;pointer-events:none}:host([captions-enabled]) shreddit-caption-overlay{display:block}:host(:not([captions-enabled])) shreddit-caption-overlay{display:none}:host([loading]) shreddit-caption-overlay,:host([show-poster]) shreddit-caption-overlay{display:none}:host(:not([error])) shreddit-error-overlay{display:none}`,qe=t.i`:where([data-part=captions]),:where([part=captions]){--overlay-padding:1%;--cue-color:white;--cue-bg-color:rgba(0, 0, 0, 0.75);--cue-font-size:16px;--cue-line-height:calc(var(--cue-font-size) * 1.2);--cue-padding-x:0.5rem;--cue-padding-y:0.5rem;position:absolute;inset:0;contain:content;margin:var(--overlay-padding);font-size:var(--cue-font-size);font-family:sans-serif;box-sizing:border-box;pointer-events:none;user-select:none;word-spacing:normal;word-break:break-word}:where([data-part=captions]>[data-part=cue-display]),:where([part=captions]>[part=cue-display]){position:absolute;bottom:0;direction:ltr;overflow:visible;contain:content;width:var(--cue-width,auto);height:var(--cue-height,auto);box-sizing:border-box;transform:var(--cue-transform);text-align:var(--cue-text-align);writing-mode:var(--cue-writing-mode,unset);white-space:pre-line;unicode-bidi:plaintext;min-width:min-content;min-height:min-content}:where([data-dir=rtl][data-part=cue-display]),:where([data-dir=rtl][part=cue-display]){direction:rtl}:where([data-part=captions]>[data-part=cue-display]>[data-part=cue]),:where([part=captions]>[part=cue-display]>[part=cue]){display:inline-block;padding:var(--cue-padding-y) var(--cue-padding-x);line-height:var(--cue-line-height);background-color:var(--cue-bg-color);box-sizing:border-box;color:var(--cue-color);box-shadow:var(--cue-box-shadow);white-space:var(--cue-white-space,pre-wrap);outline:var(--cue-outline);text-shadow:var(--cue-text-shadow)}:where([data-part=captions][data-part=cue-display][data-vertical][data-part=cue]),:where([part=captions][part=cue-display][data-vertical][part=cue]){padding:var(--cue-padding-x) var(--cue-padding-y)}`;let Ge=class extends t.s{constructor(){super(...arguments),this.captionsTarget=document.createElement("div")}connectedCallback(){super.connectedCallback(),this.captionController?.initializeCaptions()}disconnectedCallback(){super.disconnectedCallback(),this.captionController?.destroyCaptionsRenderer(),this.captionsTarget.innerHTML=""}render(){return t.x`${this.captionsTarget}`}};Ge.styles=[e.t,qe],e._([e.n()],Ge.prototype,"captionController",void 0),Ge=e._([e.e("shreddit-caption-overlay")],Ge);let Qe=class extends t.s{render(){return t.x` <span class="whitespace-nowrap font-semibold text-white"> <span>${this.timeController?.formattedCurrentTime??"0:00"}</span><span class="embed-m:hidden"> / ${this.timeController?.formattedDuration??"0:00"}</span> </span> `}};Qe.styles=[e.t],e._([e.n()],Qe.prototype,"timeController",void 0),Qe=e._([e.e("shreddit-current-time")],Qe);let We=class extends t.s{render(){if(void 0===this.mediaErrorCode)return;let e;return e=this.mediaErrorCode===MediaError.MEDIA_ERR_NETWORK?"This video is no longer available.":"This video cannot be played.",t.x` <p class="h-full w-full flex justify-center items-center text-white">${e}</p> `;}};We.styles=[e.t],e._([e.n({type:Number})],We.prototype,"mediaErrorCode",void 0),We=e._([e.e("shreddit-error-overlay")],We);let Ke=class extends t.s{constructor(){super(...arguments),this.isMobile=!1,this.loadedPreviewVideo=!1,this._onCanPlay=()=>{this.videoElement.style.display="block"}}disconnectedCallback(){super.disconnectedCallback(),this.videoElement?.removeEventListener("canplay",this._onCanPlay)}loadPreviewVideo(){!this.loadedPreviewVideo&&this.videoElement&&(this.loadedPreviewVideo=!0,this.videoElement.load(),this.videoElement.addEventListener("canplay",this._onCanPlay))}render(){return t.x` ${this.isMobile||!this.preview?t.A:t.x` <video muted playsinline preload="none" src="${this.preview}" class="bg-black border border-1 border-solid rounded-2 mb-2xs hidden w-[130px] max-h-[130px] h-auto"></video> `} <span class="formatted-current-time m-auto text-14 font-semibold px-2xs bg-black bg-opacity-55 text-white rounded-1 whitespace-nowrap">0:00</span> `}};Ke.styles=[t.i`:host{display:inline-block;contain:content}:host(:not([preview])) video,:host([hidden]) video{display:none}`,e.t],e._([e.n({type:String})],Ke.prototype,"preview",void 0),e._([e.n({type:Boolean})],Ke.prototype,"isMobile",void 0),e._([e.N()],Ke.prototype,"loadedPreviewVideo",void 0),e._([e.Q("video")],Ke.prototype,"videoElement",void 0),e._([e.Q("span.formatted-current-time")],Ke.prototype,"formattedCurrentTime",void 0),Ke=e._([e.e("shreddit-preview-video-lazy")],Ke);let Je=class extends t.s{constructor(){super(...arguments),this._isPointerDown=!1,this.idleUpdate=!1,this._handlePointerDown=t=>{e.kb(t),this._isPointerDown=!0,this.onPointerDownMove?.(t),this.idleUpdate||this.onChange?.(t),this.dispatchEvent(new Event("slider-dragstart"))},this._handlePointerUp=t=>{this._isPointerDown&&(e.kb(t),this._isPointerDown=!1,this.onChange?.(t),this.dispatchEvent(new Event("slider-dragend")))},this._handlePointerMove=t=>{this._isPointerDown&&(e.kb(t),this.onPointerDownMove?.(t),this.idleUpdate||this.onChange?.(t))}}connectedCallback(){super.connectedCallback(),document.addEventListener("pointerup",this._handlePointerUp),document.addEventListener("pointercancel",this._handlePointerUp),document.addEventListener("pointermove",this._handlePointerMove)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("pointerup",this._handlePointerUp),document.removeEventListener("pointercancel",this._handlePointerUp),document.removeEventListener("pointermove",this._handlePointerMove)}render(){return t.x` <slot class="touch-none flex w-full h-full items-center justify-center cursor-pointer${this.additionalClasses?` ${this.additionalClasses}`:""}" @pointerdown="${this._handlePointerDown}"></slot> `}};Je.styles=[e.t],e._([e.n({type:Boolean})],Je.prototype,"idleUpdate",void 0),e._([e.n()],Je.prototype,"onChange",void 0),e._([e.n()],Je.prototype,"onPointerDownMove",void 0),e._([e.n()],Je.prototype,"additionalClasses",void 0),Je=e._([e.e("shreddit-slider-element")],Je);let Ye=class extends t.s{constructor(){super(...arguments),this.isMobile=!1,this._updateTime=e=>{const{left:t,width:i}=this.getBoundingClientRect(),o=Math.min((e.x-t)/i,1),s=(this.timeController?.duration??0)*o;Number.isNaN(s)||(this.timeController.currentTime=s)},this._handleSliderChange=e=>{this._updateTime(e),this._updatePreviewVideoPosition(e)},this._handleDragStart=()=>{this.setAttribute("dragging","")},this._handleDragEnd=()=>{this.removeAttribute("dragging")},this._handlePointerDownMove=e=>{this._updateSliderBallPosition(e),this._updatePreviewVideoPosition(e)},this._handleMouseEnter=()=>{this.isMobile||this.setAttribute("hovered","")},this._handleMouseLeave=()=>{this.isMobile||this.removeAttribute("hovered")},this._updateSliderBallPosition=t=>{const{left:i,width:o}=this.getBoundingClientRect(),s=Math.max(0,Math.min(t.x-i,o));this.style.setProperty(e.k7.SLIDER_BALL_LEFT_PX,`${s}px`)},this._updatePreviewVideoPosition=t=>{const{left:i,width:o}=this.getBoundingClientRect(),s=Math.max(0,Math.min((t.x-i)/o,1)),r=(this.timeController?.duration||0)*s;this.previewVideoLazy?.loadPreviewVideo(),this.previewVideoLazy?.videoElement&&(this.previewVideoLazy.videoElement.currentTime=r),this.previewVideoLazy?.formattedCurrentTime&&(this.previewVideoLazy.formattedCurrentTime.innerText=Re(r));const n=Math.max(0,Math.min(t.x-i,o));this.previewVideoLazy?.style.setProperty(e.k7.PREVIEW_VIDEO_LEFT_PX,`${n}px`)}}renderPreviewVideo(){return t.x` <shreddit-preview-video-lazy .isMobile="${this.isMobile}" .preview="${this.preview}" class="embed-s:hidden absolute transition-opacity bottom-2xl left-0 -translate-x-1/2 text-center flex-col pointer-events-none" style="left:var(${e.k7.PREVIEW_VIDEO_LEFT_PX});will-change:left"></shreddit-preview-video-lazy> `}render(){return t.x` <shreddit-slider-element class="h-full w-full flex items-center" .onChange="${this._handleSliderChange}" .onPointerDownMove="${this._handlePointerDownMove}" @mouseenter="${this._handleMouseEnter}" @mouseleave="${this._handleMouseLeave}" @mousemove="${this._updatePreviewVideoPosition}" @slider-dragstart="${this._handleDragStart}" @slider-dragend="${this._handleDragEnd}" idleUpdate> <div class="bg-[--slider-bg] h-[4px] w-full relative cursor-pointer"> <div class="bg-[--slider-fill] h-full w-full origin-left cursor-pointer" style="transform:scaleX(var(${e.k7.PROGRESS_FILL_RATE}));will-change:transform"></div> <div class="slider-ball absolute top-1/2 left-0 w-lg h-lg rounded-full cursor-pointer bg-[--slider-fill] -translate-x-1/2 -translate-y-1/2 scale-75" style="will-change:left"></div> </div> </shreddit-slider-element> ${this.renderPreviewVideo()} `}};Ye.styles=[t.i`:host shreddit-preview-video-lazy{display:none}:host([dragging]) shreddit-preview-video-lazy,:host([hovered]) shreddit-preview-video-lazy{display:flex}:host(:not([dragging])) shreddit-slider-element .slider-ball{left:calc(var(--progress-fill-rate) * 100%)}:host([dragging]) shreddit-slider-element .slider-ball{left:var(--slider-ball-left-px)}`,e.t],e._([e.n()],Ye.prototype,"timeController",void 0),e._([e.n({type:String})],Ye.prototype,"preview",void 0),e._([e.n({type:Boolean})],Ye.prototype,"isMobile",void 0),e._([e.Q("shreddit-preview-video-lazy")],Ye.prototype,"previewVideoLazy",void 0),Ye=e._([e.e("shreddit-progress-bar")],Ye);let Ze=class extends t.s{render(){return t.x` <svg aria-hidden="true" class="w-3xl h-3xl animate-spin" fill="none" viewBox="0 0 120 120"> <circle class="opacity-25" cx="60" cy="60" r="54" stroke="white" stroke-width="8"></circle> <circle class="buffering-track-fill opacity-75" cx="60" cy="60" r="54" stroke="white" stroke-width="10" pathLength="100"></circle> </svg> `}};Ze.styles=[t.i`.buffering-track-fill{stroke-dasharray:100;stroke-dashoffset:50}`,e.t],Ze=e._([e.e("shreddit-loading-spinner")],Ze);let Xe=class extends t.s{constructor(){super(...arguments),this.autoplayPref=!1,this.isLoggedInUser=!1,this.hideAutoplayToggle=!1,this.qualityLevels=[],this.currentQualityLevelIndex=-1,this.rootSelector="shreddit-player-2",this.isMenuOpen=!1}showSettings(){this.isMenuOpen=!0}hideSettings(){this.isMenuOpen=!1}handleQualityChange(t,i){t.stopPropagation();const o=i?"hlsLevelIndex"in i?i.hlsLevelIndex:i.mp4SourceIndex:-1;var s;this.mediaActionsController?.setQualityLevel(o),s=i?.quality,s?e.$.setItem(C,s.toString()):e.$.removeItem(C);const r=e.bv(this,this.rootSelector);r&&(r.telemetryController.manualQualityChange=!0)}renderSettings(){const i=e=>this.currentQualityLevelIndex===("hlsLevelIndex"in e?e.hlsLevelIndex:e.mp4SourceIndex),o="px-sm py-xs flex justify-center border-none bg-transparent cursor-pointer text-white",s=this.isLoggedInUser&&!this.hideAutoplayToggle,r=t.x` ${s?t.x` <button class="${o}" @click="${()=>(async function({newPref:t,dispatchEvent:i,onSuccess:o}) {try{await G({operation:e.C.UpdateAccountPreferences,variables:{input:{isVideoAutoplayEnabled:t}}}),o?.()}catch(t){i(e.c("faceplate-alert",{level:e.X.error,cause:"uncategorized",message:"Error changing autoplay preference"}))}})({newPref:!this.autoplayPref,dispatchEvent:this.dispatchEvent,onSuccess:()=>{this.autoplayPref=!this.autoplayPref}})}" data-testid="autoplay-toggle"> ${this.renderCheckmark(this.autoplayPref)} <span> ${"Autoplay"}</span> </button> <div class="h-[1px] w-[calc(100%-1rem)] bg-[#82959b] opacity-50 mx-auto"></div> `:t.A} `;return t.x` <div class="absolute flex flex-col bg-black bg-opacity-60 bottom-[42px] -left-1/2 min-w-4xl transition-all rounded-1 ${this.isMenuOpen?"opacity-100":"opacity-0 pointer-events-none"}" aria-hidden="${!this.isMenuOpen||t.A}" inert="${!this.isMenuOpen||t.A}"> ${r} ${this.qualityLevels?.map((e=>t.x` <button data-testid="quality-option" class="${o}" @click="${t=>this.handleQualityChange(t,e)}"> ${this.renderCheckmark(i(e))} <span>${e.quality}p</span> </button> `))} <button data-testid="auto-quality-option" class="${o}" @click="${e=>this.handleQualityChange(e)}"> ${this.renderCheckmark(-1===this.currentQualityLevelIndex)} <span> ${"Auto"}</span> </button> </div> `;}renderCheckmark(e){return e?t.x` <span class="pr-2xs" data-testid="checkmark"> ${t.C({size:t.I.ExtraSmall})} </span> `:t.A}render(){return t.x` <div class="embed-s:hidden" @mouseleave="${this.hideSettings}" @blur="${this.hideSettings}"> ${Fe({icon:Be({icon:d.s}),onClick:()=>this.isMenuOpen?this.hideSettings():this.showSettings(),ariaLabel:"Settings"})} ${this.renderSettings()} </div> `;}};Xe.styles=[t.i`:host{position:relative}`,e.t],e._([e.n()],Xe.prototype,"mediaActionsController",void 0),e._([e.n({type:Boolean})],Xe.prototype,"autoplayPref",void 0),e._([e.n({type:Boolean})],Xe.prototype,"isLoggedInUser",void 0),e._([e.n({type:Boolean,attribute:"hide-autoplay-toggle"})],Xe.prototype,"hideAutoplayToggle",void 0),e._([e.n()],Xe.prototype,"qualityLevels",void 0),e._([e.n()],Xe.prototype,"currentQualityLevelIndex",void 0),e._([e.n({type:String})],Xe.prototype,"rootSelector",void 0),e._([e.N()],Xe.prototype,"isMenuOpen",void 0),Xe=e._([e.e("shreddit-video-settings")],Xe);let et=class extends t.s{constructor(){super(...arguments),this.isMobile=!1,this._updateVolume=t=>{e.kb(t);const{height:i=0,y:o=0}=this.sliderTrack?.getBoundingClientRect()??{};if(!i)return;const s=Math.min(1,Math.max(0,(o+i-t.y)/i));this.mediaActionsController?.setVolume(s)}}render(){const i=this.isMobile?t.A:t.x` <div class="slider-element-wrapper absolute rounded-2 h-[90px] bottom-[44px] py-md px-xs opacity-[--slider-opacity] transition-opacity bg-[rgba(0,0,0,0.6)]"> <shreddit-slider-element class="slider-track flex items-center h-full w-full box-border" additionalClasses="px-[10px]" .onChange="${this._updateVolume}"> <div class="bg-[--slider-bg] w-[2px] h-full relative flex justify-center"> <div class="bg-[--slider-fill] h-full w-full origin-bottom" style="transform:scaleY(var(${e.k7.VOLUME_FILL_RATE}));will-change:transform"></div> <div class="absolute bottom-0 w-md h-md translate-y-1/2 rounded-full bg-white scale-90" style="bottom:calc(var(${e.k7.VOLUME_FILL_RATE}) * 100%);will-change:bottom"></div> </div> </shreddit-slider-element> </div> `;return t.x` <div class="relative flex justify-center"> <slot></slot> ${i} </div> `}};et.styles=[t.i`:host .slider-element-wrapper{display:none}:host(:hover) .slider-element-wrapper{display:block}`,e.t],e._([e.n()],et.prototype,"mediaActionsController",void 0),e._([e.n({type:Boolean})],et.prototype,"isMobile",void 0),e._([e.Q(".slider-track")],et.prototype,"sliderTrack",void 0),et=e._([e.e("shreddit-volume-slider")],et);let tt=class extends t.s{constructor(){super(...arguments),this.mediaEventsController=new Ve(this),this.timeController=new He(this),this.captionController=new Te(this),this.recommendationOverlayController=new ze(this),this.autoplay=!1,this.autoplayPref=!1,this.gif=!1,this.hideControls=!1,this.hideFullscreenButton=!1,this.hideAutoplayToggle=!1,this.isMobile=!1,this.isLoggedInUser=!1,this.qualityLevels=[],this.currentQualityLevelIndex=-1,this.hideGifIcon=!1,this.rootSelector="shreddit-player-2",this.gifToggle=e=>{this.mediaActionsController?.togglePlay(),e.stopImmediatePropagation(),e.preventDefault()},this.renderGifControls=()=>t.x`${this.autoplay?t.A:t.x`${this.renderPosterPlayButton()} <div class="controls"> ${Fe({icon:t.x` ${Be({icon:n.p,additionalClasses:"hidden play-icon"})} ${Be({icon:fe,additionalClasses:"hidden pause-icon"})} `,additionalClasses:"absolute left-0 bottom-0",onClick:e=>this.gifToggle(e)})} </div>`} ${this.hideGifIcon?t.A:Fe({icon:Be({icon:n.g}),disabled:!0,ariaHidden:!0,additionalClasses:"absolute right-0 bottom-0"})} ${this.renderErrorOverlay()}`}connectedCallback(){super.connectedCallback(),this.autoplay||this.playerRoot?.hasHadPlayAttempt||(this.showPoster(),this.setPausedState())}disconnectedCallback(){super.disconnectedCallback(),this.hideLoadingSpinner()}get playerRoot(){return e.bv(this,this.rootSelector)}renderPosterPlayButton(){return Fe({icon:t.x` ${Be({icon:n.p,size:t.I.ExtraLarge})} `,onClick:e=>{e?.preventDefault(),e?.stopImmediatePropagation(),this.mediaActionsController?.play()},ariaLabel:"Play",additionalClasses:"poster-play-button absolute inset-0 flex items-center justify-center cursor-pointer pointer-events-auto"});}showPoster(){this.setAttr(e.gm.SHOW_POSTER)}showLoadingSpinner(){this._loadingSpinnerTimeout=setTimeout((()=>{this.loadingSpinner&&this.videoElement&&this.videoElement?.readyState<3&&(this.setAttr(e.gm.LOADING),this.loadingSpinner.style.opacity="0.8")}),100)}hideLoadingSpinner(){this.setAttr(e.gm.LOADING,!1),this.loadingSpinner&&(this.loadingSpinner.style.opacity="0"),this._loadingSpinnerTimeout&&(clearTimeout(this._loadingSpinnerTimeout),this._loadingSpinnerTimeout=void 0)}renderCaptionOverlay(){return t.x`<shreddit-caption-overlay class="pointer-events-none absolute left-0 right-0 top-0 bottom-[42px]" .captionController="${this.captionController}"></shreddit-caption-overlay>`}renderControls(){if(this.hideControls)return;const e=Fe({icon:t.x` ${Be({icon:n.p,additionalClasses:"hidden play-icon"})} ${Be({icon:fe,additionalClasses:"hidden pause-icon"})} ${Be({icon:l.r,additionalClasses:"hidden refresh-icon"})} `,onClick:this.mediaActionsController?.togglePlay,ariaLabel:"Toggle playback",ariaKeyshortcuts:"k",additionalClasses:"play-pause-button"}),i=t.x` <shreddit-progress-bar class="embed-s:hidden relative flex items-center h-full w-full mx-md" .timeController="${this.timeController}" ?isMobile="${this.isMobile}" preview="${this.preview}" tabindex="0" aria-label="${"Media time"}" aria-valuemin="0"></shreddit-progress-bar> `,o=t.x` <shreddit-current-time class="mr-xs" .timeController="${this.timeController}"></shreddit-current-time> `,d=this.isMobile?t.x``:t.x` <shreddit-video-settings .mediaActionsController="${this.mediaActionsController}" .qualityLevels="${this.qualityLevels}" .currentQualityLevelIndex="${this.currentQualityLevelIndex}" .rootSelector="${this.rootSelector}" ?hide-autoplay-toggle="${this.hideAutoplayToggle}" ?autoplayPref="${this.autoplayPref}" ?isLoggedInUser="${this.isLoggedInUser}"></shreddit-video-settings>`,h=Fe({icon:t.x` ${Be({icon:r.e,additionalClasses:"hidden expand-icon"})} ${Be({icon:s.c,additionalClasses:"hidden collapse-icon"})} `,onClick:this.mediaActionsController?.toggleFullscreen,ariaLabel:"Toggle fullscreen",ariaKeyshortcuts:"f",additionalClasses:"fullscreen-button "+(this.hideFullscreenButton?"invisible":"")}),u=Fe({additionalClasses:"embed-s:hidden caption-button",icon:t.x` ${Be({icon:ye,additionalClasses:"hidden caption-enabled-icon"})} ${Be({icon:Ee,additionalClasses:"hidden caption-disabled-icon"})} `,onClick:this.mediaActionsController?.toggleCaptions,ariaLabel:"Toggle captions",ariaKeyshortcuts:"c"}),c=t.x` <shreddit-volume-slider .mediaActionsController="${this.mediaActionsController}" ?isMobile="${this.isMobile}"> ${Fe({icon:t.x` ${Be({icon:Ce,additionalClasses:"hidden volume-icon"})} ${Be({icon:a.v,additionalClasses:"hidden mute-icon"})} `,onClick:this.mediaActionsController?.toggleMute,ariaLabel:"Toggle volume",ariaKeyshortcuts:"m",additionalClasses:"mute-button"})} </shreddit-volume-slider> `;return t.x` <div class="controls absolute inset-0 outline-none" tabindex="-1"> <div class="scrim absolute inset-0 pointer-events-none transition-opacity duration-300"></div> <div class="control-bar flex items-center justify-between absolute bottom-0 w-full h-[${50}px] box-border px-2xs pointer-events-auto"> ${""} <div class="disappearing-controls embed-s:justify-between flex items-center w-full h-full transition-opacity duration-300"> ${e} ${i} ${o} ${u} ${d} ${h} </div> ${""} <div class="flex items-center h-full">${c}</div> </div> </div> `}renderRecommendationOverlay(){return t.x`<slot name="recommendation-overlay"></slot>`}renderErrorOverlay(){return t.x` <shreddit-error-overlay class="bg-black flex items-center justify-center absolute inset-0"></shreddit-error-overlay> `}setPausedState(){this.setAttr(e.gm.PAUSED),this.setAttr(e.gm.PLAYING,!1),this.hideLoadingSpinner()}setAttr(e,t=!0){!1===t?this.removeAttribute(e):this.setAttribute(e,!0===t?"":t)}render(){return t.x` <shreddit-loading-spinner class="absolute inset-0 flex items-center justify-center pointer-events-none opacity-0 transition-opacity duration-300"></shreddit-loading-spinner> ${this.gif?this.renderGifControls():t.x` ${this.renderPosterPlayButton()} ${this.renderCaptionOverlay()} ${this.renderErrorOverlay()} ${this.renderRecommendationOverlay()} ${this.renderControls()} `} `}};tt.styles=[je,e.t],e._([e.n()],tt.prototype,"videoElement",void 0),e._([e.n()],tt.prototype,"mediaActionsController",void 0),e._([e.n({type:Boolean})],tt.prototype,"autoplay",void 0),e._([e.n({type:Boolean})],tt.prototype,"autoplayPref",void 0),e._([e.n({type:Boolean})],tt.prototype,"gif",void 0),e._([e.n({type:Boolean})],tt.prototype,"hideControls",void 0),e._([e.n({type:Boolean})],tt.prototype,"hideFullscreenButton",void 0),e._([e.n({type:Boolean,attribute:"hide-autoplay-toggle"})],tt.prototype,"hideAutoplayToggle",void 0),e._([e.n({type:Boolean})],tt.prototype,"isMobile",void 0),e._([e.n({type:Boolean})],tt.prototype,"isLoggedInUser",void 0),e._([e.n({type:String,attribute:"caption-url"})],tt.prototype,"captionUrl",void 0),e._([e.n({type:String})],tt.prototype,"preview",void 0),e._([e.n()],tt.prototype,"qualityLevels",void 0),e._([e.n()],tt.prototype,"currentQualityLevelIndex",void 0),e._([e.n()],tt.prototype,"postId",void 0),e._([e.n()],tt.prototype,"subredditId",void 0),e._([e.n({type:Boolean})],tt.prototype,"hideGifIcon",void 0),e._([e.n({type:String})],tt.prototype,"rootSelector",void 0),e._([e.Q(".control-bar")],tt.prototype,"controlBar",void 0),e._([e.Q("shreddit-loading-spinner")],tt.prototype,"loadingSpinner",void 0),e._([e.Q("shreddit-current-time")],tt.prototype,"currentTimeElement",void 0),e._([e.Q("shreddit-progress-bar")],tt.prototype,"progressBar",void 0),e._([e.Q("shreddit-video-settings")],tt.prototype,"videoSettings",void 0),e._([e.Q("shreddit-caption-overlay")],tt.prototype,"captionOverlay",void 0),e._([e.Q(".caption-button")],tt.prototype,"captionButton",void 0),e._([e.Q("shreddit-error-overlay")],tt.prototype,"errorOverlay",void 0),tt=e._([e.e("shreddit-media-ui")],tt);let it=class extends t.s{constructor(){super(...arguments),this.debugLogs=[]}log(e,t){this.debugLogs.push({key:e,value:t}),this.requestUpdate()}render(){return t.x` <div class="flex flex-col bg-black-opacity-80 text-white p-sm"> <h3>Debug info</h3> <div class="grid grid-cols-[1fr_4fr] gap-xs" data-testid="debug-logs"> ${this.debugLogs.map((e=>t.x` <div>${e.key}</div> <div>${e.value}</div> `))} </div> </div> `}};it.styles=[e.t,t.i`:host{position:absolute;top:0;left:0;right:0;bottom:50px;max-height:100%;overflow-y:auto}`],e._([e.n({type:Array})],it.prototype,"debugLogs",void 0),it=e._([e.e("shreddit-player-debug-overlay")],it);const ot="shreddit-player-2";let st=class extends t.s{constructor(){super(...arguments),this.playbackId=e.a2(),this.subSessionId=e.a2(),this.navigationSessionId=e.a2(),this.videoElement=document.createElement("video"),this.initialized=!1,this.rootSelector=ot,this.hasHadPlayAttempt=!1,this.playCount=0,this._disconnected=!1,this.errorControllerLegacy=new v(this),this.errorControllerNew=new E(this),this.hlsController=new w(this),this.mediaActionsController=new $(this),this.mediaSyncController=new B(this),this.mediaVisibilityController=new q(this),this.packagedMediaController=new Q(this),this.telemetryController=new ae(this),this.adController=new h(this),this.userIdleController=new pe(this),this.volumeController=new H(this),this.gestureController=new b(this),this.mediaHotkeyController=new U(this),this.pageController=new W(this),this.src="",this.autoplay=!1,this.autoplayPref=!1,this.hideAutoplayToggle=!1,this.gif=!1,this.loop=!1,this.hideControls=!1,this.hideFullscreenButton=!1,this.isMobile=!1,this.isBot=!1,this.poster="",this.isLoggedInUser=!1,this.singlePlayback=!1,this.playOutOfViewport=!1,this.objectFit="contain",this.shouldRoundBackground=!1,this.stopLoad=!1,this.errorImprovements=!1,this.hideGifIcon=!1,this.debug=!1,this.qualityLevels=[],this.currentQualityLevelIndex=-1}connectedCallback(){super.connectedCallback(),this.videoElement.poster=this.poster,this._disconnected&&this.reconnect(),this.stopLoad||this.initializeVideoElement()}disconnectedCallback(){this.stop(),this._disconnected=!0,this.initialized=!1,this.stopLoad||(this.stoppedState={currentTime:this.videoElement.currentTime}),super.disconnectedCallback()}firstUpdated(){this.volumeController.setInitialVolumeSetting()}reconnect(){this.adController.fromReconnect=!0,this.autoplay||this.mediaUI?.setPausedState(),!this.stopLoad&&this.hasHadPlayAttempt&&(this._restoreVideoTime(),this.load(e.k5.METADATA)),this._disconnected=!1}get isMp4(){return this.packagedMediaController.hasPackagedMedia}get isHls(){return this.hlsController.isHlsStream&&!this.isMp4}get errorController(){return this.errorImprovements?this.errorControllerNew:this.errorControllerLegacy}shouldUseFakePosterImage(){return this.gif&&!this.autoplay&&!this.poster}initializeVideoElement(){if(this.initialized)return;this.initialized=!0,this.isMp4&&this.packagedMediaController.initialize(),this.isMp4||this.isHls||(this.videoElement.src=this.src),this._restoreVideoTime(),this.videoElement.playsInline=!0;this.shouldUseFakePosterImage()?(this.videoElement.preload=e.k5.AUTO,this.videoElement.src=this.videoElement.src.concat("#t=.01")):this.videoElement.preload=e.k5.NONE,this.videoElement.tabIndex=-1,this.videoElement.setAttribute("aria-label",String(me.videoPlayerLabel())),this.videoElement.style.objectFit=this.objectFit,this.shouldRoundBackground&&this.videoElement.classList.add("rounded-4"),this.stoppedState=void 0}async play(e=!1){return this.mediaActionsController.play(e)}async load(t=e.k5.AUTO){return this.mediaActionsController.load(t)}pause(e){return this.mediaActionsController.pause(e)}stop(){this.mediaActionsController.stop()}updateSubSession(){this.subSessionId=e.a2(),this.hlsController.updateCmcdSessionId(this.subSessionId),this.subSessionInstructionTime=void 0,this.subSessionPlayStartTime=void 0,this.subSessionPlayingStartTime=void 0}hideRecommendationOverlay(){this.mediaUI?.recommendationOverlayController?.hideRecommendationOverlay()}_restoreVideoTime(){!this.videoElement.currentTime&&this.stoppedState?.currentTime&&(this.videoElement.currentTime=this.stoppedState?.currentTime)}render(){return t.x` ${this.videoElement} <shreddit-media-ui class="pointer-events-none" .videoElement="${this.videoElement}" .mediaActionsController="${this.mediaActionsController}" .qualityLevels="${this.qualityLevels}" .currentQualityLevelIndex="${this.currentQualityLevelIndex}" .postId="${this.postId}" .subredditId="${this.subredditId}" .rootSelector="${this.rootSelector}" ?autoplay="${this.autoplay}" ?autoplayPref="${this.autoplayPref}" ?hide-autoplay-toggle="${this.hideAutoplayToggle}" ?gif="${this.gif}" ?hideControls="${this.hideControls}" ?hideFullscreenButton="${this.hideFullscreenButton}" ?isLoggedInUser="${this.isLoggedInUser}" ?isMobile="${this.isMobile}" caption-url="${this.captionUrl}" preview="${this.preview}" ?hideGifIcon="${this.hideGifIcon}"> <slot name="recommendation-overlay" slot="recommendation-overlay"></slot> </shreddit-media-ui> ${this.debug?t.x`<shreddit-player-debug-overlay></shreddit-player-debug-overlay>`:t.A} `}};return st.styles=[t.i`:host{display:block;position:relative;height:100%;width:100%;max-height:100%;max-width:100%}video{height:100%;width:100%;background:#000;outline:0}`,e.t],e._([e.n()],st.prototype,"src",void 0),e._([e.n({type:Boolean,reflect:!0})],st.prototype,"autoplay",void 0),e._([e.n({type:Boolean,attribute:"autoplay-pref"})],st.prototype,"autoplayPref",void 0),e._([e.n({type:Boolean,attribute:"hide-autoplay-toggle"})],st.prototype,"hideAutoplayToggle",void 0),e._([e.n({type:Boolean})],st.prototype,"gif",void 0),e._([e.n({type:Boolean,attribute:"loop"})],st.prototype,"loop",void 0),e._([e.n({type:Number,attribute:"loop-limit"})],st.prototype,"loopLimit",void 0),e._([e.n({type:Boolean,attribute:"hide-controls"})],st.prototype,"hideControls",void 0),e._([e.n({type:Boolean,attribute:"hide-fullscreen-button"})],st.prototype,"hideFullscreenButton",void 0),e._([e.n({type:Boolean,attribute:"is-mobile"})],st.prototype,"isMobile",void 0),e._([e.n({type:Boolean,attribute:"is-bot"})],st.prototype,"isBot",void 0),e._([e.n({type:String})],st.prototype,"poster",void 0),e._([e.n({type:String,attribute:"post-id"})],st.prototype,"postId",void 0),e._([e.n({type:String,attribute:"comment-id"})],st.prototype,"commentId",void 0),e._([e.n({type:String})],st.prototype,"preview",void 0),e._([e.n({type:Boolean,attribute:"is-logged-in-user"})],st.prototype,"isLoggedInUser",void 0),e._([e.n({type:Boolean,attribute:"single-playback"})],st.prototype,"singlePlayback",void 0),e._([e.n({type:Boolean,attribute:"play-out-of-viewport"})],st.prototype,"playOutOfViewport",void 0),e._([e.n({type:String,attribute:"object-fit"})],st.prototype,"objectFit",void 0),e._([e.n({type:Boolean,attribute:"should-round-background"})],st.prototype,"shouldRoundBackground",void 0),e._([e.n({type:String,attribute:"packaged-media-json"})],st.prototype,"packagedMediaJSON",void 0),e._([e.n({type:String,attribute:"packaged-auth-token",reflect:!0})],st.prototype,"packagedAuthToken",void 0),e._([e.n({type:String,attribute:"packaged-auth-expires-at",reflect:!0})],st.prototype,"packagedAuthExpiresAt",void 0),e._([e.n({type:String,attribute:"streaming-auth-token",reflect:!0})],st.prototype,"streamingAuthToken",void 0),e._([e.n({type:String,attribute:"streaming-auth-expires-at",reflect:!0})],st.prototype,"streamingAuthExpiresAt",void 0),e._([e.n({type:String,attribute:"caption-url"})],st.prototype,"captionUrl",void 0),e._([e.n({attribute:"media-origin"})],st.prototype,"mediaOrigin",void 0),e._([e.n({attribute:"player-type"})],st.prototype,"playerType",void 0),e._([e.n({attribute:"post-created-at"})],st.prototype,"postCreatedAt",void 0),e._([e.n({attribute:"post-domain"})],st.prototype,"postDomain",void 0),e._([e.n({type:Boolean,attribute:"post-nsfw"})],st.prototype,"postNsfw",void 0),e._([e.n({type:Boolean,attribute:"post-promoted"})],st.prototype,"postPromoted",void 0),e._([e.n({type:Boolean,attribute:"post-spoiler"})],st.prototype,"postSpoiler",void 0),e._([e.n({type:Number,attribute:"post-score"})],st.prototype,"postScore",void 0),e._([e.n({attribute:"post-type"})],st.prototype,"postType",void 0),e._([e.n({attribute:"subreddit-name"})],st.prototype,"subredditName",void 0),e._([e.n({attribute:"subreddit-id"})],st.prototype,"subredditId",void 0),e._([e.n({type:Boolean,attribute:"stop-load"})],st.prototype,"stopLoad",void 0),e._([e.n({type:Boolean,attribute:"error-improvements"})],st.prototype,"errorImprovements",void 0),e._([e.n({type:Boolean,attribute:"hide-gif-icon"})],st.prototype,"hideGifIcon",void 0),e._([e.n({type:Boolean,attribute:"debug"})],st.prototype,"debug",void 0),e._([e.N()],st.prototype,"qualityLevels",void 0),e._([e.N()],st.prototype,"currentQualityLevelIndex",void 0),e._([e.Q("shreddit-media-ui")],st.prototype,"mediaUI",void 0),e._([e.Q("shreddit-player-debug-overlay")],st.prototype,"debugOverlay",void 0),st=e._([e.e(ot)],st),{SELECTOR:e.en,TAG_NAMES:e.bd,get ShredditPlayer2(){return st},setUiStrings:e=>{me=e}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("DBv0KuLp",["GlDbwxoG","s_Igk1Yn"],(async(e,t)=>{let n=class extends t.s{render(){return t.x` <slot @click="${this.interactionHandler}" @keydown="${this.interactionHandler}"></slot> `}interactionHandler(e){e instanceof KeyboardEvent&&"Enter"!==e.key||this.dispatchEvent(new Event("interactionEvent"))}};n=e._([e.e("shreddit-interactable-element")],n)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CzlfHowc.js",import.meta.url,"CzlfHowc");
SML.dm("DCe9eryH",["GlDbwxoG","DRM-oTYq","D-MAMWlw","s_Igk1Yn","CzlfHowc"],(async(t,e,i,s)=>{let o=window.location,r=class extends s.s{constructor(){super(...arguments),this.postId="",this.viewContext=e.P.AggregateFeed,this.viewType=t.a5.CardView,this.showFullContent=!1,this.isUpdatingPostBody=!1,this.pubsub=new t.m(this),this.onPostUpdateAction=({postId:s,action:o,value:r})=>{if(this.postId===s)switch(o){case i.a.edit:this.editController?.setEditing(r);break;case i.a.updatePostBodyPending:this.isUpdatingPostBody=r;break;case i.a.updateContent:this.dispatchEvent(t.c(e.d,{postId:s})),this.editController?.resetEditing()}},this.revealTruncatedContent=()=>{this.querySelector(`#${this.postId}-overflow-cover`)?.classList?.add(e.C),this.readMoreButton?.classList?.remove(e.w),this.readMoreButton?.classList?.add(e.C);const t=this.querySelector(`#${this.postId}-post-rtjson-content`);t?.classList?.remove(...e.A.split(" "))},this.handleClickReadMore=()=>{this.revealTruncatedContent(),this.dispatchEvent(t.c(e.R,{postId:this.postId}))}}get isPDP(){return e.i(this.viewContext)}get readMoreButton(){return this.querySelector(`#${this.postId}-read-more-button`)}connectedCallback(){this.pubsub.subscribe(t.T.PostUpdated,this.onPostUpdateAction),this.readMoreButton?.addEventListener("click",this.handleClickReadMore),t.g()&&this.initEditTools(),super.connectedCallback()}disconnectedCallback(){this.readMoreButton?.removeEventListener("click",this.handleClickReadMore),super.disconnectedCallback()}checkPostEditMode(){const e=new URLSearchParams(o.search);if(e.get(i.c)){this.pubsub.publish(t.T.PostUpdated,{postId:this.postId,action:i.a.edit,value:!0}),e.delete(i.c);const s=e.toString(),r=o.pathname+(s.length?"?":"")+s;window.history.replaceState({},document.title,r)}}async initEditTools(){const{EditController:t}=await Promise.resolve().then((function(){return d}));this.editController=new t(this,{getPostId:()=>this.postId,getViewContext:()=>this.viewContext});const{PartialUpdateController:e}=await SML.di("./N6iDa2Ze.js",import.meta.url,"N6iDa2Ze");this.partialUpdateController=new e(this,{getPostId:()=>this.postId,getViewContext:()=>this.viewContext,getViewType:()=>this.viewType,getSubredditPrefixedName:()=>this.subredditPrefixedName}),this.checkPostEditMode()}handleTextBodySlotChange(t){this.showFullContent||requestAnimationFrame((()=>this.hideContentOverflow()))}hideContentOverflow(){const t=this.querySelector(`#${this.postId}-post-rtjson-content`);if(!t)return;const i=this.querySelector(".post-content")||this.querySelector('div[slot="text-body"]'),s=i?.querySelectorAll("faceplate-img"),o=.2*window.innerHeight,r=(s?.length||0)*o,n=this.getMaxTextBodyHeight(t.clientHeight);t.scrollHeight+r>n&&(this.querySelector(`#${this.postId}-overflow-cover`)?.classList?.remove(e.C),this.readMoreButton?.classList?.remove(e.C),this.readMoreButton?.classList?.add(e.w))}getMaxTextBodyHeight(t){return this.isPDP?Math.max(t,253):208}render(){if(this.isUpdatingPostBody)return s.x` <faceplate-shimmer class="h-[200px] w-full px-md xs:px-0" shape="pill"></faceplate-shimmer> `;if(this.editController?.isEditing)return this.editController?.renderEditor();return s.x`<slot @slotchange="${this.handleTextBodySlotChange}" name="${"text-body"}"></slot>`}};r.styles=[t.t],t._([t.n({type:String,attribute:"post-id"})],r.prototype,"postId",void 0),t._([t.n({type:String,attribute:"view-context"})],r.prototype,"viewContext",void 0),t._([t.n({type:String,attribute:"view-type"})],r.prototype,"viewType",void 0),t._([t.n({type:String,attribute:"subreddit-prefixed-name"})],r.prototype,"subredditPrefixedName",void 0),t._([t.n({type:Boolean,attribute:"show-full-content"})],r.prototype,"showFullContent",void 0),t._([t.N()],r.prototype,"isUpdatingPostBody",void 0),r=t._([t.e("shreddit-post-text-body")],r);const n="fetch-post-edit";var d=Object.freeze({__proto__:null,EditController:class{get postId(){return this.args.getPostId()}get viewContext(){return this.args.getViewContext()}constructor(e,o){this.host=e,this.args=o,this._isEligibleForPartialUpdate=!1,this._renderedPartial=!1,this.isEditing=!1,this.setEditing=t=>{this._isEligibleForPartialUpdate&&(t&&!this._renderedPartial?this.host.dispatchEvent(new CustomEvent(n)):this.host.requestUpdate(),this.isEditing=t)},this.resetEditing=()=>{this.isEditing=!1,this._renderedPartial=!1},this.getAndRenderPostEditPartial=async()=>{t.p(t.T.PostUpdated,{postId:this.postId,action:i.a.updatePostBodyPending,value:!0});const e=`/svc/shreddit/edit-post/${this.postId}`,s=await this._partialRequest.request(e),o=await(s?.text());if(o){const e=(new DOMParser).parseFromString(o,"text/html").querySelector('[slot="post-editor"]');e?.innerHTML&&(t.aG(o,this.host,t.P.Append),this._renderedPartial=!0)}t.p(t.T.PostUpdated,{postId:this.postId,action:i.a.updatePostBodyPending,value:!1})},this.renderEditor=()=>s.x`<slot name="post-editor"></slot> `,this._partialRequest=new t.aF(e),e.addController(this)}hostConnected(){this._isEligibleForPartialUpdate=this.viewContext===e.P.CommentsPage,this._isEligibleForPartialUpdate&&this.host.addEventListener(n,this.getAndRenderPostEditPartial)}hostDisconnected(){this._isEligibleForPartialUpdate&&this.host.removeEventListener(n,this.getAndRenderPostEditPartial)}},FetchPostEditEvent:n})}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("DCovP8x6",["GlDbwxoG","s_Igk1Yn","CC2wUKE8"],(async(t,e,o)=>{const a="title-icon",s="close-button",l="primary-button",n="secondary-button",r="tertiary-button";class i extends t.R{constructor(){super(...arguments),this.appearance="neutral",this.autoClose=!1,this.emitCloseButtonClickEvent=()=>{this.emitter.dispatch("close-button-clicked",{bubbles:!0,composed:!0})},this.handleCloseButtonClick=t=>{t.stopPropagation(),this.autoClose&&this.emitCloseButtonClickEvent()},this.handleCloseButtonKeydown=t=>{this.autoClose&&"Enter"===t.key&&this.emitCloseButtonClickEvent()}}render(){const t=o.v(this,a),i=o.v(this,s),d=o.v(this,l),c=o.v(this,n),m=o.v(this,r),p=d||c||m;return e.x`<div> <slot name="${"title-graphic"}"></slot> <div class="main"> <div class="content"> <div class="title-row"> <slot name="${a}" class="${t?"has-slotted":""}"></slot> <slot name="${"title"}"></slot> <slot name="${s}" part="close-button" class="${i?"has-slotted":""}" @click="${this.handleCloseButtonClick}" @keydown="${this.handleCloseButtonKeydown}"></slot> </div> <div class="body"><slot></slot></div> </div> <div class="footer ${p?"has-slotted":""}"> <slot name="${r}" class="${m?"has-slotted":""}"></slot> <div class="footer-right"> <slot name="${n}"></slot> <slot name="${l}"></slot> </div> </div> </div> </div>`}}t._([t.n({type:String,reflect:!0})],i.prototype,"appearance",void 0),t._([t.n({type:Boolean,reflect:!0,attribute:"auto-close"})],i.prototype,"autoClose",void 0);var d=e.i`${t.Z}:host{display:flex;flex-direction:column;border-radius:var(--rem16);overflow:hidden;box-shadow:var(--boxshadow-modal);gap:var(--rem8);background-color:var(--color-neutral-background);color:var(--color-neutral-content-strong)}:host([appearance=inverted]){background-color:var(--color-inverted-neutral-background);color:var(--color-inverted-neutral-content-strong)}.main{display:flex;flex-direction:column;padding:var(--rem8) var(--rem8) var(--rem8) var(--rem16)}slot[name=title-graphic]{display:flex}.title-row{display:flex}.body{padding-inline-end:var(--rem8)}slot[name=title-icon].has-slotted{display:flex;padding-top:var(--rem8);padding-inline-end:var(--rem12)}slot[name=title]{display:flex;align-items:center;flex-grow:1;flex-shrink:1;min-width:0;overflow:hidden;font-size:var(--rem14);font-weight:700}slot:not([name]){white-space:wrap}slot[name=close-button].has-slotted{display:flex;padding-inline-start:var(--rem4)}slot[name=primary-button]{display:flex;padding-inline-end:var(--rem8)}slot[name=tertiary-button].has-slotted{font-size:var(--rem12);flex-shrink:1;min-width:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding-inline-end:var(--rem8)}.footer{display:flex;align-items:center;justify-content:end;padding-inline-end:var(--rem8)}.footer.has-slotted{padding-top:var(--rem8)}.footer:has(slot[name=tertiary-button].has-slotted){justify-content:space-between}.footer-right{display:flex}`;let c=class extends i{};return c.styles=d,c=t._([t.e("rpl-coachmark-card")],c),{get RPLCoachmarkCard(){return c}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./BCmR6Ymi.js",import.meta.url,"BCmR6Ymi");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("DDVMeV6m",["GlDbwxoG","BCmR6Ymi","s_Igk1Yn","DRM-oTYq","CC2wUKE8"],(async(e,t,s)=>{function i(e){return e?.split(",")}function n(e){const[t,s,i]=e.split("/");return{source:t,action:s,noun:i}}function l(t,s,i){return()=>s.forEach((s=>{const{source:l,action:h,noun:a}=n(s);l&&h&&a&&e.f(t,{source:l,action:h,noun:a,...i})}))}class h{constructor(e,t){this.host=e,this.onChange=t,this.host.addController(this)}hostConnected(){e.aw(this.onChange,{immediate:!0})}hostDisconnected(){e.ax(this.onChange)}}class a{constructor(e,t){this.host=e,this.onChange=t,this.host.addController(this)}hostConnected(){e.av.subscribe(this.onChange)}hostDisconnected(){e.av.unsubscribe(this.onChange)}}class o{constructor(t,s,i,n){this.lastVisibleTimestamp=0,this.dwellIndex=0,this.visible=!1,this.elapsedTime=0,this.handleEnter=()=>{this.visible||(this.visible=!0,this.lastVisibleTimestamp=Date.now(),this.scheduleNext())},this.handleLeave=()=>{this.pause(),this.visible=!1},this.handleVisibilityChange=()=>{document.hidden?this.pause():this.visible&&(this.lastVisibleTimestamp=Date.now(),this.scheduleNext())},this.checkAndFireDwell=()=>{if(this.visible){if(this.elapsedTime+=Date.now()-this.lastVisibleTimestamp,this.lastVisibleTimestamp=Date.now(),this.dwellIndex<this.dwellTimeMsStack.length&&this.elapsedTime>=this.dwellTimeMsStack[this.dwellIndex]){const e=this.onDwellStack[this.dwellIndex];e&&e(),this.dwellIndex++}this.dwellIndex<this.dwellTimeMsStack.length?this.scheduleNext():this.pause()}},this.host=t,this.target=s,this.dwellTimeMsStack=Array.isArray(i)?i:[i],this.onDwellStack=n,new e.ap(t,s,{threshold:[.5]}),this.host.addController(this)}hostConnected(){this.target.addEventListener("faceplate-enter",this.handleEnter),this.target.addEventListener("faceplate-leave",this.handleLeave),document.addEventListener("visibilitychange",this.handleVisibilityChange)}hostDisconnected(){this.pause(),this.target.removeEventListener("faceplate-enter",this.handleEnter),this.target.removeEventListener("faceplate-leave",this.handleLeave),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}scheduleNext(){if(this.clearTimeout(),this.visible&&this.dwellIndex<this.dwellTimeMsStack.length){const e=this.dwellTimeMsStack[this.dwellIndex]-this.elapsedTime;this.timeoutId=window.setTimeout(this.checkAndFireDwell,Math.max(e,0))}}pause(){this.visible&&(this.elapsedTime+=Date.now()-this.lastVisibleTimestamp),this.clearTimeout()}clearTimeout(){void 0!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)}}const r="search-telemetry-tracker";let c=class extends s.s{constructor(){super(...arguments),this.trackingContext={},this.clickEventSANs=[],this.viewEventSANs=[],this.leaveEventSANs=[],this.loadEventSANs=[],this.consumeEventSANs=[],this.dwellEventSANs=[],this.dwellTriggerTimers=[],this.disabled=!1,this.controllers=[]}setupClickEventTracking(){this.controllers.push(e.r(this,this,l(this,this.clickEventSANs,this.trackingContext)))}setupViewEventTracking(e){e.push(l(this,this.viewEventSANs,this.trackingContext))}setupLeaveEventTracking(e){e.push(l(this,this.leaveEventSANs,this.trackingContext))}setupConsumeEventTracking(e,s){const i=this.consumeEventSANs.map((e=>new t.C(this,n(e))));this.controllers.push(new h(this,(e=>i.forEach((t=>t.handleDocumentVisibilityChange(e)))))),this.controllers.push(new a(this,(()=>i.forEach((e=>e.onBeforeUnloadCallback()))))),e.push((()=>i.forEach((e=>e.handleIntersectionObserverEnter())))),s.push((()=>i.forEach((e=>e.handleIntersectionObserverLeave()))))}setupEnterLeaveTracking(){const t=[],s=[],i=[];this.viewEventSANs.length&&this.setupViewEventTracking(t),this.leaveEventSANs.length&&this.setupLeaveEventTracking(i),this.consumeEventSANs.length&&this.setupConsumeEventTracking(t,i),this.loadEventSANs.length&&this.setupLoadEventTracking(s);let n=!1;this.controllers.push(function({host:t,target:s,enterCallback:i,leaveCallback:n,options:l}){const h=new e.b2(t);new e.ap(h,s,l);const a=new e.E(h,(()=>s));return i&&a.define("faceplate-enter",(e=>i(e))),n&&a.define("faceplate-leave",(e=>n(e))),h}({host:this,target:this,enterCallback:t.length||s.length?()=>{t.forEach((e=>e())),n||(n=!0,s.forEach((e=>e())))}:void 0,leaveCallback:i.length?()=>i.forEach((e=>e())):void 0,options:{rootMargin:"0px"}}))}setupDwellEventTracking(){this.dwellEventSANs.length&&this.dwellTriggerTimers?.length&&this.dwellEventSANs.forEach(((e,t)=>{const s=this.dwellTriggerTimers[t].split("/").map(Number),i=s.map((t=>l(this,[e],{...this.trackingContext,timer:{millis:t,referrer:"search_results"}})));this.controllers.push(new o(this,this,s,i))}))}setupLoadEventTracking(e){e.push(l(this,this.loadEventSANs,this.trackingContext))}setupControllers(){this.clickEventSANs.length&&this.setupClickEventTracking(),this.dwellEventSANs.length&&this.setupDwellEventTracking(),!this.viewEventSANs.length&&this.leaveEventSANs.length&&this.consumeEventSANs.length||this.setupEnterLeaveTracking()}tearDownControllers(){for(const t of this.controllers)e.s(this,t);this.controllers=[]}connectedCallback(){super.connectedCallback(),this.disabled||this.setupControllers()}disconnectedCallback(){super.disconnectedCallback(),this.tearDownControllers()}updated(e){super.updated(e),e.has("disabled")&&void 0!==e.get("disabled")&&this[this.disabled?"tearDownControllers":"setupControllers"]()}createRenderRoot(){return this}};return e._([e.n({type:Object,attribute:"data-faceplate-tracking-context"})],c.prototype,"trackingContext",void 0),e._([e.n({attribute:"click-events",converter:i})],c.prototype,"clickEventSANs",void 0),e._([e.n({attribute:"view-events",converter:i})],c.prototype,"viewEventSANs",void 0),e._([e.n({attribute:"leave-events",converter:i})],c.prototype,"leaveEventSANs",void 0),e._([e.n({attribute:"load-events",converter:i})],c.prototype,"loadEventSANs",void 0),e._([e.n({attribute:"consume-events",converter:i})],c.prototype,"consumeEventSANs",void 0),e._([e.n({attribute:"dwell-events",converter:i})],c.prototype,"dwellEventSANs",void 0),e._([e.n({attribute:"dwell-trigger-timers",converter:i})],c.prototype,"dwellTriggerTimers",void 0),e._([e.n({type:Boolean})],c.prototype,"disabled",void 0),c=e._([e.e(r)],c),{S:r}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DPWYpq70.js",import.meta.url,"DPWYpq70");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./fnKkpEwQ.js",import.meta.url,"fnKkpEwQ");SML.di("./CZ7YNHqf.js",import.meta.url,"CZ7YNHqf");SML.di("./YRJ6wR80.js",import.meta.url,"YRJ6wR80");SML.di("./Co1JScDL.js",import.meta.url,"Co1JScDL");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./DNASVThB.js",import.meta.url,"DNASVThB");SML.di("./BTgalZoS.js",import.meta.url,"BTgalZoS");SML.di("./BwmVBZAv.js",import.meta.url,"BwmVBZAv");
SML.dm("DEMANhHy",["s_Igk1Yn","DPWYpq70","GlDbwxoG","fnKkpEwQ","YRJ6wR80","Co1JScDL","CC2wUKE8","DNASVThB","BTgalZoS","BwmVBZAv","CZ7YNHqf"],(async(t,e,n,o,a,r,i,s,c,u)=>{const l=(t,e)=>"secondary"===e?{upvote:"bg-action-upvote text-global-white border-action-upvote ",downvote:"bg-action-downvote text-global-white border-action-downvote "}[t]:"",d={secondary:"bg-interactive-background-disabled text-[color:var(--color-button-secondary-text-disabled)] border-transparent",plain:"bg-[color:var(--color-button-plain-background-disabled)] text-[color:var(--color-button-plain-text-disabled)] border-transparent",bordered:"","plain-weak":"text-interactive-content-disabled"},p=({voteType:t,appearance:e})=>null==t?d[e]:"opacity-40 text-global-white";var h;!function(t){t.Upvote="upvote",t.Downvote="downvote"}(h||(h={}));const m=t=>`group button flex justify-center p-0 border-0 ${o.A[t]} inline-flex items-center`,v=({size:e})=>({attributes:{classname:"rpl-vote-button-icon"},size:e===n.a7.Small||e===n.a7.ExtraSmall?t.h.Small:t.h.Medium}),b=({size:t})=>`flex mx-xs ${n.ac[t]}`;function g(t,e){return t.tags?.includes(e)}u.A.Limited,u.A.Community,u.A.Free;let I=class extends t.s{constructor(){super(...arguments),this.size=n.a7.Medium,this.disabled=!1,this.count=0,this.hasEnteredViewport=!1,this.awardController=new r.A(this,{getThingId:()=>this.thingId,onAward:t=>{this.count++,this.isAwardedByUser=!0,t&&(this.awardId=t.id,this.iconUrl=t.staticIcon.url,this.hasIconicAward||(this.hasIconicAward=function(t){return g(t,u.A.Iconic)}(t)),this.hasBrandedAward||(this.hasBrandedAward=function(t){return g(t,u.A.Branded)}(t)))}}),this.handleEnterViewport=()=>{this.hasEnteredViewport=!0,this.observerController&&(this.observerController=n.s(this,this.observerController))},this.handleClick=()=>{const t=c.a.setCorrelationId(),e=c.a.setPostType(this.postType);n.f(this,s.e({awardId:this.awardId,thingId:this.thingId,subredditId:this.subredditId,postId:this.postId,topAwardIconUrl:this.iconUrl,animatedAwardIconUrls:this.iconUrls,correlationId:t,position:this.feedIndex,postType:e,postScore:this.postScore,score:this.score,numberComments:this.commentCount})),this.awardController.activateDialog()}}connectedCallback(){super.connectedCallback(),this.observerController=n.dq(this,this,this.handleEnterViewport,{rootMargin:"0px"})}disconnectedCallback(){super.disconnectedCallback(),this.observerController&&(this.observerController=n.s(this,this.observerController))}renderGlow(){return t.x`<span class="glow" style="${t.l(this.isAwardedByUser?"--fade-out: none":void 0)}"> ${Array.from({length:8}).map(((e,n)=>t.x`<span class="sunbeam" style="${t.o({"--n":n})}"></span>`))} </span>`}renderStream(){if(i.T())return t.A;const{iconUrls:e}=this;if(!e)return t.A;const n=[1,-1,0,-1],o=Number(e[0]===this.iconUrl);return t.x`<span class="stream"> ${Array.from({length:16}).map(((a,r)=>t.x`<img style="${t.o({"--n":r,"--offset":n[r%n.length]})}" src="${e[(r+o)%e.length]}" width="16" height="16" alt="">`))} </span>`}render(){if(!this.thingId)return t.A;const e=o.I[this.size],r=(this.hasIconicAward||this.hasBrandedAward)&&!this.noGoldenBorder;return o.c({appearance:this.appearance,attributes:{type:"button",className:i.n("overflow-visible",r&&"border-sm border-global-gold",this.buttonClass),disabled:this.disabled,onclick:this.handleClick,"aria-label":0===this.count?"Give award":n.bI({one:`Give award, ${this.count} award given`,other:`Give award, ${this.count} awards given`,count:this.count})},size:this.size,leadingIcon:this.iconUrl?t.x`<span class="${i.n("flex relative",this.disabled&&"opacity-25")}" aria-hidden="true"> ${this.hasEnteredViewport?this.renderGlow():t.A} ${this.hasEnteredViewport?this.renderStream():t.A} <img src="${this.iconUrl}" alt="" class="relative" width="${t.a8[e]}" height="${t.a8[e]}"> </span>`:a.a({attributes:{"aria-hidden":"true"},size:e}),children:this.count?t.x`<faceplate-number number="${this.count}" pretty aria-hidden="true"></faceplate-number>`:this.withInitialStateText?t.x`<span aria-hidden="true">${"Award"}</span>`:void 0});}};return I.styles=[n.t,n.J("@keyframes fade-in {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n@keyframes rotate-clockwise {\n  0% {\n    transform: rotate(45deg);\n  }\n  100% {\n    transform: rotate(135deg);\n  }\n}\n@keyframes sunbeam-even {\n  0% {\n    transform: scaleX(1) scaleY(1);\n  }\n  50% {\n    transform: scaleX(1.2) scaleY(1.3);\n  }\n  100% {\n    transform: scaleX(1) scaleY(1);\n  }\n}\n@keyframes sunbeam-odd {\n  0% {\n    transform: scaleX(1.2) scaleY(1.3);\n  }\n  50% {\n    transform: scaleX(1) scaleY(1);\n  }\n  100% {\n    transform: scaleX(1.2) scaleY(1.3);\n  }\n}\n.glow {\n  display: block;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  width: 0;\n  height: 0;\n  perspective: 5em;\n  animation: 3s ease-out 1.5s both rotate-clockwise, 0.5s ease-in 1.5s backwards fade-in, var(--fade-out, 0.5s ease-out 5s reverse forwards fade-in);\n}\n.glow::before {\n  content: '';\n  display: block;\n  position: absolute;\n  left: -1em;\n  top: -1em;\n  background: radial-gradient(rgba(245, 214, 87, 0.9), rgba(245, 214, 87, 0) 50%);\n  width: 2em;\n  height: 2em;\n}\n.glow > .sunbeam {\n  display: block;\n  transform: rotate(calc(var(--n) * 45deg)) rotateX(-45deg);\n}\n.glow > .sunbeam::before {\n  content: '';\n  display: block;\n  background: no-repeat linear-gradient(rgba(245, 214, 87, 0.9), rgba(245, 214, 87, 0));\n  height: 1em;\n  width: 0.3em;\n  position: absolute;\n  transform: rotate(180deg) translateX(50%);\n  transform-origin: 50% 0px;\n  animation: 1.5s linear 1.5s 2 both sunbeam-even;\n  animation-composition: add;\n}\n.glow > .sunbeam:nth-child(odd)::before {\n  animation-name: sunbeam-odd;\n}\n"),n.J("@keyframes stream {\n  0% {\n    transform: scale(0);\n  }\n  20% {\n    transform: scale(1);\n    opacity: 1;\n  }\n  100% {\n    offset-distance: 100%;\n    opacity: 0;\n  }\n}\n.stream {\n  pointer-events: none;\n  position: absolute;\n  bottom: calc(100px + 50%);\n  left: 50%;\n}\n.stream > img {\n  animation: 2s ease-in both stream;\n  animation-delay: calc(var(--n) * 0.2s);\n  offset-path: path('M2.5,100 q-5,-10,0,-20 t 0-20 0-20 0-20 0-20');\n  offset-rotate: 0deg;\n  position: absolute;\n  translate: calc(var(--offset) * 8px);\n}\n")],n._([n.n({type:String})],I.prototype,"appearance",void 0),n._([n.n({type:String})],I.prototype,"size",void 0),n._([n.n({type:String,attribute:"button-class"})],I.prototype,"buttonClass",void 0),n._([n.n({type:Boolean,reflect:!0})],I.prototype,"disabled",void 0),n._([n.n({type:Boolean,attribute:"no-golden-border"})],I.prototype,"noGoldenBorder",void 0),n._([n.n({type:Boolean,attribute:"with-initial-state-text"})],I.prototype,"withInitialStateText",void 0),n._([n.n({type:Boolean,attribute:"is-logged-in"})],I.prototype,"isLoggedIn",void 0),n._([n.n({type:Boolean,reflect:!0,attribute:"is-awarded-by-user"})],I.prototype,"isAwardedByUser",void 0),n._([n.n({type:String,attribute:"thing-id"})],I.prototype,"thingId",void 0),n._([n.n({type:Number,attribute:"feed-index"})],I.prototype,"feedIndex",void 0),n._([n.n({type:String,attribute:"subreddit-id"})],I.prototype,"subredditId",void 0),n._([n.n({type:String,attribute:"post-id"})],I.prototype,"postId",void 0),n._([n.n({type:String,attribute:"post-type"})],I.prototype,"postType",void 0),n._([n.n({type:Number,attribute:"post-score"})],I.prototype,"postScore",void 0),n._([n.n({type:Number})],I.prototype,"score",void 0),n._([n.n({type:Number,attribute:"comment-count"})],I.prototype,"commentCount",void 0),n._([n.n({type:Number,reflect:!0})],I.prototype,"count",void 0),n._([n.n({type:String,reflect:!0,attribute:"award-id"})],I.prototype,"awardId",void 0),n._([n.n({type:String,reflect:!0,attribute:"icon-url"})],I.prototype,"iconUrl",void 0),n._([n.n({type:Array,attribute:"icon-urls"})],I.prototype,"iconUrls",void 0),n._([n.n({type:Boolean,reflect:!0,attribute:"has-iconic-award"})],I.prototype,"hasIconicAward",void 0),n._([n.n({type:Boolean,reflect:!0,attribute:"has-branded-award"})],I.prototype,"hasBrandedAward",void 0),n._([n.N()],I.prototype,"hasEnteredViewport",void 0),I=n._([n.e("award-button")],I),{a:({attributes:e,voteType:a,upvoteButton:r,downvoteButton:i,size:s=n.a7.Medium,appearance:c="plain"})=>{const{html:u,createElement:l}=t.g(),d=u`${r} ${(()=>{if("plain"===c)return"";const t=s===n.a7.Small?"h-md":"h-[20px]";return u`<span class="rpl-vote-button-group-divider rounded-1 ms-[-2px] translate-x-px w-px ${t}"></span>`})()} ${i}`;return l("span",{...e,className:`\n      rpl-vote-button-group p-0 button-shell overflow-hidden font-semibold flex items-center cursor-auto\n      ${e?.className||""} \n      ${a??""}\n      ${o.g({size:s,appearance:c})}`,rpl:!0},d)},b:e=>{const{html:a,createElement:r}=t.g(),{appearance:i="plain",attributes:s,initialStateText:c,onClick:u,screenReaderContent:l,size:d=n.a7.Medium,voteCount:p,voteType:g}=e,I=d===n.a7.Small,$=g===h.Upvote,T=s?.href;return r(null!=T?"a":"button",{rpl:!0,upvote:!0,onclick:u,...s,className:`\n        ${s?.className||""} \n        rounded-none \n        ${I?"rounded-r-[8px]":"rounded-r-[12px]"}\n        ${m(i)}\n      `,style:`height: ${o.B[d]};`,"aria-pressed":$},a` <span class="${I?"ms-sm":"ms-md"} mr-[6px] ${b({size:d})}"> ${($?t.a6:t.a7)(v({size:d}))} </span> ${l&&a`<faceplate-screen-reader-content> ${l||"Upvote"} </faceplate-screen-reader-content>`} ${null==p?c?a`<span class="rpl-vote-button-group-label ${"plain"===i?"pe-[3px]":"pe-[10px]"}">${c}</span>`:"":a`<span class="rpl-vote-button-group-label ${"plain"===i?"pe-[3px]":"pe-[10px]"}"> <faceplate-number number="${p}" pretty></faceplate-number> </span>`} `);},c:e=>{const{html:a,createElement:r}=t.g(),{appearance:i="plain",attributes:s,size:c=n.a7.Medium,screenReaderContent:u,voteType:l,onClick:d}=e,p=c===n.a7.Small,g=l===h.Downvote,I=s?.href;return r(null!=I?"a":"button",{rpl:!0,downvote:!0,...s,onclick:d,className:`\n        ${s?.className||""} \n        rounded-none\n        ${p?"rounded-l-[8px]":"rounded-l-[12px]"}\n        ${m(i)} \n      `,style:`height: ${o.B[c]};`,"aria-pressed":g},a`<span class="${p?"me-sm":"me-md"} ${"plain"===i?"ms-[3px]":"ms-xs"} ${b({size:c})}"> ${(g?t.a4:t.a5)(v({size:c}))} </span> ${u&&a`<faceplate-screen-reader-content> ${u||"Downvote"} </faceplate-screen-reader-content>`}`);},d:({attributes:a,size:r=n.a7.Medium,appearance:i="plain",screenReaderContent:s,voteType:c,onClick:u})=>{const{html:l,createElement:d}=t.g(),p=null!=c,h=c===e.V.Downvote,m=e.c({appearance:i,active:p});return d("button",{rpl:!0,downvote:!0,...a,onclick:u,className:`${a?.className||""} ${m} ${{plain:h?"text-action-downvote":"hover:text-action-downvote focus-visible:text-action-downvote",secondary:p?e.d(c):"hover:text-action-downvote focus-visible:text-action-downvote",bordered:h?"text-action-downvote":"hover:text-action-downvote focus-visible:text-action-downvote","plain-weak":h?"text-action-downvote":"hover:text-action-downvote focus-visible:text-action-downvote"}[i]}`,style:`height: ${o.B[r]};`,"aria-pressed":h},l`<span class="${e.a({size:r})}"> ${(h?t.a4:t.a5)(e.b({size:r}))} </span> ${s&&l`<faceplate-screen-reader-content> ${s||"Downvote"} </faceplate-screen-reader-content>`}`);},u:({attributes:a,size:r=n.a7.Medium,appearance:i="plain",screenReaderContent:s,voteType:c,onClick:u})=>{const{html:l,createElement:d}=t.g(),p=null!=c,h=c===e.V.Upvote,m=e.c({appearance:i,active:p});return d("button",{rpl:!0,upvote:!0,onclick:u,...a,className:`${a?.className||""} ${m} ${{plain:h?"text-action-upvote":"hover:text-action-upvote focus-visible:text-action-upvote",secondary:p?e.d(c):"hover:text-action-upvote focus-visible:text-action-upvote",bordered:h?"text-action-upvote":"hover:text-action-upvote focus-visible:text-action-upvote","plain-weak":h?"text-action-upvote":"hover:text-action-upvote focus-visible:text-action-upvote"}[i]}`,style:`height: ${o.B[r]};`,"aria-pressed":h},l`<span class="${e.a({size:r})}"> ${(h?t.a6:t.a7)(e.b({size:r}))} </span> ${s&&l`<faceplate-screen-reader-content> ${s||"Upvote"} </faceplate-screen-reader-content>`}`);},v:({attributes:e,voteCount:a,voteType:r,upvoteButton:i,downvoteButton:s,size:c=n.a7.Medium,appearance:u="plain",initialStateText:d})=>{const{html:h,createElement:m}=t.g(),v=h`${i} ${null==a?d:h`<span> <faceplate-number number="${a}" pretty></faceplate-number> </span>`} ${s}`;return m("span",{...e,className:`${e?.className||""} ${r?l(r,u):""}\n      p-0 ${o.g({size:c,appearance:u,selected:!0})} button-shell overflow-visible font-semibold flex items-center cursor-auto ${e?.disabled?p({voteType:r,appearance:u}):""}`,rpl:!0},v)}};}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("DEwIjrQ2",["GlDbwxoG","s_Igk1Yn"],(async(t,e)=>{const r="auth-flow-manager";let s=class extends e.s{constructor(){super(...arguments),this.params={}}firstUpdated(){customElements.whenDefined(r).then((()=>{this._showStep(),this.remove()}))}_showStep(){const{step:t,params:e}=this;if(!t)return;const s=document.querySelector(r);if(!s)throw new Error("Auth flow manager was not found");s.show(t,e)}createRenderRoot(){return this}};s.styles=[t.t],t._([t.n({type:String,reflect:!0})],s.prototype,"step",void 0),t._([t.n({type:Object})],s.prototype,"params",void 0),s=t._([t.e("auth-flow-trigger")],s)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("DIbtn8u6",["GlDbwxoG","CC2wUKE8","s_Igk1Yn"],(async(e,t)=>{class a extends HTMLElement{constructor(){super(),this.childAnchor=null,this.chatUrl=null,this.mobilePermalink=null,this.handleAnchorClick=async e=>{if(!this.chatUrl)return;if(e.preventDefault(),this.mobilePermalink){const e=new URL(this.mobilePermalink,window.location.href).searchParams.get("r"),a=document.querySelector(`faceplate-modal[name="${t.cL}"]`),i=a?.querySelector("a.app-link");if(i?.href){const t=new URL(i.href);e&&t.searchParams.set("r",e),t.searchParams.set("$android_deeplink_path",`reddit${this.mobilePermalink}`),t.searchParams.set("$deeplink_path",this.mobilePermalink),t.searchParams.set("$og_redirect",`${CLIENT_CONFIG.ORIGIN}${this.mobilePermalink}`),t.searchParams.set("base_url",this.mobilePermalink),i.setAttribute("href",t.toString())}return void this.dispatchEvent(new CustomEvent(t.cL,{bubbles:!0}))}let a=document.querySelector("reddit-chat-host");a||(await this.activateFeature(),a=document.querySelector("reddit-chat-host")),a.openChatUrl(this.chatUrl)}}async activateFeature(){try{await e.j({name:e.as})}catch(t){if(!t.message?.endsWith(`${e.as} not found`))throw t}}connectedCallback(){const e=this.querySelector(":scope > a, :scope > li > a"),a=e?.href;this.mobilePermalink=this.getAttribute("permalink");((e,a=!1)=>!!e&&(e.startsWith(t.az)||e.startsWith(t.cK)||a&&e.startsWith("/c/")))(a||this.mobilePermalink||void 0,!!this.mobilePermalink)&&(this.childAnchor=e,!a&&this.mobilePermalink?this.chatUrl=this.mobilePermalink:a&&a.startsWith(t.az)?this.chatUrl="/"+a.replace(t.az,""):a&&(this.chatUrl="/"+a.replace(t.cK,"")),this.childAnchor?.addEventListener("click",this.handleAnchorClick))}disconnectedCallback(){this.childAnchor?.removeEventListener("click",this.handleAnchorClick)}}return customElements.define("reddit-chat-anchor",a),{a:e=>`${t.az}room/${e}`,g:(e,a)=>`${t.az}room/${e}/event/${a}`}}));
SML.di("./QkEG1nHt.js",import.meta.url,"QkEG1nHt");SML.di("./BrFgy9Ps.js",import.meta.url,"BrFgy9Ps");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("DJYjNS4q",["GlDbwxoG","CC2wUKE8","s_Igk1Yn"],(async(e,t,r)=>{class a{constructor(e,t){this.slotTrail=[],(this.host=e).addController(this),this.slotName=t}hostConnected(){let e=this.host;const t=[e];for(;e=e.getRootNode().host;)t.push(e);const r=t.pop();let a=r.querySelector(`[slot="${this.slotName}"]`);a||(a=document.createElement("div"),a.slot=this.slotName,r.appendChild(a)),this.slotted=a,t.forEach((e=>{const t=document.createElement("slot");t.name=t.slot=this.slotName,this.slotTrail.push(e.appendChild(t))}))}hostDisconnected(){for(;this.slotTrail.length>0;)this.slotTrail.pop()?.remove();this.slotted?.remove(),this.slotted=void 0}}var n;let o;!function(e){e.Render="render",e.Execute="execute"}(n||(n={}));const i=new Uint8Array(16);function c(){if(!o&&(o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!o))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(i)}var s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).slice(1));function h(e,t=0){return(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase()}function u(e){if(!function(e){return"string"==typeof e&&s.test(e)}(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}function p(e,t,r){function a(e,a,n,o){var i;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof a&&(a=u(a)),16!==(null===(i=a)||void 0===i?void 0:i.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+e.length);if(c.set(a),c.set(e,a.length),c=r(c),c[6]=15&c[6]|t,c[8]=63&c[8]|128,n){o=o||0;for(let e=0;e<16;++e)n[o+e]=c[e];return n}return h(c)}try{a.name=e}catch(e){}return a.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",a.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",a}function d(e){return 14+(e+64>>>9<<4)+1}function f(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function y(e,t,r,a,n,o){return f((i=f(f(t,e),f(a,o)))<<(c=n)|i>>>32-c,r);var i,c}function g(e,t,r,a,n,o,i){return y(t&r|~t&a,e,t,n,o,i)}function b(e,t,r,a,n,o,i){return y(t&a|r&~a,e,t,n,o,i)}function m(e,t,r,a,n,o,i){return y(t^r^a,e,t,n,o,i)}function k(e,t,r,a,n,o,i){return y(r^(t|~a),e,t,n,o,i)}p("v3",48,(function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){const t=[],r=32*e.length,a="0123456789abcdef";for(let n=0;n<r;n+=8){const r=e[n>>5]>>>n%32&255,o=parseInt(a.charAt(r>>>4&15)+a.charAt(15&r),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[d(t)-1]=t;let r=1732584193,a=-271733879,n=-1732584194,o=271733878;for(let t=0;t<e.length;t+=16){const i=r,c=a,s=n,l=o;r=g(r,a,n,o,e[t],7,-680876936),o=g(o,r,a,n,e[t+1],12,-389564586),n=g(n,o,r,a,e[t+2],17,606105819),a=g(a,n,o,r,e[t+3],22,-1044525330),r=g(r,a,n,o,e[t+4],7,-176418897),o=g(o,r,a,n,e[t+5],12,1200080426),n=g(n,o,r,a,e[t+6],17,-1473231341),a=g(a,n,o,r,e[t+7],22,-45705983),r=g(r,a,n,o,e[t+8],7,1770035416),o=g(o,r,a,n,e[t+9],12,-1958414417),n=g(n,o,r,a,e[t+10],17,-42063),a=g(a,n,o,r,e[t+11],22,-1990404162),r=g(r,a,n,o,e[t+12],7,1804603682),o=g(o,r,a,n,e[t+13],12,-40341101),n=g(n,o,r,a,e[t+14],17,-1502002290),a=g(a,n,o,r,e[t+15],22,1236535329),r=b(r,a,n,o,e[t+1],5,-165796510),o=b(o,r,a,n,e[t+6],9,-1069501632),n=b(n,o,r,a,e[t+11],14,643717713),a=b(a,n,o,r,e[t],20,-373897302),r=b(r,a,n,o,e[t+5],5,-701558691),o=b(o,r,a,n,e[t+10],9,38016083),n=b(n,o,r,a,e[t+15],14,-660478335),a=b(a,n,o,r,e[t+4],20,-405537848),r=b(r,a,n,o,e[t+9],5,568446438),o=b(o,r,a,n,e[t+14],9,-1019803690),n=b(n,o,r,a,e[t+3],14,-187363961),a=b(a,n,o,r,e[t+8],20,1163531501),r=b(r,a,n,o,e[t+13],5,-1444681467),o=b(o,r,a,n,e[t+2],9,-51403784),n=b(n,o,r,a,e[t+7],14,1735328473),a=b(a,n,o,r,e[t+12],20,-1926607734),r=m(r,a,n,o,e[t+5],4,-378558),o=m(o,r,a,n,e[t+8],11,-2022574463),n=m(n,o,r,a,e[t+11],16,1839030562),a=m(a,n,o,r,e[t+14],23,-35309556),r=m(r,a,n,o,e[t+1],4,-1530992060),o=m(o,r,a,n,e[t+4],11,1272893353),n=m(n,o,r,a,e[t+7],16,-155497632),a=m(a,n,o,r,e[t+10],23,-1094730640),r=m(r,a,n,o,e[t+13],4,681279174),o=m(o,r,a,n,e[t],11,-358537222),n=m(n,o,r,a,e[t+3],16,-722521979),a=m(a,n,o,r,e[t+6],23,76029189),r=m(r,a,n,o,e[t+9],4,-640364487),o=m(o,r,a,n,e[t+12],11,-421815835),n=m(n,o,r,a,e[t+15],16,530742520),a=m(a,n,o,r,e[t+2],23,-995338651),r=k(r,a,n,o,e[t],6,-198630844),o=k(o,r,a,n,e[t+7],10,1126891415),n=k(n,o,r,a,e[t+14],15,-1416354905),a=k(a,n,o,r,e[t+5],21,-57434055),r=k(r,a,n,o,e[t+12],6,1700485571),o=k(o,r,a,n,e[t+3],10,-1894986606),n=k(n,o,r,a,e[t+10],15,-1051523),a=k(a,n,o,r,e[t+1],21,-2054922799),r=k(r,a,n,o,e[t+8],6,1873313359),o=k(o,r,a,n,e[t+15],10,-30611744),n=k(n,o,r,a,e[t+6],15,-1560198380),a=k(a,n,o,r,e[t+13],21,1309151649),r=k(r,a,n,o,e[t+4],6,-145523070),o=k(o,r,a,n,e[t+11],10,-1120210379),n=k(n,o,r,a,e[t+2],15,718787259),a=k(a,n,o,r,e[t+9],21,-343485551),r=f(r,i),a=f(a,c),n=f(n,s),o=f(o,l)}return[r,a,n,o]}(function(e){if(0===e.length)return[];const t=8*e.length,r=new Uint32Array(d(t));for(let a=0;a<t;a+=8)r[a>>5]|=(255&e[a/8])<<a%32;return r}(e),8*e.length))}));var v={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function w(e,t,r){if(v.randomUUID&&!e)return v.randomUUID();const a=(e=e||{}).random||(e.rng||c)();return a[6]=15&a[6]|64,a[8]=63&a[8]|128,h(a)}function S(e,t,r,a){switch(e){case 0:return t&r^~t&a;case 1:case 3:return t^r^a;case 2:return t&r^t&a^r&a}}function E(e,t){return e<<t|e>>>32-t}p("v5",80,(function(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const a=e.length/4+2,n=Math.ceil(a/16),o=new Array(n);for(let t=0;t<n;++t){const r=new Uint32Array(16);for(let a=0;a<16;++a)r[a]=e[64*t+4*a]<<24|e[64*t+4*a+1]<<16|e[64*t+4*a+2]<<8|e[64*t+4*a+3];o[t]=r}o[n-1][14]=8*(e.length-1)/Math.pow(2,32),o[n-1][14]=Math.floor(o[n-1][14]),o[n-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<n;++e){const a=new Uint32Array(80);for(let t=0;t<16;++t)a[t]=o[e][t];for(let e=16;e<80;++e)a[e]=E(a[e-3]^a[e-8]^a[e-14]^a[e-16],1);let n=r[0],i=r[1],c=r[2],s=r[3],l=r[4];for(let e=0;e<80;++e){const r=Math.floor(e/20),o=E(n,5)+S(r,i,c,s)+l+t[r]+a[e]>>>0;l=s,s=c,c=E(i,30)>>>0,i=n,n=o}r[0]=r[0]+n>>>0,r[1]=r[1]+i>>>0,r[2]=r[2]+c>>>0,r[3]=r[3]+s>>>0,r[4]=r[4]+l>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}));const T="captcha-update",A=Symbol("mixins/with-recaptcha");return {C:T,L:a,get R(){return n},W:function(o){if(e.da(o,A))return o;class i extends o{constructor(){super(...arguments),this.recaptchaMethod=n.Render,this.renderString="explicit",this.uuid=w(),this.captchaSlotName=`${this.tagName.toLowerCase()}-captcha-element-${this.uuid}`,this.captchaSlotController=new a(this,this.captchaSlotName)}async insertRecaptchaScript(e=this.renderString,r=this.captchaSiteKey,a=this.captchaAction,n=this.recaptchaMethod){r&&(this.recaptchaController||(this.recaptchaController=new t.aQ({siteKey:e||r,action:a})),await this.recaptchaController.loadScript(),this.onRecaptchaLoad(r,a,n))}removeRecaptchaScript(){this.recaptchaController?.destroy(),this.recaptchaController=void 0}onRecaptchaLoad(t=this.captchaSiteKey,r=this.captchaAction,a=this.recaptchaMethod){const o=window.grecaptcha;if(!o||a===n.Execute)return;const i=n=>{this.captchaToken=n,this.dispatchEvent(e.c(T,{token:n,siteKey:t,action:r,recaptchaMethod:a}))};o.enterprise.ready((async()=>{this.captchaWidgetId=o.enterprise.render(this.captchaSlotController.slotted,{action:r||"",sitekey:t||"",theme:e.a3()?"dark":"light",callback:i,"expired-callback":i,"error-callback":i})}))}async getRecaptchaToken(e=this.captchaAction,r=this.captchaSiteKey){if(this.recaptchaMethod=n.Execute,this.captchaToken=void 0,!window.grecaptcha?.enterprise?.execute)throw"reCAPTCHA not ready or site key not set.";if(!e||!r)throw new Error("reCAPTCHA action or site key is not provided.");this.recaptchaController||(this.recaptchaController=new t.aQ({siteKey:r,action:e}));try{const t=await this.recaptchaController.generateToken(e);return this.captchaToken=t,t}catch(e){throw`Error in reCAPTCHA token retrieval: ${e}`}}resetRecaptcha(e=this.recaptchaMethod){const t=window.grecaptcha;t&&e!==n.Execute&&void 0!==this.captchaWidgetId&&t.enterprise.ready((async()=>{t.enterprise.reset(this.captchaWidgetId),this.captchaToken=void 0}))}async getRecaptchaTokenSafe(e,t){let r=null;try{r=(await this.getRecaptchaToken(e,t))??null}catch(e){r=null}return r}dispatchRecaptchaFailureAlert(){const t=e.c("faceplate-alert",{level:e.X.error,message:"An error occurred. Please disable any extensions or try using a different web browser to continue.",cause:"recaptcha-failure"});this.dispatchEvent(t)}renderRecaptcha(e=this.captchaSiteKey,t=this.recaptchaMethod){return e?t===n.Execute?r.A:r.x`<slot name="${this.captchaSlotName}"></slot>`:r.A}renderRecaptchaIn(e,t=this.captchaSiteKey,a=this.recaptchaMethod){r.B(this.renderRecaptcha(t,a),e)}}return i[A]=!0,e._([e.n({type:String,attribute:"captcha-action"})],i.prototype,"captchaAction",void 0),e._([e.n({type:String,attribute:"captcha-site-key"})],i.prototype,"captchaSiteKey",void 0),e._([e.n({type:String,attribute:"captcha-method"})],i.prototype,"recaptchaMethod",void 0),e._([e.n({type:String,attribute:"render-string"})],i.prototype,"renderString",void 0),e._([e.N()],i.prototype,"captchaToken",void 0),i}};}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./B5aCBAWI.js",import.meta.url,"B5aCBAWI");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("DK2EuOAl",["GlDbwxoG","s_Igk1Yn","B5aCBAWI","CC2wUKE8"],(async(e,t,n,s)=>{let i=class extends t.s{constructor(){super(...arguments),this.position="bottom-middle",this.triggerEvent="click",this.disabled=!1,this.manualTriggerFocus=!1,this.containerElement=document.documentElement,this.scrollContainerElement=window,this.onopen=null,this.onclose=null,this.emitter=s.r(this),this._popperController=new n.P(this,{position:this.position,referenceElementKey:"referenceElement",popperElementKey:"_menu",containerElement:this.containerElement,scrollContainerElement:this.scrollContainerElement,manualTriggerFocus:this.manualTriggerFocus}),this._eventUsedMap=new WeakMap,this.updated=e=>{e.has("position")&&this._popperController.updateOptions({position:this.position}),e.has("manualTriggerFocus")&&this._popperController.updateOptions({manualTriggerFocus:this.manualTriggerFocus})},this.handleDocumentClick=e=>{if(!(e.target instanceof Element)||this.hidden)return;const t=e.target.closest('[slot="menu"]'),n=this._eventUsedMap.has(e);null!==t||n||this.close()},this.handleEscape=e=>{"Escape"===e.key&&this.close(e)},this.addListenersWhileOpened=()=>{document.addEventListener("click",this.handleDocumentClick),document.addEventListener("keydown",this.handleEscape)},this.cleanupListenersWhileOpened=()=>{document.removeEventListener("click",this.handleDocumentClick),document.removeEventListener("keydown",this.handleEscape)},this.show=e=>{this.hidden=!1,this.emitter.dispatch("open"),this._menu.style.pointerEvents="auto",this._popperController.currentState.animationFinished.then((()=>{this.addListenersWhileOpened(),this.emitter.dispatch("opened")})),this.onopen?.(e??new Event("faceplate-dropdown-menu-show"))},this.close=(e,t)=>{!0===t?.disableRestoreFocus&&this._popperController.updateOptions({manualTriggerFocus:!0}),this.cleanupListenersWhileOpened(),this.hidden=!0,this.emitter.dispatch("close"),this._menu.style.pointerEvents="none",this._popperController.currentState.animationFinished.then((()=>{this.emitter.dispatch("closed"),this._popperController.updateOptions({manualTriggerFocus:this.manualTriggerFocus})})),this.onclose?.(e??new Event("faceplate-dropdown-menu-open"))},this.toggle=e=>{this.hidden?this.show(e):this.close(e)},this.handleClick=this.disabledHandler((e=>{this._eventUsedMap.set(e,!0),"click"===this.triggerEvent&&(this.hidden?this.show(e):this.close(e))})),this.handleMouseenter=this.disabledHandler((e=>{"hover"===this.triggerEvent&&this.show(e)})),this.handleMouseleave=this.disabledHandler((e=>{"hover"===this.triggerEvent&&this.close(e)})),this.handleFocusOut=this.disabledHandler((e=>{!this.hidden&&e.relatedTarget instanceof HTMLElement&&!o(this,e.relatedTarget)&&this.close(e,{disableRestoreFocus:!0})}))}get referenceElement(){return this.shadowRoot?.querySelector("#trigger")?.assignedElements()[0]??this}static get styles(){return[t.i`:host{--faceplate-dropdown-menu-z-index:1000;display:flex}#menu{border-radius:var(--rem8);box-shadow:0 4px 8px 0 rgba(0,0,0,.1),0 6px 12px 0 rgba(0,0,0,.25);display:inline-flex;justify-content:center;overflow:hidden;width:max-content;z-index:var(--faceplate-dropdown-menu-z-index);outline-offset:-1px}`,n.P.defaultPopperContentStyles]}get hidden(){return"closed"===this._popperController.currentState.state}set hidden(e){!0===e?this._popperController.close():this._popperController.open()}connectedCallback(){super.connectedCallback(),this.classList.add("connected")}firstUpdated(){this._menu&&(this._menu.style.pointerEvents="none")}disconnectedCallback(){super.disconnectedCallback(),this.cleanupListenersWhileOpened()}disabledHandler(e){return t=>{this.disabled||e(t)}}render(){return t.x` <slot id="trigger" aria-describedby="menu" faceplate-popper-trigger aria-controls="menu" @click="${this.handleClick}" @mouseenter="${this.handleMouseenter}" @mouseleave="${this.handleMouseleave}" @focusin="${this.handleMouseenter}" @focusout="${this.handleMouseleave}"></slot> <article id="menu" faceplate-popper-content @focusout="${this.handleFocusOut}"> <slot name="menu"></slot> </article> `}};e._([e.n({type:String})],i.prototype,"position",void 0),e._([e.n({type:String,attribute:"trigger-event"})],i.prototype,"triggerEvent",void 0),e._([e.n({type:Boolean})],i.prototype,"disabled",void 0),e._([e.n({type:Boolean,attribute:"manual-trigger-focus"})],i.prototype,"manualTriggerFocus",void 0),e._([e.Q("#menu")],i.prototype,"_menu",void 0),e._([e.Q("#trigger")],i.prototype,"_trigger",void 0),i=e._([e.e("faceplate-dropdown-menu")],i);const o=(e,t)=>{if(!e||!t)return!1;if(e===t)return!0;if(0===e.childElementCount&&!(e instanceof HTMLSlotElement))return!1;if(e.contains(t))return!0;if(e instanceof HTMLSlotElement&&e.assignedElements().some((e=>o(e,t))))return!0;if(e instanceof Element&&e.shadowRoot&&o(e.shadowRoot,t))return!0;for(const n of e.querySelectorAll("slot"))if(n.assignedElements().some((e=>o(e,t))))return!0;return!1};return{get F(){return i},a:({attributes:e,children:n})=>{const{html:s,createElement:i}=t.g();return i("li",{...e,booleanListItemGroup:!0,className:"list-none",rpl:!0},s`<ul class="p-0"> ${n} </ul>`)},l:({attributes:e,children:n,trailingSlot:s})=>{const{html:i,createElement:o}=t.g();return o("li",{...e,booleanListItemHeader:!0,className:"flex items-center m-0 pe-md h-2xl min-w-0 text-secondary font-semibold text-12",rpl:!0},i`<span class="grow min-w-0 px-sm truncate">${n}</span> ${s?i`<span class="flex items-center">${s}</span> `:void 0}`)}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./CZ5pw6qE.js",import.meta.url,"CZ5pw6qE");SML.di("./DrxyuPXW.js",import.meta.url,"DrxyuPXW");SML.di("./B1RQKxHJ.js",import.meta.url,"B1RQKxHJ");SML.di("./DbLQhpG3.js",import.meta.url,"DbLQhpG3");SML.di("./D3HU2XGt.js",import.meta.url,"D3HU2XGt");SML.di("./Du0Sc1_5.js",import.meta.url,"Du0Sc1_5");SML.di("./Du8UC0gt.js",import.meta.url,"Du8UC0gt");SML.di("./D32ZWk0Z.js",import.meta.url,"D32ZWk0Z");SML.di("./DCe9eryH.js",import.meta.url,"DCe9eryH");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./R9fABxJD.js",import.meta.url,"R9fABxJD");SML.di("./DslEtuBZ.js",import.meta.url,"DslEtuBZ");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./CZ7YNHqf.js",import.meta.url,"CZ7YNHqf");SML.di("./DMa5Y6a9.js",import.meta.url,"DMa5Y6a9");SML.di("./CzlfHowc.js",import.meta.url,"CzlfHowc");SML.di("./CDFmhs-S.js",import.meta.url,"CDFmhs-S");SML.di("./MX9FaClF.js",import.meta.url,"MX9FaClF");SML.di("./FaYkg4Io.js",import.meta.url,"FaYkg4Io");SML.di("./BStJq-t0.js",import.meta.url,"BStJq-t0");SML.di("./DCovP8x6.js",import.meta.url,"DCovP8x6");SML.di("./BXgkCz3E.js",import.meta.url,"BXgkCz3E");SML.di("./DMfuJHXs.js",import.meta.url,"DMfuJHXs");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");SML.di("./FagDXDzk.js",import.meta.url,"FagDXDzk");SML.di("./CmgOir_w.js",import.meta.url,"CmgOir_w");SML.di("./DzMpUNmB.js",import.meta.url,"DzMpUNmB");SML.di("./9ZdgYdsr.js",import.meta.url,"9ZdgYdsr");SML.di("./B5aCBAWI.js",import.meta.url,"B5aCBAWI");SML.di("./C38sKiaF.js",import.meta.url,"C38sKiaF");SML.di("./fnKkpEwQ.js",import.meta.url,"fnKkpEwQ");SML.di("./CAd-sfst.js",import.meta.url,"CAd-sfst");SML.di("./C-lRMeGe.js",import.meta.url,"C-lRMeGe");SML.di("./CGzEIBwW.js",import.meta.url,"CGzEIBwW");SML.di("./DK2EuOAl.js",import.meta.url,"DK2EuOAl");SML.di("./DNASVThB.js",import.meta.url,"DNASVThB");SML.di("./DEMANhHy.js",import.meta.url,"DEMANhHy");SML.di("./DPWYpq70.js",import.meta.url,"DPWYpq70");SML.di("./YRJ6wR80.js",import.meta.url,"YRJ6wR80");SML.di("./Co1JScDL.js",import.meta.url,"Co1JScDL");SML.di("./BTgalZoS.js",import.meta.url,"BTgalZoS");SML.di("./BwmVBZAv.js",import.meta.url,"BwmVBZAv");SML.di("./CjqcW8YI.js",import.meta.url,"CjqcW8YI");SML.di("./BTMXBfyY.js",import.meta.url,"BTMXBfyY");SML.di("./Dpra1UnG.js",import.meta.url,"Dpra1UnG");SML.di("./DdoeBlGT.js",import.meta.url,"DdoeBlGT");SML.di("./CnmQBnK-.js",import.meta.url,"CnmQBnK-");SML.di("./C_OcidZ-.js",import.meta.url,"C_OcidZ-");SML.di("./CZPCygeT.js",import.meta.url,"CZPCygeT");SML.di("./wFIF_OFn.js",import.meta.url,"wFIF_OFn");SML.di("./CU4mObWU.js",import.meta.url,"CU4mObWU");SML.di("./OimaI6pY.js",import.meta.url,"OimaI6pY");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");SML.di("./pMLLCc4b.js",import.meta.url,"pMLLCc4b");SML.di("./CJ4Bucp-.js",import.meta.url,"CJ4Bucp-");SML.di("./hMhijB38.js",import.meta.url,"hMhijB38");SML.di("./i17aYwuT.js",import.meta.url,"i17aYwuT");SML.di("./D0V62KWA.js",import.meta.url,"D0V62KWA");SML.di("./D6Xs8HU5.js",import.meta.url,"D6Xs8HU5");SML.di("./HYbNa5uQ.js",import.meta.url,"HYbNa5uQ");SML.di("./DopQd8m2.js",import.meta.url,"DopQd8m2");SML.di("./DYu9Ek9m.js",import.meta.url,"DYu9Ek9m");SML.di("./DwHTSY-I.js",import.meta.url,"DwHTSY-I");SML.di("./Dg8LS6-X.js",import.meta.url,"Dg8LS6-X");SML.di("./DIbtn8u6.js",import.meta.url,"DIbtn8u6");SML.di("./BmAQnYV7.js",import.meta.url,"BmAQnYV7");SML.di("./CwgKrXUC.js",import.meta.url,"CwgKrXUC");SML.di("./B6yBL9at.js",import.meta.url,"B6yBL9at");SML.di("./DuMDg_pA.js",import.meta.url,"DuMDg_pA");SML.di("./Wj1K4cGE.js",import.meta.url,"Wj1K4cGE");SML.di("./C7Ws8ntA.js",import.meta.url,"C7Ws8ntA");SML.di("./BM-DpnLu.js",import.meta.url,"BM-DpnLu");SML.di("./Be8KYlVI.js",import.meta.url,"Be8KYlVI");SML.di("./Diel-zJV.js",import.meta.url,"Diel-zJV");SML.di("./Dm-LXBi1.js",import.meta.url,"Dm-LXBi1");SML.di("./DgY18AyY.js",import.meta.url,"DgY18AyY");SML.di("./BTMr9sPC.js",import.meta.url,"BTMr9sPC");SML.di("./Bvty6Dj7.js",import.meta.url,"Bvty6Dj7");
SML.dm("DKhyRRmA",["GlDbwxoG","CZ5pw6qE","DrxyuPXW","B1RQKxHJ","DbLQhpG3","D3HU2XGt","Du0Sc1_5","Du8UC0gt","D32ZWk0Z","DCe9eryH","s_Igk1Yn","R9fABxJD","DslEtuBZ","CC2wUKE8","CZ7YNHqf","DMa5Y6a9","CzlfHowc","CDFmhs-S","MX9FaClF","FaYkg4Io","BStJq-t0","DCovP8x6","BXgkCz3E","DMfuJHXs","D-MAMWlw","FagDXDzk","CmgOir_w","DzMpUNmB","9ZdgYdsr","B5aCBAWI","C38sKiaF","fnKkpEwQ","CAd-sfst","C-lRMeGe","CGzEIBwW","DK2EuOAl","DNASVThB","DEMANhHy","DPWYpq70","YRJ6wR80","Co1JScDL","BTgalZoS","BwmVBZAv","CjqcW8YI","BTMXBfyY","Dpra1UnG","DdoeBlGT","CnmQBnK-","C_OcidZ-","CZPCygeT","wFIF_OFn","CU4mObWU","OimaI6pY","DRM-oTYq","pMLLCc4b","CJ4Bucp-","hMhijB38","i17aYwuT","D0V62KWA","D6Xs8HU5","HYbNa5uQ","DopQd8m2","DYu9Ek9m","DwHTSY-I","Dg8LS6-X","DIbtn8u6","BmAQnYV7","CwgKrXUC","B6yBL9at","DuMDg_pA","Wj1K4cGE","C7Ws8ntA","BM-DpnLu","Be8KYlVI","Diel-zJV","Dm-LXBi1","DgY18AyY","BTMr9sPC","Bvty6Dj7"],(async E=>{E.g()&&SML.di("./D2FBL9PI.js",import.meta.url,"D2FBL9PI")}));
SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("DMa5Y6a9",["CC2wUKE8"],(async t=>{let n=function(){try{return"1E4 bits"===new Intl.NumberFormat("en",{style:"unit",unit:"bit",unitDisplay:"long",notation:"scientific"}).format(1e4)}catch(t){return!1}}();const o=1e3,i=1e6,r=1e9,e=t=>t>=99999999949?`${Math.floor(t/r)}b`:t>=999999949&&t<99999999949?`${(t/r).toFixed(1)}b`:t>=99999949&&t<999999949?`${Math.floor(t/i)}m`:t>=999949&&t<99999949?`${(t/i).toFixed(1)}m`:t>=99949&&t<999949?`${Math.floor(t/o)}k`:t>=o&&t<99949?`${(t/o).toFixed(1)}k`:String(t);return{_:e,f:function(o,i,r){if(n){const n=(null==r?void 0:r.options)||{notation:(null==r?void 0:r.short)?"compact":"standard"};return t.e(i,n).format(o)}return e(o)}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("DMfuJHXs",["s_Igk1Yn","GlDbwxoG"],(async N=>{var I;!function(N){N.APP="APP",N.GAME="GAME",N.NSFW="NSFW",N.ORIGINAL="ORIGINAL",N.SPOILER="SPOILER",N.QUARANTINED="QUARANTINED"}(I||(I={}));return {get C(){return I},c:({attributes:A,children:R,appearance:E})=>{const{html:e,createElement:a}=N.g(),P={size:N.h.Small,attributes:{className:"inline-block",style:"vertical-align: text-bottom"}},T={[I.APP]:{className:"text-ai-plain",icon:N.J(P)},[I.GAME]:{className:"text-ai-plain",icon:N.K(P)},[I.NSFW]:{className:"text-category-nsfw",icon:N.L(P)},[I.ORIGINAL]:{className:"text-primary",icon:N.M(P)},[I.SPOILER]:{className:"text-category-spoiler",icon:N.v(P)},[I.QUARANTINED]:{className:"text-warning-content",icon:N.N(P)}},r=e`<span class="inline-block" aria-hidden="true">${[T[E].icon]}</span> <span class="font-semibold text-12 uppercase">${R}</span>`;return a("span",{...A,className:`flex items-center gap-2xs ${[T[E].className]}`,rpl:!0},r)},g:()=>({[I.NSFW]:{children:"NSFW",appearance:I.NSFW},[I.APP]:{children:"APP",appearance:I.APP},[I.GAME]:{children:"GAME",appearance:I.GAME},[I.SPOILER]:{children:"SPOILER",appearance:I.SPOILER},[I.QUARANTINED]:{children:"QUARANTINED",appearance:I.QUARANTINED},[I.ORIGINAL]:{children:"ORIGINAL",appearance:I.ORIGINAL}})};}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("DNASVThB",["GlDbwxoG","CC2wUKE8"],(async(n,e)=>{var r;!function(n){n.Comment="t1",n.Profile="t2",n.Post="t3",n.Message="t4",n.Subreddit="t5",n.Trophy="t6"}(r||(r={}));const o=n=>{const e=n.split("_").shift();return Object.values(r).includes(e)?e:void 0},t=n=>o(n)===r.Comment,a=n=>o(n)===r.Post,i="new_awards";function c({thingId:n,awardId:e,groupId:r,subredditId:o,postId:i,pageType:c,paneName:u,position:s,recipientId:d,isAnonymous:_,hasMessage:w,awardPrice:l,topAwardIconUrl:m,animatedAwardIconUrls:p,reason:f,correlationId:b,postType:T,postScore:I,score:g,numberComments:E,referrerCorrelationId:M}){const v={new_award:{}};return e&&(v.new_award.id=e),r&&(v.new_award.group_id=r),d&&(v.new_award.recipient_id=d),null!=_&&(v.new_award.is_anonymous=_),null!=w&&(v.new_award.has_message=w),void 0!==l&&(v.new_award.listing_price=l),m&&(v.new_award.top_award_icon_url=m),p&&(v.new_award.animated_awards_ids=p),o&&(v.subreddit={id:o}),n&&(a(n)?v.post={id:n,type:T,score:g,number_comments:E}:t(n)&&(v.comment={id:n,score:g},i&&(v.post={id:i,type:T,score:I,number_comments:E}))),(c||u||s||f)&&(v.action_info={...c&&{page_type:c},...u&&{pane_name:u},...s&&{position:s},...f&&{reason:f}}),b&&(v.correlation_id=b),M&&(v.feed={referrer_correlation_id:M}),v}return{N:i,get T(){return r},a:function(e){return n.b({source:i,action:"view",noun:"leaderboard_tile"},c(e))},b:c,c:a,d:t,e:function(e){const r=n.hN();return n.b({source:i,action:"click",noun:"entry_point"},c({...e,pageType:n.w(),...r&&{referrerCorrelationId:r}}))},f:function(e){return n.b({source:i,action:"view",noun:"gold_info"},c(e))},g:o,h:function(e){return n.b({source:i,action:"view",noun:"award_info"},c(e))},i:function(r){switch(!0){case e.cP(r):return n.M.Award;case t(r):return n.M.Comment;case a(r):return n.M.Post;default:return null}},j:function(e){return n.b({source:i,action:"click",noun:"overflow_menu"},c(e))},k:function(e){return n.b({source:i,action:"view",noun:"leaderboard"},c(e))},l:function(e,r){return n.b({source:i,action:"click",noun:`leaderboard_${r}`},c(e))},m:function(e){return n.b({source:i,action:"filter",noun:"leaderboard"},c(e))},n:function(e){return n.b({source:i,action:n.am.Click,noun:"confirm_award_option"},c(e))},o:function(e){return n.b({source:i,action:n.am.View,noun:"award_options_sheet"},c(e))},s:function(e){return n.b({source:i,action:n.am.Click,noun:"award_option"},c(e))},v:function(e,{isSuccessful:r}){const o=r?"completed_fe":"failed_fe";return n.b({source:i,action:"award_given",noun:o},c(e))}}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("DOd9aHN1",["s_Igk1Yn"],(async a=>{const{svg:c}=a.g();return{a:a.m(c`<path d="M18.332 11.042l-4.05-7.056A4.875 4.875 0 009.92 1.5a4.898 4.898 0 00-4.198 2.485l-4.05 7.056a4.938 4.938 0 00.042 5.044 4.894 4.894 0 004.238 2.414h8.099c1.82 0 3.437-.957 4.32-2.559a4.956 4.956 0 00-.04-4.9v.002zM9.948 3.306a3.107 3.107 0 012.78 1.583l1.325 2.308c.5.871.697 1.203 1.002 1.559l-.066.093c-.455-.184-1.201-.212-1.885-.082-.757.144-1.38.48-1.48.538a3.229 3.229 0 01-3.241.005A3.272 3.272 0 016.93 7.536c-.428-1.218.012-2.562.96-3.417a3.107 3.107 0 012.058-.813h-.001zM3.253 15.158a3.142 3.142 0 01-.027-3.213L4.55 9.637c.499-.872.687-1.209.84-1.653l.114.011c.069.488.418 1.153.872 1.684a5.283 5.283 0 001.203 1.02 3.27 3.27 0 01.824 4.973c-.834.981-2.212 1.27-3.421.872a3.126 3.126 0 01-1.73-1.386zm13.55-.094a3.105 3.105 0 01-2.751 1.63h-2.65c-1 0-1.383.006-1.842.093l-.047-.104c.386-.305.783-.94 1.013-1.601a5.342 5.342 0 00.277-1.558 3.27 3.27 0 011.616-2.826 3.235 3.235 0 012.253-.378c1.262.236 2.2 1.292 2.46 2.545.16.737.05 1.513-.328 2.199z"></path>`,"0 0 20 20","answers")}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./fnKkpEwQ.js",import.meta.url,"fnKkpEwQ");
SML.dm("DPWYpq70",["s_Igk1Yn","GlDbwxoG","fnKkpEwQ"],(async(e,t,o)=>{var a;!function(e){e.Upvote="upvote",e.Downvote="downvote"}(a||(a={}));const r=(e,t)=>{if("post"===t){const t=e;return{ok:t.data?.updatePostVoteState?.ok,errors:t.data?.updatePostVoteState?.errors,voteStateResult:t.data?.updatePostVoteState?.voteState}}const o=e;return{ok:o.data?.updateCommentVoteState?.ok,errors:o.data?.updateCommentVoteState?.errors,voteStateResult:o.data?.updateCommentVoteState?.voteState}},n=(e,o,a)=>"post"===o?{operation:t.C.UpdatePostVoteState,variables:{input:{postId:e,voteState:a}}}:{operation:t.C.UpdateCommentVoteState,variables:{input:{commentId:e,voteState:a}}};return {get V(){return a},a:({size:e})=>`flex mx-xs ${t.ac[e]}`,b:({size:o})=>({size:o===t.a7.Small||o===t.a7.ExtraSmall?e.h.Small:e.h.Medium}),c:({appearance:e,active:t})=>`group button flex justify-center aspect-square p-0 border-0 ${o.A[e]} ${!t&&"disabled:text-interactive-content-disabled"} ${t&&"secondary"===e?"":"button-plain"}  inline-flex items-center`,d:e=>{let t="bg-transparent text-global-white hover:text-global-white";switch(e){case a.Downvote:t+=" hover:bg-downvote-background-hover";break;case a.Upvote:t+=" hover:bg-upvote-background-hover"}return t},g:function(e,t){return!e&&t===a.Upvote||e===a.Downvote&&t===a.Downvote?1:!e&&t===a.Downvote||e===a.Upvote&&t===a.Upvote?-1:e===a.Downvote&&t===a.Upvote?2:e===a.Upvote&&t===a.Downvote?-2:0},o:async function(e,o,s){let i=t.aR.None;s&&(i=s===a.Upvote?t.aR.Up:t.aR.Down);const u=await t.B(n(e,o,i)),{ok:l,errors:p,voteStateResult:d}=r(u,o);if(l){const e=d;if(e===t.aR.None)return;return e===t.aR.Up?a.Upvote:a.Downvote}if(p?.[0]){const e=p[0]?.message??"Something went wrong";throw new Error(e)}return s}};}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("DQ-2YbuL",["GlDbwxoG","s_Igk1Yn"],(async(e,t)=>{let r=class extends t.s{constructor(){super(...arguments),this.hasDivider=!1,this.render=()=>t.x` <slot name="leading"></slot> <slot></slot> <slot name="trailing"></slot> `}static get styles(){return t.i`:host{align-items:center;box-sizing:border-box;display:flex;font-weight:700;height:var(--rem64);min-height:var(--rem64);padding:0 var(--spacer-md);position:relative;width:100%}:host([has-divider])::after{border-bottom:1px solid var(--color-neutral-border);bottom:0;content:'';position:absolute;inset-inline-end:var(--spacer-md);inset-inline-start:var(--spacer-md)}:host>slot:not([name]){display:flex;flex-grow:1;padding:0 var(--spacer-sm);font-size:1rem}`}};e._([e.n({type:Boolean,reflect:!0,attribute:"has-divider"})],r.prototype,"hasDivider",void 0),r=e._([e.e("faceplate-bottom-sheet-header")],r)}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("DR8uYI_f",["s_Igk1Yn"],(async a=>{const{svg:c}=a.g();return{n:a.m(c`<path d="M10 19a3.29 3.29 0 01-2.333-.965l-5.702-5.702a3.304 3.304 0 010-4.666l5.701-5.702a3.303 3.303 0 014.668 0l5.701 5.702a3.304 3.304 0 010 4.666l-5.701 5.702A3.292 3.292 0 019.998 19H10zm0-16.2c-.383 0-.768.145-1.06.437L3.24 8.94a1.502 1.502 0 000 2.122l5.702 5.702a1.501 1.501 0 002.12 0l5.703-5.702a1.502 1.502 0 000-2.122l-5.702-5.702a1.496 1.496 0 00-1.06-.438H10zM5.834 7.74l-.029.013v1.44l1.23-.545v4.64H8.57V6.711h-.476L5.833 7.74v.001zm8.33 2.751a1.994 1.994 0 00-.665-.638 1.846 1.846 0 00.615-1.381c0-.364-.096-.688-.285-.964a1.884 1.884 0 00-.768-.643 2.45 2.45 0 00-1.05-.227c-.377 0-.73.075-1.051.224a1.906 1.906 0 00-.775.641 1.65 1.65 0 00-.292.965c0 .28.059.545.176.791.107.226.255.425.439.594a1.973 1.973 0 00-.665.641A1.708 1.708 0 009.89 12.4c.21.296.503.533.87.704.367.171.784.257 1.242.257.45 0 .865-.085 1.23-.252a2.15 2.15 0 00.873-.7c.212-.298.319-.634.319-1 0-.333-.088-.642-.264-.917h.003zm-1.338 1.236a.844.844 0 01-.336.282c-.147.07-.305.105-.482.105-.175 0-.335-.034-.48-.1a.836.836 0 01-.342-.279.68.68 0 01-.126-.402.7.7 0 01.123-.405.851.851 0 01.335-.293c.145-.072.31-.109.49-.109.183 0 .347.037.486.11a.83.83 0 01.332.292.72.72 0 010 .8zm-.131-2.757a.733.733 0 01-.284.272.823.823 0 01-.403.1.834.834 0 01-.406-.1.743.743 0 01-.284-1.029.698.698 0 01.285-.257.888.888 0 01.403-.092c.147 0 .284.031.404.092.121.06.214.144.284.256a.708.708 0 01.103.376.743.743 0 01-.103.383z"></path>`,"0 0 20 20","nsfw")}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("DRM-oTYq",["GlDbwxoG","CC2wUKE8"],(async(e,t)=>{var o,n;!function(e){e.SubredditFeed="SubredditFeed",e.CustomFeed="CustomFeed",e.AggregateFeed="AggregateFeed",e.BestOfRedditPage="BestOfRedditPage",e.CommentsPage="CommentsPage",e.Comment="Comment",e.DynamicFeed="DynamicFeed",e.ListingBelowSubredditPosts="ListingBelowSubredditPosts",e.ListingBelowLinkedPosts="ListingBelowLinkedPosts",e.PopularFeed="PopularFeed",e.PostStatsPage="PostStatsPage",e.ProfileFeed="ProfileFeed",e.ProfileFeed2="ProfileFeed2",e.ProfileTrendingConvos="ProfileTrendingConvos",e.BrandMentionFeed="BrandMentionFeed",e.BrandPostPerformanceFeed="BrandPostPerformanceFeed",e.ArticleFeed="ArticleFeed",e.SearchResultsPage="SearchResultsPage",e.RightRail="RightRail",e.ModChatChannels="ModChatChannels",e.ModQueue="ModQueue",e.ModQueueAll="ModQueueAll",e.ModNotesRail="ModNotesRail",e.ModLog="ModLog",e.ModTrainingQueue="ModTrainingQueue",e.UserManagement="UserManagement",e.ModRules="ModRules",e.ModRecruitment="ModRecruitment",e.ModWiki="ModWiki",e.ArticleDetails="ArticleDetails",e.RelatedPosts="RelatedPosts"}(o||(o={})),function(e){e.Scheduled="scheduled",e.Live="live",e.Ended="ended"}(n||(n={}));const a=e=>`${e}`.startsWith("t3_")?`${e}`:`t3_${e}`;function s(e){return e===o.ListingBelowLinkedPosts||e===o.ListingBelowSubredditPosts}const i=/^.*?\/(?:u|user|r)\/(?:[a-zA-Z0-9_-]+)\/comments\/(?<postId>[a-zA-Z0-9]+)(?:(?:\/|\?).*|$)/;const r=t=>c(t,e.eR)?t:void 0,c=(e,t)=>Object.values(t).includes(e),d=(e,t)=>void 0===e?void 0:t(e);function u(e){return e&&s(e)?"post_detail":"post"}function l(e){return u(e.viewContext??null)}const _=({archived:t,authorId:o,createdTimestamp:n,domain:a,id:s,feedIndex:i,nsfw:c,isStickied:u,isHighlighted:l,postTitle:_,postType:m,promoted:p,recommendationSource:b,recommendationSubredditId:f,recommendationSubredditName:g,score:w,spoiler:h,subredditId:T,subredditPrefixedName:v,viewType:P,commentCount:k,permalink:I,awardId:M,interactionFromHotkey:E})=>{const S=d(m,r),A=d(n,e.cs),L={name:v?.toLowerCase(),id:T},R=M?{id:M}:void 0,F=E?e.cQ.HOTKEY:void 0;return{...R,post:{archived:t,author_id:o,created_timestamp:A,domain:a,id:s,nsfw:c,pinned:u,highlighted:l,promoted:p,score:w,spoiler:h,subreddit_id:T,subreddit_name:L.name,title:_,type:S,recommendation_source:b?.toLowerCase(),recommendation_source_subreddit_id:f,recommendation_source_subreddit_name:g,number_comments:k,url:I},screen:{view_type:e.el(P)},subreddit:L,action_info:{position:i,trigger_type:F}}},m=t=>({..._(t),feed:e.ek()}),p=({fields:e,post:t,postIsTranslated:o,reason:n})=>{const{isMTSEOUserPage:a,postLanguage:s,translationLanguage:i}=t;return e={...e,post:{...e.post,language:s,translation_language:o?i:"original",translation_state:o,translation_reason:o?a?"mt_seo":"immersive_auto":"original",translatable_state:t.isTranslatable?"is_translatable":"is_not_translatable"},...n&&{action_info:{...e.action_info,reason:n}}}};function b(e,t){return e&&t?{ad_metadata:{impression_id:e,placement:t}}:void 0}function f(e){return{...p({fields:m(e),post:e,postIsTranslated:!!e.isPostTranslated,withTranslationMetrics:!0}),new_award:{id:e.awardId,is_content_eligible:Boolean(e.isAwardable)}}}const g=(t,o,n={})=>e.b({source:l(t),action:"click",noun:o},{...t.viewContext&&s(t.viewContext)?f(t):n,feed:e.ek()}),w=e=>`${e}`.startsWith("t1_")?`${e}`:`t1_${e}`,h=/^.*\/r\/.*\/comments\/(?<postId>[a-zA-Z0-9]+)\/.*\/?$/;const T=/\/r\/([^/]+)\/$/;return{$:function(t){const o=t?e.hM(t.href):null;if(!o)return{postId:"",commentId:""};const n=o?.groups?.postId,s=o?.groups?.commentId;return{postId:n?a(n):"",commentId:s?w(s):""}},A:"max-h-[253px] overflow-hidden s:max-h-[318px] m:max-h-[337px] l:max-h-[352px] xl:max-h-[452px]",B:t=>e.b({source:"translate_button",action:"view",noun:"translation_settings"},f(t)),C:"hidden",get D(){return n},E:w,F:t=>{const o=f(t);return e.b({source:"overflow_menu",action:"click",noun:"translate_post"},{...o,action_info:{...o.action_info,reason:t.isPostTranslated?e.bG.SEE_ORIGINAL:e.bG.SEE_TRANSLATION}})},G:(t,o)=>e.b({source:u(t),action:"click",noun:"report"},o),H:t=>e.b({source:"ad_overflow",action:"hide",noun:"ad"},t),I:(t,o)=>e.b({source:u(t),action:"click",noun:"overflow_show_less"},o),J:t=>e.b({source:u(t),action:"click",noun:"edit"}),K:(t,o,n,a)=>e.b({source:u(t),action:"click",noun:o?"edit_post_flair":"add_post_flair"},{post:{id:n,author_id:a}}),L:t=>e.b({source:u(t),action:"click",noun:"update_post_flair"}),M:"overflow-hidden h-[60px] embed-xs:h-[80px]",N:t=>e.b({source:u(t),action:"click",noun:"save"}),O:t=>e.b({source:u(t),action:"click",noun:"overflow_rec_context"}),get P(){return o},Q:(t,o)=>e.b({source:u(t),action:o?"undo":"click",noun:"follow"}),R:"read-more-click",S:t=>e.b({source:u(t),action:"click",noun:"unpin"}),T:"h-[316px]",U:t=>e.b({source:u(t),action:"click",noun:"pin"}),V:t=>e.b({source:u(t),action:"click",noun:"delete"}),W:({markedAsSpoiler:t,viewContext:o})=>e.b({source:u(o),action:"click",noun:t?"mark_spoiler":"unmark_spoiler"}),X:({markedAsNsfw:t,viewContext:o})=>e.b({source:u(o),action:"click",noun:t?"mark_nsfw":"unmark_nsfw"}),Y:({markedAsBrandAffiliate:t,viewContext:o})=>e.b({source:u(o),action:"click",noun:t?"mark_brand_affiliate":"unmark_brand_affiliate"}),Z:({turnNotificationsOn:t,viewContext:o})=>e.b({source:u(o),action:"click",noun:t?"turn_notifications":"unsend_reply_notifications"}),_:t=>e.b({source:u(t),action:"click",noun:"hide"}),a:2e3,a0:function(e){const t=(e?.getAttribute("href")||"").match(T);return t?t[1]:""},a1:(t,o)=>e.b({source:"post"===o?"post":"post_detail",action:t,noun:"post"===o?"post":"comment"},{action_info:{trigger_type:e.cQ.HOTKEY}}),a2:t=>e.b({source:"post",action:"leave",noun:"post",visibility:{on_screen_timestamp:t.becameVisibleOnScreenTimestamp,off_screen_timestamp:Date.now()}},m(t)),a3:t=>e.b({source:"post",action:"consume",noun:"post"},{...p({fields:m(t),post:t,postIsTranslated:!!t.isPostTranslated,withTranslationMetrics:!0}),new_award:{id:t.awardId,is_content_eligible:Boolean(t.isAwardable)}}),a4:t=>e.b({source:l(t),action:"click",noun:"read_more"},m(t)),a5:function(t){return t===e.ah.Popular},a6:function(t){return t===e.ah.Home},a7:s,a8:e=>g(e,"share",_(e)),a9:e=>g(e,"share_copy",_(e)),aa:(o,n)=>{switch(t.g(o,"postClickLocation")){case e.eU.SUBREDDIT_LINK:return(e=>g(e,"subreddit",_(e)))(n);case e.eU.JOIN:return(e=>g(e,"subscribe",_(e)))(n);case e.eU.OVERFLOW_BUTTON:case e.eU.COMMENTS_BUTTON:case e.eU.VOTE:case e.eU.SHARE:case e.eU.VIDEO_PLAYER:return null;case e.eU.TEXT_BODY:return(e=>g(e,"text",_(e)))(n);case e.eU.DEVVIT_SURFACE:return(e=>g(e,"custom_post",_(e)))(n);default:return(e=>g(e,"post",_(e)))(n)}},ab:t=>e.b({source:l(t),action:"click",noun:"vote_try"},_(t)),ac:t=>e.b({source:"subreddit_hovercard",action:"view",noun:"hover_subreddit_hovercard"},m(t)),ad:t=>e.b({source:"user_hovercard",action:"view",noun:"hover_user_hovercard"},m(t)),ae:function(e){const t=e.match(i),o=t?.groups?.postId;if(o)return a(o)},af:(t,o)=>{const n=o?f(o):{};return e.b({source:"overflow_menu",action:"click",noun:"translate_comment"},{...n,comment:{...t,translation_language:t.translation_state?t.translation_language:"original"},action_info:{...n.action_info,reason:t.translation_state?e.bG.SEE_ORIGINAL:e.bG.SEE_TRANSLATION}})},b:t=>{const o=f(t);return e.b({source:"translate_button",action:"view",noun:"post"},{...o,action_info:{...o.action_info,reason:t.isPostTranslated?e.b9:e.ba}})},c:function(e){switch(e){case o.AggregateFeed:case o.SubredditFeed:case o.CustomFeed:case o.ListingBelowLinkedPosts:case o.ListingBelowSubredditPosts:case o.PopularFeed:case o.ProfileFeed:case o.ProfileFeed2:case o.BrandMentionFeed:case o.BrandPostPerformanceFeed:case o.ArticleDetails:case o.ModQueue:case o.ModQueueAll:case o.ModLog:case o.ModNotesRail:return!0;case o.CommentsPage:default:return!1}},d:"partial-update",e:a,f:function(e){return`https://www.redditmedia.com/mediaembed/${e.replace("t3_","")}/`},g:_,h:e=>e.startsWith("t3_"),i:function(e){return e===o.CommentsPage},j:p,k:m,l:t=>e.b({source:l(t),action:"click",noun:"clearvote"},m(t)),m:t=>e.b({source:l(t),action:"click",noun:"downvote"},{...p({fields:m(t),post:t,postIsTranslated:!!t.isPostTranslated,withTranslationMetrics:!0})}),n:t=>e.b({source:l(t),action:"view",noun:"post"},f(t)),o:t=>{const o=f(t);return e.b({source:"translate_button",action:"click",noun:"post_indicator"},{...o,action_info:{...o.action_info,reason:t.isPostTranslated?e.bG.SEE_ORIGINAL:e.bG.SEE_TRANSLATION}})},p:(t,o)=>e.b({source:"translate_button",action:"view",noun:"post"},p({fields:m(t),post:t,postIsTranslated:o,reason:o?"on":"off"})),q:function(e){const t=(e?.getAttribute("href")||"").match(h),o=t?.groups?.postId;return o?a(o):""},r:e=>g(e,"view_all_comments",_(e)),s:t=>e.b({source:"event_post",action:"click",noun:"rsvp"},{..._(t),...b(t.impressionId,t.placement)}),t:t=>e.b({source:"event_post",action:"click",noun:"un_rsvp"},{..._(t),...b(t.impressionId,t.placement)}),u:t=>e.b({source:l(t),action:"click",noun:"upvote"},{...p({fields:m(t),post:t,postIsTranslated:!!t.isPostTranslated,withTranslationMetrics:!0})}),v:e=>g(e,"comments",_(e)),w:"flex",x:t=>e.b({source:"translate_button",action:"view",noun:"post_banner"},f(t.post)),y:t=>{const o=f(t.post);return e.b({source:"translate_button",action:"click",noun:"post_banner"},{...o,action_info:{...o.action_info,reason:t?.isPostTranslated?e.bG.SEE_ORIGINAL:e.bG.SEE_TRANSLATION},is_mod:t.isMod})},z:t=>e.b({source:u(t),action:"click",noun:"post_overflow_menu"})}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("DS7BJDdq",["s_Igk1Yn"],(async a=>{const{svg:c}=a.g();return{m:a.m(c`<path d="M8.519 17H4.302a3.3 3.3 0 01-3.3-3.3V6.3a3.3 3.3 0 013.3-3.3h11.4a3.3 3.3 0 013.3 3.3v3.043a9.597 9.597 0 00-1.8-.755V6.957l-1.499 1.33a9.603 9.603 0 00-1.201-.086 9.58 9.58 0 00-1.572.141l3.657-3.245a1.49 1.49 0 00-.885-.296h-11.4c-.332 0-.636.112-.885.296L8.74 9.82c.074.066.155.121.236.173a2.31 2.31 0 00-.763 1.635 3.627 3.627 0 01-.667-.461l-4.744-4.21V13.7c0 .827.673 1.5 1.5 1.5h3.9v.114c0 .607.122 1.166.317 1.686zm5.983-5.2c-.942 0-1.863.219-2.7.639v2.875c0 .924 1.284 2.016 2.7 2.741 1.416-.725 2.7-1.817 2.7-2.741v-2.875a6.022 6.022 0 00-2.7-.639zm0-1.8a7.81 7.81 0 014.259 1.26.54.54 0 01.241.453v3.6c0 2.61-3.499 4.289-4.326 4.649a.425.425 0 01-.348 0c-.827-.36-4.326-2.039-4.326-4.649v-3.6c0-.182.089-.355.241-.453A7.805 7.805 0 0114.502 10z"></path>`,"0 0 20 20","mod-mail",!0)}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("DSgcmNT3",["s_Igk1Yn"],(async s=>{const{svg:a}=s.g();return{a:s.m(a`<path d="M17.1 9.1h-6.2V2.9c0-.5-.4-.9-.9-.9s-.9.4-.9.9v6.2H2.9c-.5 0-.9.4-.9.9s.4.9.9.9h6.2v6.2c0 .5.4.9.9.9s.9-.4.9-.9v-6.2h6.2c.5 0 .9-.4.9-.9s-.4-.9-.9-.9z"></path>`,"0 0 20 20","add")}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./jOi_w9kT.js",import.meta.url,"jOi_w9kT");
SML.dm("DWhQjF7E",["GlDbwxoG","s_Igk1Yn","jOi_w9kT"],(async(e,t,i)=>{const a={checkbox:()=>"This checkbox must be on",radio:()=>"This radio must have a selected option"};class n extends i.F{constructor(){super(...arguments),this.required=!1,this.name="",this.initialized=!1,this._events=new e.E(this),this.ariaRole="checkbox",this._checked=!1,this.ellipsis=!1,this._handleClick=this._events.define("click",(e=>{this.disabled||e.defaultPrevented||this.handleInteraction()})),this._handleKeydown=this._events.define("keydown",(e=>{this.disabled||e.defaultPrevented||"Space"===e.code&&(e.stopPropagation(),e.preventDefault(),this.handleInteraction())}))}get checked(){return this._checked}set checked(e){const t=this._checked;e!==t&&(this._internals.setFormValue(e?this.getAttribute("value")||"on":null),this._checked=e,e?this.setAttribute("aria-checked","true"):this.removeAttribute("aria-checked"),this.hasAttribute("required")&&!this.checked?this._internals.setValidity({valueMissing:!0},a[this.ariaRole]()):this._internals.setValidity(),this.requestUpdate("checked",t))}static get styles(){return[super.styles,t.i`:host(:not(faceplate-switch-input)){min-height:var(--size-md)}:host{display:flex;align-items:center;cursor:pointer}label{font:var(--font-14-20-regular);color:var(--color-neutral-content-strong);margin-left:var(--spacer-2xs);cursor:pointer}.icon{border:var(--line-md) solid transparent;height:var(--size-md);font-size:var(--size-md);flex-shrink:0}:host([checked]) .icon,:host([indeterminate]) .icon{display:inline-block;color:var(--color-primary-background)}:host(:hover) .icon{color:var(--color-primary-background-hover)}:host([faceplate-validity=invalid]) .icon{color:var(--color-danger-content);pointer-events:none}:host([aria-disabled=true]) .icon{color:var(--color-neutral-content-disabled);pointer-events:none}:host([ellipsis]) label{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host([required]) label::after{position:absolute;color:var(--color-danger-content);content:'*'}:host(:focus) .icon{border-color:var(--color-global-focus,transparent);outline:0}:host(:focus){outline:0}:host(:focus:not(:focus-visible)) .icon{border-color:transparent}`]}connectedCallback(){super.connectedCallback(),this.initialized||(this.initialized=!0,this.setAttribute("role",this.ariaRole),this.setAttribute("tabindex","0"))}formDisabledCallback(e){super.formDisabledCallback(e),e?this.removeAttribute("tabindex"):this.setAttribute("tabindex","0")}render(){return t.x` ${super.render()} <label> <slot></slot> </label> `}handleInteraction(){const e=new InputEvent("input",{bubbles:!0});this.dispatchEvent(e)}}return e._([e.n({type:Boolean})],n.prototype,"required",void 0),e._([e.n({type:String})],n.prototype,"name",void 0),e._([e.n({type:Boolean,reflect:!0})],n.prototype,"checked",null),e._([e.n({type:Boolean})],n.prototype,"ellipsis",void 0),{C:n}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./Csfdzp9J.js",import.meta.url,"Csfdzp9J");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("DWwkEB7i",["GlDbwxoG","Csfdzp9J","s_Igk1Yn"],(async(t,e,i)=>{let d=class extends i.s{constructor(){super(...arguments),this.subredditName="",this.pageId=e.E.Main,this.openModal=async()=>{await this._activateCommunityWidgetEditModalFeature();const t=document.querySelector(`community-widget-edit-modal#${e.C}`);t?.showModal({pageId:this.pageId,widgetId:this.widgetId})},this.onClick=()=>{this.openModal()},this.onKeyPress=t=>{"Enter"!==t.key&&"Space"!==t.key||this.openModal()}}static get styles(){return[t.t]}_activateCommunityWidgetEditModalFeature(){return t.j({name:t.x,routeParams:{subreddit:this.subredditName}})}render(){return i.x`<slot @click="${this.onClick}" @keypress="${this.onKeyPress}"></slot>`}};t._([t.n({type:String,attribute:"subreddit-name"})],d.prototype,"subredditName",void 0),t._([t.n({type:String,attribute:"page-id"})],d.prototype,"pageId",void 0),t._([t.n({type:String,attribute:"widget-id"})],d.prototype,"widgetId",void 0),d=t._([t.e("community-widget-edit-button")],d)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");
SML.dm("DYu9Ek9m",["GlDbwxoG"],(async t=>{const e={next:"nextElementSibling",prev:"previousElementSibling"};var r,s;!function(t){t.FEED="feed",t.COMMENTS_PAGE="comments_page"}(r||(r={})),function(t){t.NEXT="next",t.PREV="prev"}(s||(s={}));return{get P(){return s},a:class{constructor(s,n){this.cache={},this.isPostOrComment=t=>["shreddit-comment","shreddit-post","shreddit-ad-post","shreddit-profile-comment"].includes(t?.tagName.toLowerCase()??""),this.traverse=t=>{const e=this.current;this._current?this.findPostOrComment(t):this._current=this.options.getFirstElement(),this.focusElement(e)},this.focusElement=e=>{if(!this.current||e===this.current)return;const s=document.activeElement;this.current?.onHotkeysFocus?this.current.onHotkeysFocus?.({preventScroll:!0}):this.current.hotkeyController?.onFocus?.({preventScroll:!0}),s===document.activeElement&&t.aQ(this.current)?.focus(),this.current.style.scrollMarginTop="var(--shreddit-header-height)";const n=this.isCurrentComment?"start":this.options.type===r.COMMENTS_PAGE?"end":"center";this.current.scrollIntoView({behavior:"instant",block:n})},this.findPostOrComment=t=>{let r=this._current;for(let s=0;r&&s<this.options.maxTraversalCount;s++){const s=r,n=this.options.customTraversal?.(t,r);if(r=n??r?.[e[t]]??s.parentElement?.[e[t]],this.options?.customPostOrCommentDetection?.(r)||this.isPostOrComment(r)){this._current=r;break}}},this.host=s,this.host.addController(this),this.options={maxTraversalCount:10,...n}}hostConnected(){}hostDisconnected(){}get current(){return this._current!==this.cache?.rawElement&&(this.cache={rawElement:this._current,postOrComment:this.options?.customPostOrCommentDetection?.(this._current)??this._current}),this.cache?.postOrComment}get isCurrentPost(){return["shreddit-post","shreddit-ad-post"].includes(this.current?.tagName.toLowerCase()??"")}get isCurrentComment(){return"shreddit-comment"===(this.current?.tagName.toLowerCase()??"")}get isCurrentProfileComment(){return"shreddit-profile-comment"===(this.current?.tagName.toLowerCase()??"")}},get b(){return r}}}));
SML.di("./Dg8LS6-X.js",import.meta.url,"Dg8LS6-X");SML.di("./R9fABxJD.js",import.meta.url,"R9fABxJD");SML.di("./DIbtn8u6.js",import.meta.url,"DIbtn8u6");SML.di("./BmAQnYV7.js",import.meta.url,"BmAQnYV7");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./OimaI6pY.js",import.meta.url,"OimaI6pY");
SML.dm("DbLQhpG3",["GlDbwxoG","Dg8LS6-X","R9fABxJD","DIbtn8u6","BmAQnYV7","s_Igk1Yn","CC2wUKE8","OimaI6pY"],(async E=>{E.g()&&(SML.di("./BxrdbYH0.js",import.meta.url,"BxrdbYH0"),SML.di("./BStIBDbi.js",import.meta.url,"BStIBDbi"),SML.di("./DFnY80Al.js",import.meta.url,"DFnY80Al"))}));
SML.dm("DdIwQUSk",[],(async()=>{var e,n;return function(e){e.READY="ready",e.EMPTY="empty"}(e||(e={})),function(e){e.SUCCESS="success"}(n||(n={})),{get R(){return n},get S(){return e}}}));

SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");
SML.dm("DdoeBlGT",["GlDbwxoG"],(async t=>{var e,i;!function(t){t.FocusSearchBar="focusSearchBar",t.RegisterAuth="registerAuth",t.UpvoteAuth="upvoteAuth"}(e||(e={})),function(t){t.Sort="sort",t.Filter="filter",t.EntityFilterId="entityFilterId",t.InlineRefresh="inline-refresh",t.SctTopLevelComment="sct-top-level-comment",t.ForceLegacySCT="force-legacy-sct"}(i||(i={}));const n=/(\.|\/\/)(reddit\.com|snoo\.dev|redditstatic\.com|redd\.it|redditmedia\.com)$/;class r extends t.b2{constructor(e,i){super(e),this.events=new t.E(this,(()=>this._host)),this.handleMouseClick=(t,e)=>{if(t.isLinkClickHandled)return;const i=t.composedPath();for(const n of i){if(!(n instanceof HTMLAnchorElement))continue;const i=n.getAttribute("href")||"";if(this.isOutboundUrl(i))return this.trackOutboundLinkClick(i,e),void(t.isLinkClickHandled=!0)}},this.events.define("click",(t=>{this.handleMouseClick(t,i())}))}isOutboundUrl(t){if(t.startsWith("/"))return!1;try{return null==new URL(t).origin.match(n)}catch(t){return!1}}trackOutboundLinkClick(e,i){t.f(this._host,this.outboundLinkClickEvent(e,i))}outboundLinkClickEvent(e,i){return t.b({source:"link",action:"click",noun:"outbound_link"},{outbound:{url:e},action_info:{page_type:i.pageType},...i.postId?{post:{id:i.postId}}:{},...i.subredditId?{subreddit:{id:i.subredditId}}:{},...i.commentId?{comment:{id:i.commentId}}:{}})}}return{get M(){return e},O:r,P:"pdp-chained-right-rail-related-posts",R:"right-rail-entity-panel-root",S:"#subreddit-right-rail-tabs",a:"remove-flair",get b(){return i},g:function(t){return`update-post-flair-modal-${t}`}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CU4mObWU.js",import.meta.url,"CU4mObWU");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("DfxFL9aq",["GlDbwxoG","s_Igk1Yn","CU4mObWU","CC2wUKE8"],(async(e,t,i,o)=>{const s=(e,t,{parentBoundary:i=document.documentElement,root:a=document,cache:n=new Set})=>{const r=a.elementsFromPoint(e,t),h=[];for(const e of r)if(!n.has(e)){if(!o.$(i,e))break;h.push(e),n.add(e)}const l=[];for(const i of h)i.shadowRoot&&l.push(...s(e,t,{parentBoundary:i,root:i.shadowRoot,cache:n}));return[...h,...l]};class a{get inSwipe(){return this._inSwipe}set inSwipe(e){this._inSwipe!==e&&(this._inSwipe=e,this.host.requestUpdate("inSwipe",!this._inSwipe))}constructor(e,{recognitionThreshold:t=10,mouseSupport:i=!1}={recognitionThreshold:10,mouseSupport:!1}){this.host=e,this.mouseSupport=!1,this.rafId=null,this._inSwipe=!1,this.protectScrollInterference=!0,this.recognitionThreshold=t,this.mouseSupport=i}clearRaf(){this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=null)}addListeners(e){this.gesture=new i.T(e,{mouseSupport:this.mouseSupport}),this.gesture.on("panstart",this.handleTouchStart.bind(this)),this.gesture.on("panmove",this.handleTouchMove.bind(this)),this.gesture.on("panend",this.handleTouchEnd.bind(this))}removeListeners(){this.gesture?.destroy()}reset(){const e=this.gesture?.element;e&&(this.removeListeners(),this.addListeners(e))}handleTouchStart(e){this.clearRaf(),this.gesture&&this.host.handleSwipeMayStart?.(this.gesture)}handleTouchMove(t){if(this.clearRaf(),!this.gesture)return;const i=(this.gesture.touchMoveY??0)<=0;if(!this.inSwipe&&Math.abs((this.gesture.touchStartY??0)-(this.gesture.touchEndY??0))>this.recognitionThreshold){if(this.protectScrollInterference){const[o,a]=n(t),r=s(o,a,{parentBoundary:this.gesture.element}).filter((t=>t instanceof HTMLElement&&e.hC(t)));if(i&&r.some((t=>!e.hD(t)))||!i&&r.some((t=>!e.hE(t))))return this.reset()}!1!==this.host.handleSwipeWillStart?.({...this.gesture,swipeDirection:i?"up":"down"})?(this.inSwipe=!0,this.host.handleSwipeProgress?.({...this.gesture,swipeDirection:i?"up":"down"})):this.reset()}this.inSwipe&&this.gesture&&(this.rafId=requestAnimationFrame((()=>{this.host.handleSwipeProgress?.({...this.gesture,swipeDirection:i?"up":"down"})})))}handleTouchEnd(e){this.gesture&&(this.clearRaf(),this.inSwipe=!1,this.host.handleSwipeEnd?.(this.gesture))}disableScrollInterferenceProtection(){this.protectScrollInterference=!1}enableScrollInterferenceProtection(){this.protectScrollInterference=!0}}const n=e=>e instanceof MouseEvent?[e.clientX,e.clientY]:[e.touches[0].clientX,e.touches[0].clientY],r="expanded",h="normal",l="docked";var d=t.i`${e.Z}:host{--transition-duration:250ms;display:contents}.dialog{--bottom-sheet-docked-height:'auto';--bottom-sheet-normal-height:'auto';--bottom-sheet-height:var(--bottom-sheet-normal-height)}.dialog{--bottom-sheet-expanded-height:85vh}@supports (height:95dvh){.dialog{--bottom-sheet-expanded-height:95dvh}}.dialog.state-normal{--bottom-sheet-height:1fr}.dialog.state-docked{--bottom-sheet-height:var(--bottom-sheet-docked-height)}.dialog.state-expanded{--bottom-sheet-height:var(--bottom-sheet-expanded-height)}.dialog{display:flex;align-items:center;justify-content:center;position:fixed;inset:0;z-index:var(--z-index-dialog,1000);user-select:none;pointer-events:none;width:100vw}.dialog-panel{display:grid;grid-template-rows:auto var(--bottom-sheet-height);grid-auto-flow:column;position:fixed;z-index:2;bottom:0;right:0;touch-action:none;transform:translateY(100%);max-height:var(--bottom-sheet-expanded-height);width:100%;background-color:var(--color-ui-modalbackground);border-start-start-radius:var(--radius-md);border-start-end-radius:var(--radius-md);box-shadow:var(--boxshadow-modal);transition:--bottom-sheet-height var(--transition-duration) ease,grid-template-rows var(--transition-duration) ease,transform var(--transition-duration) ease}.dialog.reflect-gesture .dialog-panel{grid-template-rows:auto var(--bottom-sheet-forced-height);transition:none}.dialog-variant-plain .dialog-panel{max-width:100%;max-height:100%;background-color:transparent;border-radius:initial;box-shadow:initial}.dialog-panel:focus{outline:0}.dialog-open{user-select:auto}.dialog-open .dialog-overlay,.dialog-open .dialog-panel{pointer-events:auto}.dialog-open .dialog-panel{opacity:1;transform:translateY(0)}.dialog-overlay{position:fixed;inset:0;background-color:rgba(0,0,0,.5)}.dialog-overlay-blur{backdrop-filter:blur(var(--dialog-backdrop-blur, 4px))}.dialog-overlay-no-modal{display:none}.handle-container{display:flex;justify-content:center;align-items:flex-end;width:100%}.handle-container-inside{--handle-color:var(--color-neutral-border);padding-top:var(--rem8);padding-bottom:var(--rem4)}.handle-container-outside{--handle-color:var(--color-global-white);padding-bottom:var(--rem8);padding-top:var(--rem4);position:relative;top:-16px}.handle{display:block;background:var(--handle-color);width:var(--rem48);height:var(--rem4);border-radius:10000rem}`;let c=class extends e.hF{constructor(){super(...arguments),this.resizeController=new e.hG(this,{callback:()=>this.updateDimensions,elements:{slottedElement:()=>this.slottedElement,styledDialogChildWithHeader:()=>this.styledDialogChildWithHeader,panel:()=>this.panelRef.value}}),this.gestureController=new a(this,{recognitionThreshold:10}),this.slottedElement=null,this.styledDialogChildWithHeader=null,this.handleContainer=e.U(),this.animationNames={show:"bottomSheet.show",hide:"bottomSheet.hide",denyClose:"bottomSheet.denyClose",denyExpand:"bottomSheet.denyExpand",overlayShow:"bottomSheet.overlay.show",overlayHide:"bottomSheet.overlay.hide"},this.openState=h,this.dockable=!1,this.expandable=!1,this.handleDockButtonClicked=e=>{e.stopPropagation(),this.open&&(this.isDocked?this.undock():this.dock())},this.updateDimensions=async e=>{const t=this.slottedElement;t&&e.some((e=>e.target===t))&&this.slottedElement&&this.styledDialogChildWithHeader&&this.updateDockedHeight(),this.requestUpdate(),this.emitter.dispatch("resize")}}get isDocked(){return this.openState===l}get isExpanded(){return this.openState===r}get isNormal(){return this.openState===h}addOpenListeners(){super.addOpenListeners(),this.resizeController.observeAllElements(),this.portalContainer.addEventListener("rpl-modal-card:dock-button-clicked",this.handleDockButtonClicked),this.panelRef.value&&this.gestureController.addListeners(this.panelRef.value)}removeOpenListeners(){super.removeOpenListeners(),this.resizeController.unobserveAllElements(),this.gestureController.removeListeners(),this.portalContainer.removeEventListener("rpl-modal-card:dock-button-clicked",this.handleDockButtonClicked)}willUpdate(e){return e.has("dockable")&&!this.dockable&&this.isDocked&&(this.dockable=!0),e.has("expandable")&&!this.expandable&&this.isExpanded&&(this.expandable=!0),e.has("openState")&&this.isExpanded&&!this.expandable&&(this.openState=e.get("openState")??h),e.has("openState")&&this.isDocked&&!this.dockable&&(this.openState=e.get("openState")??h),(e.get("openState")||e.get("dockable"))&&this.styledDialogChildren.size>0&&this.styledDialogChildren.forEach((e=>{e.dockable=this.dockable,e.docked=this.isDocked})),e.has("openState")&&(this.isDocked?this.gestureController.disableScrollInterferenceProtection():this.gestureController.enableScrollInterferenceProtection()),super.willUpdate(e)}getCachedHeightContainer(e){return["forced","forcedInitial"].includes(e)?this.panelRef.value:this.dialogRef.value}setCachedHeight(e,t){this.getCachedHeightContainer(e)?.style.setProperty(p[e],t)}getCachedHeight(e){const t=this.getCachedHeightContainer(e);return t?getComputedStyle(t).getPropertyValue(p[e])??"auto":"auto"}async updateDockedHeight(){if(!this.styledDialogChildWithHeader)return;if(await e.hH(this.styledDialogChildWithHeader),!this.styledDialogChildWithHeader)return;const t=this.styledDialogChildWithHeader.headerHeight,i=this.handleContainer.value?.clientHeight??16;t&&this.setCachedHeight("docked",`${t+i}px`)}async expand(){if(!this.open||!this.expandable||this.isExpanded||!this.panelRef.value)return;!this.emitter.dispatch("open-state-changed",{cancelable:!0,detail:{openState:r}})||(this.openState=r)}async collapse(){if(!this.open||!this.isExpanded||!this.panelRef.value)return;!this.emitter.dispatch("open-state-changed",{cancelable:!0,detail:{openState:h}})||(this.openState=h)}async dock(){if(!this.open||!this.dockable||this.isDocked||!this.panelRef.value)return;!this.emitter.dispatch("open-state-changed",{cancelable:!0,detail:{openState:l}})||(this.openState=l)}async undock(){if(!this.open||!this.isDocked||!this.panelRef.value)return;!this.emitter.dispatch("open-state-changed",{cancelable:!0,detail:{openState:h}})||(this.openState=h)}handleSwipeMayStart(){this.setCachedHeight("forcedInitial",`${this.panelRef?.value?.clientHeight}px`),this.setCachedHeight("forced",`var(${p.forcedInitial})`)}handleSwipeWillStart({swipeDirection:e}){return!("down"===e&&this.blocking&&!this.isExpanded||"up"===e&&!this.expandable)}handleSwipeProgress({swipeDirection:e,touchMoveY:t}){null===t||this.isExpanded&&"up"===e||this.setCachedHeight("forced",`calc(var(${p.forcedInitial}) - ${t??0}px)`)}handleSwipeEnd({touchMoveY:t,thresholdY:i}){if(!this.open||null==t)return;const o=t>=i,s=t<=-i;if(o&&this.isExpanded)this.collapse();else if(o&&this.isNormal)this.requestClose("gesture");else if(s&&this.isDocked)this.undock();else if(s&&this.isNormal&&this.expandable)this.expand();else if(s&&!this.isExpanded&&!this.expandable&&this.panelRef.value){const{keyframes:t,options:i}=e.bM(this,this.animationNames.denyExpand);e.bN(this.panelRef.value,t,i)}}handleSlotChange(e){this.styledDialogChildWithHeader=null,this.slottedElement=this.portalContainer.firstElementChild,this.slottedElement&&this.resizeController.replaceObservedElement("slottedElement")}handleDialogChildConnected(t){t.appearance="bottom-sheet",t.dockable=this.dockable,t.docked="docked"===this.openState,e.hI(t)&&"headerHeight"in t&&(this.styledDialogChildWithHeader=t,this.resizeController.replaceObservedElement("styledDialogChildWithHeader"),this.updateDockedHeight())}handleDialogChildDisconnected(e){}renderDialogBaseClasses(){return{"reflect-gesture":this.gestureController.inSwipe,[`state-${this.openState}`]:!0}}renderTopOfDialog(){return t.x`<div class="${e.H({"handle-container":!0,["handle-container-"+(this.open&&this.modal.disableFocusTrap?"inside":"outside")]:!0})}" part="handle-container" ${e.V(this.handleContainer)}> <div class="handle"></div> </div>`}};c.styles=d,e._([e.n({type:String,reflect:!0,attribute:"open-state"})],c.prototype,"openState",void 0),e._([e.n({type:Boolean,reflect:!0})],c.prototype,"dockable",void 0),e._([e.n({type:Boolean,reflect:!0})],c.prototype,"expandable",void 0),c=e._([e.e("rpl-bottom-sheet")],c);const p={forced:"--bottom-sheet-forced-height",forcedInitial:"--bottom-sheet-forced-initial-height",currentHeight:"--bottom-sheet-current-height",[l]:"--bottom-sheet-docked-height"},u=250;return e.bJ("bottomSheet.show",{keyframes:[{opacity:0,transform:"translateY(100%)"},{opacity:1,transform:"translateY(0%)"}],options:{duration:u,easing:"ease"}}),e.bJ("bottomSheet.hide",{keyframes:[{opacity:1,transform:"translateY(0%)",maxHeight:"var(--bottom-sheet-forced-height)"},{opacity:0,transform:"translateY(100%)",maxHeight:"var(--bottom-sheet-forced-height)"}],options:{duration:u,easing:"ease"}}),e.bJ("bottomSheet.denyClose",{keyframes:[{transform:"translateY(0%)"},{transform:"translateY(4%)"},{transform:"translateY(0%)"}],options:{duration:u,easing:"ease-in"}}),e.bJ("bottomSheet.denyExpand",{keyframes:[{height:"var(--bottom-sheet-forced-height)"},{height:"var(--bottom-sheet-height)",transform:"translateY(0%)",offset:.2},{height:"var(--bottom-sheet-height)",transform:"translateY(4%)",offset:.5},{height:"var(--bottom-sheet-height)",transform:"translateY(0%)"}],options:{duration:375,easing:"ease-in"}}),e.bJ("bottomSheet.overlay.show",{keyframes:[{opacity:0},{opacity:1}],options:{duration:u}}),e.bJ("bottomSheet.overlay.hide",{keyframes:[{opacity:1},{opacity:0}],options:{duration:u}}),{get R(){return c}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("Dg8LS6-X",["GlDbwxoG","s_Igk1Yn"],(async(t,e)=>{var r;!function(t){t.Error="error",t.Success="success",t.Incomplete="incomplete"}(r||(r={}));const s=a(16);function o(t,e){return t-e/100*t}function a(t){return 2*Math.PI*t}let c=class extends e.s{constructor(){super(...arguments),this.value=0,this.status=r.Incomplete}static get styles(){return e.i`:host{--loader-size-base:var(--rem40);display:inline-block;position:relative}:host([status=incomplete]){color:var(--color-neutral-content,var(--color-tone-1))}:host([status=success]){color:var(--color-success-content,var(--color-alert-positive))}:host([status=error]){color:var(--color-danger-content,var(--color-alert-negative))}svg{height:var(--loader-size,var(--loader-size-base));width:var(--loader-size,var(--loader-size-base));fill:none;stroke-width:8;display:block}.bg{stroke:var(--color-neutral-content-disabled,var(--color-tone-3))}.track{stroke:currentColor;transition:.35s stroke-dashoffset;transform:rotate(-90deg);transform-origin:50% 50%}.icon{position:absolute;inset-inline-start:50%;top:50%;transform:translate(-50%,-50%)}::slotted([slot=error]),::slotted([slot=success]){display:flex}`}render(){const t=this.status===r.Success;return e.x` <svg viewBox="0 0 40 40" class="loader" xmlns="http://www.w3.org/2000/svg"> <circle class="bg" cx="20" cy="20" r="${16}"></circle> <circle class="track ${this.status}" cx="20" cy="20" r="${16}" stroke-dasharray="${s} ${s}" stroke-dashoffset="${o(s,t?100:this.value)}"></circle> </svg> <div class="icon"> <slot name="${this.status}"></slot> </div> `}};t._([t.n({type:Number})],c.prototype,"value",void 0),t._([t.n({type:String,reflect:!0})],c.prototype,"status",void 0),c=t._([t.e("faceplate-progress")],c);var l=Object.freeze({__proto__:null,get FaceplateProgress(){return c},get ProgressState(){return r},calcCircumference:a,calcStokeDashOffset:o});return{get f(){return l}}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("DgY18AyY",["s_Igk1Yn"],(async a=>{const{svg:t}=a.g();return{t:a.m(t`<path d="M10.983 12.232a8.332 8.332 0 01-3.458-1.892c1.011-1.324 1.856-3.096 2.312-5.465h1.606a.9.9 0 000-1.8H7.204v-.762a.902.902 0 00-1.804 0v.762H1.16a.9.9 0 000 1.8h1.606c.456 2.368 1.301 4.141 2.312 5.465A8.357 8.357 0 01.97 12.382a.901.901 0 00.158 1.786.875.875 0 00.16-.015 10.234 10.234 0 005.013-2.474 10.207 10.207 0 004.682 2.405v-1.852zm-6.38-7.358h3.4c-.374 1.712-.979 3.046-1.7 4.073-.723-1.027-1.328-2.361-1.7-4.073zM18.016 10.8h-1.8c.428.429.877.879 1.073 1.07l.005.008a4.572 4.572 0 011.345 3.255A3.871 3.871 0 0114.773 19a.9.9 0 010-1.8c1.14 0 2.067-.927 2.067-2.067a2.75 2.75 0 00-.817-1.982l-.005-.007c-.212-.208-.69-.688-1.136-1.133v1.923a.9.9 0 01-1.8 0V9.899a.9.9 0 01.9-.9h4.034a.9.9 0 010 1.8l.001.001z"></path>`,"0 0 20 20","translate-off")}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("DhQW5pQL",["s_Igk1Yn"],(async a=>{const{svg:c}=a.g();return{P:"pagination__change-page",c:a.m(c`<path d="M4.21 9.95c-.31 0-.61-.12-.85-.35L.58 6.82a.706.706 0 010-.99c.27-.27.72-.27.99 0l2.64 2.64 6.22-6.22c.27-.27.72-.27.99 0s.27.72 0 .99L5.06 9.6c-.23.23-.54.35-.85.35z"></path>`,"0 0 12 12","checkmark-12")}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("DhiXEqBo",["GlDbwxoG","s_Igk1Yn"],(async(e,s)=>{var r;!function(e){e.Search="search",e.PostDetail="post_detail"}(r||(r={}));class t{constructor(s,t,i=r.Search){this.checkAndSendImpressionEvent=s=>{if(!s.search?.impression_id)return;const{search:r,action_info:t}=s,i=JSON.parse(sessionStorage.getItem("search_impression_cache")||"[]"),o=new Set([...i]);if(o.has(r.impression_id)||!this.searchTelemetrySource)return;o.add(r.impression_id),sessionStorage.setItem("search_impression_cache",JSON.stringify([...o]));const c=e.b({source:this.source,action:"create",noun:"impression_id"},{...s,search:{...r,impression_id:r.impression_id},action_info:{...t,type:this.searchTelemetrySource}});e.f(this.host,c)},(this.host=s).addController(this),this._v2Events=new e.gs(this.host,(e=>{this.checkAndSendImpressionEvent(e)})),this.source=i,this.searchTelemetrySource=t}hostConnected(){}}let i=class extends s.s{constructor(){super(...arguments),this.isPdpSeekerM2=!1,this._searchDynamicIdCacheController=new t(this,this.searchTelemetrySource,this.source)}get source(){return this.isPdpSeekerM2?r.PostDetail:r.Search}willUpdate(e){e.has("searchTelemetrySource")&&(this._searchDynamicIdCacheController.searchTelemetrySource=this.searchTelemetrySource),e.has("isPdpSeekerM2")&&(this._searchDynamicIdCacheController.source=this.source)}createRenderRoot(){return this}};return e._([e.n({attribute:"search-telemetry-source",type:String})],i.prototype,"searchTelemetrySource",void 0),e._([e.n({attribute:"is-pdp-seeker-m2",type:Boolean})],i.prototype,"isPdpSeekerM2",void 0),i=e._([e.e("search-dynamic-id-cache-controller")],i),{S:t}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("Dhnopfuf",["GlDbwxoG","s_Igk1Yn"],(async(r,a)=>{const n={Neutral:"neutral",Success:"success",Warning:"warning",Danger:"danger",Alert:"alert",Plain:"plain",Disabled:"disabled"};class o extends r.R{constructor(){super(...arguments),this.appearance=n.Neutral,this.outline=!1,this._hasContent=!1}render(){return a.x`<span class="container"> <slot class="${r.H({"with-content":this._hasContent,"without-content":!this._hasContent})}" @slotchange="${r=>{this._hasContent=!!r.target.assignedNodes().length}}"></slot> </span>`}}r._([r.n({type:String,reflect:!0})],o.prototype,"appearance",void 0),r._([r.n({type:Boolean})],o.prototype,"outline",void 0),r._([r.N()],o.prototype,"_hasContent",void 0);var e=a.i`${r.Z}:host{border-radius:var(--radius-full);display:inline-flex}.with-content{min-width:inherit;min-height:var(--size-md);display:inline-block}.without-content{width:inherit;height:var(--size-xs)}.container{font-weight:600;display:inline-block;font-size:var(--rem10);text-align:center;padding:0 var(--spacer-2xs);line-height:var(--rem16);min-width:var(--size-xs);min-height:var(--size-xs)}:host([outline]){border:solid var(--line-md) var(--color-neutral-background)}:host([appearance=warning]){background:var(--color-warning-background);color:var(--color-neutral-background)}:host([appearance=alert]){background:var(--color-global-orangered);color:var(--color-primary-onBackground)}:host([appearance=danger]){background:var(--color-danger-background);color:var(--color-primary-onBackground)}:host([appearance=success]){background:var(--color-success-background);color:var(--color-primary-onBackground)}:host([appearance=neutral]){background:var(--color-neutral-content);color:var(--color-neutral-background)}:host([appearance=plain]){background:var(--color-neutral-background);color:var(--color-neutral-content)}:host([appearance=disabled]){background:var(--color-interactive-content-disabled);color:var(--color-neutral-background)}`;let t=class extends o{};return t.styles=e,t=r._([r.e("rpl-badge")],t),{R:n}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./HYbNa5uQ.js",import.meta.url,"HYbNa5uQ");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./WQnubpt7.js",import.meta.url,"WQnubpt7");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./C_IM__d6.js",import.meta.url,"C_IM__d6");SML.di("./BUDNGNBQ.js",import.meta.url,"BUDNGNBQ");SML.di("./DhiXEqBo.js",import.meta.url,"DhiXEqBo");SML.di("./DdoeBlGT.js",import.meta.url,"DdoeBlGT");SML.di("./dPq6CuSA.js",import.meta.url,"dPq6CuSA");SML.di("./CdFYkV-r.js",import.meta.url,"CdFYkV-r");SML.di("./B5upT-N6.js",import.meta.url,"B5upT-N6");SML.di("./BbX3H2B5.js",import.meta.url,"BbX3H2B5");SML.di("./Baruuhvw.js",import.meta.url,"Baruuhvw");
SML.dm("DhparPOY",["GlDbwxoG","HYbNa5uQ","DRM-oTYq","s_Igk1Yn","CC2wUKE8","BUDNGNBQ","DhiXEqBo","DdoeBlGT","dPq6CuSA","CdFYkV-r","B5upT-N6","WQnubpt7","C_IM__d6","BbX3H2B5","Baruuhvw"],(async(e,t,n,r,i,a,s,o,l,m,c)=>{let h=window.location,d=class extends r.s{constructor(){super(...arguments),this.commentId="",this.parentCommentPermalink="",this.postPermalink="",this.isInModQueue=!1,this.onLinkClick=(t,n)=>{this.isInModQueue&&(t.stopPropagation(),t.preventDefault(),e.p?.(e.T.ModQueuePdpLinkClick,{isFullDiscussionLink:n,parentCommentPermalink:this.parentCommentPermalink,postPermalink:this.postPermalink}))}}static get styles(){return[e.t,e.J(".single-comment-thread-toolbar {\n  align-items: center;\n  display: flex;\n  flex-flow: row nowrap;\n  font: var(--font-title-h6);\n  justify-content: space-between;\n  padding: 0.5rem 1rem;\n}\n")]}firstUpdated(){this.updateComplete.then((()=>{if(this.isInModQueue)return;"1"===new URLSearchParams(h.search).get("draft")||t.s("auto")}))}handleSeeFullDiscussionLink(t){this.onLinkClick(t,!0);const r=document.querySelector("shreddit-post");r&&e.f(this,n.r(r))}render(){if(!this.commentId)return;const e=this.isInModQueue?"View parent comment":"Single comment thread",t="no-underline hover:no-underline visited:no-underline text-primary";return r.x` <div> <div class="single-comment-thread-toolbar text-neutral-content-weak"> ${this.parentCommentPermalink?r.x` <a href="${this.parentCommentPermalink}" class="${t}" @click="${this.onLinkClick}"> ${e} </a> `:r.x` <span>${e}</span> `} <span class="flex-1 h-px mx-xs bg-tone-4" data-id="line"></span> <a href="${this.postPermalink}" class="${t}" @click="${this.handleSeeFullDiscussionLink}"> ${"See full discussion"} </a> </div> </div> `;}};e._([e.n({type:String,attribute:"comment-id"})],d.prototype,"commentId",void 0),e._([e.n({type:String,attribute:"parent-comment-permalink"})],d.prototype,"parentCommentPermalink",void 0),e._([e.n({type:String,attribute:"post-permalink"})],d.prototype,"postPermalink",void 0),e._([e.n({type:Boolean,attribute:"is-in-modqueue"})],d.prototype,"isInModQueue",void 0),d=e._([e.e("shreddit-comments-page-tools")],d);let u=class extends r.s{constructor(){super(...arguments),this.postId="",this.isTruncated=!1,this.ui="mobile",this.pubsub=new e.m(this),this._searchDynamicIdCacheController=new s.S(this,e.dI.PdpCommentHighlightedSearchTerm),this._visibilityDetails=null,this.depthUpdated=null,this.handleCommentCreated=({parentThingId:t,body:n})=>{this.postId===t&&n&&this.querySelector("#next-comment")?.after(...e.b5(n))}}static get styles(){return[e.t,e.J(":host {\n  display: block;\n  background-color: var(--shreddit-content-background);\n  padding-bottom: var(--spacer-xs);\n}\n")]}get visibilityDetails(){return null===this._visibilityDetails&&null===this.depthUpdated&&(this.depthUpdated=new Promise((e=>{requestAnimationFrame((()=>{const t=this.getVisibilityDetails();this._visibilityDetails=t,e(t)}))}))),this._visibilityDetails}getVisibilityDetails({containerWidth:e}={}){const t=this.querySelector(":scope > shreddit-comment"),n=t?.depth??0;e??(e=this.getBoundingClientRect().width);const r="mobile"===this.ui?232:320,i="mobile"===this.ui?18:32,a=this.maxDepth||("mobile"===this.ui?4:10),s=Math.floor((e-r)/i),o=Math.max(1,Math.min(s,a)),l=o+n,m=this.querySelector(":scope shreddit-comment[is-chosen-mq-comment]"),c=m?.depth??0,h=Math.max(n,c-o+1);return m?{maxVisibleDepth:h+o,minVisibleDepth:h}:{maxVisibleDepth:l}}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(e.T.CommentCreated,this.handleCommentCreated),this.resizeObserver=new ResizeObserver(i.N((e=>{let t=0;for(const n of e){const e=n.contentBoxSize.at(0)?.inlineSize;if(e){t=e;break}}if(0===t)return;const n=this.getVisibilityDetails({containerWidth:t});if(this._visibilityDetails?.maxVisibleDepth!==n.maxVisibleDepth||this._visibilityDetails?.minVisibleDepth!==n.minVisibleDepth){this._visibilityDetails=n,this.depthUpdated=Promise.resolve(n);for(const e of this.querySelectorAll("shreddit-comment"))e.setVisibility(n.maxVisibleDepth,n.minVisibleDepth)}}),128,!0)),this.resizeObserver.observe(this,{box:"content-box"})}disconnectedCallback(){super.disconnectedCallback(),this.resizeObserver?.unobserve(this),this.resizeObserver?.disconnect()}showAllComments(){e.p(e.T.TriggerCommentBlockingAuth,{source:a.C.Button}),this.isTruncated=!1,e.f(this,i.b0())}renderShredtopViewMoreCommentsButton(t){return e.Y({attributes:{type:"button",className:"ml-sm xs:ml-0 font-semibold mt-md",onclick:t},appearance:"brand",shape:"pill",leadingIcon:r.q({size:r.I.Medium}),size:e.a7.Small,children:"View more comments"});}renderTruncatedExpandButton(){return this.renderShredtopViewMoreCommentsButton(this.showAllComments)}renderContent(){return function(e,t){const n="Comments Section";return e` <section class="flex flex-col px-md xs:px-0 gap-md relative" aria-label="${"Comments"}"> <h1 class="absolute -top-full -start-full w-px h-px overflow-hidden" aria-label="${n}"> ${n} </h1> ${e`<slot></slot>`} ${t?"":e`<slot name="truncated"></slot>`} </section> `;}(r.x,this.isTruncated);}renderExpandButton(){return this.isTruncated?this.renderTruncatedExpandButton():""}render(){return r.x` ${this.renderContent()} ${this.renderExpandButton()} `}};e._([e.n({type:String,attribute:"post-id"})],u.prototype,"postId",void 0),e._([e.n({type:Boolean})],u.prototype,"isTruncated",void 0),e._([e.n({type:String,attribute:"ui"})],u.prototype,"ui",void 0),e._([e.n({type:Number,attribute:"max-depth"})],u.prototype,"maxDepth",void 0),u=e._([e.e("shreddit-comment-tree")],u);let p=class extends r.s{constructor(){super(),this.postId="",this.handleCommentCreated=({postId:e})=>{e===this.postId&&this.remove()},this.pubsub=new e.m(this)}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(e.T.CommentCreated,this.handleCommentCreated),e.w()!==e.ah.PostDetail&&e.w()!==e.ah.SingleCommentThread||!e.dJ()||requestAnimationFrame((()=>{const t=e.dK(performance.now());t&&e.f(this,t)}))}render(){return r.x`<slot></slot>`}};p.styles=[r.i`:host{display:contents}`,e.t],e._([e.n({type:String,attribute:"post-id"})],p.prototype,"postId",void 0),p=e._([e.e("comment-forest-empty-state")],p);let k=class extends r.s{constructor(){super(),this.target="",this.path="",this.isMobile=!1,this.isEntityFilterEnabled=!1,this.isSearchActive=!1,this.amaCommentTab=null,this.commentSearch=null,this.commentSort=null,this.pubsub=new e.m(this),this.replaceComments=async({sort:t="",filter:n="",entityFilterId:r=""})=>{t!==this.getCurrentSort()&&this.updateLocation({sort:t});const i=new URL(`${location.origin}${this.path}`);t&&i.searchParams.set(o.b.Sort,t.toLowerCase()),n&&i.searchParams.set(o.b.Filter,n.toLowerCase()),r&&i.searchParams.set(o.b.EntityFilterId,r),i.searchParams.set(o.b.InlineRefresh,"true");const a=i.toString().substring(location.origin.length);this.replaceContentController.loadAndReplaceContent({src:a,target:this.target,afterSuccess:()=>e.cc(this,{message:"The comments are sorted successfully",options:{priority:e.S.assertive}}),afterFailure:()=>this.dispatchEvent(e.c("faceplate-alert",{level:e.X.error,cause:"uncategorized",message:"Failed to load the comments."}))})},this.handleSortEvent=async t=>{this.replaceComments({sort:t.detail.selected?.toLowerCase(),filter:this.getCurrentFilter()}),this.pubsub.publish(e.T.CommentSort,{sort:t.detail.selected});const n=this.querySelector("rpl-filter-chip[selected]"),r=this.allChip?.assignedElements()?.[0];n?.removeAttribute("selected"),r?.setAttribute("selected","")},this.handleAmaTabClick=e=>{const t=e.target?.closest("button")?.getAttribute("value");if(t){if(e instanceof KeyboardEvent&&"Enter"!==e.key)return;this.replaceComments({filter:t,sort:this.getCurrentSort()}),e.preventDefault()}},this.replaceContentController=new l.R,this.handleCommentSearchToggle=e=>{const t=e.detail.isHidden;this.isSearchActive=t;const n=this.querySelector("search-dynamic-id-cache-controller");n?.classList.toggle("min-w-full",t),this.classList.toggle("w-full",t)}}updateLocation({sort:e}){const t=new URL(location.href);t.searchParams.set(o.b.Sort,e.toLowerCase()),history.replaceState({},"",t.toString())}getCurrentFilter(){return this.querySelector("[faceplate-tab-selected]")?.getAttribute("value")?.toLowerCase()||""}getCurrentSort(){return new URLSearchParams(location.search).get(o.b.Sort)||""}connectedCallback(){super.connectedCallback(),this.commentSearch=this.querySelector('[slot="comment-search"]'),this.amaCommentTab=this.querySelector('[slot="ama-comment-tab"]'),this.commentSort=this.querySelector('[slot="comment-sort"]')}renderDivider(){return this.isEntityFilterEnabled&&!this.isSearchActive?r.x`<hr class="border-neutral-border-weak my-0 mx-2xs p-0 h-xl border-[0.5px]">`:r.A}renderSortbar(){const t=e.H({flex:!0,"xs:ml-auto":!!this.amaCommentTab,hidden:this.isSearchActive});return this.commentSort?r.x`<slot name="comment-sort" class="${t}"></slot>`:r.A}renderSearchToggle(){return this.commentSearch?r.x`<slot name="comment-search"></slot>`:r.A}renderAMATab(){const t=e.H({flex:!0,hidden:this.isSearchActive});return this.amaCommentTab?r.x` <slot name="ama-comment-tab" @click="${this.handleAmaTabClick}" @keydown="${this.handleAmaTabClick}" class="${t}"></slot> `:r.A}renderToolbar(){const t=e.H({"toolbar-container relative bg-neutral-background flex gap-xs items-center":!0,"flex-wrap":!this.isEntityFilterEnabled,"flex-1":this.isSearchActive});return r.x` ${this.renderAMATab()} <div class="${t}"> ${this.renderSortbar()} ${this.renderSearchToggle()} ${this.renderDivider()} </div> `}renderDesktop(e){return r.x` <div class="${e}">${this.renderToolbar()}</div> `}renderMobile(e){return r.x` <div class="${e}">${this.renderToolbar()}</div> `}render(){const t=e.H({"flex gap-xs outer-container items-center flex-wrap ":!0,"w-full":!this.isMobile||this.isSearchActive,"justify-between w-full":Boolean(this.amaCommentTab)});return r.x` <div class="flex gap-xs w-full" @comment-sort="${this.handleSortEvent}" @pdp-comment-search-toggle="${this.handleCommentSearchToggle}"> ${this.isMobile?this.renderMobile(t):this.renderDesktop(t)} </div> `}};k.styles=[e.t,r.i`.hide-scrollbar{-ms-overflow-style:none;scrollbar-width:none}`],e._([e.n({type:String})],k.prototype,"target",void 0),e._([e.n({type:String})],k.prototype,"path",void 0),e._([e.n({type:Boolean,attribute:"is-mobile"})],k.prototype,"isMobile",void 0),e._([e.Q(".all-chip")],k.prototype,"allChip",void 0),e._([e.n({type:Boolean,attribute:"entity-filter-enabled"})],k.prototype,"isEntityFilterEnabled",void 0),e._([e.N()],k.prototype,"isSearchActive",void 0),k=e._([e.e("shreddit-comments-sort-dropdown")],k);const b="expand-pdp-comment-search-button";let T=class extends r.s{constructor(){super(...arguments),this.target="",this.path="",this.showOnLoad=!1,this.initialValue="",this.isEntityFilterEnabled=!1,this.open=this.showOnLoad,this.commentSearchActive=this.showOnLoad,this.focusSearchInput=()=>{this.open||(this.open=!0),this.searchInput?.innerInput?.focus()},this.resetSearchInput=()=>{this.handleClear(),this.open=!1,c.S.update(e.dI.PdpCommentSearch),this.commentSearchActive=!1,this.expandSearchButton?.focus()},this.replaceContentController=new l.R,this.handlePdpCommentSearch=e.a6((async()=>{const t=this.searchInput?.value??"";if(t){this.commentSearchActive=!0;const n={conversationId:c.a.get(e.dI.PdpCommentSearch),cursor:{},impressionId:c.S.getUUID(),pane:e.dL.Comments,query:t,scope:{type:e.a1.PDP,path:this.path}};this.addSearchParamsToUrl(n);const r=new URLSearchParams({...m.s(n)});e.f(this,e.b({source:"search",action:"click",noun:"full_search_button"},this.searchTelemetryData));const i=document.createElement("span");i.id=this.target,this.replaceContentController.loadAndReplaceContent({src:`/svc/shreddit${this.path}pdp-comment-search-results?${r.toString()}`,target:this.target,wrapPartialElement:e=>(i.appendChild(e),i)})}}),300),this.handleKeyDown=t=>{c.S.update(e.dI.PdpCommentSearch),"Enter"===t.key&&t.target===this.searchInput&&this.handlePdpCommentSearch(),"Escape"===t.key&&t.target===this.searchInput&&(t.stopPropagation(),this.commentSearchActive?this.searchInput?.blur():this.resetSearchInput())},this.handleClear=()=>{this.searchInput?.value&&(this.searchInput.value="")},this.searchCommentText=()=>"Search Comments"}hideElementsVisibility(t){this.dispatchEvent(e.c("pdp-comment-search-toggle",{isHidden:t}))}connectedCallback(){super.connectedCallback(),this.commentSearchActive=this.showOnLoad,this.open=this.showOnLoad}get searchTelemetryData(){const t=this.searchInput?.value??"";return{action_info:{page_type:e.ah.PostDetail},search:{conversation_id:c.a.get(e.dI.PdpCommentSearch),impression_id:c.S.get(e.dI.PdpCommentSearch),query:t,query_id:c.b.get({query:t,scope:{type:e.a1.PDP,path:this.path}},e.dI.PdpCommentSearch),origin_element:e.dM.CommentSearchBar,origin_page_type:e.ah.PostDetail}}}addSearchParamsToUrl(t){const n=location.href,r=new URL(n);r.searchParams.set(m.S.Query,t.query),r.searchParams.set(m.S.Pane,e.dL.Comments),r.searchParams.set(m.S.ConversationId,t.conversationId??c.a.get(e.dI.PdpCommentSearch)),r.searchParams.set(m.S.ImpressionId,t.impressionId??c.S.getUUID());const i=r.toString();i!==n&&history.replaceState({},"",i)}updated(e){if(e.has("open")){const t=!e.get("open")&&this.open,n=e.get("open")&&!this.open;t?this.focusSearchInput():n&&this.expandSearchButton?.focus()}this.hideElementsVisibility(this.commentSearchActive||this.open)}renderSearchButton(){const t={"aria-controls":"pdp-comment-search-form","aria-expanded":`${this.open}`,id:b,onclick:this.focusSearchInput,type:"button"},n={appearance:"bordered",screenReaderContent:"Expand comment search"};return this.isEntityFilterEnabled?e.Y({attributes:{...t,className:""+(this.open?"hidden":"")},leadingIcon:r.D({size:r.I.Small}),size:e.a7.Small,...n}):e.Y({attributes:{...t,className:"border-neutral-border-weak hover:border-neutral-content-weak text-secondary-weak font-normal "+(this.open?"hidden":"")},children:r.x`<span class="flex pr-xs">${this.searchCommentText()}</span>`,leadingIcon:r.x`<span class="flex pl-xs">${r.D({size:r.I.Small})}</span>`,...n})}render(){return r.x`<div class="block" data-faceplate-tracking-context="${JSON.stringify(this.searchTelemetryData)}"> <faceplate-tracker source="search" action="click" noun="search_bar"> ${this.renderSearchButton()} </faceplate-tracker> <form class="flex w-full ${e.H({hidden:!this.open})}" id="pdp-comment-search-form" @submit="${this.handlePdpCommentSearch}"> <faceplate-search-input class="text-secondary-plain m-0 rounded-full outline outline-1 outline-neutral-border-weak flex-grow focus:outline-neutral-content-weak" placeholder="${this.searchCommentText()}" enterkeyhint="search" @keydown="${this.handleKeyDown}" @focus="${()=>{this.open=!0}}" value="${this.initialValue}"> ${e.Y({attributes:{id:"search-input-clear-button",slot:"clearIcon",type:"button",onclick:this.handleClear},appearance:"plain",size:e.a7.Small,screenReaderContent:"Clear search",leadingIcon:r.R({size:r.I.Small})})}</faceplate-search-input> ${e.Y({appearance:"plain",attributes:{className:"ml-xs"+(this.commentSearchActive?" hidden":""),id:"cancel-pdp-comment-search-button",onclick:this.resetSearchInput,type:"button"},children:"Cancel"})} </form> </div>`;}};T.styles=[e.t],e._([e.n({type:String})],T.prototype,"target",void 0),e._([e.n({type:String})],T.prototype,"path",void 0),e._([e.n({attribute:"show-on-load",type:Boolean})],T.prototype,"showOnLoad",void 0),e._([e.n({type:String,attribute:"initial-value"})],T.prototype,"initialValue",void 0),e._([e.n({type:Boolean,attribute:"entity-filter-enabled"})],T.prototype,"isEntityFilterEnabled",void 0),e._([e.Q(`#${b}`)],T.prototype,"expandSearchButton",void 0),e._([e.Q("faceplate-search-input")],T.prototype,"searchInput",void 0),e._([e.N()],T.prototype,"open",void 0),e._([e.N()],T.prototype,"commentSearchActive",void 0),T=e._([e.e("pdp-comment-search-input")],T);let I=class extends r.s{connectedCallback(){const e=this.getFullUrl();e.includes(":~:text=")?this.goToCommentWithTextFragment(e):this.goToCommentWithId(),super.connectedCallback()}goToCommentWithId(){const e=window.location.hash;if(!e)return;const t=e.substring(1);if(!t)return;const n=`t1_${t}-comment-rtjson-content`,r=document.getElementById(n);if(!r)return;const i=document.querySelector(`shreddit-comment[thingid="t1_${t}"]`);if(!i)return;r.style.fontWeight="900";const a=i.getBoundingClientRect(),s=i.offsetHeight,o=a.top+window.pageYOffset-s/2;o>window.innerHeight&&window.scrollTo({top:o,behavior:"smooth"})}goToCommentWithTextFragment(e){document.fragmentDirective&&this.setWindowHref(e)}getFullUrl(){const e=performance.getEntriesByType("navigation");return e.length>0?e[0].name:window.location.href}setWindowHref(e){window.location.href=e}render(){return r.x``}};I=e._([e.e("comment-url-fragment-manager")],I)}));
SML.di("./DslEtuBZ.js",import.meta.url,"DslEtuBZ");SML.di("./Du8UC0gt.js",import.meta.url,"Du8UC0gt");SML.di("./DK2EuOAl.js",import.meta.url,"DK2EuOAl");SML.di("./B4wbfaco.js",import.meta.url,"B4wbfaco");SML.di("./CzlfHowc.js",import.meta.url,"CzlfHowc");SML.di("./Baruuhvw.js",import.meta.url,"Baruuhvw");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./UW8poupv.js",import.meta.url,"UW8poupv");SML.di("./C_7yp99g.js",import.meta.url,"C_7yp99g");SML.di("./h0OvOyMW.js",import.meta.url,"h0OvOyMW");SML.di("./DIbtn8u6.js",import.meta.url,"DIbtn8u6");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./B5aCBAWI.js",import.meta.url,"B5aCBAWI");SML.di("./DSgcmNT3.js",import.meta.url,"DSgcmNT3");SML.di("./C-d7BR1A.js",import.meta.url,"C-d7BR1A");SML.di("./FagDXDzk.js",import.meta.url,"FagDXDzk");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");SML.di("./CJ4Bucp-.js",import.meta.url,"CJ4Bucp-");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");SML.di("./fnKkpEwQ.js",import.meta.url,"fnKkpEwQ");SML.di("./DNASVThB.js",import.meta.url,"DNASVThB");SML.di("./B49dh6xU.js",import.meta.url,"B49dh6xU");SML.di("./UWmwcM6M.js",import.meta.url,"UWmwcM6M");SML.di("./CT6o3cIS.js",import.meta.url,"CT6o3cIS");SML.di("./DzMpUNmB.js",import.meta.url,"DzMpUNmB");SML.di("./p53_mOdF.js",import.meta.url,"p53_mOdF");SML.di("./BJSmnD7s.js",import.meta.url,"BJSmnD7s");SML.di("./jTp_btYX.js",import.meta.url,"jTp_btYX");SML.di("./BM-DpnLu.js",import.meta.url,"BM-DpnLu");SML.di("./Be8KYlVI.js",import.meta.url,"Be8KYlVI");SML.di("./BTfAALG-.js",import.meta.url,"BTfAALG-");SML.di("./jzNEIPwx.js",import.meta.url,"jzNEIPwx");SML.di("./BvOcWFza.js",import.meta.url,"BvOcWFza");SML.di("./Ds3iHAvh.js",import.meta.url,"Ds3iHAvh");SML.di("./8tELWdqF.js",import.meta.url,"8tELWdqF");SML.di("./Dhnopfuf.js",import.meta.url,"Dhnopfuf");SML.di("./BdueHHHl.js",import.meta.url,"BdueHHHl");SML.di("./CZPCygeT.js",import.meta.url,"CZPCygeT");SML.di("./CSQNLuDY.js",import.meta.url,"CSQNLuDY");SML.di("./B9pe2eYY.js",import.meta.url,"B9pe2eYY");SML.di("./B8B7_bfl.js",import.meta.url,"B8B7_bfl");SML.di("./COiG0TCO.js",import.meta.url,"COiG0TCO");SML.di("./BTMXBfyY.js",import.meta.url,"BTMXBfyY");SML.di("./CLJ5hH8v.js",import.meta.url,"CLJ5hH8v");SML.di("./2Pp2AIeo.js",import.meta.url,"2Pp2AIeo");SML.di("./DhQW5pQL.js",import.meta.url,"DhQW5pQL");SML.di("./CDFmhs-S.js",import.meta.url,"CDFmhs-S");SML.di("./MX9FaClF.js",import.meta.url,"MX9FaClF");SML.di("./FaYkg4Io.js",import.meta.url,"FaYkg4Io");SML.di("./D9o05KHZ.js",import.meta.url,"D9o05KHZ");SML.di("./jOi_w9kT.js",import.meta.url,"jOi_w9kT");SML.di("./C0I_JWye.js",import.meta.url,"C0I_JWye");SML.di("./DrrjN1Nt.js",import.meta.url,"DrrjN1Nt");SML.di("./Bre143cN.js",import.meta.url,"Bre143cN");SML.di("./BStJq-t0.js",import.meta.url,"BStJq-t0");SML.di("./DCovP8x6.js",import.meta.url,"DCovP8x6");SML.di("./CjqcW8YI.js",import.meta.url,"CjqcW8YI");SML.di("./DS7BJDdq.js",import.meta.url,"DS7BJDdq");SML.di("./Dg8LS6-X.js",import.meta.url,"Dg8LS6-X");SML.di("./DoOFmcQZ.js",import.meta.url,"DoOFmcQZ");SML.di("./DdIwQUSk.js",import.meta.url,"DdIwQUSk");SML.di("./DdoeBlGT.js",import.meta.url,"DdoeBlGT");SML.di("./Cjw2ByTc.js",import.meta.url,"Cjw2ByTc");SML.di("./BzGhp_5F.js",import.meta.url,"BzGhp_5F");SML.di("./DtcD-j6p.js",import.meta.url,"DtcD-j6p");SML.di("./CIi1v1l_.js",import.meta.url,"CIi1v1l_");SML.di("./wFIF_OFn.js",import.meta.url,"wFIF_OFn");SML.di("./CU4mObWU.js",import.meta.url,"CU4mObWU");SML.di("./DQ-2YbuL.js",import.meta.url,"DQ-2YbuL");SML.di("./BHW1DH4B.js",import.meta.url,"BHW1DH4B");SML.di("./CvMMXn2K.js",import.meta.url,"CvMMXn2K");SML.di("./9ZdgYdsr.js",import.meta.url,"9ZdgYdsr");SML.di("./C38sKiaF.js",import.meta.url,"C38sKiaF");SML.di("./CAd-sfst.js",import.meta.url,"CAd-sfst");SML.di("./C-lRMeGe.js",import.meta.url,"C-lRMeGe");SML.di("./CGzEIBwW.js",import.meta.url,"CGzEIBwW");SML.di("./CmgOir_w.js",import.meta.url,"CmgOir_w");SML.di("./D9vf8s3n.js",import.meta.url,"D9vf8s3n");SML.di("./DR8uYI_f.js",import.meta.url,"DR8uYI_f");SML.di("./S5oUweHp.js",import.meta.url,"S5oUweHp");
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("Diel-zJV",["s_Igk1Yn"],(async s=>{const{svg:t}=s.g();return{s:s.m(t`<path d="M19.08 8.47C17.28 5.11 13.8 3.03 10 3.03S2.72 5.11.92 8.47c-.51.96-.51 2.1 0 3.06 1.8 3.36 5.28 5.44 9.08 5.44s7.28-2.09 9.08-5.44c.51-.96.51-2.1 0-3.06zM10 13.25c-1.79 0-3.25-1.46-3.25-3.25S8.21 6.75 10 6.75s3.25 1.46 3.25 3.25-1.46 3.25-3.25 3.25z"></path>`,"0 0 20 20","show-fill")}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CTwJH_ps.js",import.meta.url,"CTwJH_ps");
SML.dm("DkIqVQPv",["GlDbwxoG","s_Igk1Yn","CTwJH_ps"],(async(t,e)=>{let r=class extends e.s{constructor(){super(...arguments),this.postId="",this.impressionId="0",this.clickLocation=t.v.UNKNOWN,this.anchorStyleClass="",this.renderAsButton=!1,this.buttonProps={},this._currGalleryIndex=0,this._currGalleryItemText="",this.handleGalleryNavEvent=t=>{t!==this._currGalleryIndex&&(this._currGalleryIndex=t,this.galleryContent&&(this._currGalleryItemText=this.galleryContent[this._currGalleryIndex]))}}connectedCallback(){super.connectedCallback(),this._currGalleryItemText=this.galleryContent?.[this._currGalleryIndex]}createRenderRoot(){return this}render(){return this.galleryContent&&!this._currGalleryItemText?e.A:e.x` <shreddit-dynamic-ad-link target="_blank" post-id="${this.postId}" impression-id="${this.impressionId}" gallery-index="${this._currGalleryIndex}" click-location="${this.clickLocation}" anchor-style-class="${this.anchorStyleClass}" ?render-as-button="${this.renderAsButton}" .ButtonProps="${this.buttonProps}">${this._currGalleryItemText}</shreddit-dynamic-ad-link>`}};r.styles=[t.t],t._([t.n({type:String,attribute:"post-id"})],r.prototype,"postId",void 0),t._([t.n({type:String,attribute:"impression-id"})],r.prototype,"impressionId",void 0),t._([t.n({type:String,attribute:"click-location"})],r.prototype,"clickLocation",void 0),t._([t.n({type:String})],r.prototype,"target",void 0),t._([t.n({type:String,attribute:"anchor-style-class"})],r.prototype,"anchorStyleClass",void 0),t._([t.n({type:Boolean,attribute:"render-as-button"})],r.prototype,"renderAsButton",void 0),t._([t.n({type:Object,attribute:"button-props"})],r.prototype,"buttonProps",void 0),t._([t.n({type:Array,attribute:"gallery-content"})],r.prototype,"galleryContent",void 0),t._([t.N()],r.prototype,"_currGalleryIndex",void 0),t._([t.N()],r.prototype,"_currGalleryItemText",void 0),r=t._([t.e("call-to-action-gallery-links")],r)}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("Dm-LXBi1",["s_Igk1Yn"],(async a=>{const{svg:s}=a.g();return{s:a.m(s`<path d="M10 13.9c-2.15 0-3.9-1.75-3.9-3.9S7.85 6.1 10 6.1s3.9 1.75 3.9 3.9-1.75 3.9-3.9 3.9zm0-6a2.1 2.1 0 100 4.2 2.1 2.1 0 000-4.2z"></path><path d="M10 16.97c-3.8 0-7.28-2.09-9.08-5.44-.51-.96-.51-2.1 0-3.06C2.72 5.11 6.2 3.03 10 3.03s7.28 2.09 9.08 5.44c.51.96.51 2.1 0 3.06-1.8 3.36-5.28 5.44-9.08 5.44zm0-12.14c-3.14 0-6.01 1.72-7.5 4.5-.22.42-.22.94 0 1.35a8.514 8.514 0 007.5 4.5c3.14 0 6.01-1.72 7.5-4.5.22-.42.22-.94 0-1.35a8.514 8.514 0 00-7.5-4.5z"></path>`,"0 0 20 20","show")}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DkIqVQPv.js",import.meta.url,"DkIqVQPv");SML.di("./BmAQnYV7.js",import.meta.url,"BmAQnYV7");SML.di("./CTwJH_ps.js",import.meta.url,"CTwJH_ps");SML.di("./CLcwsfQZ.js",import.meta.url,"CLcwsfQZ");SML.di("./CykCcTkJ.js",import.meta.url,"CykCcTkJ");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./OimaI6pY.js",import.meta.url,"OimaI6pY");SML.di("./CsGy0MYm.js",import.meta.url,"CsGy0MYm");SML.di("./i17aYwuT.js",import.meta.url,"i17aYwuT");SML.di("./hMhijB38.js",import.meta.url,"hMhijB38");SML.di("./8qD_qMhm.js",import.meta.url,"8qD_qMhm");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");SML.di("./HYbNa5uQ.js",import.meta.url,"HYbNa5uQ");SML.di("./DBgqsMtO.js",import.meta.url,"DBgqsMtO");SML.di("./Ccw0cO_g.js",import.meta.url,"Ccw0cO_g");SML.di("./DAqoOXDQ.js",import.meta.url,"DAqoOXDQ");SML.di("./BGOkDHmz.js",import.meta.url,"BGOkDHmz");SML.di("./DoY_u8JV.js",import.meta.url,"DoY_u8JV");SML.di("./CU4mObWU.js",import.meta.url,"CU4mObWU");SML.di("./D0V62KWA.js",import.meta.url,"D0V62KWA");SML.di("./D6Xs8HU5.js",import.meta.url,"D6Xs8HU5");SML.di("./FagDXDzk.js",import.meta.url,"FagDXDzk");
SML.dm("DmGowvJ7",["GlDbwxoG","s_Igk1Yn","CLcwsfQZ","CykCcTkJ","CC2wUKE8","OimaI6pY","CsGy0MYm","i17aYwuT","hMhijB38","8qD_qMhm","D-MAMWlw","DRM-oTYq","HYbNa5uQ","DkIqVQPv","BmAQnYV7","CTwJH_ps","DBgqsMtO","Ccw0cO_g","DAqoOXDQ","BGOkDHmz","DoY_u8JV","CU4mObWU","D0V62KWA","D6Xs8HU5","FagDXDzk"],(async(e,t,i,s,r,o,a,n,d,l,h,p,m)=>{class u{constructor(t){this.areItemsLoaded=!1,(this.host=t).addController(this),this.eventController=new e.E(t)}get galleryItemEls(){return Array.from(this.host.querySelectorAll(`.${a.C}`))}async waitUntilImagesLoaded(){return new Promise((e=>{this.areItemsLoaded&&e();let t=0;const i=()=>{t++,t===this.galleryItemEls.length&&(this.areItemsLoaded=!0,e())};this.galleryItemEls.forEach((e=>{const t=e.querySelector("img");t.complete?i():t.onload=()=>{i()}}))}))}handleCarouselArrowClick(t){const i=t.detail.direction===n.C.FORWARDS?d.G.Forward:d.G.Backward,s=function({direction:t,numGalleryItems:i,placement:s,impressionId:r,postId:o,authorId:a,subredditId:n,title:d}){return e.b({source:"gallery",action:"click",noun:t},{gallery:{num_items:i,position:void 0},ad_metadata:{placement:s,impression_id:r},post:{id:o,author_id:a,promoted:!0,subreddit_id:n,title:d,type:e.eR.Gallery}})}({authorId:this.host.authorId,impressionId:this.host.impressionId,numGalleryItems:this.host.galleryItems?.length??0,placement:this.host.placement,postId:this.host.id,subredditId:this.host.subredditId,title:this.host.title,direction:i});e.f(this.host,s)}getActiveSlideIndex(e){const t="SHREDDIT-DYNAMIC-AD-LINK"===e.nodeName?e:e.querySelector("shreddit-dynamic-ad-link"),i=t?.galleryIndex;return void 0===i?null:i}async observeGalleryItems(e){try{await this.waitUntilImagesLoaded()}catch(e){return}this.galleryItemEls.forEach((t=>e.observe(t)))}async setupGalleryViewMediaTracking(){const e=this.createGalleryViewMediaObserver();this.galleryViewMediaObserver=e,await this.observeGalleryItems(this.galleryViewMediaObserver)}async setupPixelImpressionTracking(){const e=this.createImpressionObserver();this.galleryImpressionObserver=e,await this.observeGalleryItems(this.galleryImpressionObserver)}teardownObserver(e){e&&this.galleryItemEls.forEach((t=>e.unobserve(t)))}createImpressionObserver(){return new IntersectionObserver((t=>{t.forEach((t=>{if(!t.isIntersecting)return;const i=this.getActiveSlideIndex(t.target);if(null===i)return;const s=e.c(r.O,{itemIndex:i,postId:this.host.id});this.host.dispatchEvent(s),this.galleryImpressionObserver?.unobserve(t.target)}))}),{threshold:.25})}createGalleryViewMediaObserver(){return new IntersectionObserver((t=>{t.forEach((t=>{if(!t.isIntersecting)return;const i=this.getActiveSlideIndex(t.target);null!==i&&(e.f(this.host,function({galleryIdx:t,galleryData:i,impressionId:s,postId:r}){const o=i[t];if(!o)return null;const a={action_info:{page_type:e.ah.PostDetail},post:{id:r,promoted:!0},media:{id:o.media.id,height:o.media.height,width:o.media.width,url:o.outboundUrl},gallery:{id:o.id,position:t,media_ids:i.map((e=>e.media.id)),num_items:i.length},ad_metadata:{impression_id:s}};return e.b({source:"gallery",action:"view",noun:"media"},a)}({galleryData:this.host.galleryItems||[],galleryIdx:i,impressionId:this.host.impressionId,postId:this.host.id})),this.galleryViewMediaObserver?.unobserve(t.target))}))}),{threshold:.2})}async hostConnected(){this.host.galleryItems&&(this.eventController.define("faceplate-carousel:slide",this.handleCarouselArrowClick.bind(this)),await this.setupPixelImpressionTracking(),await this.setupGalleryViewMediaTracking())}hostDisconnected(){this.teardownObserver(this.galleryImpressionObserver),this.teardownObserver(this.galleryViewMediaObserver)}}class c{constructor(e){this.isDown=!1,this.startX=0,this.scrollLeft=0,this.onMouseDown=e=>{this.galleryImagesContainer&&(this.isDown=!0,this.startX=e.pageX-this.galleryImagesContainer.offsetLeft,this.scrollLeft=this.galleryImagesContainer.scrollLeft)},this.unsetIsDown=()=>{this.isDown=!1},this.onMouseMove=e=>{if(!this.galleryImagesContainer)return;if(!this.isDown)return;e.preventDefault();const t=3*(e.pageX-this.galleryImagesContainer.offsetLeft-this.startX);this.galleryImagesContainer.scrollLeft=this.scrollLeft-t},(this.host=e).addController(this)}get hasHorizontalDragBehavior(){return this.host.useLegacyDragNav}get galleryImagesContainer(){return document.querySelector(`.${a.G}`)}setupDesktopDragScroll(){this.galleryImagesContainer?.addEventListener("mousedown",this.onMouseDown),this.galleryImagesContainer?.addEventListener("mouseleave",this.unsetIsDown),this.galleryImagesContainer?.addEventListener("mouseup",this.unsetIsDown),this.galleryImagesContainer?.addEventListener("mousemove",this.onMouseMove)}teardownDesktopDragScroll(){this.galleryImagesContainer?.removeEventListener("mousedown",this.onMouseDown),this.galleryImagesContainer?.removeEventListener("mouseleave",this.unsetIsDown),this.galleryImagesContainer?.removeEventListener("mouseup",this.unsetIsDown),this.galleryImagesContainer?.removeEventListener("mousemove",this.onMouseMove)}hostConnected(){this.host.useLegacyDragNav&&this.galleryImagesContainer&&this.setupDesktopDragScroll()}hostDisconnected(){this.host.useLegacyDragNav&&this.galleryImagesContainer&&this.teardownDesktopDragScroll()}}const E=i.W(t.s);let y=class extends E{constructor(){super(...arguments),this.adEvents=[],this.outboundLinkUrl="",this.isBlank=!1,this.impressionId="0",this.isShoppingAd=!1,this.isHideAdEnabled=!1,this.hidden=!1,this.isMobile=!1,this.useLegacyDragNav=!1,this.shouldTrackPosition=!1,this.isPdpCombined=!1,this.isCategoryTakeover=!1,this.isReminderAd=!1,this.shouldSkipInitAdObserverOnStartup=!1,this.isHiddenOnSort=!1,this.isClickDisabled=!1,this._events=new e.E(this),this.toggleableVideoAdController=null,this.galleryTrackingController=new u(this),this.dragScroll=new c(this),this.pubsub=new e.m(this),this.handleRsvpClick=t=>{e.f(this,p.s(this))},this.handleUnRsvpClick=t=>{e.f(this,p.t(this))},this.handleClick=t=>{if(!this.isReminderAd)return;const i=this.querySelector("ad-reminder-button");if(i?.isReminderSet||!1)return;l.s(t,{includeCommentsPageChecks:!0})||(t.preventDefault(),this.pubsub.publish(e.T.TriggerAdReminderModal,{postId:this.id}))},this.handleStartAdObserver=()=>{this.enableAdObserver(this.getAdObserverConfig())},this.onAdUpdateAction=({action:e,value:t,impressionId:i})=>{this.impressionId===i&&e===h.a.hide&&(this.hidden=t)},this.handleHideOnSort=()=>{this.isHiddenOnSort=!0},this.handleBlockPdpAdClick=({delay:e})=>{this.isClickDisabled=!0,setTimeout((()=>{this.isClickDisabled=!1}),e)},this._trackAdClick=this._events.define("observe-ad-click",(async t=>{await this._activateLeadGenDialog(),s.s({leadGenInfo:this.leadGenInfo,postId:this.id,impressionId:this.impressionId,onSuccess:()=>this.dispatchEvent(e.c(o.L))})}))}static get styles(){return[e.t]}getAdObserverConfig(){return{events:i.e(this.adEvents),postId:this.id,impressionId:this.impressionId,postElement:this,galleryItems:this.galleryItems?.map((e=>({...e,adEvents:i.e(e.adEvents||[])}))),adType:this.adType}}async connectedCallback(){super.connectedCallback(),this.shouldSkipInitAdObserverOnStartup?window.addEventListener(m.E,this.handleStartAdObserver):this.handleStartAdObserver(),this.pubsub.subscribe(e.T.AdUpdated,this.onAdUpdateAction),this.pubsub.subscribe(e.T.CommentSort,this.handleHideOnSort),this.pubsub.subscribe(e.T.BlockPdpAdClick,this.handleBlockPdpAdClick),this.addEventListener(h.b,this.handleRsvpClick),this.addEventListener(h.E,this.handleUnRsvpClick),this.addEventListener("click",this.handleClick),await this.resolveCarouselDependencies(),await this.resolveVideoAdDependencies()}async disconnectedCallback(){super.disconnectedCallback(),this.adMeasurer&&this.adMeasurer.handleUnload(),this.removeEventListener(h.b,this.handleRsvpClick),this.removeEventListener(h.E,this.handleUnRsvpClick),this.removeEventListener("click",this.handleClick),window.removeEventListener(m.E,this.handleStartAdObserver)}_activateLeadGenDialog(){return s.a({leadGenInfo:this.leadGenInfo})}get shouldRenderCarouselComponent(){return Array.isArray(this.galleryItems)&&!this.isMobile&&!this.useLegacyDragNav}async resolveCarouselDependencies(){this.shouldRenderCarouselComponent&&(await SML.di("./1bXO5O0S.js",import.meta.url,"1bXO5O0S"),this.querySelector("shreddit-gallery-carousel")?.classList.remove("flex"))}async resolveVideoAdDependencies(){if(this.adType!==e.eo.VIDEO)return;const{ToggleableVideoAdController:t}=await SML.di("./DAqoOXDQ.js",import.meta.url,"DAqoOXDQ").then((function(e){return e.i}));this.toggleableVideoAdController=new t(this,((e,t)=>{this.adMeasurer&&(this.adMeasurer.dimensions={height:e,width:t})}))}render(){return this.hidden&&this.isHideAdEnabled||this.isHiddenOnSort?t.A:t.x` <div class="${r.n(this.isMobile&&this.placement!==e.a8.COMMENT_TREES&&"mx-md",this.isClickDisabled&&"pointer-events-none")}"> <slot name="full-comments-page-ad-link"></slot> ${this.isCategoryTakeover?t.x` <slot name="ad-format-content"></slot> <slot name="expanded-video-player"></slot> <slot name="disclaimer-text"></slot> `:t.x` <slot name="credit-bar"></slot> <slot name="ad-format-content"></slot> <slot name="call-to-action-row"></slot> <slot name="ad-reminder-bar"></slot> <slot name="expanded-video-player"></slot> `} </div> `}};e._([e.n({type:String,attribute:"post-id"})],y.prototype,"postId",void 0),e._([e.n({type:Array,attribute:"ad-events",reflect:!0})],y.prototype,"adEvents",void 0),e._([e.n({type:Array,attribute:"gallery-items"})],y.prototype,"galleryItems",void 0),e._([e.n({type:String,attribute:"outbound-link-url",reflect:!0})],y.prototype,"outboundLinkUrl",void 0),e._([e.n({type:Boolean,attribute:"is-blank"})],y.prototype,"isBlank",void 0),e._([e.n({type:Object,attribute:"lead-gen-info"})],y.prototype,"leadGenInfo",void 0),e._([e.n({type:String,attribute:"impression-id"})],y.prototype,"impressionId",void 0),e._([e.n({type:String,attribute:"ad-type"})],y.prototype,"adType",void 0),e._([e.n({type:String,attribute:"campaign-id"})],y.prototype,"campaignId",void 0),e._([e.n({type:Boolean,attribute:"is-shopping-ad"})],y.prototype,"isShoppingAd",void 0),e._([e.n({type:Boolean,attribute:"is-hide-ad-enabled"})],y.prototype,"isHideAdEnabled",void 0),e._([e.n({type:Boolean,reflect:!0})],y.prototype,"hidden",void 0),e._([e.n({type:Boolean,attribute:"is-mobile"})],y.prototype,"isMobile",void 0),e._([e.n({type:Boolean,attribute:"use-legacy-drag-nav"})],y.prototype,"useLegacyDragNav",void 0),e._([e.n({type:String,attribute:"subreddit-id"})],y.prototype,"subredditId",void 0),e._([e.n({type:String,attribute:"country-code"})],y.prototype,"countryCode",void 0),e._([e.n({type:String,attribute:"author-id"})],y.prototype,"authorId",void 0),e._([e.n({type:String})],y.prototype,"title",void 0),e._([e.n({type:String})],y.prototype,"domain",void 0),e._([e.n({type:String,attribute:"placement"})],y.prototype,"placement",void 0),e._([e.n({type:Boolean,attribute:"should-track-position"})],y.prototype,"shouldTrackPosition",void 0),e._([e.n({type:Boolean,attribute:"is-pdp-combined"})],y.prototype,"isPdpCombined",void 0),e._([e.n({type:String,attribute:"encrypted-tracking-payload"})],y.prototype,"encryptedTrackingPayload",void 0),e._([e.n({type:Array,attribute:"additional-event-metadata"})],y.prototype,"additionalEventMetadata",void 0),e._([e.n({type:String,attribute:"ad-transparency-encoded-data"})],y.prototype,"adTransparencyEncodedData",void 0),e._([e.n({type:Boolean,attribute:"is-category-takeover"})],y.prototype,"isCategoryTakeover",void 0),e._([e.n({type:Boolean,attribute:"is-reminder-ad"})],y.prototype,"isReminderAd",void 0),e._([e.n({type:String,attribute:"ads-correlation-id"})],y.prototype,"adsCorrelationId",void 0),e._([e.n({type:Boolean,attribute:"skip-init-ad-observer-on-startup"})],y.prototype,"shouldSkipInitAdObserverOnStartup",void 0),e._([e.N()],y.prototype,"isHiddenOnSort",void 0),e._([e.N()],y.prototype,"isClickDisabled",void 0),y=e._([e.e("shreddit-comments-page-ad")],y)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("Dnuvlpy4",["GlDbwxoG","s_Igk1Yn"],(async(t,e)=>{let i=class extends e.s{constructor(){super(...arguments),this.type="",this.detail={},this.dispatchFromTarget=!1}handleClick(e){(this.dispatchFromTarget?e.target??this:this).dispatchEvent(t.c(this.type,this.detail))}handleKeydown(t){"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),this.handleClick(t))}render(){return e.x`<slot @click="${this.handleClick}" @keydown="${this.handleKeydown}"></slot>`}};t._([t.n({type:String,attribute:"type"})],i.prototype,"type",void 0),t._([t.n({type:Object,attribute:"detail"})],i.prototype,"detail",void 0),t._([t.n({type:Boolean,attribute:"dispatch-from-target"})],i.prototype,"dispatchFromTarget",void 0),i=t._([t.e("custom-event-dispatch-wrapper")],i)}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("Do2tmTAb",["s_Igk1Yn"],(async c=>{const{svg:s}=c.g();return{f:c.m(s`<path d="M3 6.9h7.11A4 4 0 0014 10c2.21 0 4-1.79 4-4s-1.79-4-4-4a4 4 0 00-3.89 3.1H3c-.5 0-.9.4-.9.9s.4.9.9.9zm11-3.1c1.21 0 2.2.99 2.2 2.2 0 1.21-.99 2.2-2.2 2.2-1.21 0-2.2-.99-2.2-2.2 0-1.21.99-2.2 2.2-2.2zm3 9.3H9.89A4 4 0 006 10c-2.21 0-4 1.79-4 4s1.79 4 4 4a4 4 0 003.89-3.1H17c.5 0 .9-.4.9-.9s-.4-.9-.9-.9zM6 16.2c-1.21 0-2.2-.99-2.2-2.2 0-1.21.99-2.2 2.2-2.2 1.21 0 2.2.99 2.2 2.2 0 1.21-.99 2.2-2.2 2.2z"></path>`,"0 0 20 20","filter")}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("DoC8T52C",["GlDbwxoG","s_Igk1Yn"],(async(e,t)=>{let r=class extends t.s{constructor(){super(...arguments),this.inputSelector=e.k.HeaderLarge}static get styles(){return[e.t]}get focusSearchInput(){return{[e.k.HeaderSmall]:document.querySelector(this.inputSelector)?.handleToggleSearchDialog,[e.k.HeaderLarge]:document.querySelector(this.inputSelector)?.focusSearchInput,[e.k.PdpCommentSearchInput]:document.querySelector(this.inputSelector)?.focusSearchInput,[e.k.SearchInputSmall]:document.querySelector(this.inputSelector)?.focusSearchInput}[this.inputSelector]}onClick(e){e.preventDefault(),e.stopPropagation(),this.focusSearchInput?.()}render(){return t.x`<a class="text-primary no-visited" href="#" @click="${this.onClick}"><slot></slot></a>`}};e._([e.n({attribute:"input-selector",type:String})],r.prototype,"inputSelector",void 0),r=e._([e.e("adjust-search-query-link")],r)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DrrjN1Nt.js",import.meta.url,"DrrjN1Nt");
SML.dm("DoOFmcQZ",["GlDbwxoG","s_Igk1Yn","DrrjN1Nt"],(async(e,t,r)=>{var i,n;!function(e){e.BORDERED="bordered",e.SECONDARY="secondary",e.PLAIN="plain"}(i||(i={})),function(e){e.COLLAPSED="collapsed",e.EXPANDED="expanded"}(n||(n={}));let a=class extends r.T{constructor(){super(...arguments),this.appearance=i.SECONDARY,this.size=n.COLLAPSED,this._textAreaContainerRef=e.U()}static get styles(){return[super.styles,t.i`:host(){--trailing-icons-container:var(--rem32)}:host([resize]) .label-container{overflow:auto}.label-container:not(.without-label){padding-top:var(--spacer-xs);padding-bottom:var(--spacer-xs)}:host([resize]) textarea{height:100%;width:100%}:host([resize=both]) .label-container{resize:both}:host([resize=horizontal]) .label-container{resize:horizontal}:host([resize=vertical]) .label-container{resize:vertical}textarea{background:0 0;border:none;outline:0;overflow-y:auto;resize:none}:host([size=expanded]:not([rows])) .label-container{height:fit-content;min-height:var(--rem90)}:host(:not([rows])) textarea{min-height:var(--rem20,1.25rem);height:var(--rem20,1.25rem)}:host(:not([cols])) textarea{width:100%}.label-text{top:0}:host([appearance=bordered]) .label-container{border:1px solid var(--color-neutral-border)}:host([appearance=bordered]) .label-container:hover{border-color:var(--color-neutral-border-medium)}:host([appearance=bordered]) .label-container:hover,:host([appearance=plain]) .label-container:hover{background:var(--color-neutral-background-hover);border-radius:none}:host([appearance=plain]) .label-container{border-radius:0}.input-boundary-box,.input-container,:host .label-container,label{height:100%;width:100%;box-sizing:border-box}:host([size=expanded]) .input-container{height:calc(100% - var(--trailing-icon-container,0px))}.input-container{align-items:flex-start}:host .label-container{border-radius:var(--radius-md)}.input-boundary-box{flex-direction:column}:host(:not([size])) .input-boundary-box,:host([size=collapsed]) .input-boundary-box{flex-direction:row;min-height:var(--rem40);padding:var(--spacer-2xs) 0}:host([size=expanded]) #trailing-icons-container{width:100%;justify-content:flex-end}#trailing-icons-container{height:(--trailing-icons-container)}.text-area-wrapper{height:inherit;width:100%;min-height:var(--textarea-minheight,var(--rem20));display:flex}`]}updated(e){e.has("value")&&this.handleDynamicResize(),super.updated(e)}async handleDynamicResize(){if(!this.rows&&!this.cols){const{width:e}=this.innerTextArea.getBoundingClientRect();this.innerTextArea.style.overflow="hidden",this.innerTextArea.style.height="0",this.innerTextArea.style.width=`${e}px`;const t=`${this.innerTextArea?.scrollHeight}px`;this.innerTextArea.style.height=t,this.innerTextArea.style.removeProperty("overflow"),this.innerTextArea.style.removeProperty("width"),this._textAreaContainerRef?.value&&this._textAreaContainerRef.value.style.setProperty("--textarea-minheight",t)}}onInput(e){this.handleDynamicResize(),super.onInput(e)}render(){return super.renderInput(t.x` <div class="text-area-wrapper" ${e.V(this._textAreaContainerRef)}> <textarea aria-labelledby="fp-input-label" style="${t.l(this.fontFamily?`font-family: ${this.fontFamily}`:void 0)}" class="${e.H({"no-label":!this.hasLabel})}" ?readonly="${this.readonly}" id="innerTextArea" rows="${t.l(this.rows)}" cols="${t.l(this.cols)}" @input="${this.onInput}" @change="${this.onChange}" .value="${r.l(this.value)}" name="${t.l(this.name)}" minlength="${t.l(this.minLength)}" maxlength="${t.l(this.allowMaxLengthOverflow?void 0:this.maxLength)}" placeholder="${t.l(0===this.placeholder.length?void 0:this.placeholder)}" ?disabled="${this.disabled}" ?required="${this.required}" autocomplete="${t.l(this.autocomplete)}" inputmode="${t.l(this.inputmode)}"></textarea> </div>`)}};return e._([e.n({type:Number})],a.prototype,"rows",void 0),e._([e.n({type:Number})],a.prototype,"cols",void 0),e._([e.n({type:String})],a.prototype,"resize",void 0),e._([e.Q("#innerTextArea")],a.prototype,"innerTextArea",void 0),e._([e.n({type:String,reflect:!0})],a.prototype,"appearance",void 0),e._([e.n({type:String})],a.prototype,"size",void 0),e._([e.n({type:String,attribute:"font-family"})],a.prototype,"fontFamily",void 0),a=e._([e.e("faceplate-textarea-input")],a),{get F(){return a},get T(){return n},get a(){return i}}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./BGOkDHmz.js",import.meta.url,"BGOkDHmz");
SML.dm("DoY_u8JV",["s_Igk1Yn","BGOkDHmz"],(async(e,n)=>{const{svg:a}=e.g(),t=e.m(a`<path d="M17.998 11.502a2.16 2.16 0 010-3.004l.134-.14a1.56 1.56 0 00.229-1.863L17.215 4.51a1.56 1.56 0 00-1.731-.734l-.19.047a2.157 2.157 0 01-2.598-1.502l-.052-.183a1.56 1.56 0 00-1.501-1.133h-2.29c-.698 0-1.31.463-1.502 1.134l-.051.18a2.161 2.161 0 01-2.603 1.504l-.185-.046a1.561 1.561 0 00-1.731.734L1.636 6.495a1.561 1.561 0 00.23 1.866l.13.135a2.162 2.162 0 010 3.007l-.132.137a1.56 1.56 0 00-.23 1.864l1.147 1.985a1.56 1.56 0 001.73.734l.186-.046A2.162 2.162 0 017.3 17.682l.05.179a1.561 1.561 0 001.502 1.134h2.29c.698 0 1.31-.463 1.502-1.134l.052-.182a2.159 2.159 0 012.6-1.503l.188.047a1.56 1.56 0 001.73-.734l1.146-1.984a1.561 1.561 0 00-.23-1.866l-.133-.137zm-8 .498c-1.103 0-2-.897-2-2s.897-2 2-2 2 .897 2 2-.897 2-2 2z"></path>`,"0 0 20 20","settings-fill"),i=/,/g;class s extends n.V{parse(e,a){if(""===e)this.a&&(this.j.push(this.a),this.f.onCue?.(this.a),this.a=null),this.c=n.a.None;else if(this.c===n.a.Cue)this.a.text+=(this.a.text?"\n":"")+e;else if(e.includes("--\x3e")){const t=this.o(e,a);t&&(this.a=new n.b(t[0],t[1],t[2].join(" ")),this.a.id=this.l,this.c=n.a.Cue)}this.l=e}o(e,n){return super.o(e.replace(i,"."),n)}}var l=Object.freeze({__proto__:null,SRTParser:s,default:function(){return new s}});const o={p:()=>new n.P({code:n.c.BadSignature,reason:"missing WEBVTT file header",line:1}),q:(e,a)=>new n.P({code:n.c.BadTimestamp,reason:`cue start timestamp \`${e}\` is invalid on line ${a}`,line:a}),r:(e,a)=>new n.P({code:n.c.BadTimestamp,reason:`cue end timestamp \`${e}\` is invalid on line ${a}`,line:a}),s:(e,a,t)=>new n.P({code:n.c.BadTimestamp,reason:`cue end timestamp \`${a}\` is greater than start \`${e}\` on line ${t}`,line:t}),w:(e,a,t)=>new n.P({code:n.c.BadSettingValue,reason:`invalid value for cue setting \`${e}\` on line ${t} (value: ${a})`,line:t}),v:(e,a,t)=>new n.P({code:n.c.UnknownSetting,reason:`unknown cue setting \`${e}\` on line ${t} (value: ${a})`,line:t}),u:(e,a,t)=>new n.P({code:n.c.BadSettingValue,reason:`invalid value for region setting \`${e}\` on line ${t} (value: ${a})`,line:t}),t:(e,a,t)=>new n.P({code:n.c.UnknownSetting,reason:`unknown region setting \`${e}\` on line ${t} (value: ${a})`,line:t}),N:(e,a)=>new n.P({code:n.c.BadFormat,reason:`format missing for \`${e}\` block on line ${a}`,line:a})};var r=Object.freeze({__proto__:null,ParseErrorBuilder:o});return{get a(){return l},get e(){return r},s:t}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("DopQd8m2",["GlDbwxoG","s_Igk1Yn"],(async(e,t)=>{const i=e=>e instanceof HTMLButtonElement||e instanceof HTMLAnchorElement||["button","link","menuitem","tab","checkbox","combobox","gridcell","application","treeitem"].includes(e?.getAttribute("role")??"");class n extends e.R{constructor(){super(...arguments),this._triggerElement=null,this.keydown=!1,this.dialogId="",this.noModal=!1,this.handleClick=()=>{this.keydown||this.sendActivatedEvent()},this.handleKeydown=e=>{"Enter"===e.key&&(this.keydown=!0)},this.handleKeyup=e=>{"Enter"===e.key&&!0===this.keydown&&(this.keydown=!1,this.sendActivatedEvent())},this.handleBlur=()=>{this.keydown=!1}}set triggerElement(t){const i=this._triggerElement?.getAttribute("aria-expanded")??!1,n=this._triggerElement,r=t;n&&(n?.removeAttribute("aria-haspopup"),n?.removeAttribute("aria-expanded"),n?.removeEventListener("click",this.handleClick),n?.removeEventListener("keydown",this.handleKeydown),n?.removeEventListener("keyup",this.handleKeyup),n?.addEventListener("blur",this.handleBlur)),r&&(this.action!==e.hB.Hide&&(r.setAttribute("aria-haspopup","dialog"),r.setAttribute("aria-expanded",`${i}`)),r.addEventListener("click",this.handleClick),r.addEventListener("keydown",this.handleKeydown),r.addEventListener("keyup",this.handleKeyup),r.addEventListener("blur",this.handleBlur),this._triggerElement=r)}get triggerElement(){return this._triggerElement}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),"action"===e&&(this.triggerElement=this._triggerElement)}addOpenAttributes(){this.triggerElement&&this.triggerElement.setAttribute("aria-expanded","true")}removeOpenAttributes(){this.triggerElement&&this.triggerElement.setAttribute("aria-expanded","false")}handleSlotChange(){this.triggerElement=((e,t=5)=>{let n=e??null,r=0;if(i(n))return n;for(;n&&r<t;){if(n=n?.assignedElements?n?.assignedElements()?.[0]??null:n?.children[0]??null,i(n))return n;r++}return null})(this.slottedElements?.[0]??null)}sendActivatedEvent(){if(this.triggerElement?.hasAttribute("disabled"))return;if(!this.dialogId)return void console.warn("No dialogId set on rpl-dialog-trigger, unable to trigger");const e={dialogId:this.dialogId,triggerElement:this,noModal:this.noModal,action:this.action};this.emitter.dispatch("trigger-clicked",{bubbles:!0,composed:!0,detail:e})}render(){return t.x`<slot @slotchange="${this.handleSlotChange}"></slot>`}}e._([e.n({type:String,reflect:!0,attribute:"dialog-id"})],n.prototype,"dialogId",void 0),e._([e.n({type:Boolean,reflect:!0,attribute:"no-modal"})],n.prototype,"noModal",void 0),e._([e.n({type:String,reflect:!0})],n.prototype,"action",void 0),e._([e.l()],n.prototype,"slottedElements",void 0);var r=t.i`:host{display:contents}`;let l=class extends n{};l.styles=r,l=e._([e.e("rpl-dialog-trigger")],l)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("DpIcjKPf",["GlDbwxoG","s_Igk1Yn"],(async(e,t)=>{let a=class extends t.s{constructor(){super(...arguments),this.replaceItselfWithChildren=()=>{this.replaceWith(...this.childNodes)}}render(){return t.x`<div class="mx-md xs:mx-0"> <div class="items-center justify-between flex flex-row py-sm px-md w-100 bg-neutral-background border-neutral-border rounded-2 border-solid border box-border"> <div> ${t.w({size:t.I.Medium,attributes:{className:"align-middle mr-2xs"}})} <span class="text-neutral-content-weak"> ${"Posted by a blocked account"} </span> </div> ${e.Y({appearance:"secondary",size:e.a7.Small,attributes:{rel:"nofollow",id:"primary-button",onclick:this.replaceItselfWithChildren},children:"View Post"})} </div> </div>`;}};a.styles=[e.t],a=e._([e.e("shreddit-blocked-post-content")],a)}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("Dpra1UnG",["s_Igk1Yn"],(async r=>{const{svg:t}=r.g();return{r:r.m(t`<path d="M15.21 7.5l2.56-3.86c.47-.7-.04-1.64-.88-1.64H5C3.03 2 1.59 3.87 2.1 5.78L4.04 13l1.37 5.08a.906.906 0 001.1.64.9.9 0 00.64-1.1l-1.24-4.61h10.98c.84 0 1.35-.94.88-1.64l-2.56-3.86V7.5zm-9.79 3.7L3.84 5.31c-.13-.5.07-.87.21-1.04.13-.18.44-.47.95-.47h10.5l-2.45 3.7 2.45 3.7H5.42z"></path>`,"0 0 20 20","report")}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./BqPzZllT.js",import.meta.url,"BqPzZllT");SML.di("./DzMpUNmB.js",import.meta.url,"DzMpUNmB");SML.di("./BGOkDHmz.js",import.meta.url,"BGOkDHmz");SML.di("./CnjPLu6R.js",import.meta.url,"CnjPLu6R");SML.di("./Bvcfbv8-.js",import.meta.url,"Bvcfbv8-");SML.di("./m5O0vt6a.js",import.meta.url,"m5O0vt6a");SML.di("./DtcD-j6p.js",import.meta.url,"DtcD-j6p");SML.di("./BktidS9F.js",import.meta.url,"BktidS9F");SML.di("./BPjD9jS-.js",import.meta.url,"BPjD9jS-");SML.di("./DK2EuOAl.js",import.meta.url,"DK2EuOAl");SML.di("./B4wbfaco.js",import.meta.url,"B4wbfaco");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("DrQgO6CS",["GlDbwxoG","s_Igk1Yn","BqPzZllT","DzMpUNmB","BGOkDHmz","CnjPLu6R","Bvcfbv8-","m5O0vt6a","DtcD-j6p","BktidS9F","CC2wUKE8","BPjD9jS-","DK2EuOAl","B4wbfaco"],(async(e,i,t,a,s,n,r,o,d,l,u)=>{var N,p,h;!function(e){e.Everywhere="GLOBAL",e.UnitedStates="US",e.Argentina="AR",e.Australia="AU",e.Bulgaria="BG",e.Canada="CA",e.Chile="CL",e.Colombia="CO",e.Croatia="HR",e.CzechRepublic="CZ",e.Finland="FI",e.France="FR",e.Germany="DE",e.Greece="GR",e.Hungary="HU",e.Iceland="IS",e.India="IN",e.Ireland="IE",e.Italy="IT",e.Japan="JP",e.Malaysia="MY",e.Mexico="MX",e.NewZealand="NZ",e.Philippines="PH",e.Poland="PL",e.Portugal="PT",e.PuertoRico="PR",e.Romania="RO",e.Serbia="RS",e.Singapore="SG",e.Spain="ES",e.Sweden="SE",e.Taiwan="TW",e.Thailand="TH",e.Turkey="TR",e.UnitedKingdom="GB"}(N||(N={})),function(e){e.AllStates="",e.Alaska="AK",e.Alabama="AL",e.Arkansas="AR",e.Arizona="AZ",e.California="CA",e.Colorado="CO",e.Connecticut="CT",e.DistrictOfColumbia="DC",e.Delaware="DE",e.Florida="FL",e.Georgia="GA",e.Hawaii="HI",e.Iowa="IA",e.Idaho="ID",e.Illinois="IL",e.Indiana="IN",e.Kansas="KS",e.Kentucky="KY",e.Louisiana="LA",e.Massachusetts="MA",e.Maryland="MD",e.Maine="ME",e.Michigan="MI",e.Minnesota="MN",e.Missouri="MO",e.Mississippi="MS",e.Montana="MT",e.NorthCarolina="NC",e.NorthDakota="ND",e.Nebraska="NE",e.NewHampshire="NH",e.NewJersey="NJ",e.NewMexico="NM",e.Nevada="NV",e.NewYork="NY",e.Ohio="OH",e.Oklahoma="OK",e.Oregon="OR",e.Pennsylvania="PA",e.RhodeIsland="RI",e.SouthCarolina="SC",e.SouthDakota="SD",e.Tennessee="TN",e.Texas="TX",e.Utah="UT",e.Virginia="VA",e.Vermont="VT",e.Washington="WA",e.Wisconsin="WI",e.WestVirginia="WV",e.Wyoming="WY"}(p||(p={})),function(e){e.Show="show",e.Close="close"}(h||(h={}));const c=({notificationLevel:i,hfnUxUpdatesVariant:t,isUpdatesAllEnabled:a})=>{switch(i){case e.eA.All:return "All new posts";case e.eA.Frequent:return ((e,i)=>{if(i)return "Popular posts";switch(e){case n.a:return "Frequent notifications";case n.H:return "All notifications";default:return "Frequent";}})(t,a);case e.eA.Low:return (e=>{switch(e){case n.a:return "Allow notifications";case n.H:return "Personalized notifications";default:return "Low";}})(t);case e.eA.Off:return ((e,i)=>{const t="Off";return i?t:e===n.a||e===n.H?"None":t;})(t,a);default:return""}},m=(t,a,s)=>{switch(t){case e.eA.All:return a?.filled?n.n(a?.iconProps):i.aj(a?.iconProps);case e.eA.Frequent:return s?a?.filled?r.n(a?.iconProps):i.ah(a?.iconProps):a?.filled?n.n(a?.iconProps):i.aj(a?.iconProps);case e.eA.Low:return a?.filled?r.n(a?.iconProps):i.ah(a?.iconProps);case e.eA.Off:return a?.filled?o.n(a?.iconProps):i.ai(a?.iconProps);default:return i.ah(a?.iconProps)}},f=({notificationLevel:i,hfnUxUpdatesVariant:t,isUpdatesAllEnabled:a})=>{switch(i){case e.eA.All:return "Notifications set to All new posts";case e.eA.Frequent:return ((e,i)=>{if(i)return "Notifications set to Popular posts";switch(e){case n.a:case n.H:return "All notifications are turned on";default:return "Notifications set to frequent";}})(t,a);case e.eA.Low:return (e=>{switch(e){case n.a:return "Notifications are now allowed";case n.H:return "Personalized notifications are on";default:return "Notifications set to low";}})(t);case e.eA.Off:return ((e,i)=>{const t="Notifications turned off";return i?t:e===n.a||e===n.H?"No notifications":t;})(t,a);default:return""}},I=(i,t)=>t?i===e.eA.Low?e.eA.Off:i:i===e.eA.All?e.eA.Frequent:i,b=async i=>{const t=await e.B({operation:e.C.UpdateSubredditSubscriptions,variables:{input:{inputs:[i]}}});if(!t?.data?.updateSubredditSubscriptions?.ok)throw new Error("Failed to update subreddit subscription")};let T=class extends i.s{constructor(){super(...arguments),this.name="",this.prefixedName="",this.subredditId="",this.isMuted=!1,this.isFavorite=!1,this.subscribed=!1,this.showJoinButton=!1,this.isUserLoggedIn=!1,this.buttonSize=e.a7.Small,this.iconSize=i.I.Small,this.isCustomFeedEnabled=!1,this.isDropdownOpen=!1,this.isDisabled=!1,this.pubsub=new e.m(this),this.onFavoriteButtonClick=this.disableButtonDuringExecution((async()=>{try{this.subscribed||(await b({subredditId:this.subredditId,subscribeState:e.cp.Subscribed}),this.handleSubscriptionChange(e.cp.Subscribed));const i=this.isFavorite?e.aM.None:e.aM.Favorited;await(async i=>{const t=await e.B({operation:e.C.UpdateSubredditFavoriteState,variables:{input:i}});if(!t?.data?.updateSubredditFavoriteState?.ok)throw new Error("Failed to update subreddit favorite state")})({subredditId:this.subredditId,favoriteState:i}),this.handleFavoriteStateChange(i)}catch(i){this.dispatchEvent(e.c("faceplate-alert",{level:e.X.error,message:"Something went wrong",cause:e.bs(i)}))}})),this.onUnmuteButtonClick=this.disableButtonDuringExecution((async()=>{try{await(async i=>{const t=await e.B({operation:e.C.DeleteSubredditMuteSettings,variables:{input:i}});if(!t?.data?.deleteSubredditMuteSettings?.ok)throw new Error("Failed to unmute subreddit")})({subredditId:this.subredditId}),this.handleUnmuteChange()}catch(i){this.dispatchEvent(e.c("faceplate-alert",{level:e.X.error,message:"Something went wrong",cause:e.bs(i)}))}})),this.onJoinButtonClick=this.disableButtonDuringExecution((async i=>{try{i===e.cp.Subscribed&&e.eB(this.name).catch((()=>{})),await b({subredditId:this.subredditId,subscribeState:i}),this.handleSubscriptionChange(i)}catch(i){this.dispatchEvent(e.c("faceplate-alert",{level:e.X.error,message:"Something went wrong",cause:e.bs(i)}))}})),this.activateFeature=e.j}static get styles(){return[e.t]}firstUpdated(){this.pubsub.subscribe(e.T.SubredditSubscriptionChange,(e=>{this.name===e.name&&(this.subscribed=e.subscribed)})),this.pubsub.subscribe(e.T.SubredditMuteStatusChange,(e=>{this.subredditId===e.subredditId&&(this.isMuted=e.isMuted)})),this.addToCustomFeedButton?.addEventListener("custom-feed-edit-button:dialog-loaded",this.setupAddToCustomFeedButtonListeners)}disconnectedCallback(){super.disconnectedCallback()}disableButton(){this.isDisabled=!0}enableButton(){this.isDisabled=!1}disableButtonDuringExecution(e){return async(...i)=>{this.disableButton(),await e(...i),this.enableButton()}}setupAddToCustomFeedButtonListeners(){const e=document.querySelector("rpl-dialog#custom-feed-add-modal");if(!e)return;const i=()=>{e.portalContainer.querySelector("custom-feed-edit-button")?.addEventListener("custom-feed-edit-button:dialog-loaded",(()=>{e.hide()}))};e.open?i():e.addEventListener("rpl-dialog:after-show",i)}handleFavoriteStateChange(t){this.isFavorite=t===e.aM.Favorited,e.p(e.T.SubredditFavoriteStatusChange,{id:this.subredditId,isFavorite:this.isFavorite});const a=this.isFavorite?`Added ${this.prefixedName} to favorites`:`Removed ${this.prefixedName} from favorites`;this.dispatchEvent(e.c("faceplate-alert",{level:e.X.info,message:a,namedContent:{action:i.x``}}))}handleUnmuteChange(){this.isMuted=!1,e.p(e.T.SubredditMuteStatusChange,{subredditId:this.subredditId,isMuted:!1}),this.dispatchEvent(e.c("faceplate-alert",{level:e.X.info,message:`Unmuted ${this.prefixedName}`,namedContent:{action:i.x``}}))}handleSubscriptionChange(i){this.subscribed=i===e.cp.Subscribed,e.p(e.T.SubredditSubscriptionChange,{name:this.name,subscribed:this.subscribed})}async openMuteConfirmationModal(){await this.activateFeature({name:e.eC});const i=document.getElementById(l.S);i?.openModal({subredditId:this.subredditId,prefixedName:this.prefixedName,onMuteRequestStart:this.disableButton.bind(this),onMuteRequestEnd:this.enableButton.bind(this)})}onDropdownOpen(){this.isDropdownOpen=!0}onDropdownClose(){this.isDropdownOpen=!1}renderAddToCustomFeedButton(){return this.isCustomFeedEnabled?i.x` <custom-feed-edit-button class="nd:visible" feature="${e.eD}" dialog-id="custom-feed-add-modal" query-params="${JSON.stringify({subredditId:this.subredditId})}"> ${a.l({label:"Add to custom feed",attributes:{tabindex:"0"}})} </custom-feed-edit-button> `:i.A;}renderFavoriteButton(){const e=this.isFavorite?"Remove from favorites":"Add to favorites";return a.l({label:e,onClick:this.onFavoriteButtonClick})}renderMuteButton(){if(!this.prefixedName)return"";const e=this.isMuted?`Unmute ${this.prefixedName}`:`Mute ${this.prefixedName}`,t=this.isMuted?"unmute":"mute",s=this.isMuted?this.onUnmuteButtonClick:this.openMuteConfirmationModal;return i.x` <faceplate-tracker source="subreddit_muting" action="${t}" noun="subreddit"> ${a.l({label:e,onClick:s})} </faceplate-tracker>`}renderJoinButton(){const t=this.subscribed?"Leave":"Join",s=this.subscribed?"unsubscribe":"subscribe",n=this.subscribed?e.cp.None:e.cp.Subscribed;return i.x`<faceplate-tracker source="community" action="click" noun="${s}"> ${a.l({label:t,onClick:()=>this.onJoinButtonClick(n)})} </faceplate-tracker>`}render(){return i.x`<faceplate-dropdown-menu class="nd:hidden" position="bottom-end" .onopen="${this.onDropdownOpen}" .onclose="${this.onDropdownClose}"> ${e.Y({appearance:"bordered",attributes:{"aria-label":"Open overflow menu",disabled:this.isDisabled},size:this.buttonSize,leadingIcon:d.o({size:this.iconSize}),selected:this.isDropdownOpen})} <faceplate-menu slot="menu" class="max-h-[18rem] overflow-auto nd:hidden" hidden> ${this.isUserLoggedIn?i.x` ${[this.renderAddToCustomFeedButton(),this.renderFavoriteButton(),this.renderMuteButton()]} ${this.showJoinButton?this.renderJoinButton():""} `:""} <slot name="devvit-context-actions"></slot> </faceplate-menu> </faceplate-dropdown-menu>`;}};e._([e.n({type:String})],T.prototype,"name",void 0),e._([e.n({type:String,attribute:"prefixed-name"})],T.prototype,"prefixedName",void 0),e._([e.n({type:String,attribute:"subreddit-id"})],T.prototype,"subredditId",void 0),e._([e.n({type:Boolean,attribute:"is-muted"})],T.prototype,"isMuted",void 0),e._([e.n({type:Boolean,attribute:"is-favorite"})],T.prototype,"isFavorite",void 0),e._([e.n({type:Boolean,attribute:"subscribed"})],T.prototype,"subscribed",void 0),e._([e.n({type:Boolean,attribute:"show-join-button"})],T.prototype,"showJoinButton",void 0),e._([e.n({type:Boolean,attribute:"is-user-logged-in"})],T.prototype,"isUserLoggedIn",void 0),e._([e.n({type:String,attribute:"button-size"})],T.prototype,"buttonSize",void 0),e._([e.n({type:String,attribute:"icon-size"})],T.prototype,"iconSize",void 0),e._([e.n({type:Boolean,attribute:"allow-custom-feed"})],T.prototype,"isCustomFeedEnabled",void 0),e._([e.N()],T.prototype,"isDropdownOpen",void 0),e._([e.N()],T.prototype,"isDisabled",void 0),e._([e.Q(`custom-feed-edit-button[feature="${e.eD}"]`)],T.prototype,"addToCustomFeedButton",void 0),T=e._([e.e("shreddit-subreddit-overflow-control")],T);let k=class extends T{render(){if(!this.prefixedName)return i.x``;const e=this.isMuted?s.v({size:this.iconSize}):i.a3({size:this.iconSize}),t=this.isMuted?"Unmute":"Mute",n=this.isMuted?"Show everything from this community":"Hide everything from this community",r=i.x` <div> <div>${t}</div> <div class="mt-0.5 text-12 text-secondary-weak">${n}</div> </div> `,o=this.isMuted?i.C({size:this.iconSize}):"",d=this.isMuted,l=this.isMuted?"unmute":"mute",u=this.isMuted?this.onUnmuteButtonClick:this.openMuteConfirmationModal;return i.x` <faceplate-tracker source="subreddit_muting" action="${l}" noun="subreddit"> ${a.l({label:r,leadingIcon:e,trailingSlot:o,selected:d,onClick:u,attributes:{role:"menuitem","aria-label":t}})} </faceplate-tracker> `}};k=e._([e.e("shreddit-notification-mute-control")],k);class v{constructor(i){this.host=i,this.emitNotificationFrequencyControlEvent=(...[i,t])=>e.f(this.host,e.b(i,{...t,action_info:{...t?.action_info,page_type:e.ah.Community}})),this.emitToggleCommunityAlertFromTelemetry=(e,i,t,a)=>{const s=t.toLowerCase();this.emitNotificationFrequencyControlEvent({source:"community",action:"set_frequency",noun:s},{subreddit:{id:e,name:i},action_info:{reason:a?.toLowerCase()}})}}}let R=e.aj;const g=[e.eA.Frequent,e.eA.Low,e.eA.Off],E=[e.eA.All,e.eA.Frequent,e.eA.Off];let S=class extends i.s{constructor(){super(...arguments),this.subredditId="",this.notificationLevel=e.eA.Low,this.buttonSize=e.a7.Small,this.iconSize=i.I.Small,this.hfnUxUpdatesVariant="",this.isUpdatesAllEnabled=!1,this.subredditUpdatesAllClientsVariant="",this.shredditSubredditUpdatesAllVariant="",this.subredditUpdatesAllClientsVersion="",this.shredditSubredditUpdatesAllVersion="",this.prefixedName="",this.isMuted=!1,this.isDropdownOpen=!1,this.isDisabled=!1,this.pubsub=new e.m(this),this.telemetryEmitter=new v(this)}static get styles(){return[e.t]}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(e.T.SubredditMuteStatusChange,(e=>{this.subredditId===e.subredditId&&(this.isMuted=e.isMuted)})),this.notificationLevel=I(this.notificationLevel,this.isUpdatesAllEnabled)}async onItemSelect(i){if(this.notificationLevel!==i){this.telemetryEmitter.emitToggleCommunityAlertFromTelemetry(this.subredditId,this.prefixedName,i,this.notificationLevel),this.isDisabled=!0;try{const t=(i=>{switch(i){case e.eA.Frequent:return{isSubredditUpdatesInterestingPostEnabled:!0,isUpdateFromSubredditEnabled:!0};case e.eA.Low:return{isSubredditUpdatesInterestingPostEnabled:!1,isUpdateFromSubredditEnabled:!0};case e.eA.Off:default:return{isSubredditUpdatesInterestingPostEnabled:!1,isUpdateFromSubredditEnabled:!1}}})(i),a=await this.updateSubredditNotificationLevel(t,i);a?.data?.updateSubredditMuteAndNotificationLevelSettings?.ok?(this.notificationLevel=I(i,this.isUpdatesAllEnabled),this.handleUpdateSuccess(i)):this.handleUpdateError(i)}catch(e){this.handleUpdateError(i)}this.isDisabled=!1}}async updateSubredditNotificationLevel(i,t=e.eA.Off){return e.B({operation:e.C.UpdateSubredditMuteAndNotificationLevelSettings,variables:{input:{subredditId:this.subredditId,...i,subredditNotificationLevel:t}}})}handleUpdateSuccess(t){this.dispatchEvent(e.c("faceplate-alert",{level:e.X.success,message:f({notificationLevel:t,hfnUxUpdatesVariant:this.hfnUxUpdatesVariant,isUpdatesAllEnabled:this.isUpdatesAllEnabled}),namedContent:{icon:m(t,{iconProps:{size:i.I.Medium}},this.isUpdatesAllEnabled)??i.x``,action:i.x``}}))}handleUpdateError(a){const s=()=>this.pubsub.publish(e.T.TriggerFeedErrorBanner,{type:h.Close}),n=i.x`<div slot="leadingIcon">${t.w()}</div>`,r=i.x`<span slot="closeButton"> ${u.b5("plainInverted",{"aria-label":"close button",onclick:s})} </span>`,o=i.x` <div slot="actionButtons"> ${u.b6([{children:"Retry",attributes:{onclick:()=>{s(),this.onItemSelect(a)}}}],"plainInverted")} </div>`,d={msg:"Error updating notifications",className:"my-lg",appearance:"plainInverted",shape:"rounded",children:i.x` ${n} ${o} ${r} `};this.pubsub.publish(e.T.TriggerFeedErrorBanner,{type:h.Show,data:d})}onDropdownOpen(){this.isDropdownOpen=!0,this.subredditUpdatesAllClientsVariant&&R({experimentName:"subreddit_updates_all_clients",variant:this.subredditUpdatesAllClientsVariant,experimentVersion:this.subredditUpdatesAllClientsVersion}),this.shredditSubredditUpdatesAllVariant&&R({experimentName:"shreddit_subreddit_updates_all",variant:this.shredditSubredditUpdatesAllVariant,experimentVersion:this.shredditSubredditUpdatesAllVersion})}onDropdownClose(){this.isDropdownOpen=!1}render(){const t=this.isUpdatesAllEnabled?E:g,r=this.hfnUxUpdatesVariant===n.a||this.hfnUxUpdatesVariant===n.H,o=r&&this.isMuted?s.v({size:this.iconSize}):m(this.notificationLevel||e.eA.Low,{filled:!0,iconProps:{size:this.iconSize}},this.isUpdatesAllEnabled);return i.x`<faceplate-dropdown-menu class="nd:hidden" position="bottom-end" .onopen="${this.onDropdownOpen.bind(this)}" .onclose="${this.onDropdownClose.bind(this)}"> ${e.Y({appearance:"bordered",size:this.buttonSize,attributes:{disabled:this.isDisabled,role:"button","aria-label":"Notification frequency menu"},leadingIcon:o,selected:this.isDropdownOpen})} <faceplate-menu slot="menu" hidden> ${t.map((e=>{let t=!1,s=this.notificationLevel===e,n="";r&&(t=this.isMuted,s&&(s=!t),s&&(n=i.C({size:this.iconSize})));const o=c({notificationLevel:e,hfnUxUpdatesVariant:this.hfnUxUpdatesVariant,isUpdatesAllEnabled:this.isUpdatesAllEnabled});return i.x` ${a.l({label:o,leadingIcon:m(e,{filled:s},this.isUpdatesAllEnabled),trailingSlot:n,selected:s,disabled:t,attributes:{role:"menuitem","aria-label":`Notifications ${o}`},onClick:()=>this.onItemSelect(e)})}`;}))} ${r?i.x` <div class="rpl-divider my-1 h-px bg-neutral-border" role="separator"></div> <shreddit-notification-mute-control prefixed-name="${this.prefixedName}" subreddit-id="${this.subredditId}" ?is-muted="${this.isMuted}" icon-size="${this.iconSize}"></shreddit-notification-mute-control>`:i.x``} </faceplate-menu> </faceplate-dropdown-menu>`;}};return e._([e.n({type:String,attribute:"subreddit-id"})],S.prototype,"subredditId",void 0),e._([e.n({type:String,attribute:"notification-level"})],S.prototype,"notificationLevel",void 0),e._([e.n({type:String,attribute:"button-size"})],S.prototype,"buttonSize",void 0),e._([e.n({type:String,attribute:"icon-size"})],S.prototype,"iconSize",void 0),e._([e.n({type:String,attribute:"hfn-ux-updates-variant"})],S.prototype,"hfnUxUpdatesVariant",void 0),e._([e.n({type:Boolean,attribute:"is-updates-all-enabled"})],S.prototype,"isUpdatesAllEnabled",void 0),e._([e.n({type:String,attribute:"subreddit-updates-all-clients-variant"})],S.prototype,"subredditUpdatesAllClientsVariant",void 0),e._([e.n({type:String,attribute:"shreddit-subreddit-updates-all-variant"})],S.prototype,"shredditSubredditUpdatesAllVariant",void 0),e._([e.n({type:String,attribute:"subreddit-updates-all-clients-version"})],S.prototype,"subredditUpdatesAllClientsVersion",void 0),e._([e.n({type:String,attribute:"shreddit-subreddit-updates-all-version"})],S.prototype,"shredditSubredditUpdatesAllVersion",void 0),e._([e.n({type:String,attribute:"prefixed-name"})],S.prototype,"prefixedName",void 0),e._([e.n({type:Boolean,attribute:"is-muted"})],S.prototype,"isMuted",void 0),e._([e.N()],S.prototype,"isDropdownOpen",void 0),e._([e.N()],S.prototype,"isDisabled",void 0),S=e._([e.e("shreddit-notification-frequency-control")],S),{get F(){return h}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DdoeBlGT.js",import.meta.url,"DdoeBlGT");
SML.dm("DrfUuQzt",["GlDbwxoG","s_Igk1Yn","DdoeBlGT"],(async(t,e,s)=>{var i;const a=["global/view/discovery_unit","right_rail/click/panel_tab","right_rail/view/panel_tab","post/view/post","post/consume/post","post/click/post","post/click/subreddit","post/click/comments"];let n=i=class extends e.s{get expandButtonElm(){return this.querySelector('[slot="expand-button"]')}get rightRailContainerElm(){return t.bv(this,"#right-sidebar-container")}get subredditHeaderContainerElm(){return t.bv(this,"shreddit-subreddit-header")?.parentNode}get chainedRelatedPostElm(){return t.bv(this,`#${s.P}`)}constructor(){super(),this.tabPanelsRef=t.U(),this.tabSelectCallback=t=>{for(const e of t)if("attributes"===e.type&&"faceplate-tab-selected"===e.attributeName&&e.target.nodeType===Node.ELEMENT_NODE){e.target.hasAttribute("faceplate-tab-selected")&&this.handleTabSelect(e.target)}},this.tabSelectObserver=new MutationObserver(this.tabSelectCallback),this.handlePDPRightRailTelemetry=e=>{if(!(e=>a.includes(e.SAN||t.aY(e.detail)))(e))return;const s=e.detail;let i;try{const t=e?.target,s=t?.closest("span[event-data]")?.getAttribute("event-data")??t?.closest("reddit-pdp-right-rail-post")?.getAttribute("event-data");i=s?JSON.parse(decodeURIComponent(s)):{}}catch{i={}}s.action_info={...s.action_info,...i.action_info,type:"right_rail"},"post"===s.source&&(s.post={...s.post,...i.post},s.subreddit={...s.subreddit,...i.subreddit})},this.handleTabSelect=t=>{const e=t.slot;e&&this.querySelector(`[slot="tab-panel"] [slot="${e}"] faceplate-partial[loading="programmatic"]`)?.load()},this.handleButtonClick=t=>{t.preventDefault()},this.handleExpandButtonClick=()=>{this.querySelectorAll("ul > li.hidden").forEach((t=>{t.classList.remove("hidden")})),this.querySelectorAll("ul > li hr.hidden").forEach((t=>{t.classList.remove("hidden")})),this.expandButtonElm?.remove()},this.addEventListener("faceplate-track",this.handlePDPRightRailTelemetry)}firstUpdated(){this.querySelector('[slot="tabs"]')?.addEventListener("click",this.handleButtonClick),this.expandButtonElm?.addEventListener("click",this.handleExpandButtonClick)}connectedCallback(){super.connectedCallback(),this.tabSelectObserver.observe(this,i.tabSelectObserverOptions)}disconnectedCallback(){super.disconnectedCallback(),this.tabSelectObserver.disconnect(),this.querySelector('[slot="tabs"]')?.removeEventListener?.("click",this.handleButtonClick)}render(){return e.x` <div> <slot name="tabs" class="block sticky z-1 top-0 bg-neutral-background"></slot> <div ${t.V(this.tabPanelsRef)} class="pt-sm"> <slot name="tab-panel"></slot> </div> <slot name="expand-button"></slot> </div> `}};n.styles=[t.t],n.tabSelectObserverOptions={childList:!0,subtree:!0,attributes:!0,attributeFilter:["faceplate-tab-selected"]},n=i=t._([t.e("pdp-right-rail")],n);class o extends t.b2{constructor(e,s){super(e),this.events=new t.E(this,(()=>this._host)),this.handleMouseClick=(t,e)=>{if(!e.query)return;const s=t.composedPath();for(const i of s){if(!(i instanceof HTMLAnchorElement))continue;const s=i.getAttribute("href");if(s&&(!e.pattern||e.pattern.test(s))){const i=this.getNewUrl(s,e.query);return t.preventDefault(),this.assignLocation(i)}}},this.events.define("click",(t=>{this.handleMouseClick(t,s())}))}getNewUrl(t,e){if(t.startsWith("/")&&(t=window.location.origin+t),!t||!e)return t;const s=new URL(t),i=new URLSearchParams(s.search);for(const[t,s]of e)i.set(t,s);return s.search=i.toString(),s.toString()}assignLocation(t){window.location.assign(t)}}const r=t.W(e.s);window.addEventListener("afterRoute",(function(){const t=new URL(window.location.href);t.searchParams.has("chainedPosts")&&(t.searchParams.delete("chainedPosts"),window.history.replaceState({},"",t.toString()))}));let l=class extends r{constructor(){super(...arguments),this.postId="",this.chainedPostIds="",this.rightRailPostId="",this.isTranslated=!1,this.consumeTimeoutId=null,this._outboundLinkTrackingController=new s.O(this,(()=>({pageType:t.w(),postId:this.postId}))),this._linkClickController=new o(this,(()=>({pattern:/\/comments\/([a-zA-Z0-9_]+)\//,...this.chainedPostIds?{query:new Map([["chainedPosts",this.chainedPostIds]])}:{}})))}connectedCallback(){super.connectedCallback(),this.enableObserver()}disconnectedCallback(){super.disconnectedCallback(),this.disableObserver(),this.clearConsumeTimeout()}clearConsumeTimeout(){this.consumeTimeoutId&&(clearTimeout(this.consumeTimeoutId),this.consumeTimeoutId=null)}observerIsIntersectingCallback(){this.consumeTimeoutId=setTimeout((()=>{t.f(this,t.b({source:"post",action:"consume",noun:"post"}))}),2e3)}observerIsNotIntersectingCallback(){this.clearConsumeTimeout()}createRenderRoot(){return this}};t._([t.n({type:String,attribute:"post-id"})],l.prototype,"postId",void 0),t._([t.n({type:String,attribute:"chained-ids"})],l.prototype,"chainedPostIds",void 0),t._([t.n({type:String,attribute:"right-rail-post-id"})],l.prototype,"rightRailPostId",void 0),t._([t.n({type:Boolean,attribute:"is-translated",reflect:!0})],l.prototype,"isTranslated",void 0),l=t._([t.e("reddit-pdp-right-rail-post")],l)}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./B8B7_bfl.js",import.meta.url,"B8B7_bfl");SML.di("./jOi_w9kT.js",import.meta.url,"jOi_w9kT");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("DrrjN1Nt",["s_Igk1Yn","GlDbwxoG","B8B7_bfl","jOi_w9kT","CC2wUKE8"],(async(e,t,a,i,n)=>{const r=e.e(class extends e.a{constructor(t){if(super(t),t.type!==e.t.PROPERTY&&t.type!==e.t.ATTRIBUTE&&t.type!==e.t.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!e.b(t))throw Error("`live` bindings can only contain a single expression")}render(e){return e}update(t,[a]){if(a===e.T||a===e.A)return a;const i=t.element,n=t.name;if(t.type===e.t.PROPERTY){if(a===i[n])return e.T}else if(t.type===e.t.BOOLEAN_ATTRIBUTE){if(!!a===i.hasAttribute(n))return e.T}else if(t.type===e.t.ATTRIBUTE&&i.getAttribute(n)===a+"")return e.T;return e.aY(t),a}});class o{constructor(e,t){this._observedNames=new Set,this._previousStates=new Map,this._records=new Map,this._eventListener=e=>{this._processRecord(e.detail)},this._callCallback=()=>{this._records.size&&this._callback(this.takeRecords(),this)},this._callback=e,this.form=t.form}_processRecord(e){const t=!this._records.size,{input:a,message:i,name:n}=e;if(!this._observedNames.has(n))return;this._previousStates.get(n)!==i&&(this._records.set(n,{target:a,message:i,name:n}),this._previousStates.set(n,i),this._records.size&&t&&queueMicrotask(this._callCallback))}observe(e){if(this._observedNames.has(e))return;this._observedNames.add(e),1===this._observedNames.size&&this.form.addEventListener("_faceplate-validation-change",this._eventListener);const t=this.form.elements[e];!t||t instanceof HTMLOutputElement||Array.isArray(t)||this._processRecord({input:t,name:e,message:t.validationMessage})}disconnect(){this._observedNames.size&&(this._observedNames.clear(),this._previousStates.clear(),this._records.clear(),this.form.removeEventListener("_faceplate-validation-change",this._eventListener))}takeRecords(){const e=Array.from(this._records.values());return this._records=new Map,e}unobserve(e){this._observedNames.has(e)&&(this._observedNames.delete(e),this._previousStates.delete(e),this._records.delete(e),this._observedNames.size||this.disconnect())}}let s=class extends e.s{constructor(){super(...arguments),this.name="",this.level=null,this.placeholder="",this.ariaLive=null,this.message="",this.characterCount=Number.NEGATIVE_INFINITY,this.characterCountAriaLabel="",this.visuallyHiddenText="",this.isInputDirty=!0,this._message="",this.setIsDirtyByAttribute=e=>{this.isInputDirty=e.hasAttribute("faceplate-dirty")},this.onFormConnect=e=>{e?.addEventListener("faceplate-submit",(()=>{this.isInputDirty=!0})),e&&this.isConnected&&(this._observer=new o((e=>{for(const a of e)if(a.name===this.name){if(a.target instanceof i.F){this.setIsDirtyByAttribute(a.target);new MutationObserver((e=>{for(const t of e)"faceplate-dirty"===t.attributeName&&this.setIsDirtyByAttribute(t.target),"faceplate-validity"===t.attributeName&&this.toggleSuccessStyling(t.target)})).observe(a.target,{attributes:!0})}else this.isInputDirty=!0;this.setMessage(this.message||a.message,"valid"===a.target.getAttribute("faceplate-validity")?t.X.success:t.X.error)}}),{form:e}),this._observer.observe(this.name),this._observer.form.addEventListener("faceplate-alert",this._handleAlert))},this.associateForm=e=>{this.onFormConnect(e)},this._handleAlert=e=>{this.isInputDirty=!0;const{name:a,level:i,message:n}=e.detail;a===this.name&&i!==t.X.error&&this.setMessage(n,i)},this.toggleSuccessStyling=e=>{this.isInputDirty&&("valid"===e.getAttribute("faceplate-validity")?this.shadowRoot?.getElementById("helper-text")?.classList.add("success"):this.shadowRoot?.getElementById("helper-text")?.classList.remove("success"))}}connectedCallback(){super.connectedCallback(),a.c(this).then(this.onFormConnect)}disconnectedCallback(){super.disconnectedCallback(),this._observer&&(this._observer.disconnect(),this._observer.form.removeEventListener("faceplate-alert",this._handleAlert))}setMessage(e,a){e&&void 0!==a?this.level=t.X[a]:this.removeAttribute("level"),this._message=e||""}get textContent(){return this.shadowRoot?.firstElementChild?.textContent||""}get innerText(){return this.shadowRoot?.firstElementChild?.innerText||""}static get styles(){return e.i`:host{display:block;font-size:var(--font-small);color:var(--color-input-helper-text);line-height:var(--size-md);font-size:var(--font-small);box-sizing:border-box}.container{display:flex;justify-content:space-between;padding-top:var(--spacer-input-padding-top);line-height:var(--size-md);font-size:var(--font-small)}.success,:host([level=success]){color:var(--color-success-content)}.overflow-char-limit,:host([level=alert]),:host([level=critical]),:host([level=emergency]),:host([level=error]){color:var(--color-danger-content)}:host([level=warning]){color:var(--color-alert-caution)}:host([level=notice]){color:var(--color-success-content)}.pristine{color:var(--color-input-helper-text)}:host([character-count]) .character-count{margin-inline-start:var(--spacer-xs);flex-shrink:0}.empty{padding:0}`}render(){const a=this.characterCount>Number.NEGATIVE_INFINITY;let i=this.characterCount;if(this.characterCountMax){i=`${this.characterCountMax-this.characterCount}/${this.characterCountMax}`}return this.placeholder||this._message||a?e.x`<span aria-live="${e.l(this.ariaLive??void 0)}" class="${t.H({container:!0,pristine:!this.isInputDirty})}"> <span id="helper-text">${this.isInputDirty&&this._message?this._message:this.placeholder}</span> ${a?e.x`<span class="character-count ${this.characterCount<0?"overflow-char-limit":""}" aria-label="${e.l(this.characterCountAriaLabel)}">${i}</span>`:void 0} </span> <faceplate-screen-reader-content aria-live="assertive">${this.visuallyHiddenText}</faceplate-screen-reader-content>`:e.x`<faceplate-screen-reader-content aria-live="polite">${this.visuallyHiddenText}</faceplate-screen-reader-content>`}};t._([t.n({type:String,reflect:!0})],s.prototype,"name",void 0),t._([t.n({type:String,reflect:!0})],s.prototype,"level",void 0),t._([t.n({type:String})],s.prototype,"placeholder",void 0),t._([t.n({type:String,reflect:!0,attribute:"aria-live"})],s.prototype,"ariaLive",void 0),t._([t.n({type:String,attribute:"message"})],s.prototype,"message",void 0),t._([t.n({type:Number,attribute:"character-count"})],s.prototype,"characterCount",void 0),t._([t.n({type:Number,attribute:"character-count-max"})],s.prototype,"characterCountMax",void 0),t._([t.n({type:String,attribute:"character-count-aria-label"})],s.prototype,"characterCountAriaLabel",void 0),t._([t.n({type:String,attribute:"visually-hidden-text"})],s.prototype,"visuallyHiddenText",void 0),t._([t.N()],s.prototype,"isInputDirty",void 0),t._([t.N()],s.prototype,"_message",void 0),s=t._([t.e("faceplate-form-helper-text")],s);class l extends i.F{constructor(){super(...arguments),this.suffix="",this.value="",this.name="",this.placeholder="",this.required=!1,this.screenReaderContent="",this.novalidate=!1,this.helperTextLevel=null,this.helperTextPlaceholder="",this.helperTextAriaLive="polite",this.helperTextMessage="",this.hasLabel=!1,this.hasTrailingButton=!1,this.statefulInput=!1,this.reportedDirty=!1,this.hasValidationHelpers=!1,this.suppressInternalClicks=!1,this.validationMsg="",this.allowMaxLengthOverflow=!1,this.setFormValidationHelpers=e=>{e&&(e.addEventListener("faceplate-submit",this.setDirtyAttribute),this.helperText?.associateForm(e),this.hasValidationHelpers=!0)},this.setStatefulInputByValue=()=>{this.statefulInput=!this.isEmpty},this.inputContainer=a=>e.x` <span class="${t.H({"input-container":!0})}"> ${a} </span> `,this.labelTextWrapper=()=>{const t=e=>e&&e[0]?.textContent;return e.x` <span class="label-text inner-label" id="fp-input-label"><slot name="label" @slotchange="${e=>this.onSlotChange({event:e,property:"hasLabel",name:"label",hasChanged:t})}"></slot>${this.required?e.x`<span class="required-asterisk" aria-hidden="true">*</span>`:null}</span> `},this.setDirtyAttribute=()=>{this.setAttribute("faceplate-dirty","")},this.onSlotChange=({event:e,property:t,name:a,hasChanged:i})=>{e.target?.name===a&&(this[t]=i?i(e.target?.assignedElements()):e.target?.assignedNodes().length>0)}}async connectedCallback(){super.connectedCallback(),this.addEventListener("focus",this.onFocus.bind(this)),this.addEventListener("blur",this.onBlur.bind(this));const e=await a.c(this);this.setFormValidationHelpers(e)}disconnectedCallback(){super.disconnectedCallback(),this?.removeEventListener("focus",this.onFocus),this?.removeEventListener("blur",this.onBlur),this.form?.removeEventListener("faceplate-submit",this.setDirtyAttribute)}async firstUpdated(){super.firstUpdated(),this.calculateLabelPosition(),this.validateMaxLength()}updated(e){if(e.get("prefix")&&this.calculateLabelPosition(),void 0!==e.get("statefulInput")){const e=this.shadowRoot?.querySelector(".input-container")?.classList;this.statefulInput?e.add("stateful-input"):e.remove("stateful-input")}e.has("value")&&(super.value=this.value,this.setStatefulInputByValue())}get delegatedFocusElements(){return[this.innerInput]}static get styles(){return[super.styles,e.i`label{display:flex;position:relative}:host{outline:0;font-family:var(--font-sans);cursor:text}:host input,:host textarea{font:inherit;color:var(--color-neutral-content-strong);padding:0}.label-container{display:inline-flex;position:relative;height:var(--rem40);align-items:center;box-sizing:border-box}:host([appearance=bordered]) .label-container{background:var(--color-input-bordered);color:var(--color-input-bordered-text)}:host([appearance=secondary]) .label-container{background:var(--color-input-secondary);border-radius:var(--radius-md);outline:0;color:var(--color-input-secondary-text)}:host([appearance=secondary]) .label-container:hover{background:var(--color-input-secondary-hover)}:host([appearance=bordered]) .label-container:hover{background:var(--color-input-bordered-hover)}:host(:focus-within) .label-container{outline:1px auto var(--color-global-focus)}:host([faceplate-validity=invalid][faceplate-dirty]) .label-container{border-color:transparent;box-shadow:0 0 0 var(--rem2) var(--color-danger-content)}:host([faceplate-validity=valid][novalidate]) .label-container{border-color:transparent;box-shadow:none}:host .label-container,:host faceplate-form-helper-text{padding-inline-start:var(--spacer-md)}:host .label-container,:host faceplate-form-helper-text:not(.helper-text-without-label-with-trailing){padding-inline-end:var(--spacer-md)}:host([appearance=secondary]) .label-container{align-items:center}:host .label-container.with-trailing-button{padding-inline-end:var(--spacer-xs)}.label-container.interior-label{height:var(--rem56)}.input-container{font:var(--font-16-20-regular)}::slotted([slot=leadingIcon]),::slotted([slot=trailingIconButton]){color:var(--color-neutral-content-weak);display:inline-flex;align-items:center}:host([faceplate-validity=valid][faceplate-dirty]) .trailing-icon.valid{color:var(--color-success-background)}.required-asterisk,:host([faceplate-validity=invalid][faceplate-dirty]) .trailing-icon.invalid{color:var(--color-danger-content)}:host([faceplate-validity=valid][novalidate]) .trailing-icon.valid{display:none}.trailing-icon,::slotted([slot=trailingIcon]){margin-inline-start:var(--spacer-xs);flex-shrink:0}:host([disabled]){color:var(--color-neutral-content-disabled)}:host([faceplate-validity=invalid][faceplate-dirty]) .invalid,:host([faceplate-validity=valid][faceplate-dirty]) .valid{display:inline-block}.trailing-icon{display:none}:host .label-container.without-label faceplate-form-helper-text,:host([appearance=secondary]) .label-container.without-label{padding-top:var(--rem10);padding-bottom:var(--rem10)}:host([faceplate-validity=invalid]:not([disabled])[faceplate-dirty]) .label-text:not(.inner-label),:host([faceplate-validity=valid]:not([disabled])[faceplate-dirty]) .label-text:not(.inner-label){color:var(--color-label-default)}.label-text{position:absolute;pointer-events:none}:host([disabled]) .label-text:not(.inner-label){color:var(--color-neutral-content-disabled)}.stateful-input .label-text:not(.inner-label){clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}.stateful-input .label-text.inner-label{transform:translate(calc(-1 * var(--left-label-position)),calc(-1 * (var(--rem16))));font-size:var(--size-sm);line-height:var(--rem16);white-space:nowrap}.label-container:not(.without-label) .input-container:not(.stateful-input) input::placeholder,.label-container:not(.without-label) .input-container:not(.stateful-input) textarea::placeholder{opacity:0}.label-container:not(.without-label) .input-container.stateful-input{transform:translateY(var(--spacer-xs))}.activated,.activated .label-text.inner-label{transition:all 150ms ease-out}.inner-label{inset-inline-start:var(--left-label-position)}.input-container:not(.stateful-input) .inner-label{transform:translateY(0);transition:transform 150ms ease}.hidden{display:none}.label-text:not(.inner-label){color:var(--color-label-default)}slot[name=clearButton]:not(.has-value){display:none}.input-boundary-box{display:flex;align-items:center}.input-boundary-box,.label-container{flex:1}.label-container:not(.without-label) .input-boundary-box{padding:var(--spacer-xs) 0}#trailing-icons-container{display:flex;align-items:center;gap:var(--spacer-xs);justify-content:flex-end}:host([persistent-trailing-icon]) #trailing-icons-general{flex-direction:row-reverse}.input-prefix,.input-suffix,.label-text{color:var(--color-label-default)}:host .without-label.with-trailing-button{padding-inline-end:var(--spacer-2xs)}.input-container{position:relative;transform:translateY(0);display:flex;align-items:center;width:100%;line-height:var(--rem20)}:host([faceplate-validity=invalid]:not([persistent-trailing-icon])[faceplate-dirty]) ::slotted([slot=trailingIconButton]){display:none}#trailing-icons-general{display:flex;align-items:center}#trailing-icons-validation{display:flex}:host(:not([faceplate-dirty])) #trailing-icons-validation{display:none}`]}get isEmpty(){return!(!this.innerInput?.value&&this.innerInput?.validity.badInput)&&!(this.innerInput?.value??this.value)}onFocus(){this.hasAttribute("faceplate-dirty")&&!this.reportedDirty&&(this.reportedDirty=!0),this.removeAttribute("faceplate-dirty"),this.shadowRoot?.querySelector(".input-container")?.classList.add("activated"),this.isEmpty&&(this.statefulInput=!0)}onBlur(){this.isEmpty&&(this.statefulInput=!1),this.reportedDirty&&this.setAttribute("faceplate-dirty","")}focus(){this.innerInput?.focus()}blur(){this.innerInput?.blur()}onChange(e){const t=e?.target;this.value=t?.value||"",this.dispatchEvent(new InputEvent("change",{bubbles:!0}))}onInput(e){const t=e?.target;this.value=t?.value||"",this.handleCharLimit?.(),this.validateMaxLength(),this.setStatefulInputByValue()}validateMaxLength(){if(this.allowMaxLengthOverflow&&this.maxLength){const e=this._internals.validationMessage===this.validationMsg,t=this.value.length>this.maxLength;!e&&t?this.setCustomValidity(this.validationMsg):e&&!t&&this.setCustomValidity("")}}handleCharLimit(){const e=this.maxLength&&this.value.length>=this.maxLength;this.helperText&&this.helperTextScreenReaderMsg&&(e?this.helperText.visuallyHiddenText=this.helperTextScreenReaderMsg:!e&&this.helperText.visuallyHiddenText&&(this.helperText.visuallyHiddenText=""))}async calculateLabelPosition(e=0){let t=0,a=0;const i=this.shadowRoot?.querySelector(".input-prefix");if(i){!getComputedStyle(this.shadowRoot?.host).getPropertyValue("--font-16-20-regular").trim().length&&e<5&&setTimeout((()=>{this.calculateLabelPosition(e+1)}),50),a=i.getBoundingClientRect().width;const n=getComputedStyle(this.shadowRoot?.querySelector(".input-prefix")).getPropertyValue("margin-inline-end");t+=a+parseFloat(n)}(this.shadowRoot?.querySelector("label")).style.setProperty("--left-label-position",`${t}px`)}onLabelClick(e){this.suppressInternalClicks&&"input"!==e.target.nodeName.toLowerCase()&&e.stopPropagation()}renderInput(a){let i;return this.characterCount&&(i=this.maxLength?this.maxLength-this.value.length:this.value.length),e.x`<label @click="${this.onLabelClick}"> <div class="${t.H({"label-container":!0,"interior-label":!0,"without-label":!this.hasLabel,"with-trailing-button":this.hasTrailingButton})}"> <span class="input-boundary-box"> <slot name="leadingIcon"></slot> ${this.inputContainer(e.x` ${this.prefix?e.x`<span class="input-prefix">${this.prefix}</span>`:void 0} ${this.labelTextWrapper()} ${a} ${this.suffix?e.x`<span class="input-suffix">${this.suffix}</span>`:void 0} `)} <span id="trailing-icons-container"> <span id="trailing-icons-validation"> ${e.aZ({attributes:{className:"trailing-icon invalid"},size:e.h.Medium})} ${e.z({attributes:{className:"trailing-icon valid"},size:e.h.Medium})} </span> <span id="trailing-icons-general"> <slot name="trailingIconButton" @slotchange="${e=>this.onSlotChange({event:e,property:"hasTrailingButton",name:"trailingIconButton"})}"> </slot> <slot name="clearButton" class="${t.H({"has-value":!!this.value.length})}"></slot> </span> </span> </span> </div> </label> <faceplate-form-helper-text class="${t.H({"no-label":!this.hasLabel,"helper-text-without-label-with-trailing":!this.hasLabel&&this.hasTrailingButton})}" character-count="${e.l(i)}" character-count-max="${e.l(this.maxLength)}" name="${this.name}" aria-live="${e.l(this.helperTextAriaLive??void 0)}" message="${e.l(this.helperTextMessage)}" level="${e.l(this.helperTextLevel??void 0)}" placeholder="${this.helperTextPlaceholder}" character-count-aria-label="${e.l(this.characterCountAriaLabel)}"> </faceplate-form-helper-text>`}}l.clearButton=(a={})=>t.Y({attributes:{...a,type:"button"},appearance:"plain",size:t.a7.Small,leadingIcon:e.av({attributes:{className:"trailing-icon"},size:e.h.Medium})}),t._([t.n({type:String})],l.prototype,"suffix",void 0),t._([t.n({type:String})],l.prototype,"value",void 0),t._([t.n({type:String})],l.prototype,"name",void 0),t._([t.n({type:String})],l.prototype,"placeholder",void 0),t._([t.n({type:Boolean})],l.prototype,"required",void 0),t._([t.n({type:String})],l.prototype,"screenReaderContent",void 0),t._([t.n({type:String})],l.prototype,"autocomplete",void 0),t._([t.n({type:String})],l.prototype,"inputmode",void 0),t._([t.n({type:Boolean})],l.prototype,"novalidate",void 0),t._([t.n({type:Number,attribute:"maxlength"})],l.prototype,"maxLength",void 0),t._([t.n({type:Number,attribute:"minlength"})],l.prototype,"minLength",void 0),t._([t.Q("input,textarea")],l.prototype,"innerInput",void 0),t._([t.Q("faceplate-form-helper-text")],l.prototype,"helperText",void 0),t._([t.n({type:String,reflect:!0,attribute:"helper-text-level"})],l.prototype,"helperTextLevel",void 0),t._([t.n({type:String,attribute:"helper-text-placeholder"})],l.prototype,"helperTextPlaceholder",void 0),t._([t.n({type:String,reflect:!0,attribute:"helper-text-aria-live"})],l.prototype,"helperTextAriaLive",void 0),t._([t.n({type:String,attribute:"helper-text-message"})],l.prototype,"helperTextMessage",void 0),t._([t.n({type:Boolean,attribute:"character-count"})],l.prototype,"characterCount",void 0),t._([t.n({type:String,attribute:"helper-text-screen-reader-msg"})],l.prototype,"helperTextScreenReaderMsg",void 0),t._([t.n({type:String,attribute:"character-count-aria-label"})],l.prototype,"characterCountAriaLabel",void 0),t._([t.N()],l.prototype,"hasLabel",void 0),t._([t.N()],l.prototype,"hasTrailingButton",void 0),t._([t.l({slot:"label"})],l.prototype,"labelSlot",void 0),t._([t.l({slot:"trailingIconButton"})],l.prototype,"trailingIconButtonSlot",void 0),t._([t.N()],l.prototype,"statefulInput",void 0),t._([t.n({type:Boolean,attribute:"suppress-internal-clicks"})],l.prototype,"suppressInternalClicks",void 0),t._([t.n({type:Boolean})],l.prototype,"readonly",void 0),t._([t.n({type:String,attribute:"validation-message"})],l.prototype,"validationMsg",void 0),t._([t.n({type:Boolean,attribute:"allow-max-length-overflow"})],l.prototype,"allowMaxLengthOverflow",void 0);let d=n.db({videoMinDimensionError:(e,t)=>`Videos must be at least ${e}x${t}`,videoMinRateError:e=>`Videos must have a bitrate of at least ${Math.floor(e)}KB/s`,videoCodecError:()=>"Unsupported video codec",videoIsTooShortError:e=>t.bI({one:`Videos must be at least ${e} second`,other:`Videos must be at least ${e} seconds`,count:e}),videoIsTooLongError:e=>t.bI({one:`Videos must be shorter than ${e} minute`,other:`Videos must be shorter than ${e} minutes`,count:e}),videoMaxSizeError:e=>`Videos must be ${e}GB or smaller`,videoMimetypeError:()=>"Upload an MP4 or MOV",imageMaxSizeError:e=>`Upload an image less than ${e}MB`,imageMaxSizeErrorKB:e=>`Upload an image less than ${e}KB`,gifMaxSizeError:e=>`Upload a GIF less than ${e}MB`,gifMaxSizeErrorKB:e=>`Upload a GIF less than${e}KB`,imageMaxDimensionError:(e,t)=>`Upload an image smaller than ${e}x${t}`,imageMinDimensionError:(e,t)=>`Upload an image at least ${e}x${t}`,imageOnlyGifsError:()=>"Upload a GIF",imageOnlyStaticImagesError:()=>"Upload a PNG, JPG, WEBP",imageStaticOrGifError:()=>"Upload a PNG, JPG, WEBP, or GIF",or:()=>"or ",imageTypeJoin:e=>`${u(e).reduce(((e,t,a,i)=>`${e}${$(a,i)}${h(a,i)}${t}`),"")}`,imageInvalidTypeErrorGeneric:()=>"Upload an image",imageInvalidTypeErrorSpecified:e=>`Upload a ${e}`});const u=e=>e.reduce(((e,t)=>{const a=n.P.get(t)||t;return e.includes(a)?e:[...e,a]}),[]),$=(e,t)=>e>0?t.length>2?", ":" ":"",h=(e,t)=>t.length>1&&e===t.length-1?d.or():"",c=["image/jpeg","image/png","image/webp"],m=["image/gif"],p=[...c,...m],I=1024,b=1048576,v=20971520,g=104857600,N=e=>e.split(",").map((e=>e.trim())),P=e=>{const t="accept"in e?e.accept:void 0,{allowStaticImages:a=!1,allowAnimatedImages:i=!1}="allowStaticImages"in e?e:{};return{accept:t,allowStaticImages:a,allowAnimatedImages:i}};function G(e){const{accept:t,allowStaticImages:a,allowAnimatedImages:i}=P(e);if(t&&t?.includes("image/*"))return d.imageInvalidTypeErrorGeneric();if(t){const e=N(t);return d.imageInvalidTypeErrorSpecified(d.imageTypeJoin(e))}return i&&!a?d.imageOnlyGifsError():a&&!i?d.imageOnlyStaticImagesError():d.imageStaticOrGifError(t)}function f(e){const t=[],{accept:a,allowStaticImages:i,allowAnimatedImages:n}=P(e);return a?N(a):(i&&t.push(...c),n&&t.push(...m),t)}return{S:p,T:l,a:f,g:async function(e){const t=URL.createObjectURL(e),{width:a,height:i}=await function(e){return new Promise(((t,a)=>{const i=new Image;i.onload=()=>{t({width:i.width,height:i.height})},i.onerror=e=>{a(e)},i.src=e}))}(t);return{src:t,type:e.type,size:e.size,width:a,height:i}},l:r,get u(){return d},v:function(e,t){const{width:a,height:i,type:n,size:r}=e,{minImageDimension:o,maxImageDimension:s,maxImageFileSize:l=v,maxGifFileSize:u=g}=t,{accept:$,allowStaticImages:h,allowAnimatedImages:c}=P(t),m=f(t);if(!(m.includes(n)||m.includes("image/*")&&n.startsWith("image/")))return{valid:!1,error:G($?{accept:$}:{allowStaticImages:h,allowAnimatedImages:c}),reason:"INVALID_IMAGE_TYPE_ERROR"};if(o&&(a<o||i<o))return{valid:!1,error:d.imageMinDimensionError(o,o),reason:"IMAGE_MIN_DIMENSION_ERROR"};if(s&&(a>s||i>s))return{valid:!1,error:d.imageMaxDimensionError(s,s),reason:"IMAGE_MAX_DIMENSION_ERROR"};if("image/gif"===n&&r>u){return{valid:!1,error:Math.floor(u/b)<1?d.gifMaxSizeErrorKB(Math.floor(u/I)):d.gifMaxSizeError(Math.floor(u/b)),reason:"IMAGE_SIZE_LIMIT_EXCEEDED_ERROR"}}if(n.startsWith("image/")&&"image/gif"!==n&&r>l){return{valid:!1,error:Math.floor(l/b)<1?d.imageMaxSizeErrorKB(Math.floor(l/I)):d.imageMaxSizeError(Math.floor(l/b)),reason:"IMAGE_SIZE_LIMIT_EXCEEDED_ERROR"}}return{valid:!0,error:null}}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DslEtuBZ.js",import.meta.url,"DslEtuBZ");SML.di("./CZ7YNHqf.js",import.meta.url,"CZ7YNHqf");SML.di("./CzlfHowc.js",import.meta.url,"CzlfHowc");SML.di("./CDFmhs-S.js",import.meta.url,"CDFmhs-S");SML.di("./BStJq-t0.js",import.meta.url,"BStJq-t0");SML.di("./DCovP8x6.js",import.meta.url,"DCovP8x6");SML.di("./FaYkg4Io.js",import.meta.url,"FaYkg4Io");SML.di("./MX9FaClF.js",import.meta.url,"MX9FaClF");SML.di("./BXgkCz3E.js",import.meta.url,"BXgkCz3E");SML.di("./CmgOir_w.js",import.meta.url,"CmgOir_w");SML.di("./DMfuJHXs.js",import.meta.url,"DMfuJHXs");SML.di("./DEMANhHy.js",import.meta.url,"DEMANhHy");SML.di("./fnKkpEwQ.js",import.meta.url,"fnKkpEwQ");SML.di("./CjqcW8YI.js",import.meta.url,"CjqcW8YI");SML.di("./BTMXBfyY.js",import.meta.url,"BTMXBfyY");SML.di("./Dpra1UnG.js",import.meta.url,"Dpra1UnG");SML.di("./DdoeBlGT.js",import.meta.url,"DdoeBlGT");SML.di("./9ZdgYdsr.js",import.meta.url,"9ZdgYdsr");SML.di("./CnmQBnK-.js",import.meta.url,"CnmQBnK-");SML.di("./OimaI6pY.js",import.meta.url,"OimaI6pY");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");SML.di("./DPWYpq70.js",import.meta.url,"DPWYpq70");SML.di("./pMLLCc4b.js",import.meta.url,"pMLLCc4b");SML.di("./CJ4Bucp-.js",import.meta.url,"CJ4Bucp-");SML.di("./hMhijB38.js",import.meta.url,"hMhijB38");SML.di("./HYbNa5uQ.js",import.meta.url,"HYbNa5uQ");SML.di("./DopQd8m2.js",import.meta.url,"DopQd8m2");SML.di("./DYu9Ek9m.js",import.meta.url,"DYu9Ek9m");SML.di("./DwHTSY-I.js",import.meta.url,"DwHTSY-I");SML.di("./DMa5Y6a9.js",import.meta.url,"DMa5Y6a9");SML.di("./FagDXDzk.js",import.meta.url,"FagDXDzk");SML.di("./DzMpUNmB.js",import.meta.url,"DzMpUNmB");SML.di("./YRJ6wR80.js",import.meta.url,"YRJ6wR80");SML.di("./Co1JScDL.js",import.meta.url,"Co1JScDL");SML.di("./BTgalZoS.js",import.meta.url,"BTgalZoS");SML.di("./DNASVThB.js",import.meta.url,"DNASVThB");SML.di("./BwmVBZAv.js",import.meta.url,"BwmVBZAv");SML.di("./B5aCBAWI.js",import.meta.url,"B5aCBAWI");SML.di("./C38sKiaF.js",import.meta.url,"C38sKiaF");SML.di("./CAd-sfst.js",import.meta.url,"CAd-sfst");SML.di("./C-lRMeGe.js",import.meta.url,"C-lRMeGe");SML.di("./CGzEIBwW.js",import.meta.url,"CGzEIBwW");SML.di("./DK2EuOAl.js",import.meta.url,"DK2EuOAl");SML.di("./C_OcidZ-.js",import.meta.url,"C_OcidZ-");SML.di("./CZPCygeT.js",import.meta.url,"CZPCygeT");SML.di("./wFIF_OFn.js",import.meta.url,"wFIF_OFn");SML.di("./CU4mObWU.js",import.meta.url,"CU4mObWU");SML.di("./i17aYwuT.js",import.meta.url,"i17aYwuT");SML.di("./D0V62KWA.js",import.meta.url,"D0V62KWA");SML.di("./D6Xs8HU5.js",import.meta.url,"D6Xs8HU5");
SML.dm("DrxyuPXW",["GlDbwxoG","s_Igk1Yn","FaYkg4Io","MX9FaClF","DMfuJHXs","DEMANhHy","fnKkpEwQ","CjqcW8YI","BTMXBfyY","Dpra1UnG","DdoeBlGT","9ZdgYdsr","OimaI6pY","CC2wUKE8","D-MAMWlw","DRM-oTYq","DPWYpq70","pMLLCc4b","CJ4Bucp-","hMhijB38","HYbNa5uQ","DYu9Ek9m","DwHTSY-I","DslEtuBZ","CZ7YNHqf","CzlfHowc","CDFmhs-S","BStJq-t0","DCovP8x6","BXgkCz3E","CmgOir_w","CnmQBnK-","DopQd8m2","DMa5Y6a9","FagDXDzk","DzMpUNmB","YRJ6wR80","Co1JScDL","BTgalZoS","DNASVThB","BwmVBZAv","B5aCBAWI","C38sKiaF","CAd-sfst","C-lRMeGe","CGzEIBwW","DK2EuOAl","C_OcidZ-","CZPCygeT","wFIF_OFn","CU4mObWU","i17aYwuT","D0V62KWA","D6Xs8HU5"],(async(t,e,o,i,s,n,r,a,l,d,p,h,u,c,m,b,v,T,g,E,S,C,y)=>{const I=72e6,P=[I,I,1296e5,216e6,216e6],k=()=>{const e=localStorage.getItem(t.a0.CrosspostingUpsellExperiment);if(e)return JSON.parse(e)},N=e=>{localStorage.setItem(t.a0.CrosspostingUpsellExperiment,JSON.stringify(e))},R=async e=>{if((()=>{const t=k();if(!t)return!1;const{timer:e,snoozes:o,savedDate:i}=t;return o>=P.length||(new Date).getTime()-i<e})())return;const o=await t.B({operation:t.C.WhereToCrosspostNewModSuggestions,variables:{postId:e}}),i=o.data?.whereToCrosspostSuggestions?.edges;return i&&i?.length>0&&"Subreddit"===i[0]?.node?.subredditInfo.__typename?i[0]?.node?.subredditInfo:void 0};function _(t,e=!0){t=t||"";const[o,i]=t.split("?");let s=`https://www.reddit.com${("/"!==o[0]&&o.length>0?"/":"")+o}`;return e&&!s.endsWith("/")&&(s+="/"),i&&(s+=`?${i}`),s}let O=class extends e.s{constructor(){super(),this.name="",this.prefixedName="",this.subredditId="",this.isNsfw=!1,this.postId="",this.isOpen=!1,this.wasSeen=!1,this.trackExperimentEvent=(e,o,i)=>{t.f(this,t.b({source:e,action:o,noun:i},{subreddit:{id:this.subredditId,name:this.name,nsfw:this.isNsfw},post:{id:this.postId||""}}))},this.onShareClick=()=>{N({timer:18e5,snoozes:1,savedDate:(new Date).getTime()}),this.isOpen=!1,this.wasSeen=!0,this.trackExperimentEvent("crosspost_prompt","share","button")},this.onSkipClick=()=>{this.onMaybeSetCooldown(),this.isOpen=!1},new t.ap(this,this,{threshold:[.5]})}connectedCallback(){t.av.subscribe(this.onMaybeSetCooldown,{shouldBeCalledFirst:!0}),super.connectedCallback(),this.addEventListener("faceplate-leave",this.onMaybeSetCooldown),this.trackExperimentEvent("crosspost_prompt","view","coachmark"),setTimeout((()=>{this.onMaybeSetCooldown()}),3e5)}disconnectedCallback(){super.disconnectedCallback(),t.av.unsubscribe(this.onMaybeSetCooldown),this.removeEventListener("faceplate-leave",this.onMaybeSetCooldown)}onMaybeSetCooldown(){this.wasSeen||this.saveNoShareTimer()}saveNoShareTimer(){const t=k(),e=t?.snoozes||0;N({snoozes:e+1,timer:P[e],savedDate:(new Date).getTime()}),this.trackExperimentEvent("crosspost_prompt","hide","button"),this.wasSeen=!0}render(){return e.x`<rpl-coachmark ?open="${this.isOpen}" placement="${o.P.TopEnd}" appearance="${i.a.Inverted}"> <slot></slot> <rpl-coachmark-card slot="content" appearance="${i.a.Inverted}" class="w-[220px]"> <div slot="title" class="pt-xs pb-2xs"> ${"Share with your newly created community"} </div> <div class="text-12"> ${`${this.prefixedName} might enjoy this post, try sharing it in your community.`} </div> ${t.Y({attributes:{slot:"primary-button",href:_(`${this.prefixedName}/submit/?source_id=${this.postId}&crosspost_experiment_referral=true`),target:"_blank",rel:"noopener noreferrer",onclick:this.onShareClick},children:"Share",appearance:"plainInverted",size:t.a7.Small})} ${t.Y({attributes:{slot:"secondary-button",onclick:this.onSkipClick},children:"Skip",appearance:"plainInverted",size:t.a7.Small})} </rpl-coachmark-card> </rpl-coachmark>`;}};O.styles=[t.t],t._([t.n({type:String,attribute:"name"})],O.prototype,"name",void 0),t._([t.n({type:String,attribute:"prefixed-name"})],O.prototype,"prefixedName",void 0),t._([t.n({type:String,attribute:"subreddit-id"})],O.prototype,"subredditId",void 0),t._([t.n({type:Boolean,attribute:"nsfw"})],O.prototype,"isNsfw",void 0),t._([t.n({type:String,attribute:"post-id"})],O.prototype,"postId",void 0),t._([t.n({type:Boolean,attribute:"open",reflect:!0})],O.prototype,"isOpen",void 0),t._([t.N()],O.prototype,"wasSeen",void 0),O=t._([t.e("crosspost-upsell-coachmark")],O);let w=class extends e.s{constructor(){super(...arguments),this.translationContextValue=t.aB,this.postId="",this.href="",this.withIntervention=!1,this.isImmersiveVisit=!1}canShowInterventionModal(){const e=!!t.$.getItem(t.a0.I18nTranslationInterventionShown);return!!this.translationContextValue?.isTranslationActive&&this.withIntervention&&!e}onShowOriginalClick(t){t.preventDefault?.(),t.stopPropagation?.(),this.canShowInterventionModal()?this.translationInterventionModal.handleTranslationOverride({isTranslationActive:!1,id:this.postId}):this.navigateToOriginal()}navigateToOriginal(){window.location.href=this.href}render(){const t=e.x`<translation-intervention-modal mode="mtseo-post" page-type="pdp" ?is-immersive-visit="${this.isImmersiveVisit}" @translation-intervention-modal:close="${this.navigateToOriginal}"></translation-intervention-modal>`;return e.x`<a href="${this.href}" class="flex cursor-pointer my-xs pl-md xs:px-0 text-primary text-decoration-none" @click="${this.onShowOriginalClick}"> ${"See original"} </a> ${this.canShowInterventionModal()?t:e.A}`;}};w.styles=[t.t],t._([t.aA({context:t.aC,subscribe:!0}),t.N()],w.prototype,"translationContextValue",void 0),t._([t.Q("translation-intervention-modal")],w.prototype,"translationInterventionModal",void 0),t._([t.n({type:String,attribute:"post-id"})],w.prototype,"postId",void 0),t._([t.n({type:String,attribute:"href"})],w.prototype,"href",void 0),t._([t.n({type:Boolean,attribute:"with-intervention"})],w.prototype,"withIntervention",void 0),t._([t.n({type:Boolean,attribute:"isImmersiveVisit"})],w.prototype,"isImmersiveVisit",void 0),w=t._([t.e("mtseo-show-original-link")],w);const D="toggle__expando",x="toggle__expando-button",f=t.a7.Small,L=["flex flex-row justify-center items-center","h-xl","font-semibold","relative"].join(" "),A="thumbnail",M="ssr-share-button",H="share-button",U="mod-content-actions",$="credit-bar",B="post-flair",j="full-post-link",V="mod-content-state-indicators";class z{constructor(e){this.initialized=!1,this.handleToggleEvent=e=>{t.i(e)&&this.toggleExpando()},(this.host=e).addController(this)}get expandoElement(){return this.host.isCompactView?this.host.querySelector(`.${D}`):this.host.shadowRoot?.querySelector('slot[name="expando"]')??null}get hasExpandoContent(){return this.host.isCompactView?!!this.host.querySelector(`.${D}`):!!this.host.shadowRoot?.querySelector('slot[name="expando"]')?.assignedElements().length}get toggleElement(){return(this.host.isCompactView?this.host.querySelector(`button.${x}`)||this.host.shadowRoot?.querySelector(`button.${x}`):this.host.shadowRoot?.querySelector('slot[name="thumbnail"]'))??null}async hostConnected(){await this.host.updateComplete,this.initializeListeners()}hostDisconnected(){this.toggleElement?.removeEventListener("click",this.handleToggleEvent),this.toggleElement?.removeEventListener("keydown",this.handleToggleEvent),this.initialized=!1}async hostUpdated(){await this.host.updateComplete,this.initialized||this.initializeListeners()}initializeListeners(){this.initialized||this.expandoElement&&this.hasExpandoContent&&this.toggleElement&&(this.toggleElement?.addEventListener("click",this.handleToggleEvent),this.toggleElement?.addEventListener("keydown",this.handleToggleEvent),this.initialized=!0)}toggleExpando(){this.expandoElement&&this.hasExpandoContent&&(this.host.showExpando=!this.host.showExpando,this.expandoElement.classList.toggle("hidden",!this.host.showExpando),this.expandoElement.classList.toggle("block",this.host.showExpando))}renderExpandoButton(){const t="Expand content",o={attributes:{className:"icon-expand","aria-hidden":"true"},size:r.I[f]},i=this.host.showExpando?e.c(o):S.e(o),s=this.hasExpandoContent?"":"disabled pointer-all";return e.x` ${r.c({appearance:c.aj()?"bordered":"secondary",attributes:{type:"button",className:`${x} ${L} ${s}`,disabled:!this.hasExpandoContent,"aria-expanded":this.host.showExpando?"true":"false","aria-label":"post content","aria-controls":`${this.host.id}-expando-content`},size:f,leadingIcon:i,screenReaderContent:t})} `;}}class F{constructor(e){this.initializeHotkeys=()=>{this.host.viewContext===b.P.CommentsPage&&(this.subscriberController?.subscribe(t.cl.NEXT_POST_COMMENT,this.nextPostOrComment),this.subscriberController?.subscribe(t.cl.PREVIOUS_POST_COMMENT,this.prevPostOrComment),this.subscriberController?.subscribe(t.cl.UPVOTE,this.upvote),this.subscriberController?.subscribe(t.cl.DOWNVOTE,this.downvote),this.subscriberController?.subscribe(t.cl.REPLY_TO_COMMENT,this.onReplyToComment),this.subscriberController?.subscribe(t.cl.HIDE_POST,this.onToggleHide),this.subscriberController?.subscribe(t.cl.TOGGLE_SAVE,this.onToggleSave),this.subscriberController?.subscribe(t.cl.TOGGLE_COLLAPSE_COMMENT,this.onCommentToggleCollapse),this.subscriberController?.subscribe(t.cl.COPY_POST_OR_COMMENT_LINK,this.onCopyLink),this.subscriberController?.subscribe(t.cl.SUBMIT,this.onSubmitComment))},this.findShredditPost=t=>t instanceof q?t:t?.querySelector("shreddit-post, shreddit-ad-post"),this.cleanupHotkeys=()=>{this.host.viewContext===b.P.CommentsPage&&(this.subscriberController?.unsubscribe(t.cl.NEXT_POST_COMMENT,this.nextPostOrComment),this.subscriberController?.unsubscribe(t.cl.PREVIOUS_POST_COMMENT,this.prevPostOrComment),this.subscriberController?.unsubscribe(t.cl.UPVOTE,this.upvote),this.subscriberController?.unsubscribe(t.cl.DOWNVOTE,this.downvote),this.subscriberController?.unsubscribe(t.cl.REPLY_TO_COMMENT,this.onReplyToComment),this.subscriberController?.unsubscribe(t.cl.HIDE_POST,this.onToggleHide),this.subscriberController?.unsubscribe(t.cl.TOGGLE_SAVE,this.onToggleSave),this.subscriberController?.unsubscribe(t.cl.TOGGLE_COLLAPSE_COMMENT,this.onCommentToggleCollapse),this.subscriberController?.unsubscribe(t.cl.COPY_POST_OR_COMMENT_LINK,this.onCopyLink),this.subscriberController?.unsubscribe(t.cl.SUBMIT,this.onSubmitComment))},this.nextPostOrComment=()=>{this.postOrCommentTraversalController?.traverse(C.P.NEXT);const e=this.postOrCommentTraversalController?.current instanceof q?"post":"comment";t.f(this.host,b.a1("next",e))},this.prevPostOrComment=()=>{this.postOrCommentTraversalController?.traverse(C.P.PREV);const e=this.postOrCommentTraversalController?.current instanceof q?"post":"comment";t.f(this.host,b.a1("previous",e))},this.upvote=()=>{this.onVote(v.V.Upvote)},this.downvote=()=>{this.onVote(v.V.Downvote)},this.onFocus=t=>{this.host.viewContext===b.P.CommentsPage?this.host.shadowRoot?.querySelector(".shreddit-post-container")?.focus(t):this?.host.querySelector("[slot=full-post-link]")?.focus(t)},this.onVote=async t=>{let e;if(!this.postOrCommentTraversalController?.current)return;e=this.postOrCommentTraversalController?.isCurrentComment?(this.postOrCommentTraversalController?.current).commentActionRow:this.postOrCommentTraversalController?.current;const o=void 0;e&&(e.interactionFromHotkey=!0,t===v.V.Upvote?await e.handleUpvote(o):await e.handleDownvote(o),e.interactionFromHotkey=!1)},this.customPostTraversal=(t,e)=>{if(t===C.P.NEXT){const t=e?.querySelector("shreddit-comment-tree");if(t||"shreddit-comment-tree"===e?.tagName.toLowerCase())return e?.querySelector("shreddit-comment")}else if(!e?.previousElementSibling&&"shreddit-comment-tree"===e?.parentElement?.tagName.toLowerCase())return document.querySelector("shreddit-post")},this.onReplyToComment=()=>{this.postOrCommentTraversalController?.isCurrentPost?this.host.handleClickCommentsButton():this.postOrCommentTraversalController?.current?.querySelector("shreddit-comment-action-row")?.focusOnCommentComposer()},this.onToggleSave=()=>{if(this.postOrCommentTraversalController?.isCurrentComment){const t=this.postOrCommentTraversalController?.current?.overlowMenuItemProps?.find((t=>"save"===t.id));t?.onClick?.()}else this.postOverflowActions?.find((t=>"save"===t.id))?.onClick()},this.onToggleHide=()=>{(this.postOrCommentTraversalController?.isCurrentPost||this.host.isFeed)&&this.postOverflowActions?.find((t=>"hide"===t.id))?.onClick()},this.onCopyLink=()=>{let t;t=this.postOrCommentTraversalController?.isCurrentComment?this.postOrCommentTraversalController?.current?.shareButton:this.host.shareButtonRef?.value,t?.handleCopyLinkClick()},this.onCommentToggleCollapse=()=>{this.postOrCommentTraversalController?.isCurrentComment&&this.postOrCommentTraversalController.current.handleCollapse?.()},this.onSubmitComment=()=>{this.postOrCommentTraversalController?.isCurrentComment?this.postOrCommentTraversalController.current?.shredditComposer?.form?.submit():document.querySelector("shreddit-composer")?.form?.submit()},this.host=e,e.addController(this)}hostConnected(){this.subscriberController=new t.ck(this.host),this.postOrCommentTraversalController=new C.a(this.host,{type:C.b.COMMENTS_PAGE,getFirstElement:()=>this.host,customPostOrCommentDetection:this.findShredditPost,customTraversal:(t,e)=>this.customPostTraversal(t,e)}),this.initializeHotkeys()}hostDisconnected(){this.cleanupHotkeys()}get postOverflowActions(){return this.host.querySelector("shreddit-post-overflow-menu")?.overflowActions}onToggleExpando(){this.host._expandoController?.toggleExpando()}}const G=({isPDP:t,triggerElem:o})=>t?c.dd({triggerElem:o,target:`selector(${p.S})`,attribute:"pageindex",value:"1"}):e.A;const K=h.W(t.W(e.s));let q=class extends K{get readMoreButton(){return this.querySelector(`#${this.id}-read-more-button`)??void 0}getCurrentVoteType(){return this.postVoteType}constructor(){super(),this.archived=!1,this.deleted=!1,this.hidden=!1,this.id="",this.game=!1,this.nsfw=!1,this.promoted=!1,this.spoiler=!1,this.subredditId=void 0,this.isSubscribed=!1,this.postLanguage="",this.translationLanguage="",this.isTranslationOn=!1,this.commentCount=0,this.permalink="",this.viewContext=b.P.AggregateFeed,this.viewType=t.a5.CardView,this.isSlimCard=!1,this.isDesktopViewport=!1,this.isReportingEnabled=!1,this.isLinkPost=!1,this.isAma=!1,this.isEmbed=!1,this.isNotBrandSafe=!1,this.isCrosspost=!1,this.isCrosspostable=!1,this.isEmbeddable=!1,this.isUserLoggedIn=!1,this.disabled=!1,this.showFullContent=!1,this.isTranslatable=!1,this.isTranslationFetched=!1,this.isPostTranslated=!1,this.isPostBodyTranslated=!1,this.isMTSEOUserPage=!1,this.shouldHideOriginalLanguageLink=!1,this.hasMTSEOTranslationInterruption=!1,this.morePostsCursor=void 0,this.isPostLeaveEventsEnabled=!1,this.isLocked=!1,this.isBanned=!1,this.isContestMode=!1,this.isPromoteablePost=!1,this.previousActionsFeature=!1,this.updateAnimation=void 0,this.itemState=g.M.UNMODERATED,this.areReportsExpandable=!1,this.isCompactUIExp=!1,this.isPostCommentTapExp=!1,this.isPdpSeekerM1LO=!1,this.shareButtonSSR=!1,this.interactionFromHotkey=!1,this.applyFeedsSimplification=!1,this.inlineGameTag=!1,this.showPostRemovalBanner=!0,this.showExpando=!1,this.useShortHiddenPostForm=!1,this.isThumbnailSet=!1,this.isUpdatingPostBody=!1,this.displayPostAnalytics=!1,this.isCrosspostingCoachmarkOpen=!1,this.eligibleCrosspostingSubreddit=void 0,this.hasBeenViewed=!1,this.hasBeenConsumed=!1,this._events=new t.E(this),this._outboundLinkTrackingController=new p.O(this,(()=>({pageType:t.w(),postId:this.id,subredditId:this.subredditId}))),this._expandoController=new z(this),this.pubsub=new t.m(this),this.shareButtonRef=t.U(),this.onSubscriptionChange=async e=>{let o;this.subredditName===e.name&&(o=e.subscribed&&this.isSubscribed!==e.subscribed,this.isSubscribed=e.subscribed),o&&this.isEligibleForRelatedCommunityRecommendations&&(await this._activateFeature({name:t.f_,queryParams:{subredditId:this.subredditId||"",pageType:String(t.w())},root:(this.isHomeFeed||this.isPopularFeed)&&this.parentElement||document,renderMode:this.isHomeFeed||this.isPopularFeed?t.P.Append:void 0}))},this.handleVisibilityChange=t=>{this.isPostInViewport&&t&&(this._hasPageUnloaded=!1,this.isPDP||(this.handleView(b.n(this),!0),this.becameVisibleOnScreenTimestamp=Date.now()))},this.handleCalledFirstVisibilityChange=e=>{this.isPostInViewport&&(e||this._hasPageUnloaded||(this.handleConsume(),this.isPostLeaveEventsEnabled&&t.f(this,b.a2(this))))},this._activateFeature=async e=>t.j(e),this.showShortHiddenPostForm=()=>this.hidden&&this.useShortHiddenPostForm,this.handleLoadMorePosts=async()=>{const t=document.querySelector(`#partial-more-posts-${this.morePostsCursor}`);t&&"true"!==t?.getAttribute("hasBeenLoaded")&&(t?.setAttribute("hasBeenLoaded","true"),await(t?.load()))},this.trackConsume=()=>{t.f(this,b.a3(this))},this.handleRsvpClick=e=>{t.f(this,b.s(this))},this.handleUnRsvpClick=e=>{t.f(this,b.t(this))},this._getPostScoreDelta=t=>v.g(this.postVoteType,t),this._onUpdatePostVoteType=async()=>await v.o(this.id,"post",this.postVoteType),this.trackReadMoreClick=()=>{t.f(this,b.a4(this))},this.onBeforeUnloadCallback=()=>{this.onBeforeUnload()},this.handleCustomPostSnapshotEvent=async()=>{const e=this.querySelector("devvit-post"),o=e?await e.captureSafetyReport():"";this.dispatchEvent(t.c("stage-devplatform-snapshot",{postId:this.id,encodedData:o}))},this.setStateApproved=()=>{this.showPostRemovalBanner=!1,this.itemState=g.M.APPROVED},this.setStateRemoved=()=>{this.showPostRemovalBanner=!0,this.itemState=g.M.REMOVED},this.onPostUpdateAction=({postId:t,action:e,value:o})=>{if(this.id===t)switch(e){case m.a.markAsNsfw:this.nsfw=o;break;case m.a.markAsSpoiler:this.spoiler=o;break;case m.a.delete:this.deleted=o;break;case m.a.hide:this.applyHideChanges(o);break;case m.a.lock:this.isLocked=Boolean(o);break;case m.a.approve:case m.a.approveOptimistic:this.setStateApproved();break;case m.a.remove:case m.a.removeAsSpam:case m.a.confirmRemoval:case m.a.addRemovalReason:case m.a.removeOptimistic:case m.a.removeAsSpamOptimistic:case m.a.confirmRemovalOptimistic:this.setStateRemoved()}},this.applyHideChanges=t=>{this.useShortHiddenPostForm=t,this.hidden=t},this.unhidePost=async()=>{try{await m.n(this.id,!0);const e=t.c("faceplate-alert",{level:t.X.success,message:"Removed from hidden"});this.dispatchEvent(e);const o={postId:this.id,action:m.a.hide,value:!1};this.pubsub.publish(t.T.PostUpdated,o),t.f(this,b._(this.viewContext))}catch(e){const o=t.c("faceplate-alert",{level:t.X.error,sourceElement:"unhide-post",cause:"uncategorized",message:"Unable to unhide post"});this.dispatchEvent(o)}},this.addEventListener("click",this.handleClickPost),new t.ap(this,this,{threshold:[.5]})}static get styles(){return[t.t,t.J(".rpl-vote-button-group {\n  /* APPEARANCE AGNOSTIC STYLES */\n  /* PLAIN APPEARANCE */\n  /* SECONDARY APPEARANCE */\n  /* BORDERED APPEARANCE */\n  --vote-button-divider-color: var(--color-neutral-border-weak);\n  /* MEDIA APPEARANCE */\n}\n.rpl-vote-button-group:not([disabled]) .rpl-vote-button-group-label {\n  color: var(--vote-button-label-color);\n}\n.rpl-vote-button-group:not([disabled]):hover.rpl-vote-button-group-label {\n  color: var(--vote-button-label-color-hover);\n}\n.rpl-vote-button-group .rpl-vote-button-group-divider {\n  background-color: var(--vote-button-divider-color);\n}\n.rpl-vote-button-group[disabled] button[rpl]:disabled {\n  --button-color-background-disabled: transparent;\n}\n.rpl-vote-button-group.button-plain {\n  --vote-button-label-color: var(--color-secondary-plain);\n  --vote-button-label-color-hover: var(--color-secondary-plain);\n}\n.rpl-vote-button-group.button-plain button[rpl]:first-child {\n  --button-color-text-hover: var(--color-upvote-plain-weaker);\n}\n.rpl-vote-button-group.button-plain button[rpl]:last-child {\n  --button-color-text-hover: var(--color-downvote-plain-weaker);\n}\n.rpl-vote-button-group.button-plain.upvote {\n  --vote-button-label-color: var(--color-upvote-plain);\n}\n.rpl-vote-button-group.button-plain.upvote button[rpl]:first-child {\n  --button-color-text-default: var(--color-upvote-plain-weaker);\n  --button-color-text-hover: var(--color-upvote-plain-weaker);\n  --button-color-text-disabled: var(--color-upvote-plain-disabled);\n  --button-color-text-activated: var(--color-upvote-plain-weaker);\n}\n.rpl-vote-button-group.button-plain.downvote {\n  --vote-button-label-color: var(--color-downvote-plain);\n}\n.rpl-vote-button-group.button-plain.downvote button[rpl]:last-child {\n  --button-color-text-default: var(--color-downvote-plain-weaker);\n  --button-color-text-disabled: var(--color-downvote-plain-disabled);\n  --button-color-text-activated: var(--color-downvote-plain-weaker);\n}\n.rpl-vote-button-group.button-secondary {\n  --vote-button-label-color: var(--color-secondary-plain);\n  --vote-button-label-color-hover: var(--color-secondary-plain);\n  --vote-button-divider-color: var(--color-neutral-border);\n}\n.rpl-vote-button-group.button-secondary button[rpl]:first-child {\n  --button-color-text-hover: var(--color-upvote-plain-weaker);\n}\n.rpl-vote-button-group.button-secondary button[rpl]:last-child {\n  --button-color-text-hover: var(--color-downvote-plain-weaker);\n}\n.rpl-vote-button-group.button-secondary.upvote,\n.rpl-vote-button-group.button-secondary.upvote button[rpl] {\n  --button-color-text-default: var(--color-upvote-onBackground);\n  --button-color-text-hover: var(--color-upvote-onBackground);\n  --button-color-text-disabled: var(--color-upvote-disabled);\n  --button-color-text-activated: var(--color-upvote-onBackground);\n}\n.rpl-vote-button-group.button-secondary.upvote:not([disabled]),\n.rpl-vote-button-group.button-secondary.upvote button[rpl]:not([disabled]) {\n  --button-color-background-default: var(--color-upvote-background);\n  --button-color-background-hover: var(--color-upvote-background-hover);\n  --button-color-background-active: var(--color-upvote-background-hover);\n  --vote-button-divider-color: var(--color-upvote-onBackground);\n  --vote-button-label-color: var(--color-media-onBackground);\n}\n.rpl-vote-button-group.button-secondary.downvote,\n.rpl-vote-button-group.button-secondary.downvote button[rpl] {\n  --button-color-text-default: var(--color-downvote-onBackground);\n  --button-color-text-hover: var(--color-downvote-onBackground);\n  --button-color-text-disabled: var(--color-downvote-disabled);\n  --button-color-text-activated: var(--color-downvote-onBackground);\n}\n.rpl-vote-button-group.button-secondary.downvote:not([disabled]),\n.rpl-vote-button-group.button-secondary.downvote button[rpl]:not([disabled]) {\n  --button-color-background-default: var(--color-downvote-background);\n  --button-color-background-hover: var(--color-downvote-background-hover);\n  --button-color-background-active: var(--color-downvote-background-hover);\n  --vote-button-divider-color: var(--color-upvote-onBackground);\n  --vote-button-label-color: var(--color-media-onBackground);\n}\n.rpl-vote-button-group.button-bordered-cab {\n  --vote-button-label-color: var(--color-secondary-plain);\n  --vote-button-label-color-hover: var(--color-secondary-plain);\n}\n.rpl-vote-button-group.button-bordered-cab button[rpl]:first-child {\n  --button-color-text-hover: var(--color-upvote-plain-weaker);\n}\n.rpl-vote-button-group.button-bordered-cab button[rpl]:last-child {\n  --button-color-text-hover: var(--color-downvote-plain-weaker);\n}\n.rpl-vote-button-group.button-bordered-cab.upvote {\n  --vote-button-label-color: var(--color-upvote-plain);\n}\n.rpl-vote-button-group.button-bordered-cab.upvote button[rpl]:first-child {\n  --button-color-text-default: var(--color-upvote-plain-weaker);\n  --button-color-text-hover: var(--color-upvote-plain-weaker);\n  --button-color-text-disabled: var(--color-upvote-plain-disabled);\n  --button-color-text-activated: var(--color-upvote-plain-weaker);\n}\n.rpl-vote-button-group.button-bordered-cab.downvote {\n  --vote-button-label-color: var(--color-downvote-plain);\n}\n.rpl-vote-button-group.button-bordered-cab.downvote button[rpl]:last-child {\n  --button-color-text-default: var(--color-downvote-plain-weaker);\n  --button-color-text-hover: var(--color-downvote-plain-weaker);\n  --button-color-text-disabled: var(--color-downvote-plain-disabled);\n  --button-color-text-activated: var(--color-downvote-plain-weaker);\n}\n.rpl-vote-button-group.button-media-cab {\n  --vote-button-label-color: var(--color-media-onBackground);\n  --vote-button-label-color-hover: var(--color-media-onBackground);\n  --vote-button-divider-color: var(--color-media-border-weak);\n}\n.rpl-vote-button-group.button-media-cab button[rpl]:first-child {\n  --button-color-text-hover: var(--color-upvote-onStrongScrim-weaker);\n}\n.rpl-vote-button-group.button-media-cab button[rpl]:last-child {\n  --button-color-text-hover: var(--color-downvote-onStrongScrim-weaker);\n}\n.rpl-vote-button-group.button-media-cab.upvote {\n  --vote-button-label-color: var(--color-upvote-onStrongScrim);\n}\n.rpl-vote-button-group.button-media-cab.upvote button[rpl]:first-child {\n  --button-color-text-default: var(--color-upvote-onStrongScrim-weaker);\n  --button-color-text-activated: var(--color-upvote-onStrongScrim-weaker);\n  --button-color-text-disabled: var(--color-upvote-onStrongScrim-disabled);\n}\n.rpl-vote-button-group.button-media-cab.downvote {\n  --vote-button-label-color: var(--color-downvote-onStrongScrim);\n}\n.rpl-vote-button-group.button-media-cab.downvote button[rpl]:last-child {\n  --button-color-text-default: var(--color-downvote-onStrongScrim-weaker);\n  --button-color-text-activated: var(--color-downvote-onStrongScrim-weaker);\n  --button-color-text-disabled: var(--color-downvote-onStrongScrim-disabled);\n}\n.pdp-flair-slot::slotted(*) {\n  margin: var(--size-2xs) 0;\n}\n.feed-flair-slot::slotted(*) {\n  margin-bottom: var(--size-xs);\n}\n.text-decoration-none {\n  text-decoration: none;\n}\n:host([item-state~='APPROVED']),\n:host([item-state~='REMOVED']) {\n  background-color: var(--color-neutral-background-weak);\n}\n:host([updateAnimation~='light']) {\n  animation: realtimeFade 3s;\n  animation-timing-function: ease-out;\n}\n:host([updateAnimation~='dark']) {\n  animation: realtimeFadeNight 3s;\n  animation-timing-function: ease-out;\n}\n@keyframes realtimeFade {\n  from {\n    background-color: #fff2bd;\n    border: 1px solid #dbaf00;\n  }\n  to {\n    background-color: #f0f5f9;\n    border: 1px solid transparent;\n  }\n}\n@keyframes realtimeFadeNight {\n  from {\n    background-color: #665505;\n    border: 1px solid #382d03;\n  }\n  to {\n    background-color: #030303;\n    border: 1px solid #343536;\n  }\n}\n.condensed-post-title-heading {\n  margin: 0;\n}\n")]}connectedCallback(){super.connectedCallback(),t.g()&&this.initModActionsController(),this.querySelector("shreddit-post-text-body")?.addEventListener(b.R,this.trackReadMoreClick),this.isObserved||this.enableObserver({rootMargin:"0px"}),this.postVoteType=this.voteType,this.postScore=this.score,this.gallery&&this.addEventListener("faceplate-carousel:slide",this.handleCarouselArrowClick),this.addEventListener("faceplate-hovercard:open",this.handleHovercardOpen),this.addEventListener("capture-devplatform-snapshot",this.handleCustomPostSnapshotEvent),t.av.subscribe(this.onBeforeUnloadCallback,{shouldBeCalledFirst:!0}),t.aw(this.handleVisibilityChange,{immediate:!0}),t.aw(this.handleCalledFirstVisibilityChange,{immediate:!0,shouldBeCalledFirst:!0}),this.pubsub.subscribe(t.T.PostUpdated,this.onPostUpdateAction),this.addEventListener(m.e,this.handleClickCommentsButton),this.addEventListener(m.f,this.handleShareButtonInteraction),this.addEventListener(m.b,this.handleRsvpClick),this.addEventListener(m.E,this.handleUnRsvpClick),this.pubsub.subscribe(t.T.SubredditSubscriptionChange,this.onSubscriptionChange),this.hotkeyController=new F(this)}async initModActionsController(){const{ModActionsController:t}=await SML.di("./BdueHHHl.js",import.meta.url,"BdueHHHl");new t(this,{getThingIdFn:()=>this.id})}disconnectedCallback(){super.disconnectedCallback(),clearTimeout(this.listingBelowConsumeTimer),this.isObserved&&this.disableObserver(),this.hasBeenViewed=!1,this.isPostInViewport=!1,this.querySelector("shreddit-post-text-body")?.removeEventListener(b.R,this.trackReadMoreClick),this.gallery&&this.removeEventListener("faceplate-carousel:slide",this.handleCarouselArrowClick),this.removeEventListener("faceplate-hovercard:open",this.handleHovercardOpen),t.av.unsubscribe(this.onBeforeUnloadCallback),t.ax(this.handleVisibilityChange),t.ax(this.handleCalledFirstVisibilityChange),this.removeEventListener(m.e,this.handleClickCommentsButton),this.removeEventListener(m.f,this.handleShareButtonInteraction),this.removeEventListener(m.b,this.handleRsvpClick),this.removeEventListener(m.E,this.handleUnRsvpClick),this.removeEventListener("capture-devplatform-snapshot",this.handleCustomPostSnapshotEvent)}get isFeed(){return b.c(this.viewContext)}get isPopularFeed(){return this.isFeed&&b.a5(t.w())}get isHomeFeed(){return this.isFeed&&b.a6(t.w())}get isPDP(){return b.i(this.viewContext)}get isCardView(){return c.cZ(this.viewType)}get isCompactView(){return c.bY(this.viewType)}get shouldInlineGameTag(){return this.inlineGameTag&&c.cZ(this.viewType)}get isEligibleForRelatedCommunityRecommendations(){return this.isUserLoggedIn&&!!this.subredditId&&(this.isPDP&&!this.isDesktopViewport||this.isHomeFeed||this.isPopularFeed)}renderThumbnail(){return e.x` <slot name="${A}" @slotchange="${this.handleThumbnailSlotChange}"></slot>`}renderCommentsButton(){return function({viewContext:o,commentCount:i,permalink:s,pdpTarget:n,onClick:l,isUserLoggedIn:d,isPostCommentTapExp:p}){const h={className:L,onclick:l,name:"comments-action-button","data-post-click-location":t.eU.COMMENTS_BUTTON},u=b.c(o)?{...h,href:s,target:n??"_self"}:{...h,type:"button"};return r.c({appearance:"secondary",attributes:u,size:f,children:[G({isPDP:b.i(o),triggerElem:"closest(button)"}),e.x`<faceplate-number number="${i}" pretty></faceplate-number>`,!d&&p?c.bW({triggerElem:"closest(button)",target:"closest(button)",eventName:"reply"}):e.A],leadingIcon:a.c({attributes:{className:"icon-comment","aria-hidden":"true"},size:r.I[f]}),screenReaderContent:"Go to comments"});}({viewContext:this.viewContext,commentCount:this.commentCount,permalink:this.permalink,pdpTarget:this.pdpTarget,onClick:this.handleClickCommentsButton,isUserLoggedIn:this.isUserLoggedIn,isPostCommentTapExp:this.isPostCommentTapExp});}renderVoteButton(){const o=c.b_(),i=o?n.a:n.v,s=o?n.b:n.u,r=o?n.c:n.d,a=this.postScore,l="Vote",d={voteType:this.postVoteType||null,appearance:c.aj()?"bordered":"secondary",size:f,attributes:{disabled:this.archived}},p=s({...d,voteCount:a,initialStateText:l,screenReaderContent:"Upvote",onClick:this.handleUpvote}),h=r({...d,screenReaderContent:"Downvote",onClick:this.handleDownvote});return this.isPDP&&performance.mark(t.c3),e.x` <span class="relative leading-[0] ${this.disabled?"disabled":""}"> ${G({isPDP:this.isPDP})} ${i({attributes:{"data-post-click-location":t.eU.VOTE,className:L},voteCount:a,voteType:this.postVoteType,upvoteButton:p,downvoteButton:h,appearance:d.appearance,size:d.size,initialStateText:l})} </span> `}renderShareButton(){if(this.applyFeedsSimplification)return e.A;const o=e.x` <shreddit-post-share-button data-post-click-location="${t.eU.SHARE}" permalink="${this.permalink}" source-id="${this.id}" ?is-crosspostable="${this.isCrosspostable}" ?is-embeddable="${this.isEmbeddable}" ?is-desktop-viewport="${this.isDesktopViewport}" ?ssr="${this.shareButtonSSR}" ?hide-button-text="${!this.isDesktopViewport}" size="${f}" button-class="${L}" @click="${this.handleShareButtonInteraction}" @keydown="${this.handleShareButtonInteraction}" appearance="${c.aj()?"bordered":"secondary"}" data-faceplate-tracking-context="${JSON.stringify({post:{id:this.id}})}" ${t.V(this.shareButtonRef)}> ${this.shareButtonSSR?e.x`<slot name="${M}" slot="${M}"></slot>`:e.A} </shreddit-post-share-button> `;return this.isCrosspostingV2Enabled&&this.isCrosspostingCoachmarkOpen&&"Subreddit"===this.eligibleCrosspostingSubreddit?.__typename?e.x`<slot name="${H}"> <crosspost-upsell-coachmark post-id="${this.id}" name="${this.eligibleCrosspostingSubreddit?.name}" prefixed-name="${this.eligibleCrosspostingSubreddit?.prefixedName}" subreddit-id="${this.eligibleCrosspostingSubreddit?.id}" ?open="${this.isCrosspostingCoachmarkOpen}"> ${o} </crosspost-upsell-coachmark> </slot> `:e.x` <slot name="${H}"> ${o} </slot> `}renderExpandoButton(){return this.isDesktopViewport?this._expandoController.renderExpandoButton():""}renderReportButton(){const o="Report";return e.x` ${r.c({appearance:"secondary",attributes:{onclick:()=>{var e,o;t.f(this,(e="post",t.b({source:e,action:"click",noun:"report"}))),this.dispatchEvent((o=this.id,t.c(t.jG,{thingId:o})))},type:"button",className:L},size:f,children:this.isDesktopViewport?o:"",leadingIcon:d.r({attributes:{className:"icon-report","aria-hidden":"true"},size:r.I[f]}),screenReaderContent:o})} `}renderActionRow(){if(this.isPDP&&this.isPdpSeekerM1LO)return this.renderSeekerPostInfoRow();const t=["shreddit-post-container flex gap-sm flex-row items-center flex-nowrap justify-start"];return this.isPDP?this.isCompactUIExp?t.push("py-xs px-md xs:px-0"):t.push("h-2xl mt-md px-md xs:px-0"):this.isCardView&&!this.promoted&&!this.isCrosspost&&this.isEmbed&&t.push("pt-xs"),e.x`<div class="${t.join(" ")}" data-testid="action-row" tabindex="0" aria-label="${"Actions available for this post"}"> ${this.renderVoteButton()} ${this.renderCommentsButton()} ${function({applyFeedsSimplification:t,awardCount:o,awardId:i,commentCount:s,feedIndex:n,hasBrandedAward:r,hasIconicAward:a,hideAwardIcon:l,iconUrl:d,iconUrls:p,isAwardable:h,isAwardedByUser:u,postId:c,postScore:m,postType:b,subredditId:v}){return!h||t?e.A:e.x`<award-button appearance="secondary" size="${f}" button-class="${L}" thing-id="${c}" count="${e.l(o)}" award-id="${e.l(i)}" icon-url="${e.l(l?void 0:d)}" icon-urls="${e.l(l?void 0:JSON.stringify(p))}" ?is-awarded-by-user="${u}" ?has-iconic-award="${a}" ?has-branded-award="${r}" subreddit-id="${e.l(v)}" post-id="${c}" feed-index="${e.l(n)}" post-type="${e.l(b)}" score="${e.l(m)}" comment-count="${e.l(s)}"></award-button>`}({applyFeedsSimplification:this.applyFeedsSimplification,awardCount:this.awardCount,awardId:this.awardId,commentCount:this.commentCount,feedIndex:this.feedIndex,hasBrandedAward:this.hasBrandedAward,hasIconicAward:this.hasIconicAward,hideAwardIcon:this.hideAwardIcon,iconUrl:this.awardIconUrl,iconUrls:this.awardIconUrls,isAwardable:this.isAwardable,isAwardedByUser:this.isAwardedByUser,postId:this.id,postScore:this.postScore,postType:this.postType,subredditId:this.subredditId})} ${this.renderShareButton()} ${this.isReportingEnabled&&!this.isFeed?this.renderReportButton():""} <div class="ms-auto flex flex-row"> <slot name="${U}"></slot> <slot name="${"promote-post-button"}"></slot> </div> <slot name="${"action-row-whitespace"}"></slot> </div>`;}renderSeekerPostInfoRow(){return e.x` <div class="px-md xs:px-0 py-xs truncate text-neutral-content-weak text-12 flex items-center gap-2xs font-semibold" data-testid="seeker-post-info-row"> ${void 0!==this.postScore?e.x` ${e.aW({size:e.I.Small})} <faceplate-number number="${this.postScore}" pretty></faceplate-number> ${e.aX({size:e.I.Small})} `:e.A} ${this.postScore&&this.commentCount?e.x`<span data-testid="seeker-post-info-row-divider" aria-hidden="true"></span>`:e.A} ${this.commentCount?e.x` ${a.c({size:e.I.Small})} <faceplate-number number="${this.commentCount}" pretty></faceplate-number> `:e.A} </div> `}renderMessageBanner(){return e.x` ${this.isLocked?e.x`<slot name="${"post-locked-banner"}"></slot>`:null} ${this.isBanned?e.x`<slot name="${"post-banned-banner"}"></slot>`:null} <slot name="${"post-archived-banner"}"></slot> ${this.showPostRemovalBanner?e.x`<slot name="${"post-removed-banner"}"></slot>`:null} ${this.isContestMode?e.x`<slot name="${"post-contest-mode-banner"}"></slot>`:null} `}trackContentTagClick(t){t.detail.type===s.C.APP&&this.trackWatermarkEvent("v1_badge")}trackWatermarkEvent(e){const o=t.b(T.c({postId:this.id||"",subredditId:this.subredditId||"",blockType:"",pageType:t.w(),action:"click",noun:"watermark",appId:this.appId||"",appInstallationId:this.appInstallationId||"",appVersionNumber:this.appVersionNumber||"",appPublicApiVersion:this.appPublicApiVersion||"",appName:this.appSlug||"",appSlug:this.appSlug||"",userAgent:window.navigator?.userAgent.toLowerCase()||"unknown",watermark:e}));t.f(this,o)}renderPostHeader(){return e.x` <slot name="${$}"></slot> ${this.isEligibleForRelatedCommunityRecommendations?e.x`<slot name="${"related-community-recommendation"}"></slot>`:e.x``} <div id="content-tag-container" class="flex justify-between gap-xs ${t.H({"px-md":this.isPDP,"xs:px-0":this.isPDP})}"> ${this.renderContentTags()} ${this.shouldInlineGameTag?e.A:this.renderAppPrivacyButton()} </div> ${this.renderPostLinkForMTSEO()} `}renderAppPrivacyButton(){return this.appName?e.x`<rpl-dialog-trigger dialog-id="${this.appSlug}-privacy-dialog" class="block flex"> ${t.Y({appearance:"plain",attributes:{onclick:()=>(this.trackWatermarkEvent("v1_privacy_link"),this._activateFeature({name:t.jH,routeParams:{appSlug:this.appSlug,appOwnerId:this.appOwnerId||"null",postId:this.id,subredditId:this.subredditId},queryParams:{appName:this.appName},renderMode:t.P.Contents})),className:"flex gap-xs z-0 relative"},children:"Privacy",leadingIcon:l.i({size:e.I.ExtraSmall}),size:t.a7.ExtraSmall})} </rpl-dialog-trigger>`:e.A;}renderPostLinkForMTSEO(){if(!this.isMTSEOUserPage)return"";if(this.shouldHideOriginalLanguageLink)return"";const o=new RegExp(/[^?]+/),i=this.permalink?.match(o);if(!i||0===i.length)return"";const s=t.bU(i[0],t.jJ,t.jI);return e.x` <mtseo-show-original-link class="inline-flex" post-id="${this.id}" href="${s}" ?with-intervention="${this.hasMTSEOTranslationInterruption}"></mtseo-show-original-link> `}renderTitle(){const t=e.x`<slot name="${"title"}"></slot>`;return this.showFullContent||this.isPDP?t:e.x`<h2 dir="auto" class="condensed-post-title-heading ${this.shouldInlineGameTag?"flex flex-row justify-between":""}"> ${t} ${this.shouldInlineGameTag?this.renderAppPrivacyButton():e.A} </h2>`}renderTextBody(){return e.x`<slot name="${"text-body"}"></slot>`}renderPostMediaContainer(t){return e.x` <slot name="${"post-media-container"}" class="${t??""}"></slot> `}renderFeedFlair(){return this.isPDP?"":e.x`<div> <slot name="${B}" class="feed-flair-slot"></slot> </div>`}renderPDPFlair(){const t=this.isCompactUIExp?"leading-none":"xs:px-0";return this.isPDP?e.x`<div class="px-md ${t}"> <slot name="${B}" class="pdp-flair-slot"></slot> </div>`:""}renderDeletedPost(){return e.x` <div class="deleted-post h-3xl flex items-center"> <p class="font-semibold text-neutral-content-strong text-14"> ${"Post deleted"} </p> </div> `;}renderHiddenPost(){return e.x` <div class="hidden-post h-3xl flex items-center justify-between px-md"> <div> <p class="m-0 font-semibold text-neutral-content-strong text-14"> ${"Post hidden"} </p> </div> ${t.Y({attributes:{onclick:this.unhidePost},size:t.a7.Medium,appearance:"secondary",children:"Undo"})} </div> `;}renderCompactView(){const t="grid grid-cols-[1fr_min-content] grid-rows-[auto_auto_auto_auto_auto] xs:grid-cols-[min-content_1fr] xs:grid-rows-[auto_auto_auto_auto]",o="col-start-1 col-end-3 row-start-1 row-end-2 xs:col-start-1 xs:col-end-3 xs:row-start-1 xs:row-end-2",i="col-start-2 col-end-3 row-start-2 row-end-3 xs:col-start-1 xs:col-end-2 xs:row-start-2 xs:row-end-4",s="col-start-1 col-end-2 row-start-2 row-end-3 xs:col-start-2 xs:col-end-3 xs:row-start-2 xs:row-end-3 overflow-hidden",n="col-start-1 col-end-3 row-start-3 row-end-4 xs:hidden",r="col-start-1 col-end-3 row-start-4 row-end-5 xs:col-start-2 xs:col-end-3 xs:row-start-3 xs:row-end-4",a="col-start-1 col-end-3 row-start-5 row-end-6 xs:col-start-2 xs:col-end-3 xs:row-start-4 xs:row-end-5 overflow-hidden",l="col-start-1 col-end-3 row-start-6 row-end-7 xs:col-start-2 xs:col-end-3 xs:row-start-5 xs:row-end-6";return e.x` <slot name="${j}"></slot> <div class="${c.n("grid",t)}"> <div class="${o}"> <slot name="${"recommendation-bar"}"></slot> </div> <div class="${c.n(i,"mt-2xs ml-xs xs:my-2xs xs:ml-0 xs:mr-md")}"> <slot name="${A}"></slot> </div> <div class="${c.n(s,"mt-2xs")}"> <div class="mb-2xs xs:mb-0"> <slot name="${$}"></slot> </div> <div class="overflow-hidden"> ${this.renderTitle()} <slot name="${"content-tags"}"></slot> <slot name="${"app-privacy"}"></slot> <slot name="${B}"></slot> </div> <div> <slot name="${V}"></slot> <slot name="${U}"></slot> </div> <div> <slot name="${"desktop-cta-row"}"></slot> </div> </div> <div class="${n}"> <slot name="${"mobile-cta-row"}"></slot> </div> <div class="${c.n(r,"flex gap-2xs overflow-hidden items-center mb-2xs mt-xs xs:mt-[2px]")}"> <slot name="${"action-bar-ad-cta"}"></slot> ${this.renderExpandoButton()}${this.renderVoteButton()} <slot name="${"overflow-menu-bar"}" class="grow overflow-hidden block"></slot> </div> <div class="${a}"> <slot name="${"expando-content"}"></slot> </div> <div class="${l}">${this.renderPostStatsEntryPoint()}</div> </div> ${this.renderPostStatsContainer()} `}renderPostStatsContainer(){return e.x`<slot name="${"post-insights-panel"}"></slot>`}renderPostStatsEntryPoint(){return e.x`<slot name="${"post-stats-entry-point"}"></slot>`}renderCardViewPostFooter(){return e.x` ${this.renderMessageBanner()} <slot name="${"post-recovery-section"}"></slot> ${this.renderActionRow()} ${this.renderPostStatsEntryPoint()} ${this.renderPostStatsContainer()} `}renderContentTags(){return e.x`<shreddit-content-tags post-id="${this.id}" ?nsfw="${this.nsfw}" ?spoiler="${this.spoiler}" app="${this.shouldInlineGameTag?"":this.appSlug}" ?game="${!this.shouldInlineGameTag&&this.game}" @tag-click="${t=>this.trackContentTagClick(t)}"></shreddit-content-tags>`}renderSlimCardPost(){return e.x` <slot name="${j}"></slot> <slot></slot> <div class="pt-xs">${this.renderCardViewPostFooter()}</div> `}renderCardView(){const t=this.isThumbnailSet?"ml-xs xs:ml-sm":void 0;return e.x` <slot name="${j}"></slot> ${this.renderPostHeader()} <div class="flex"> <div class="flex flex-col grow max-w-full"> ${this.renderTitle()} ${this.renderPDPFlair()} <slot name="${V}"></slot> ${this.isPDP?null:this.renderTextBody()} ${this.renderFeedFlair()} </div> <div class="${e.l(t)}">${this.renderThumbnail()}</div> </div> ${this.renderPostMediaContainer("xs:pt-md")} ${this.isPDP?this.renderTextBody():null} <slot></slot> ${this.renderCardViewPostFooter()} `}render(){return this.deleted?this.renderDeletedPost():this.showShortHiddenPostForm()?this.renderHiddenPost():this.isCompactView?this.renderCompactView():this.isSlimCard?this.renderSlimCardPost():this.renderCardView()}handleView(e,o,i){!o&&this.isPDP||b.a7(this.viewContext)&&this.hasBeenViewed||t.f(this,e),this.gallery&&t.f(this,E.a(this,0,i)),this.morePostsCursor&&this.handleLoadMorePosts()}handleConsume(){!this.isPDP&&this.becameVisibleOnScreenTimestamp&&Date.now()-this.becameVisibleOnScreenTimestamp>b.a&&!b.a7(this.viewContext)&&this.trackConsume()}handleClick(e,o){e&&t.f(this,e),o&&this.dispatchEvent(o)}handleShareButtonInteraction(){this.isDesktopViewport?this.handleClick(b.a8(this)):this.handleClick(b.a9(this))}handleClickCommentsButton(e){if(t.f(this,b.v(this)),this.isFeed)return;this.isPostCommentTapExp||S.s("smooth");if((e?.currentTarget?.querySelector("faceplate-number")?.number??0)>0&&!this.isPostCommentTapExp){const t=document.querySelector("shreddit-comments-sort-dropdown")?.querySelector("shreddit-sort-dropdown")?.shadowRoot?.querySelector("faceplate-dropdown-menu")?.querySelector("button");t?.focus()}else{if(!this.isUserLoggedIn&&this.isPostCommentTapExp)return;const t=document.querySelector("comment-body-header comment-composer-host");this.isPostCommentTapExp&&t?.scrollIntoView({behavior:"smooth",block:"center"}),t?.focus()}}handleClickPost(t){const e=b.aa(t,this);this.handleClick(e)}handleCarouselArrowClick(t){t.preventDefault();const e=t;E.h(this,e)}async handleUpdatePostVote(e){const o=this.postScore,i=this.postVoteType;if(void 0!==this.postScore){const t=this._getPostScoreDelta(e);this.postScore=this.postScore+t}this.postVoteType=e===this.postVoteType?void 0:e;try{await this._onUpdatePostVoteType(),this.postVoteType&&this.pubsub.publish(this.postVoteType===v.V.Upvote?t.T.PostUpvoted:t.T.PostDownvoted,{postId:this.id})}catch(s){this.postScore=o,this.postVoteType=i,this.dispatchEvent(t.c("faceplate-alert",{level:t.X.warning,message:s,sourceElement:e,cause:`failed-${e}`}))}}async handleCrosspostingV2Experiment(){const t=await R(this.id);this.eligibleCrosspostingSubreddit=t,this.isCrosspostingCoachmarkOpen=!!t}async handleUpvote(e){const o=this.postVoteType===v.V.Upvote;if(this.isUserLoggedIn)return this.handleClick(o?b.l(this):b.u(this)),await this.handleUpdatePostVote(v.V.Upvote),!o&&this.isCrosspostingV2Enabled&&this.handleCrosspostingV2Experiment(),void(this.isAma&&!o&&this.pubsub.publish(t.T.TriggerAmaRemindMeModal,{postId:this.id}));this.disabled?(this.dispatchEvent(t.c(t.dP.upvoteTry,{thingId:this.id,permalink:this.permalink})),t.f(this,b.ab(this))):this.handleClick(b.u(this),t.c(t.dP.upvote,{thingId:this.id,permalink:this.permalink}))}async handleDownvote(e){if(this.isUserLoggedIn)return this.handleClick(this.postVoteType===v.V.Downvote?b.l(this):b.m(this)),void (await this.handleUpdatePostVote(v.V.Downvote));this.disabled?(this.dispatchEvent(t.c(t.dP.downvoteTry,{thingId:this.id,permalink:this.permalink})),t.f(this,b.ab(this))):this.handleClick(b.m(this),t.c(t.dP.downvote,{thingId:this.id,permalink:this.permalink}))}onBeforeUnload(){this._hasPageUnloaded=!0,this.isPostInViewport&&(this.handleConsume(),this.isPostLeaveEventsEnabled&&t.f(this,b.a2(this)))}handleHovercardOpen(e){if(!(e.target instanceof HTMLElement&&"id"in e.target.dataset))return;const o=e.target.dataset.id;"community-hover-card"===o&&t.f(this,b.ac(this)),"user-hover-card"===o&&t.f(this,b.ad(this))}handleThumbnailSlotChange(t){const e=t.target?.assignedElements();this.isThumbnailSet=e.length>0}observerIsIntersectingCallback(e){this.isNotBrandSafe&&e.target===this&&window.dispatchEvent(t.c(u.B,{postId:this.id,isInView:!0})),this.isPostInViewport||(this.isPostInViewport=!0,this.becameVisibleOnScreenTimestamp=Date.now(),this.handleView(b.n(this),!this.isPDP),this.isTranslatable&&this.isTranslationV2Enabled&&y.o.post(this,this),this.hasBeenViewed=!0,b.a7(this.viewContext)&&(this.listingBelowConsumeTimer=setTimeout(this.trackConsume,b.a)))}observerIsNotIntersectingCallback(e){clearTimeout(this.listingBelowConsumeTimer),this.isNotBrandSafe&&e.target===this&&window.dispatchEvent(t.c(u.B,{postId:this.id,isInView:!1}));const o=this.isPostInViewport;this.isPostInViewport=!1,o&&(this.handleConsume(),this.isPostLeaveEventsEnabled&&t.f(this,b.a2(this)))}};return t._([t.n({type:Boolean})],q.prototype,"archived",void 0),t._([t.n({type:Boolean})],q.prototype,"deleted",void 0),t._([t.n({type:Boolean,reflect:!0})],q.prototype,"hidden",void 0),t._([t.n({type:String,attribute:"author-id"})],q.prototype,"authorId",void 0),t._([t.n({type:String,attribute:"created-timestamp"})],q.prototype,"createdTimestamp",void 0),t._([t.n({type:String})],q.prototype,"domain",void 0),t._([t.n({type:String,attribute:"content-href"})],q.prototype,"contentHref",void 0),t._([t.n({type:String})],q.prototype,"id",void 0),t._([t.n({type:String,attribute:"user-id"})],q.prototype,"userId",void 0),t._([t.n({type:String,attribute:"app-id"})],q.prototype,"appId",void 0),t._([t.n({type:String,attribute:"app-slug"})],q.prototype,"appSlug",void 0),t._([t.n({type:Boolean})],q.prototype,"game",void 0),t._([t.n({type:String,attribute:"app-installation-id"})],q.prototype,"appInstallationId",void 0),t._([t.n({type:String,attribute:"app-name"})],q.prototype,"appName",void 0),t._([t.n({type:String,attribute:"app-owner-id"})],q.prototype,"appOwnerId",void 0),t._([t.n({type:String,attribute:"app-version-number"})],q.prototype,"appVersionNumber",void 0),t._([t.n({type:String,attribute:"app-public-api-version"})],q.prototype,"appPublicApiVersion",void 0),t._([t.n({type:Boolean,reflect:!0})],q.prototype,"nsfw",void 0),t._([t.n({type:Boolean})],q.prototype,"promoted",void 0),t._([t.n({type:Number})],q.prototype,"score",void 0),t._([t.n({type:Boolean,reflect:!0})],q.prototype,"spoiler",void 0),t._([t.n({type:String,attribute:"subreddit-id"})],q.prototype,"subredditId",void 0),t._([t.n({type:String,attribute:"subreddit-name"})],q.prototype,"subredditName",void 0),t._([t.n({type:Boolean,attribute:"is-subscribed"})],q.prototype,"isSubscribed",void 0),t._([t.n({type:String,attribute:"subreddit-prefixed-name"})],q.prototype,"subredditPrefixedName",void 0),t._([t.n({type:String,attribute:"post-title"})],q.prototype,"postTitle",void 0),t._([t.n({type:String,attribute:"post-type"})],q.prototype,"postType",void 0),t._([t.n({type:String,attribute:"recommendation-source"})],q.prototype,"recommendationSource",void 0),t._([t.n({type:String,attribute:"recommendation-subreddit-id"})],q.prototype,"recommendationSubredditId",void 0),t._([t.n({type:String,attribute:"recommendation-subreddit-name"})],q.prototype,"recommendationSubredditName",void 0),t._([t.n({type:String,attribute:"post-language"})],q.prototype,"postLanguage",void 0),t._([t.n({type:String,attribute:"translation-language"})],q.prototype,"translationLanguage",void 0),t._([t.n({type:Boolean,attribute:"is-translation-on",reflect:!0})],q.prototype,"isTranslationOn",void 0),t._([t.n({type:Number})],q.prototype,"feedIndex",void 0),t._([t.n({type:Boolean,attribute:"stickied"})],q.prototype,"isStickied",void 0),t._([t.n({type:Boolean,attribute:"highlighted"})],q.prototype,"isHighlighted",void 0),t._([t.n({type:Boolean,attribute:"crossposting-v2-enabled"})],q.prototype,"isCrosspostingV2Enabled",void 0),t._([t.n({type:Boolean,attribute:"is-translation-v2-enabled"})],q.prototype,"isTranslationV2Enabled",void 0),t._([t.n({type:Number,attribute:"comment-count"})],q.prototype,"commentCount",void 0),t._([t.n({type:Boolean,attribute:"is-awardable"})],q.prototype,"isAwardable",void 0),t._([t.n({type:Number,attribute:"award-count"})],q.prototype,"awardCount",void 0),t._([t.n({type:String,attribute:"award-id"})],q.prototype,"awardId",void 0),t._([t.n({type:String,attribute:"award-icon-url"})],q.prototype,"awardIconUrl",void 0),t._([t.n({type:Array,attribute:"award-icon-urls"})],q.prototype,"awardIconUrls",void 0),t._([t.n({type:Boolean,attribute:"hide-award-icon"})],q.prototype,"hideAwardIcon",void 0),t._([t.n({type:Boolean,attribute:"is-awarded-by-user"})],q.prototype,"isAwardedByUser",void 0),t._([t.n({type:Boolean,attribute:"has-iconic-award"})],q.prototype,"hasIconicAward",void 0),t._([t.n({type:Boolean,attribute:"has-branded-award"})],q.prototype,"hasBrandedAward",void 0),t._([t.n({type:String})],q.prototype,"permalink",void 0),t._([t.n({type:Boolean})],q.prototype,"gallery",void 0),t._([t.n({type:String,attribute:"view-context"})],q.prototype,"viewContext",void 0),t._([t.n({type:String,attribute:"view-type"})],q.prototype,"viewType",void 0),t._([t.n({type:Boolean,attribute:"is-slim-card"})],q.prototype,"isSlimCard",void 0),t._([t.n({type:Boolean,attribute:"is-desktop-viewport"})],q.prototype,"isDesktopViewport",void 0),t._([t.n({type:Boolean,attribute:"is-reporting-enabled"})],q.prototype,"isReportingEnabled",void 0),t._([t.n({type:Boolean,attribute:"is-link-post"})],q.prototype,"isLinkPost",void 0),t._([t.n({type:Boolean,attribute:"is-ama"})],q.prototype,"isAma",void 0),t._([t.n({type:Boolean,attribute:"is-embed"})],q.prototype,"isEmbed",void 0),t._([t.n({type:Boolean,attribute:"is-not-brand-safe"})],q.prototype,"isNotBrandSafe",void 0),t._([t.n({type:Boolean,attribute:"is-crosspost"})],q.prototype,"isCrosspost",void 0),t._([t.n({type:Boolean,attribute:"is-crosspostable"})],q.prototype,"isCrosspostable",void 0),t._([t.n({type:Boolean,attribute:"is-embeddable"})],q.prototype,"isEmbeddable",void 0),t._([t.n({type:Boolean,attribute:"user-logged-in"})],q.prototype,"isUserLoggedIn",void 0),t._([t.n({type:Boolean,attribute:"disabled"})],q.prototype,"disabled",void 0),t._([t.n({type:String,attribute:"vote-type"})],q.prototype,"voteType",void 0),t._([t.n({type:Boolean,attribute:"show-full-content"})],q.prototype,"showFullContent",void 0),t._([t.n({type:Boolean,attribute:"is-translatable"})],q.prototype,"isTranslatable",void 0),t._([t.n({type:Boolean,attribute:"is-translation-fetched",reflect:!0})],q.prototype,"isTranslationFetched",void 0),t._([t.n({type:Boolean,attribute:"is-post-translated",reflect:!0})],q.prototype,"isPostTranslated",void 0),t._([t.n({type:Boolean,attribute:"is-post-body-translated",reflect:!0})],q.prototype,"isPostBodyTranslated",void 0),t._([t.n({type:Boolean,attribute:"is-mt-seo-user-page",reflect:!0})],q.prototype,"isMTSEOUserPage",void 0),t._([t.n({type:Boolean,attribute:"should-hide-original-language-link"})],q.prototype,"shouldHideOriginalLanguageLink",void 0),t._([t.n({type:Boolean,attribute:"has-mt-seo-translation-interruption"})],q.prototype,"hasMTSEOTranslationInterruption",void 0),t._([t.n({type:String,attribute:"more-posts-cursor"})],q.prototype,"morePostsCursor",void 0),t._([t.n({type:Boolean,attribute:"should-track-post-leave-events"})],q.prototype,"isPostLeaveEventsEnabled",void 0),t._([t.n({type:Boolean,attribute:"locked",reflect:!0})],q.prototype,"isLocked",void 0),t._([t.n({type:Boolean,attribute:"banned",reflect:!0})],q.prototype,"isBanned",void 0),t._([t.n({type:Boolean,attribute:"is-contest-mode",reflect:!0})],q.prototype,"isContestMode",void 0),t._([t.n({type:String,attribute:"pdp-target"})],q.prototype,"pdpTarget",void 0),t._([t.n({type:Boolean,attribute:"is-promoteable-post"})],q.prototype,"isPromoteablePost",void 0),t._([t.n({type:String,attribute:"moderation-verdict"})],q.prototype,"moderationVerdict",void 0),t._([t.n({type:Boolean,attribute:"previous-actions-feature"})],q.prototype,"previousActionsFeature",void 0),t._([t.n({type:String,reflect:!0})],q.prototype,"updateAnimation",void 0),t._([t.n({type:String,attribute:"item-state",reflect:!0})],q.prototype,"itemState",void 0),t._([t.n({type:Boolean,attribute:"are-reports-expandable"})],q.prototype,"areReportsExpandable",void 0),t._([t.n({type:Boolean,attribute:"compact-ui-experiment"})],q.prototype,"isCompactUIExp",void 0),t._([t.n({type:Boolean,attribute:"post-comment-tap-exp"})],q.prototype,"isPostCommentTapExp",void 0),t._([t.n({type:Boolean,attribute:"is-pdp-seeker-m1-lo"})],q.prototype,"isPdpSeekerM1LO",void 0),t._([t.n({type:Boolean,attribute:"share-button-ssr"})],q.prototype,"shareButtonSSR",void 0),t._([t.n({type:Boolean,attribute:"interaction-from-hotkey"})],q.prototype,"interactionFromHotkey",void 0),t._([t.n({type:Boolean,attribute:"apply-feeds-simplification"})],q.prototype,"applyFeedsSimplification",void 0),t._([t.n({type:Boolean,attribute:"inline-game-tag"})],q.prototype,"inlineGameTag",void 0),t._([t.N()],q.prototype,"showPostRemovalBanner",void 0),t._([t.N()],q.prototype,"showExpando",void 0),t._([t.N()],q.prototype,"postVoteType",void 0),t._([t.N()],q.prototype,"postScore",void 0),t._([t.N()],q.prototype,"useShortHiddenPostForm",void 0),t._([t.N()],q.prototype,"isThumbnailSet",void 0),t._([t.N()],q.prototype,"isUpdatingPostBody",void 0),t._([t.N()],q.prototype,"displayPostAnalytics",void 0),t._([t.N()],q.prototype,"isCrosspostingCoachmarkOpen",void 0),t._([t.N()],q.prototype,"eligibleCrosspostingSubreddit",void 0),q=t._([t.e("shreddit-post")],q),{D:f,get S(){return q},a:L}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("Ds3iHAvh",["s_Igk1Yn"],(async c=>{const{svg:M}=c.g();return{r:c.m(M`<path d="M16.38 16.34A8.967 8.967 0 0019 10c0-4.96-4.04-9-9-9-2.47 0-4.71 1-6.34 2.62 0 0-.01 0-.02.01s0 .01-.01.02a8.967 8.967 0 00-2.62 6.34c0 4.96 4.04 9 9 9 2.47 0 4.71-1 6.34-2.62 0 0 .01 0 .02-.01s0-.01.01-.02zM17.2 10c0 1.66-.57 3.19-1.52 4.41L5.59 4.32A7.157 7.157 0 0110 2.8c3.97 0 7.2 3.23 7.2 7.2zM2.8 10c0-1.66.57-3.19 1.52-4.41l10.09 10.09A7.157 7.157 0 0110 17.2c-3.97 0-7.2-3.23-7.2-7.2z"></path>`,"0 0 20 20","remove")}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("DslEtuBZ",["GlDbwxoG","s_Igk1Yn","CC2wUKE8"],(async(t,e,o)=>{const r={options:{dateStyle:"full",timeStyle:"long"}};let s=class extends e.s{constructor(){super(...arguments),this.ts="",this.date=new Date,this.short=!1,this.locale=""}getLocale(){return this.locale||o.bp()}createRenderRoot(){return this}render(){const t=this.getLocale(),s=o.bq(this.date,t,r),i=this.formatOptions?{options:this.formatOptions}:{short:this.short},a=o.bq(this.date,t,i);return e.x`<time datetime="${this.date.toISOString()}" title="${s}">${a}</time>`}};t._([t.n({type:String})],s.prototype,"ts",void 0),t._([t.n({attribute:"ts",converter:t=>o.br(t||"")})],s.prototype,"date",void 0),t._([t.n({type:Boolean})],s.prototype,"short",void 0),t._([t.n({type:String})],s.prototype,"locale",void 0),t._([t.n({type:Object})],s.prototype,"formatOptions",void 0),s=t._([t.e("faceplate-date")],s)}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("DtcD-j6p",["s_Igk1Yn"],(async a=>{const{svg:o}=a.g();return{o:a.m(o`<path d="M16 11.75a1.75 1.75 0 11.001-3.501A1.75 1.75 0 0116 11.75zM11.75 10a1.75 1.75 0 10-3.501.001A1.75 1.75 0 0011.75 10zm-6 0a1.75 1.75 0 10-3.501.001A1.75 1.75 0 005.75 10z"></path>`,"0 0 20 20","overflow-horizontal")}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("Du0Sc1_5",["GlDbwxoG","s_Igk1Yn","CC2wUKE8"],(async(t,o,n)=>{let s=class extends o.s{constructor(){super(...arguments),this.isMobile=!1,this.showDurationS=8,this.postId="",this.isPillVisible=!1,this.hostCommentCount=0,this.isAddedTabEvent=!1,this.commentCountSubscriptionController=new t.bH(this),this.onData=t=>{this.isAddedTabEvent||(document.querySelector(`.${n.Z}`)?.addEventListener("click",this.handleAmaCommentTabClick),this.isAddedTabEvent=!0);const o=t.subscribe.data.hostCommentCountChange||0;o<=0||(this.hostCommentCount+=o,this.isPillVisible?clearTimeout(this.currentCountDown):this.isPillVisible=!0,this.currentCountDown=setTimeout((()=>{this.isPillVisible=!1}),1e3*this.showDurationS))},this.scrollToCommentsAndRefreshAnswers=()=>{const t=document.querySelector(`.${n.Z}`)?.offsetTop;if(!t)return;const o=document.querySelector("nav")?.offsetHeight??0;window.scrollTo({top:t-o,behavior:"smooth"});const s=document.querySelector('button[value="answered"]');s?.click()},this.onPillClick=()=>{this.isPillVisible=!1,this.hostCommentCount=0,this.currentCountDown&&clearTimeout(this.currentCountDown),this.currentCountDown=void 0,this.scrollToCommentsAndRefreshAnswers()},this.handleAmaCommentTabClick=t=>{const o=t.target?.getAttribute("value"),n=o&&o.toLowerCase();"all"!==n&&"answered"!==n||(this.isPillVisible=!1,this.hostCommentCount=0,this.currentCountDown&&clearTimeout(this.currentCountDown))}}static get styles(){return[o.i`:host{left:50%;position:fixed;top:calc(var(--shreddit-header-height) + 32px);transform:translateX(-50%);z-index:1001}`,t.t]}getTitleText(){return t.bI({one:`${this.hostCommentCount} new answer`,other:`${this.hostCommentCount} new answers`,count:this.hostCommentCount});}connectedCallback(){super.connectedCallback(),this.commentCountSubscriptionController.subscribe({query:{operationName:"SubscribeSubscription",query:"\n          subscription SubscribeSubscription($input: SubscribeInput!) {\n            subscribe(input: $input) {\n              ... on BasicMessage {\n                data {\n                  ... on CommentCountUpdateMessageData {\n                    hostCommentCountChange\n                  }\n                }\n              }\n            }\n          }\n          ",variables:{input:{channel:{teamOwner:"CONTENT_AND_COMMUNITIES",category:"COMMENT_COUNT_UPDATE",postID:this.postId}}}},onData:t=>{t.data&&this.onData(t.data)}})}disconnectedCallback(){super.disconnectedCallback(),document.querySelector(`.${n.Z}`)?.removeEventListener("click",this.handleAmaCommentTabClick)}render(){return this.isPillVisible?t.Y({appearance:"primary",attributes:{onclick:this.onPillClick},children:this.getTitleText(),size:this.isMobile?t.a7.Small:t.a7.Large,role:"button"}):o.A}};t._([t.n({type:Boolean,attribute:"is-mobile"})],s.prototype,"isMobile",void 0),t._([t.n({type:Number,attribute:"show-duration-in-s"})],s.prototype,"showDurationS",void 0),t._([t.n({type:String,attribute:"post-id"})],s.prototype,"postId",void 0),t._([t.N()],s.prototype,"isPillVisible",void 0),t._([t.N()],s.prototype,"hostCommentCount",void 0),s=t._([t.e("ama-new-comment-pill")],s)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("Du8UC0gt",["GlDbwxoG","s_Igk1Yn","CC2wUKE8"],(async(t,e,o)=>{let r=class extends e.s{constructor(){super(),this.ts="",this.short=!1,this.format="",this.locale="",this.date=new Date(this.ts)}getLocale(){return this.locale.length?this.locale:o.bp()}createRenderRoot(){return this}render(){const t=o.c8(this.getLocale(),{dateStyle:"full",timeStyle:"long"}).format(this.date),r={short:this.short,format:this.format.length?this.format:void 0},i=o.c9(this.date,this.getLocale(),r);return e.x` <time datetime="${this.date.toISOString()}" title="${t}">${i}</time> `}};t._([t.n({type:String})],r.prototype,"ts",void 0),t._([t.n({attribute:"ts",converter:t=>o.br(t||"")})],r.prototype,"date",void 0),t._([t.n({type:Boolean})],r.prototype,"short",void 0),t._([t.n({type:String})],r.prototype,"format",void 0),t._([t.n({type:String})],r.prototype,"locale",void 0),r=t._([t.e("faceplate-timeago")],r)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("Du8UC0gt",["GlDbwxoG","s_Igk1Yn","CC2wUKE8"],(async(t,e,o)=>{let r=class extends e.s{constructor(){super(),this.ts="",this.short=!1,this.format="",this.locale="",this.date=new Date(this.ts)}getLocale(){return this.locale.length?this.locale:o.bp()}createRenderRoot(){return this}render(){const t=o.c8(this.getLocale(),{dateStyle:"full",timeStyle:"long"}).format(this.date),r={short:this.short,format:this.format.length?this.format:void 0},i=o.c9(this.date,this.getLocale(),r);return e.x` <time datetime="${this.date.toISOString()}" title="${t}">${i}</time> `}};t._([t.n({type:String})],r.prototype,"ts",void 0),t._([t.n({attribute:"ts",converter:t=>o.br(t||"")})],r.prototype,"date",void 0),t._([t.n({type:Boolean})],r.prototype,"short",void 0),t._([t.n({type:String})],r.prototype,"format",void 0),t._([t.n({type:String})],r.prototype,"locale",void 0),r=t._([t.e("faceplate-timeago")],r)}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("DuMDg_pA",["s_Igk1Yn"],(async a=>{const{svg:c}=a.g(),l=a.m(c`<g clip-path="url(#a)"><path d="M17.01 6.51c-.66 0-1.27.24-1.76.64-1.2-.8-2.7-1.31-4.33-1.46.05-.7.26-1.23.66-1.57.4-.34.97-.48 1.49-.53.33.43.84.71 1.42.71.99 0 1.8-.81 1.8-1.8S15.48.7 14.49.7c-.75 0-1.39.46-1.66 1.12-.78.08-1.68.32-2.4.92-.82.69-1.24 1.69-1.31 2.95-1.65.14-3.16.66-4.37 1.46-.49-.41-1.1-.65-1.77-.65C1.39 6.51.1 7.9.1 9.61c0 1.24.68 2.32 1.66 2.81.1 3.6 3.75 6.5 8.24 6.5s8.15-2.9 8.24-6.51c.98-.5 1.65-1.57 1.65-2.8 0-1.71-1.29-3.1-2.89-3.1h.01z"></path></g><defs><clipPath id="a"><path d="M0 0h20v20H0z"></path></clipPath></defs>`,"0 0 20 20","admin-fill"),{svg:t}=a.g();return{a:a.m(t`<path d="M17.012 6.507v-.002c-.662 0-1.272.24-1.76.643-1.202-.8-2.7-1.31-4.333-1.455.048-.704.259-1.227.664-1.568.403-.34.967-.485 1.493-.534.329.429.84.71 1.423.71a1.8 1.8 0 10-1.664-2.484c-.785.08-1.675.315-2.403.923-.82.686-1.244 1.688-1.305 2.95-1.65.142-3.161.657-4.374 1.465a2.75 2.75 0 00-1.766-.648C1.393 6.506.1 7.896.1 9.61c0 1.244.68 2.316 1.663 2.812.095 3.604 3.749 6.504 8.244 6.504 4.495 0 8.153-2.903 8.244-6.51.975-.5 1.649-1.567 1.649-2.804 0-1.715-1.293-3.105-2.888-3.105v-.001zm-.534 4.793l-.027 1.07c-.066 2.622-2.957 4.755-6.444 4.755s-6.375-2.131-6.444-4.751l-.03-1.075-.96-.484c-.41-.206-.673-.68-.673-1.204 0-.72.488-1.305 1.088-1.305.278 0 .487.126.614.232l1.032.859 1.118-.745C6.79 7.959 8.07 7.547 9.455 7.458l.993-.013c1.419.074 2.735.489 3.807 1.202l1.114.74 1.03-.852a.97.97 0 01.55-.228h.062c.6 0 1.088.585 1.088 1.305 0 .522-.263.994-.67 1.202l-.951.486z"></path>`,"0 0 20 20","admin"),b:l}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./B5aCBAWI.js",import.meta.url,"B5aCBAWI");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./Baruuhvw.js",import.meta.url,"Baruuhvw");
SML.dm("Dv3oQtz-",["GlDbwxoG","s_Igk1Yn","B5aCBAWI","CC2wUKE8","Baruuhvw"],(async(e,t,s,i,o)=>{const r=new WeakSet,n=async(t,{includeShadowRoot:s=!1}={})=>{const i="faceplate-partial",o=Array.from(t.querySelectorAll(i));s&&o.push(...Array.from(t.shadowRoot?.querySelectorAll(i)??[]));return(await Promise.all(o.map((async t=>!t||r.has(t)||t.loading!==e.q.Programmatic?Promise.resolve(!1):(r.add(t),t.load().then((()=>!0))))))).filter(Boolean).length>0},a=e=>t=>(e(t),t);let h=class extends o.FaceplateTooltip{constructor(){super(...arguments),this.mouseEnterDelay=750,this.mouseLeaveDelay=500,this.closeOnTrack=!1,this.disableTouchActivation=!1,this.partialLoading=e.q.Action,this.label="",this.mouseOnly=!1,this.sleepAfterEscape=!1,this.enterTimeout=-1,this.leaveTimeout=-1,this._popperController=new s.P(this,{position:this.position,referenceElementKey:"referenceElement",popperElementKey:"_tooltip"}),this._isHandlingTouch=!1,this.cleanupTimeouts=()=>{this.enterTimeout=this.leaveTimeout=-1},this.triggerEvent="hover",this.emitter=i.r(this),this.handleFocusOut=e=>{const t=e.relatedTarget;this.hidden||this.hasUserInteraction(t)||(this.close(),this.anchorEl&&(this.sleepAfterEscape=!0,this.anchorEl?.focus({preventScroll:!0})))},this.rplHovercardShowHandler=e=>{e.target===this||this.hidden||this.close()},this.onEscape=e=>{"Escape"===e.key&&(this.sleepAfterEscape=!0,this.close(),this.trigger?.focus())},this.mouseOverTrigger=e=>{this.setAttribute("trigger","mouse"),this.handleMouseenter(e)},this.handleClick=e=>{"hover"===this.triggerEvent&&this._isHandlingTouch&&this.disableTouchActivation&&(this.cleanupTimeouts(),this._isHandlingTouch=!1),super.handleClick(e)},this.handleTouchstart=()=>{this._isHandlingTouch=!0},this.handleMouseenter=t=>{if(this.mouseOnly&&"focusin"===t?.type)return;if(this.sleepAfterEscape)return void(this.sleepAfterEscape=!1);if(!this.hidden)return this.cleanupTimeouts();this.emitter.dispatch("entered"),this.partialLoading===e.q.Intent&&this.load();const s=window.setTimeout((()=>{s===this.enterTimeout&&this.hasUserInteraction()&&this.show()}),this.mouseEnterDelay);this.enterTimeout=s,document.addEventListener("keydown",this.onEscape),t?.currentTarget?.addEventListener("mouseleave",this.handleMouseleave,{once:!0})},this.handleMouseleave=()=>{if(this.hidden)return this.cleanupTimeouts();const e=window.setTimeout((()=>{e===this.leaveTimeout&&this.close()}),this.mouseLeaveDelay);this.leaveTimeout=e},this.handleMouseEnterTooltip=()=>{this.cleanupTimeouts()},this.handleMouseLeaveTooltip=()=>{this.handleMouseleave(),document.removeEventListener("keydown",this.onEscape)},this.handleFaceplateTrack=()=>{this.closeOnTrack&&this.close()},this.handleSlotChange=()=>{this.initializeFocusManager(),!this.hidden&&this.focusManager?.focus()},this.initializeFocusManager=()=>{this.content&&(this.focusManager=new e.ay(this,this.content))},this.render=()=>{const e=this._popperController.actualPosition||this.position;return t.x` <slot aria-describedby="faceplate-tooltip" faceplate-popper-trigger @click="${this.handleClick}" @touchstart="${this.handleTouchstart}" @mouseenter="${this.mouseOverTrigger}" @mouseleave="${this.handleMouseleave}" @focusin="${this.handleMouseenter}" @focusout="${this.handleMouseleave}"></slot> <div aria-label="${t.l((this.label||this.ariaLabel)??void 0)}" id="faceplate-tooltip" role="dialog" part="content-container" position="${e}" @keydown="${this.handleKeydown}" @mouseenter="${this.handleMouseEnterTooltip}" @mouseleave="${this.handleMouseLeaveTooltip}" @focusin="${this.handleMouseEnterTooltip}" @focusout="${this.handleMouseLeaveTooltip}" @slotchange="${this.handleSlotChange}" faceplate-popper-content> <slot name="content" @faceplate-track="${this.handleFaceplateTrack}"></slot> </div> `}}get content(){return this.contents[0]??null}get trigger(){return this.anchorEl??this.triggers[0]??null}get anchorEl(){try{if(this.anchor&&"string"==typeof this.anchor){return this.getRootNode().getElementById(this.anchor)}return this.anchor instanceof HTMLElement?this.anchor:null}catch{return null}}get referenceElement(){return this.trigger??this}setupAnchorElListeners(){const{anchorEl:e}=this;e&&(e.addEventListener("click",this.handleClick),e.addEventListener("touchstart",this.handleTouchstart),e.addEventListener("mouseenter",this.mouseOverTrigger),e.addEventListener("mouseleave",this.handleMouseleave),e.addEventListener("focusin",this.handleMouseenter),e.addEventListener("focusout",this.handleMouseleave))}cleanupAnchorElListeners(){const{anchorEl:e}=this;e&&(e.removeEventListener("click",this.handleClick),e.removeEventListener("touchstart",this.handleTouchstart),e.removeEventListener("mouseenter",this.mouseOverTrigger),e.removeEventListener("mouseleave",this.handleMouseleave),e.removeEventListener("focusin",this.handleMouseenter),e.removeEventListener("focusout",this.handleMouseleave))}hasUserInteraction(e){const t=Boolean(this.querySelector(":hover")||this.trigger?.matches(":hover")),s=Boolean(e&&(this.contains(e)||this.trigger?.contains(e))||this.querySelector(":focus")||this.trigger?.matches(":focus"));return t||s}hovercardShowHandler(e){e.target!==this&&this.close()}load(){return n(this).then(a(this._popperController.reposition)).then(a((e=>{this.hidden||e&&(this.focusManager?.refresh(),this.focusManager?.focus())})))}async show(){super.show(),this.partialLoading===e.q.Action&&this.load(),await this._popperController.currentState.animationFinished,this.focusManager?.focus(),this.addEventListener("focusout",this.handleFocusOut),document.addEventListener(this.emitter.eventId("open"),this.hovercardShowHandler),document.addEventListener("rpl-hovercard:show",this.rplHovercardShowHandler),this.cleanupTimeouts()}async close(){const e=super.close();document.removeEventListener(this.emitter.eventId("open"),this.hovercardShowHandler),document.removeEventListener("rpl-hovercard:show",this.rplHovercardShowHandler),this.cleanupTimeouts(),await e,this.removeTrigger()}removeTrigger(){this.removeAttribute("trigger")}handleKeydown(){this.removeTrigger()}connectedCallback(){super.connectedCallback(),this.setupAnchorElListeners()}disconnectedCallback(){this.cleanupAnchorElListeners(),super.disconnectedCallback(),this.cleanupTimeouts()}static get styles(){return[...super.styles,t.i`:host{display:contents}#faceplate-tooltip{display:flex;flex-direction:column;width:fit-content;justify-content:flex-start;align-items:flex-start;box-sizing:border-box;border-radius:1rem;box-shadow:var(--elevation-md);z-index:var(--faceplate-hovercard-z-index,1)}#faceplate-tooltip::after{display:none}`]}};e._([e.n({type:String})],h.prototype,"anchor",void 0),e._([e.l({slot:""})],h.prototype,"triggers",void 0),e._([e.l({slot:"content"})],h.prototype,"contents",void 0),e._([e.n({type:Number,attribute:"enter-delay"})],h.prototype,"mouseEnterDelay",void 0),e._([e.n({type:Number,attribute:"leave-delay"})],h.prototype,"mouseLeaveDelay",void 0),e._([e.n({type:Boolean,attribute:"close-on-track"})],h.prototype,"closeOnTrack",void 0),e._([e.n({type:Boolean,attribute:"disable-touch-activation",reflect:!0})],h.prototype,"disableTouchActivation",void 0),e._([e.n({type:String,attribute:"partial-loading"})],h.prototype,"partialLoading",void 0),e._([e.n({type:String})],h.prototype,"label",void 0),e._([e.n({type:Boolean,attribute:"mouse-only"})],h.prototype,"mouseOnly",void 0),e._([e.N()],h.prototype,"sleepAfterEscape",void 0),h=e._([e.e("faceplate-hovercard")],h);var l=Object.freeze({__proto__:null,get FaceplateHovercard(){return h}});return{get F(){return h},get f(){return l},l:n,s:a}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./BJ1W-iEe.js",import.meta.url,"BJ1W-iEe");SML.di("./Dnuvlpy4.js",import.meta.url,"Dnuvlpy4");SML.di("./BDjNXHKi.js",import.meta.url,"BDjNXHKi");SML.di("./CDFmhs-S.js",import.meta.url,"CDFmhs-S");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./EI0o9e89.js",import.meta.url,"EI0o9e89");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./FaYkg4Io.js",import.meta.url,"FaYkg4Io");SML.di("./MX9FaClF.js",import.meta.url,"MX9FaClF");
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./C_OcidZ-.js",import.meta.url,"C_OcidZ-");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");
SML.dm("DwHTSY-I",["GlDbwxoG","C_OcidZ-","DRM-oTYq"],(async(e,t,n)=>{const a={get:()=>{if(!e.$.isAvailable())return;const t=e.$.getItem(e.a0.I18nPostTranslationBanner);return t?JSON.parse(t):void 0},set:t=>{e.$.isAvailable()&&e.$.setItem(e.a0.I18nPostTranslationBanner,JSON.stringify(t))},update:e=>{const t=a.get()||{};a.set({...t,...e})}},r="shreddit_mt_immersive_en",o=new Set,s=t=>{if(o.has(t))return;o.add(t);const n=e.ai(t);return e.aj({experimentName:t,variant:n??"",experimentVersion:""})};return{P:a,i:function(){const e=window.location?.search??"";return new URLSearchParams(e).has("tl")},l:t=>{const{error:n,ids:a,element:r,componentName:o}=t,s=e.b({source:"translate_button",action:"error",noun:"app"},{action_info:{reason:n,type:o},setting:{value:a.toString(),values:a}});e.f(r,s)},o:{post:(t,a)=>{if(s(r),t.id){const r=n.b({archived:a?.archived,authorId:a?.authorId,createdTimestamp:a?.createdTimestamp,domain:a?.domain,id:a?.id??"",nsfw:a?.nsfw,promoted:a?.promoted,score:a?.score,spoiler:a?.spoiler,subredditId:a?.subredditId,subredditPrefixedName:a?.subredditPrefixedName,postTitle:a?.postTitle,postType:a?.postType,recommendationSource:a?.recommendationSource,commentCount:a?.commentCount,permalink:a?.permalink,postLanguage:a?.postLanguage,translationLanguage:a?.translationLanguage,isPostTranslated:a?.isPostTranslated});e.f(t,r)}},comment:(n,a)=>{s(r);const o=t.b(a);e.f(n,o)}}}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("Dwuzm5vN",["s_Igk1Yn"],(async c=>{const{svg:t}=c.g();return{c:c.m(t`<path d="M10 2.8c3.97 0 7.2 3.23 7.2 7.2s-3.23 7.2-7.2 7.2-7.2-3.23-7.2-7.2S6.03 2.8 10 2.8zM10 1a9 9 0 10.001 18.001A9 9 0 0010 1zm.9 8.63V4.68H9.1V10c0 .24.1.47.26.64l3.76 3.76 1.27-1.27-3.49-3.5z"></path>`,"0 0 20 20","clock")}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./C-d7BR1A.js",import.meta.url,"C-d7BR1A");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DgY18AyY.js",import.meta.url,"DgY18AyY");SML.di("./BTMr9sPC.js",import.meta.url,"BTMr9sPC");SML.di("./BM-DpnLu.js",import.meta.url,"BM-DpnLu");SML.di("./jzNEIPwx.js",import.meta.url,"jzNEIPwx");SML.di("./CtbLRG6p.js",import.meta.url,"CtbLRG6p");SML.di("./CDFmhs-S.js",import.meta.url,"CDFmhs-S");SML.di("./DCovP8x6.js",import.meta.url,"DCovP8x6");SML.di("./BStJq-t0.js",import.meta.url,"BStJq-t0");SML.di("./FaYkg4Io.js",import.meta.url,"FaYkg4Io");SML.di("./MX9FaClF.js",import.meta.url,"MX9FaClF");
SML.dm("DxA_--UQ",["GlDbwxoG","CC2wUKE8","C-d7BR1A","s_Igk1Yn","DgY18AyY","BTMr9sPC","BM-DpnLu","jzNEIPwx","CtbLRG6p","FaYkg4Io","MX9FaClF","CDFmhs-S","DCovP8x6","BStJq-t0"],(async(e,t,a,i,n,o,r,s,d,m,l)=>{let u=class extends i.s{constructor(){super(...arguments),this.pubsub=new e.m(this),this.class="",this.thingId="",this.isOP=!1,this.isCollaborator=!1,this.isCommentDeleted=!1,this.handleCommentUpdated=({commentId:t,action:i,value:n})=>{this.thingId===t&&i===a.C.distinguishAsMod?this.distinguishedAs=n?e.dC.Moderator:void 0:this.thingId===t&&i===a.C.distinguishAsAdmin&&(this.distinguishedAs=n?e.dC.Admin:void 0)},this.handleCommentDeleted=({commentId:e})=>{this.thingId===e&&(this.isCommentDeleted=!0)}}static get styles(){return[e.t,i.i`:host{display:contents}`]}get authorType(){return this.isCommentDeleted?"":this.distinguishedAs===e.dC.Admin?"admin":this.distinguishedAs===e.dC.Moderator?"moderator":this.isOP?"op":this.isCollaborator?"collaborator":""}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(e.T.CommentUpdated,this.handleCommentUpdated,!1),this.pubsub.subscribe(e.T.CommentDeleted,this.handleCommentDeleted,!1)}render(){const e=this.authorType,a=`font-semibold text-12 tracking-wide uppercase ${this.class} ${e}`;switch(e){case"moderator":return i.x`<span class="${t.n(a,"text-identity-moderator")}" aria-label="${"Comment distinguished by moderator"}"> ${t.aY()} </span>`;case"admin":return i.x`<span class="${t.n(a,"text-identity-admin")}" aria-label="${"Comment distinguished by admin"}"> ${t.aX()} </span>`;case"op":return i.x`<span class="${t.n(a,"comment-op-icon-js text-alienblue-600")}" aria-label="${"Comment distinguished as the original poster"}"> ${t.aW()} </span>`;case"collaborator":return i.x`<span class="${t.n(a,"text-alienblue-600")}" aria-label="${"Comment distinguished as a post collaborator"}"> ${t.aV()} </span>`;default:return i.A}}};e._([e.n({type:String})],u.prototype,"class",void 0),e._([e.n({type:String,attribute:"thing-id"})],u.prototype,"thingId",void 0),e._([e.n({type:String,attribute:"distinguished-as"})],u.prototype,"distinguishedAs",void 0),e._([e.n({type:Boolean,attribute:"op"})],u.prototype,"isOP",void 0),e._([e.n({type:Boolean,attribute:"collaborator"})],u.prototype,"isCollaborator",void 0),e._([e.n({type:Boolean,attribute:"comment-deleted"})],u.prototype,"isCommentDeleted",void 0),u=e._([e.e("shreddit-comment-author-modifier-icon")],u);let c=class extends i.s{constructor(){super(...arguments),this._showShareToModChatBanner=!e.$.getItem(this.getLocalStorageKey()),this.closeCoachmark=()=>{this._showShareToModChatBanner=!1}}getLocalStorageKey(){return e.a0.ModQueueTranslationCoachmarkSeen}connectedCallback(){super.connectedCallback();e.$.getItem(this.getLocalStorageKey())?this._showShareToModChatBanner=!1:(e.$.setItem(this.getLocalStorageKey(),"true"),this._showShareToModChatBanner=!0)}render(){return i.x`<rpl-coachmark placement="${m.P.Top}" appearance="${l.a.Inverted}" ?open="${this._showShareToModChatBanner}"> <slot></slot> <rpl-coachmark-card slot="content" aria-live="polite" appearance="${l.a.Inverted}" class="w-[220px]"> <div slot="title" class="pt-xs pb-2xs"> <div class="max-w-[120px]"> ${"Translations are active"} </div> </div> ${e.Y({attributes:{className:"close-btn",slot:"close-button",onclick:e=>{e.stopPropagation(),this.closeCoachmark()}},appearance:"plainInverted",size:e.a7.Small,leadingIcon:i.c({size:i.I.Small})})} <div class="text-12 w-[170px] mb-sm"> ${"Redditors can contribute in any language, so content in communities you mod will be translated for you. Update your known language in account settings."} </div> <div slot="primary-button"> ${e.Y({attributes:{onclick:e=>{this.closeCoachmark(),e.stopPropagation()}},appearance:"plainInverted",size:e.a7.Small,children:"Got it"})} </div> <div slot="secondary-button"> ${e.Y({attributes:{onclick:e=>{window.open("/settings/preferences","_blank"),e.stopPropagation()}},appearance:"plainInverted",size:e.a7.Small,children:"Settings"})} </div> </rpl-coachmark-card> </rpl-coachmark>`;}};c.styles=[e.t],e._([e.N()],c.prototype,"_showShareToModChatBanner",void 0),c=e._([e.e("mod-queue-item-translation-coachmark")],c);let k=class extends i.s{constructor(){super(...arguments),this.thingId="",this.iconSize=i.I.Small,this.isDeleted=!1,this.isLocked=!1,this.isStickied=!1,this.isOP=!1,this.translationIndicator=d.T.none,this.pubsub=new e.m(this),this.handleCommentUpdated=({commentId:t,action:i,value:n})=>{if(this.thingId===t)switch(i){case a.C.distinguishAsMod:this.distinguishedAs=n?e.dC.Moderator:void 0;break;case a.C.sticky:this.isStickied=Boolean(n);break;case a.C.lock:this.isLocked=Boolean(n)}},this.handleCommentDeleted=({commentId:e})=>{this.thingId===e&&(this.isDeleted=!0)}}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(e.T.CommentUpdated,this.handleCommentUpdated),this.pubsub.subscribe(e.T.CommentDeleted,this.handleCommentDeleted)}renderLockedIcon(){return this.isDeleted||!this.isLocked?null:r.l({size:this.iconSize,attributes:{"aria-label":"Locked comment",className:"lock-icon text-alert-caution"}});}renderStickiedIcon(){if(this.isDeleted||!this.isStickied)return null;let t;return this.distinguishedAs===e.dC.Admin?t="text-identity-admin":this.distinguishedAs===e.dC.Moderator?t="text-identity-moderator":this.isOP&&(t="text-action-secondary"),this.isLocked?s.p({size:this.iconSize,attributes:{"aria-label":"Stickied comment",className:t}}):i.x` <span class="text-12 text-neutral-content inline-flex items-center gap-2xs"> ${s.p({attributes:{"aria-hidden":"true"},size:this.iconSize})} <span> ${"Stickied comment"} </span> </span> `;}renderTranslationIcon(){return this.translationIndicator!==d.T.none?i.x`<rpl-tooltip appearance="inverted" trigger="hover focus"> <span slot="content">${"Translations active"}</span><mod-queue-item-translation-coachmark> ${o.t({size:i.I.ExtraSmall,attributes:{"aria-label":"Comment is translated",className:t.n(this.translationIndicator===d.T.untranslated&&"hidden")}})} </mod-queue-item-translation-coachmark></rpl-tooltip> <rpl-tooltip appearance="inverted" trigger="hover focus"> <span slot="content">${"Translations not active"}</span>${n.t({size:i.I.ExtraSmall,attributes:{"aria-label":"Comment is not translated",className:t.n(this.translationIndicator===d.T.translated&&"hidden")}})}</rpl-tooltip> `:"";}render(){const e=this.renderLockedIcon(),t=this.renderStickiedIcon(),a=this.renderTranslationIcon();return e||t||this.translationIndicator!==d.T.none?i.x` <span class="ml-2xs text-12 text-neutral-content-weak" aria-hidden="true"></span> ${a} ${e} ${t} `:null}};k.styles=[i.i`:host{display:inline-flex;align-items:center;gap:var(--spacer-2xs)}`,e.t],e._([e.n({type:String,attribute:"thing-id"})],k.prototype,"thingId",void 0),e._([e.n({type:String,attribute:"icon-size"})],k.prototype,"iconSize",void 0),e._([e.n({type:Boolean,attribute:"deleted"})],k.prototype,"isDeleted",void 0),e._([e.n({type:Boolean,attribute:"locked"})],k.prototype,"isLocked",void 0),e._([e.n({type:Boolean,attribute:"stickied"})],k.prototype,"isStickied",void 0),e._([e.n({type:Boolean,attribute:"op"})],k.prototype,"isOP",void 0),e._([e.n({type:String,attribute:"distinguished-as"})],k.prototype,"distinguishedAs",void 0),e._([e.n({type:String,attribute:"translation-indicator"})],k.prototype,"translationIndicator",void 0),k=e._([e.e("shreddit-comment-badges")],k)}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("DzK3xEza",["s_Igk1Yn"],(async a=>{const{svg:t}=a.g();return{e:a.m(t`<path d="M14.016 3.8c.583 0 1.132.227 1.545.64.413.413.64.961.64 1.545a2.17 2.17 0 01-.64 1.545l-8.67 8.67-3.079-.01-.01-3.079 8.669-8.671c.413-.413.962-.64 1.545-.64zm0-1.8a3.97 3.97 0 00-2.817 1.167l-8.948 8.947a.858.858 0 00-.251.609l.014 4.408a.858.858 0 00.855.855L7.277 18h.003c.227 0 .446-.09.606-.251l8.947-8.947A3.985 3.985 0 0014.016 2z"></path>`,"0 0 20 20","edit")}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("DzMpUNmB",["s_Igk1Yn"],(async e=>{var t;!function(e){e.Small="sm",e.Medium="md"}(t||(t={}));const n=e=>{let t;return"boolean"==typeof e&&(t=e?"true":"false"),t},a=t=>{const{attributes:n,trailingSlot:a,selected:s,liRole:i}=t,{html:o,createElement:c}=e.g(),{role:d,tabindex:p,"aria-disabled":u,"aria-selected":g,...m}=n||{},x=o`${r(t)} ${l(a)}`;return c("li",{...m,className:`relative list-none mt-0 ${n?.className||""}`,rpl:!0,rplSelected:s,role:i||"presentation"},x)},r=a=>{const{anchorAttributes:r,appearance:l,description:o,disabled:c,href:d,innerClassName_DO_NOT_USE:p,label:u,leadingAvatar:g,leadingIcon:m,noXPadding:x=!1,onClick:b,selected:$,size:f=t.Medium,trailingSlot:h,attributes:y,suppressHoverStyles:v=!1}=a,k=!$&&a.hasTransparentBackground,{html:_,createElement:S,ifDefined:w}=e.g(),{role:N,tabindex:E}=y??{},j=Boolean(E??y?.onclick??a.onClick),I=j?parseInt(E??"0"):void 0,O=!v&&(null!=d||j),T=e=>{return t=e,O?t:"";var t},D=["flex justify-between relative",(x?"px-xs -mx-xs":"px-md")+" gap-[0.5rem]","danger"===l?$?"text-danger-content":`text-danger-content ${T("hover:text-danger-content-hover")}`:$?"text-secondary-onBackground":`text-secondary ${T("hover:text-secondary-hover")}`,`${k?"":$?`bg-neutral-background-selected ${T("hover:bg-neutral-background-selected")}`:`${T("active:bg-interactive-pressed")}`} ${T("hover:bg-neutral-background-hover")}`,`${T("hover:no-underline")}`,`${T("cursor-pointer")}`,c?"opacity-60 pointer-events-none":"",f===t.Medium?"py-xs":"py-2xs"," -outline-offset-1",p].join(" "),B=_` <span class="flex items-center gap-xs min-w-0 shrink"> ${m?_` <span class="flex shrink-0 items-center justify-center h-xl w-xl text-20 leading-4"> ${m} </span>`:void 0} ${g?_`<span class="flex shrink-0 items-center justify-center h-xl w-xl"> <span class="text-20 leading-4">${g}</span> </span>`:void 0} <span class="flex flex-col justify-center min-w-0 shrink py-[var(--rem6)]"> <span class="text-14">${u}</span> <span class="text-12 text-secondary-weak">${o}</span> </span> </span> ${i(h)} `;return d?S("a",{...r,role:N,href:d,tabindex:I,onclick:b,className:`${D} ${r?.className?r.className:""} no-underline`,style:`padding-inline-end: ${s(a)}`},B):_`<div aria-disabled="${w(n(c)||y?.["aria-disabled"])}" aria-selected="${w(n($)||y?.["aria-selected"])}" role="${w(N)}" tabindex="${w(I)}" class="${D}" @click="${b}" @keydown="${e=>{"Enter"!==e.code&&"Space"!==e.code||!b||b(e)}}" style="padding-inline-end:${s(a)}"> ${B} </div>`};function s({trailingSlot:e}){if("object"!=typeof e||!("type"in e))return"16px";switch(e.type){case"iconButton":return"58px";case"switchInput":return"80px";default:return"16px"}}const l=t=>{if("object"!=typeof t||!("type"in t))return null;const{html:n}=e.g();return n`<div class="absolute top-1/2" style="inset-inline-end:${function(e){if("object"!=typeof e||!("type"in e))return"16px";switch(e.type){case"iconButton":return"10px";case"switchInput":return"8px";default:return"16px"}}(t)};transform:translateY(-50%)"> ${t.content} </div>`},i=t=>{if("object"==typeof t&&"type"in t)return null;const{html:n}=e.g();return n`<span class="flex items-center shrink-0"> <span class="flex items-center justify-center h-lg">${t}</span> </span>`},o={"list-item":"","group-label":"text-12 text-secondary-weak tracking-widest",title:"text-16 text-neutral-content-strong"},c={"list-item":"","group-label":"text-secondary-weak",title:"text-neutral-content-strong"};return{D:1,get L(){return t},T:"table-pagination__paginate-previous",a:({appearance:n="list-item",attributes:r,innerClassName_DO_NOT_USE:s,label:l,leadingIcon:i,trailingIconAttributes:d,noXPadding:p,suppressHoverStyles:u=!1})=>{const{html:g}=e.g();return a({attributes:{...r,tabindex:"-1"},hasTransparentBackground:!0,innerClassName_DO_NOT_USE:s,label:g`<span class="${o[n]}">${l}</span>`,leadingIcon:i,size:t.Small,trailingSlot:e.ap({attributes:{...d,className:`${c[n]} ${d?.className}`}}),noXPadding:p,suppressHoverStyles:u})},b:"table-pagination__paginate-next",c:25,d:"table-pagination__page-size-updated",e:({attributes:t,contentId:n,content:a,header:r,hasLeadingBorder:s,isInitiallyOpen:l=!0})=>{const{html:i,createElement:o}=e.g();return o("faceplate-expandable-section-helper",{...t,booleanOpen:l,rpl:!0},i`<details ?open="${l}" class="p-0 m-0 bg-transparent border-none rounded-none"> <summary aria-controls="${n}" aria-expanded="${l}" class="font-normal"> ${r} </summary> <faceplate-auto-height-animator class="block" ?open="${l}"> <div faceplate-auto-height-animator-content id="${n}" style="${s?"border-left: 1px solid var(--color-neutral-border-weak); margin-left: 28px;":""}"> ${a} </div> </faceplate-auto-height-animator> </details>`)},l:a}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./FaYkg4Io.js",import.meta.url,"FaYkg4Io");
SML.dm("EI0o9e89",["GlDbwxoG","s_Igk1Yn","CC2wUKE8","FaYkg4Io"],(async(e,t,o,i)=>{const a=new WeakSet;function n(e,t,o){e&&e.value&&(e.value[t]=o)}class s extends e.R{constructor(){super(...arguments),this.contentSlotRef=e.U(),this.defaultSlotRef=e.U(),this.hovercardBodyRef=e.U(),this.popperRef=e.U(),this.anchorElement=null,this.interactionController=new o._(this,{isInteractedWith:e=>e.open,hoverDelayStart:t=>e.bK(getComputedStyle(t).getPropertyValue("--show-delay")),hoverDelayEnd:t=>e.bK(getComputedStyle(t).getPropertyValue("--hide-delay")),delayOpenOnFocus:!0}),this.placement=i.P.Top,this.disabled=!1,this.distance=4,this.open=!1,this.skidding=0,this.trigger="hover focus",this.hoist=!1,this.noAnimate=!1,this.arrow=!1,this.eventUsedMap=new WeakMap,this.handleDocumentKeyDown=e=>{"Escape"===e.key&&(e.stopPropagation(),this.hide(),this.defaultSlotRef.value&&this.focusFirstTabbableElement(this.defaultSlotRef.value))},this.handleDocumentClick=e=>{if(!(e.target instanceof HTMLElement)||this.hidden)return;this.eventUsedMap.has(e)||o.$(this,e.target)||this.hide()},this.handleLegacyHovercardOpen=e=>{e.target!==this&&this.open&&this.hide()}}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("click",this.handleDocumentClick),document.removeEventListener("faceplate-hovercard:open",this.handleLegacyHovercardOpen)}willUpdate(e){e.has("open")&&this.hasUpdated&&this.handleOpenChange(),e.has("disabled")&&this.handleDisabledChange(),(e.has("content")||e.has("distance")||e.has("hoist")||e.has("placement")||e.has("skidding"))&&this.handleOptionsChange()}firstUpdated(){this.hovercardBodyRef.value&&(this.hovercardBodyRef.value.hidden=!0),this.open&&this.popperRef.value&&this.handleOpenChange()}startInteraction(e,t){this.eventUsedMap.has(e)||(this.interactionController.interactionTrigger=t,this.eventUsedMap.set(e,!0),this.show())}finishInteraction(e){this.eventUsedMap.set(e,!0),this.hide()}focusFirstTabbableElement(t){const o=e.cD(t)[0];o&&"focus"in o&&"function"==typeof o.focus&&(o.addEventListener("focusin",(e=>{this.eventUsedMap.set(e,!0)}),{once:!0,capture:!0}),o.focus({preventScroll:!0}))}focusFirstTabbableBodyElement(e){return this.focusFirstTabbableElement(e)}async handleOpenChange(){if(!this.disabled&&this.contentSlotRef.value&&this.hovercardBodyRef.value&&this.popperRef.value)if(this.open){this.emitter.dispatch("show"),this.dispatchEvent(new CustomEvent("faceplate-hovercard:open",{bubbles:!0}));const t=(async(t,o="faceplate-partial")=>{const i=o.toLowerCase(),n=e.cC((e=>e.tagName.toLowerCase()===i&&(e=>"loading"in e&&"load"in e&&"function"==typeof e?.load)(e)),t);return(await Promise.all(n.map((async e=>!e||a.has(e)||"programmatic"!==e.loading?Promise.resolve(!1):(a.add(e),e.load().then((()=>!0))))))).filter(Boolean).length>0})(this.contentSlotRef.value);document.addEventListener("keydown",this.handleDocumentKeyDown),document.addEventListener("click",this.handleDocumentClick),document.addEventListener("faceplate-hovercard:open",this.handleLegacyHovercardOpen),await e.bL(this.hovercardBodyRef.value),n(this.hovercardBodyRef,"hidden",!1),n(this.popperRef,"active",!0),this.updateAnchorElementAria();const{keyframes:o,options:i}=e.bM(this,"hovercard.show");await e.bN(this.popperRef.value?.popup,o,i),this.popperRef.value?.reposition(),await t,!this.hovercardBodyRef.value||"focus"!==this.interactionController.interactionTrigger&&"click"!==this.interactionController.interactionTrigger||this.focusFirstTabbableBodyElement(this.hovercardBodyRef.value),this.emitter.dispatch("after-show")}else{this.emitter.dispatch("hide"),document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("click",this.handleDocumentClick),document.removeEventListener("faceplate-hovercard:open",this.handleLegacyHovercardOpen),await e.bL(this.hovercardBodyRef.value);const{keyframes:t,options:o}=e.bM(this,"hovercard.hide");await e.bN(this.popperRef.value?.popup,t,o),n(this.popperRef,"active",!1),n(this.hovercardBodyRef,"hidden",!0),this.updateAnchorElementAria(),this.emitter.dispatch("after-hide")}}async handleOptionsChange(){this.hasUpdated&&this.popperRef.value&&(await this.updateComplete,this.popperRef.value?.reposition())}handleAnchorSlotChange(){this.defaultSlotRef.value&&(this.anchorElement=e.cC((e=>e instanceof HTMLButtonElement||e instanceof HTMLAnchorElement||["button","link","menuitem","tab","checkbox","combobox","gridcell","application","treeitem"].includes(e?.getAttribute("role")??"")),this.defaultSlotRef.value)[0]??null,this.updateAnchorElementAria())}updateAnchorElementAria(){this.anchorElement?.setAttribute("aria-haspopup","dialog"),this.anchorElement?.setAttribute("aria-expanded",this.open?"true":"false")}handleDisabledChange(){this.disabled&&this.open&&this.hide()}async show(){if(!this.open)return this.open=!0,e.bO(this,this.emitter.eventId("after-show"))}async hide(){if(this.open)return this.open=!1,e.bO(this,this.emitter.eventId("after-hide"))}render(){return t.x` <rpl-popper part="popper" exportparts="
          popup:popper--popup,
          arrow:popper--arrow
        " class="${e.H({hovercard:!0,"hovercard--open":this.open})}" placement="${this.placement}" distance="${this.distance}" skidding="${this.skidding}" strategy="${this.hoist?"fixed":"absolute"}" flip shift safe-area ?arrow="${this.arrow}" @mouseenter="${this.interactionController.handleMouseEnter}" @mouseleave="${this.interactionController.handleMouseLeave}" @mousedown="${this.interactionController.handleMouseDown}" @mouseup="${this.interactionController.handleMouseUp}" @focusin="${this.interactionController.handleFocus}" @focusout="${this.interactionController.handleBlur}" @click="${e=>this.eventUsedMap.set(e,!0)}" ${e.V(this.popperRef)}> <slot slot="anchor" aria-describedby="hovercard" @click="${this.interactionController.handleClick}" ${e.V(this.defaultSlotRef)} @slotchange="${this.handleAnchorSlotChange}"></slot> <div part="body" id="hovercard" class="hovercard-body" role="dialog" aria-live="${this.open?"polite":"off"}" ${e.V(this.hovercardBodyRef)}> <slot name="content" ${e.V(this.contentSlotRef)}></slot> </div> </rpl-popper> `}}return e._([e.n()],s.prototype,"placement",void 0),e._([e.n({type:Boolean,reflect:!0})],s.prototype,"disabled",void 0),e._([e.n({type:Number})],s.prototype,"distance",void 0),e._([e.n({type:Boolean,reflect:!0})],s.prototype,"open",void 0),e._([e.n({type:Number})],s.prototype,"skidding",void 0),e._([e.n()],s.prototype,"trigger",void 0),e._([e.n({type:Boolean})],s.prototype,"hoist",void 0),e._([e.n({type:Boolean,attribute:"no-animate"})],s.prototype,"noAnimate",void 0),e._([e.n({type:Boolean})],s.prototype,"arrow",void 0),e.bJ("hovercard.show",{keyframes:[{opacity:0,scale:.8},{opacity:1,scale:1}],options:{duration:150,easing:"ease"}}),e.bJ("hovercard.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.8}],options:{duration:150,easing:"ease"}}),{H:s}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("FEzVvA-C",["GlDbwxoG","s_Igk1Yn","CC2wUKE8"],(async(e,t,a)=>{let s=class extends(a.W(e.aD)){constructor(){super(...arguments),this.pages=0,this.for=void 0,this._events=new e.E(this),this._windowEvents=new e.E(this,(()=>window)),this._locationHashMap=new Map,this._selectedElements=new Set,this._activeSlotRef=e.U(),this._handleHashChange=this._windowEvents.define("hashchange",(()=>{const e=this._locationHashMap.get(window.location.hash);e&&(this.pageIndex=e)})),this._handleClick=this._events.define("click",(e=>{let t=null;e.target instanceof HTMLAnchorElement&&(t=e.target.getAttribute("href"),t&&"#"!==t[0]&&(t=null)),null!==t&&(e.preventDefault(),e.stopPropagation());const a=e.composedPath();for(let e=0;e<a.length;e++){const s=a[e];if(s instanceof HTMLSpanElement){const e=this.getPageIndexFromSpanWrapper(s);if(t){const e=new URL(window.location.href);e.hash=t,window.history.pushState(null,"",e.href)}if(0!==e){this.pageIndex=e;break}}}})),this._handleKeydown=this._events.define("keydown",(e=>{if("ArrowLeft"===e.key)this.previousPage();else{if("ArrowRight"!==e.key)return;this.nextPage()}e.preventDefault(),e.stopPropagation()}))}get pageIndex(){return super.pageIndex}set pageIndex(e){super.pageIndex=e}get pageNames(){return super.pageNames}set pageNames(e){super.pageNames=e}render(){if(this.pages<1)return t.x``;const{pageNames:s}=this;return t.x` <div class="tablist" role="tablist"> ${a.d(this.pages).map((a=>t.x` <span data-i="${a}" role="tab" aria-selected="${a===this.pageIndex?"true":"false"}"> <slot @slotchange="${this.handleSlotChange}" name="${s?s[a-1]:`page-${a}`}" ${a===this.pageIndex?e.V(this._activeSlotRef):""}></slot> </span> `))} </div> `}updated(e){if(e.has("pageIndex")){this._clearSelectedAttributes();const e=this._activeSlotRef.value;if(!e)return;for(const t of e.assignedElements())this._setSelectedAttribute(t),t.focus()}}_clearSelectedAttributes(){if(this._selectedElements.size){for(const e of this._selectedElements)e.removeAttribute("faceplate-tab-selected");this._selectedElements.clear()}}_setSelectedAttribute(e){this._selectedElements.add(e),e.setAttribute("faceplate-tab-selected","")}handleSlotChange(e){const{hash:t}=window.location,a=e.target;if(!(a.parentElement instanceof HTMLSpanElement))return;const s=a.assignedElements(),n=this.getPageIndexFromSpanWrapper(a.parentElement),i=n===this.pageIndex;if(i&&this._clearSelectedAttributes(),s.length)for(const e of s){if(i&&this._setSelectedAttribute(e),!(e instanceof HTMLAnchorElement))continue;const a=e.getAttribute("href");a&&(this._locationHashMap.set(a,n),a===t&&(this.pageIndex=n))}}getPageIndexFromSpanWrapper(e){return e.dataset.i?parseInt(e.dataset.i,10):0}pageIndexChangedCallback(e){super.pageIndexChangedCallback(e),this.requestUpdate("pageIndex",e)}};return e._([e.n({type:Number})],s.prototype,"pages",void 0),e._([e.n({type:Number,attribute:"pageindex"})],s.prototype,"pageIndex",null),e._([e.n({type:String})],s.prototype,"for",void 0),e._([e.n({converter:e.I,attribute:"pagenames"})],s.prototype,"pageNames",null),e._([e.Q(".tablist")],s.prototype,"tabList",void 0),s=e._([e.e("faceplate-tablist")],s),{get F(){return s}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("FaYkg4Io",["GlDbwxoG","s_Igk1Yn"],(async(t,e)=>{const o=Math.min,n=Math.max,i=Math.round,r=Math.floor,a=t=>({x:t,y:t}),s={left:"right",right:"left",bottom:"top",top:"bottom"},l={start:"end",end:"start"};function c(t,e,i){return n(t,o(e,i))}function p(t,e){return"function"==typeof t?t(e):t}function f(t){return t.split("-")[0]}function h(t){return t.split("-")[1]}function u(t){return"x"===t?"y":"x"}function d(t){return"y"===t?"height":"width"}function m(t){return["top","bottom"].includes(f(t))?"y":"x"}function y(t){return u(m(t))}function g(t){return t.replace(/start|end/g,(t=>l[t]))}function v(t){return t.replace(/left|right|bottom|top/g,(t=>s[t]))}function b(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function w(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function x(t,e,o){let{reference:n,floating:i}=t;const r=m(e),a=y(e),s=d(a),l=f(e),c="y"===r,p=n.x+n.width/2-i.width/2,u=n.y+n.height/2-i.height/2,g=n[s]/2-i[s]/2;let v;switch(l){case"top":v={x:p,y:n.y-i.height};break;case"bottom":v={x:p,y:n.y+n.height};break;case"right":v={x:n.x+n.width,y:u};break;case"left":v={x:n.x-i.width,y:u};break;default:v={x:n.x,y:n.y}}switch(h(e)){case"start":v[a]-=g*(o&&c?-1:1);break;case"end":v[a]+=g*(o&&c?-1:1)}return v}async function E(t,e){var o;void 0===e&&(e={});const{x:n,y:i,platform:r,rects:a,elements:s,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:u=!1,padding:d=0}=p(e,t),m=b(d),y=s[u?"floating"===h?"reference":"floating":h],g=w(await r.getClippingRect({element:null==(o=await(null==r.isElement?void 0:r.isElement(y)))||o?y:y.contextElement||await(null==r.getDocumentElement?void 0:r.getDocumentElement(s.floating)),boundary:c,rootBoundary:f,strategy:l})),v="floating"===h?{...a.floating,x:n,y:i}:a.reference,x=await(null==r.getOffsetParent?void 0:r.getOffsetParent(s.floating)),E=await(null==r.isElement?void 0:r.isElement(x))&&await(null==r.getScale?void 0:r.getScale(x))||{x:1,y:1},P=w(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:v,offsetParent:x,strategy:l}):v);return{top:(g.top-P.top+m.top)/E.y,bottom:(P.bottom-g.bottom+m.bottom)/E.y,left:(g.left-P.left+m.left)/E.x,right:(P.right-g.right+m.right)/E.x}}const P=function(t){return void 0===t&&(t={}),{name:"flip",options:t,async fn(e){var o,n;const{placement:i,middlewareData:r,rects:a,initialPlacement:s,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:b,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:P=!0,...R}=p(t,e);if(null!=(o=r.arrow)&&o.alignmentOffset)return{};const S=f(i),T=f(s)===s,z=await(null==l.isRTL?void 0:l.isRTL(c.floating)),L=b||(T||!P?[v(s)]:function(t){const e=v(t);return[g(t),e,g(e)]}(s));b||"none"===x||L.push(...function(t,e,o,n){const i=h(t);let r=function(t,e,o){const n=["left","right"],i=["right","left"],r=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return o?e?i:n:e?n:i;case"left":case"right":return e?r:a;default:return[]}}(f(t),"start"===o,n);return i&&(r=r.map((t=>t+"-"+i)),e&&(r=r.concat(r.map(g)))),r}(s,P,x,z));const A=[s,...L],O=await E(e,R),_=[];let k=(null==(n=r.flip)?void 0:n.overflows)||[];if(u&&_.push(O[S]),m){const t=function(t,e,o){void 0===o&&(o=!1);const n=h(t),i=y(t),r=d(i);let a="x"===i?n===(o?"end":"start")?"right":"left":"start"===n?"bottom":"top";return e.reference[r]>e.floating[r]&&(a=v(a)),[a,v(a)]}(i,a,z);_.push(O[t[0]],O[t[1]])}if(k=[...k,{placement:i,overflows:_}],!_.every((t=>t<=0))){var C,D;const t=((null==(C=r.flip)?void 0:C.index)||0)+1,e=A[t];if(e)return{data:{index:t,overflows:k},reset:{placement:e}};let o=null==(D=k.filter((t=>t.overflows[0]<=0)).sort(((t,e)=>t.overflows[1]-e.overflows[1]))[0])?void 0:D.placement;if(!o)switch(w){case"bestFit":{var B;const t=null==(B=k.map((t=>[t.placement,t.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)])).sort(((t,e)=>t[1]-e[1]))[0])?void 0:B[0];t&&(o=t);break}case"initialPlacement":o=s}if(i!==o)return{reset:{placement:o}}}return{}}}};const R=function(t){return void 0===t&&(t=0),{name:"offset",options:t,async fn(e){var o,n;const{x:i,y:r,placement:a,middlewareData:s}=e,l=await async function(t,e){const{placement:o,platform:n,elements:i}=t,r=await(null==n.isRTL?void 0:n.isRTL(i.floating)),a=f(o),s=h(o),l="y"===m(o),c=["left","top"].includes(a)?-1:1,u=r&&l?-1:1,d=p(e,t);let{mainAxis:y,crossAxis:g,alignmentAxis:v}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return s&&"number"==typeof v&&(g="end"===s?-1*v:v),l?{x:g*u,y:y*c}:{x:y*c,y:g*u}}(e,t);return a===(null==(o=s.offset)?void 0:o.placement)&&null!=(n=s.arrow)&&n.alignmentOffset?{}:{x:i+l.x,y:r+l.y,data:{...l,placement:a}}}}},S=function(t){return void 0===t&&(t={}),{name:"size",options:t,async fn(e){const{placement:i,rects:r,platform:a,elements:s}=e,{apply:l=()=>{},...c}=p(t,e),u=await E(e,c),d=f(i),y=h(i),g="y"===m(i),{width:v,height:b}=r.floating;let w,x;"top"===d||"bottom"===d?(w=d,x=y===(await(null==a.isRTL?void 0:a.isRTL(s.floating))?"start":"end")?"left":"right"):(x=d,w="end"===y?"top":"bottom");const P=b-u[w],R=v-u[x],S=!e.middlewareData.shift;let T=P,z=R;if(g){const t=v-u.left-u.right;z=y||S?o(R,t):t}else{const t=b-u.top-u.bottom;T=y||S?o(P,t):t}if(S&&!y){const t=n(u.left,0),e=n(u.right,0),o=n(u.top,0),i=n(u.bottom,0);g?z=v-2*(0!==t||0!==e?t+e:n(u.left,u.right)):T=b-2*(0!==o||0!==i?o+i:n(u.top,u.bottom))}await l({...e,availableWidth:z,availableHeight:T});const L=await a.getDimensions(s.floating);return v!==L.width||b!==L.height?{reset:{rects:!0}}:{}}}};function T(t){return A(t)?(t.nodeName||"").toLowerCase():"#document"}function z(t){var e;return(null==t||null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function L(t){var e;return null==(e=(A(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function A(t){return t instanceof Node||t instanceof z(t).Node}function O(t){return t instanceof Element||t instanceof z(t).Element}function _(t){return t instanceof HTMLElement||t instanceof z(t).HTMLElement}function k(t){return"undefined"!=typeof ShadowRoot&&(t instanceof ShadowRoot||t instanceof z(t).ShadowRoot)}function C(t){const{overflow:e,overflowX:o,overflowY:n,display:i}=H(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+o)&&!["inline","contents"].includes(i)}function D(t){return["table","td","th"].includes(T(t))}function B(t){const e=$(),o=H(t);return"none"!==o.transform||"none"!==o.perspective||!!o.containerType&&"normal"!==o.containerType||!e&&!!o.backdropFilter&&"none"!==o.backdropFilter||!e&&!!o.filter&&"none"!==o.filter||["transform","perspective","filter"].some((t=>(o.willChange||"").includes(t)))||["paint","layout","strict","content"].some((t=>(o.contain||"").includes(t)))}function $(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function F(t){return["html","body","#document"].includes(T(t))}function H(t){return z(t).getComputedStyle(t)}function N(t){return O(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function M(t){if("html"===T(t))return t;const e=t.assignedSlot||t.parentNode||k(t)&&t.host||L(t);return k(e)?e.host:e}function W(t){const e=M(t);return F(e)?t.ownerDocument?t.ownerDocument.body:t.body:_(e)&&C(e)?e:W(e)}function V(t,e,o){var n;void 0===e&&(e=[]),void 0===o&&(o=!0);const i=W(t),r=i===(null==(n=t.ownerDocument)?void 0:n.body),a=z(i);return r?e.concat(a,a.visualViewport||[],C(i)?i:[],a.frameElement&&o?V(a.frameElement):[]):e.concat(i,V(i,[],o))}function j(t){const e=H(t);let o=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const r=_(t),a=r?t.offsetWidth:o,s=r?t.offsetHeight:n,l=i(o)!==a||i(n)!==s;return l&&(o=a,n=s),{width:o,height:n,$:l}}function I(t){return O(t)?t:t.contextElement}function q(t){const e=I(t);if(!_(e))return a(1);const o=e.getBoundingClientRect(),{width:n,height:r,$:s}=j(e);let l=(s?i(o.width):o.width)/n,c=(s?i(o.height):o.height)/r;return l&&Number.isFinite(l)||(l=1),c&&Number.isFinite(c)||(c=1),{x:l,y:c}}const Y=a(0);function Q(t){const e=z(t);return $()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:Y}function U(t,e,o,n){void 0===e&&(e=!1),void 0===o&&(o=!1);const i=t.getBoundingClientRect(),r=I(t);let s=a(1);e&&(n?O(n)&&(s=q(n)):s=q(t));const l=function(t,e,o){return void 0===e&&(e=!1),!(!o||e&&o!==z(t))&&e}(r,o,n)?Q(r):a(0);let c=(i.left+l.x)/s.x,p=(i.top+l.y)/s.y,f=i.width/s.x,h=i.height/s.y;if(r){const t=z(r),e=n&&O(n)?z(n):n;let o=t.frameElement;for(;o&&n&&e!==t;){const t=q(o),e=o.getBoundingClientRect(),n=H(o),i=e.left+(o.clientLeft+parseFloat(n.paddingLeft))*t.x,r=e.top+(o.clientTop+parseFloat(n.paddingTop))*t.y;c*=t.x,p*=t.y,f*=t.x,h*=t.y,c+=i,p+=r,o=z(o).frameElement}}return w({width:f,height:h,x:c,y:p})}function X(t){return U(L(t)).left+N(t).scrollLeft}function Z(t,e,o){let i;if("viewport"===e)i=function(t,e){const o=z(t),n=L(t),i=o.visualViewport;let r=n.clientWidth,a=n.clientHeight,s=0,l=0;if(i){r=i.width,a=i.height;const t=$();(!t||t&&"fixed"===e)&&(s=i.offsetLeft,l=i.offsetTop)}return{width:r,height:a,x:s,y:l}}(t,o);else if("document"===e)i=function(t){const e=L(t),o=N(t),i=t.ownerDocument.body,r=n(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),a=n(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let s=-o.scrollLeft+X(t);const l=-o.scrollTop;return"rtl"===H(i).direction&&(s+=n(e.clientWidth,i.clientWidth)-r),{width:r,height:a,x:s,y:l}}(L(t));else if(O(e))i=function(t,e){const o=U(t,!0,"fixed"===e),n=o.top+t.clientTop,i=o.left+t.clientLeft,r=_(t)?q(t):a(1);return{width:t.clientWidth*r.x,height:t.clientHeight*r.y,x:i*r.x,y:n*r.y}}(e,o);else{const o=Q(t);i={...e,x:e.x-o.x,y:e.y-o.y}}return w(i)}function G(t,e){const o=M(t);return!(o===e||!O(o)||F(o))&&("fixed"===H(o).position||G(o,e))}function J(t,e,o){const n=_(e),i=L(e),r="fixed"===o,s=U(t,!0,r,e);let l={scrollLeft:0,scrollTop:0};const c=a(0);if(n||!n&&!r)if(("body"!==T(e)||C(i))&&(l=N(e)),n){const t=U(e,!0,r,e);c.x=t.x+e.clientLeft,c.y=t.y+e.clientTop}else i&&(c.x=X(i));return{x:s.left+l.scrollLeft-c.x,y:s.top+l.scrollTop-c.y,width:s.width,height:s.height}}function K(t,e){return _(t)&&"fixed"!==H(t).position?e?e(t):t.offsetParent:null}function tt(t,e){const o=z(t);if(!_(t))return o;let n=K(t,e);for(;n&&D(n)&&"static"===H(n).position;)n=K(n,e);return n&&("html"===T(n)||"body"===T(n)&&"static"===H(n).position&&!B(n))?o:n||function(t){let e=M(t);for(;_(e)&&!F(e);){if(B(e))return e;e=M(e)}return null}(t)||o}const et={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:o,strategy:n}=t;const i=_(o),r=L(o);if(o===r)return e;let s={scrollLeft:0,scrollTop:0},l=a(1);const c=a(0);if((i||!i&&"fixed"!==n)&&(("body"!==T(o)||C(r))&&(s=N(o)),_(o))){const t=U(o);l=q(o),c.x=t.x+o.clientLeft,c.y=t.y+o.clientTop}return{width:e.width*l.x,height:e.height*l.y,x:e.x*l.x-s.scrollLeft*l.x+c.x,y:e.y*l.y-s.scrollTop*l.y+c.y}},getDocumentElement:L,getClippingRect:function(t){let{element:e,boundary:i,rootBoundary:r,strategy:a}=t;const s=[..."clippingAncestors"===i?function(t,e){const o=e.get(t);if(o)return o;let n=V(t,[],!1).filter((t=>O(t)&&"body"!==T(t))),i=null;const r="fixed"===H(t).position;let a=r?M(t):t;for(;O(a)&&!F(a);){const e=H(a),o=B(a);o||"fixed"!==e.position||(i=null),(r?!o&&!i:!o&&"static"===e.position&&i&&["absolute","fixed"].includes(i.position)||C(a)&&!o&&G(t,a))?n=n.filter((t=>t!==a)):i=e,a=M(a)}return e.set(t,n),n}(e,this._c):[].concat(i),r],l=s[0],c=s.reduce(((t,i)=>{const r=Z(e,i,a);return t.top=n(r.top,t.top),t.right=o(r.right,t.right),t.bottom=o(r.bottom,t.bottom),t.left=n(r.left,t.left),t}),Z(e,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},getOffsetParent:tt,getElementRects:async function(t){let{reference:e,floating:o,strategy:n}=t;const i=this.getOffsetParent||tt,r=this.getDimensions;return{reference:J(e,await i(o),n),floating:{x:0,y:0,...await r(o)}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){return j(t)},getScale:q,isElement:O,isRTL:function(t){return"rtl"===H(t).direction}};function ot(t,e,i,a){void 0===a&&(a={});const{ancestorScroll:s=!0,ancestorResize:l=!0,elementResize:c="function"==typeof ResizeObserver,layoutShift:p="function"==typeof IntersectionObserver,animationFrame:f=!1}=a,h=I(t),u=s||l?[...h?V(h):[],...V(e)]:[];u.forEach((t=>{s&&t.addEventListener("scroll",i,{passive:!0}),l&&t.addEventListener("resize",i)}));const d=h&&p?function(t,e){let i,a=null;const s=L(t);function l(){clearTimeout(i),a&&a.disconnect(),a=null}return function c(p,f){void 0===p&&(p=!1),void 0===f&&(f=1),l();const{left:h,top:u,width:d,height:m}=t.getBoundingClientRect();if(p||e(),!d||!m)return;const y={rootMargin:-r(u)+"px "+-r(s.clientWidth-(h+d))+"px "+-r(s.clientHeight-(u+m))+"px "+-r(h)+"px",threshold:n(0,o(1,f))||1};let g=!0;function v(t){const e=t[0].intersectionRatio;if(e!==f){if(!g)return c();e?c(!1,e):i=setTimeout((()=>{c(!1,1e-7)}),100)}g=!1}try{a=new IntersectionObserver(v,{...y,root:s.ownerDocument})}catch(t){a=new IntersectionObserver(v,y)}a.observe(t)}(!0),l}(h,i):null;let m,y=-1,g=null;c&&(g=new ResizeObserver((t=>{let[o]=t;o&&o.target===h&&g&&(g.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame((()=>{g&&g.observe(e)}))),i()})),h&&!f&&g.observe(h),g.observe(e));let v=f?U(t):null;return f&&function e(){const o=U(t);!v||o.x===v.x&&o.y===v.y&&o.width===v.width&&o.height===v.height||i();v=o,m=requestAnimationFrame(e)}(),i(),()=>{u.forEach((t=>{s&&t.removeEventListener("scroll",i),l&&t.removeEventListener("resize",i)})),d&&d(),g&&g.disconnect(),g=null,f&&cancelAnimationFrame(m)}}const nt=(t,e,o)=>{const n=new Map,i={platform:et,...o},r={...i.platform,_c:n};return(async(t,e,o)=>{const{placement:n="bottom",strategy:i="absolute",middleware:r=[],platform:a}=o,s=r.filter(Boolean),l=await(null==a.isRTL?void 0:a.isRTL(e));let c=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:p,y:f}=x(c,n,l),h=n,u={},d=0;for(let o=0;o<s.length;o++){const{name:r,fn:m}=s[o],{x:y,y:g,data:v,reset:b}=await m({x:p,y:f,initialPlacement:n,placement:h,strategy:i,middlewareData:u,rects:c,platform:a,elements:{reference:t,floating:e}});p=null!=y?y:p,f=null!=g?g:f,u={...u,[r]:{...u[r],...v}},b&&d<=50&&(d++,"object"==typeof b&&(b.placement&&(h=b.placement),b.rects&&(c=!0===b.rects?await a.getElementRects({reference:t,floating:e,strategy:i}):b.rects),({x:p,y:f}=x(c,h,l))),o=-1)}return{x:p,y:f,placement:h,strategy:i,middlewareData:u}})(t,e,{...i,platform:r})};function it(t){return function(t){for(let e=t;e;e=rt(e))if(e instanceof Element&&"none"===getComputedStyle(e).display)return null;for(let e=rt(t);e;e=rt(e)){if(!(e instanceof Element))continue;const t=getComputedStyle(e);if("contents"!==t.display){if("static"!==t.position||"none"!==t.filter)return e;if("BODY"===e.tagName)return e}}return null}(t)}function rt(t){return t.assignedSlot?t.assignedSlot:t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}var at=e.i`${t.Z}:host{--arrow-color:var(--color-neutral-background-strong);--arrow-size:6px;--arrow-size-diagonal:calc(var(--arrow-size) * 0.7071);--arrow-padding-offset:calc(var(--arrow-size-diagonal) - var(--arrow-size));display:contents}.popup{position:absolute;isolation:isolate;max-width:var(--auto-size-available-width,none);max-height:var(--auto-size-available-height,none)}.popup--fixed{position:fixed}.popup:not(.popup--active){display:none}.popup--arrow{position:absolute;width:calc(var(--arrow-size-diagonal) * 2);height:calc(var(--arrow-size-diagonal) * 2);rotate:45deg;background:var(--arrow-color)}.popup-safe-area:not(.popup-safe-area--visible){display:none}.popup-safe-area{position:fixed;z-index:calc(var(--faceplate-tooltip-z-index,1) - 1);inset:0;clip-path:polygon(var(--safe-area-top-left-x,0) var(--safe-area-top-left-y,0),var(--safe-area-top-right-x,0) var(--safe-area-top-right-y,0),var(--safe-area-bottom-right-x,0) var(--safe-area-bottom-right-y,0),var(--safe-area-bottom-left-x,0) var(--safe-area-bottom-left-y,0))}`;const st={Top:"top",TopStart:"top-start",TopEnd:"top-end",Bottom:"bottom",BottomStart:"bottom-start",BottomEnd:"bottom-end",Right:"right",RightStart:"right-start",RightEnd:"right-end",Left:"left",LeftStart:"left-start",LeftEnd:"left-end"},lt="anchor";class ct extends t.R{constructor(){super(...arguments),this.anchorEl=null,this.active=!1,this.placement=st.Top,this.strategy="absolute",this.distance=0,this.skidding=0,this.arrow=!1,this.arrowPlacement=lt,this.arrowPadding=10,this.flip=!1,this.flipFallbackPlacements="",this.flipFallbackStrategy="best-fit",this.flipPadding=0,this.shift=!1,this.shiftPadding=0,this.autoSizePadding=0,this.safeArea=!1,this.updateSafeArea=()=>{if(!this.safeArea||!this.anchorEl)return;const t=this.anchorEl.getBoundingClientRect(),e=this.popup.getBoundingClientRect();let o=0,n=0,i=0,r=0,a=0,s=0,l=0,c=0;this.placement.includes("top")||this.placement.includes("bottom")?t.top<e.top?(o=t.left,n=t.bottom,i=t.right,r=t.bottom,a=e.left,s=e.top,l=e.right,c=e.top):(o=e.left,n=e.bottom,i=e.right,r=e.bottom,a=t.left,s=t.top,l=t.right,c=t.top):t.left<e.left?(o=t.right,n=t.top,i=e.left,r=e.top,a=t.right,s=t.bottom,l=e.left,c=e.bottom):(o=e.right,n=e.top,i=t.left,r=t.top,a=e.right,s=e.bottom,l=t.left,c=t.bottom),this.style.setProperty("--safe-area-top-left-x",`${o}px`),this.style.setProperty("--safe-area-top-left-y",`${n}px`),this.style.setProperty("--safe-area-top-right-x",`${i}px`),this.style.setProperty("--safe-area-top-right-y",`${r}px`),this.style.setProperty("--safe-area-bottom-left-x",`${a}px`),this.style.setProperty("--safe-area-bottom-left-y",`${s}px`),this.style.setProperty("--safe-area-bottom-right-x",`${l}px`),this.style.setProperty("--safe-area-bottom-right-y",`${c}px`)}}async connectedCallback(){super.connectedCallback(),await this.updateComplete,this.start()}disconnectedCallback(){super.disconnectedCallback(),this.stop()}async updated(t){super.updated(t),t.has("active")&&(this.active?this.start():this.stop()),t.has("anchor")&&this.handleAnchorChange(),this.active&&(await this.updateComplete,this.reposition())}async handleAnchorChange(){if(await this.stop(),this.anchor&&"string"==typeof this.anchor){const t=this.getRootNode();this.anchorEl=t.getElementById(this.anchor)}else this.anchor instanceof Element||null!==(t=this.anchor)&&"object"==typeof t&&"getBoundingClientRect"in t?this.anchorEl=this.anchor:this.anchorEl=this.querySelector('[slot="anchor"]');var t;this.anchorEl instanceof HTMLSlotElement&&(this.anchorEl=this.anchorEl.assignedElements({flatten:!0})[0]),this.anchorEl&&this.start()}start(){this.anchorEl&&(this.cleanup=ot(this.anchorEl,this.popup,(()=>{this.reposition()})))}async stop(){return new Promise((t=>{this.cleanup?(this.cleanup(),this.cleanup=void 0,this.removeAttribute("data-current-placement"),this.style.removeProperty("--auto-size-available-width"),this.style.removeProperty("--auto-size-available-height"),requestAnimationFrame((()=>t()))):t()}))}reposition(){if(!this.active||!this.anchorEl)return;const t=[R({mainAxis:this.distance,crossAxis:this.skidding})];var e;this.sync?t.push(S({apply:({rects:t})=>{const e="width"===this.sync||"both"===this.sync,o="height"===this.sync||"both"===this.sync;this.popup.style.width=e?`${t.reference.width}px`:"",this.popup.style.height=o?`${t.reference.height}px`:""}})):(this.popup.style.width="",this.popup.style.height=""),this.flip&&t.push(P({boundary:this.flipBoundary,fallbackPlacements:this.flipFallbackPlacements,fallbackStrategy:"best-fit"===this.flipFallbackStrategy?"bestFit":"initialPlacement",padding:this.flipPadding})),this.shift&&t.push((void 0===(e={boundary:this.shiftBoundary,padding:this.shiftPadding})&&(e={}),{name:"shift",options:e,async fn(t){const{x:o,y:n,placement:i}=t,{mainAxis:r=!0,crossAxis:a=!1,limiter:s={fn:t=>{let{x:e,y:o}=t;return{x:e,y:o}}},...l}=p(e,t),h={x:o,y:n},d=await E(t,l),y=m(f(i)),g=u(y);let v=h[g],b=h[y];if(r){const t="y"===g?"bottom":"right";v=c(v+d["y"===g?"top":"left"],v,v-d[t])}if(a){const t="y"===y?"bottom":"right";b=c(b+d["y"===y?"top":"left"],b,b-d[t])}const w=s.fn({...t,[g]:v,[y]:b});return{...w,data:{x:w.x-o,y:w.y-n}}}})),this.autoSize?t.push(S({boundary:this.autoSizeBoundary,padding:this.autoSizePadding,apply:({availableWidth:t,availableHeight:e})=>{"vertical"===this.autoSize||"both"===this.autoSize?this.style.setProperty("--auto-size-available-height",`${e}px`):this.style.removeProperty("--auto-size-available-height"),"horizontal"===this.autoSize||"both"===this.autoSize?this.style.setProperty("--auto-size-available-width",`${t}px`):this.style.removeProperty("--auto-size-available-width")}})):(this.style.removeProperty("--auto-size-available-width"),this.style.removeProperty("--auto-size-available-height")),this.arrow&&t.push((t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:a,platform:s,elements:l,middlewareData:f}=e,{element:u,padding:m=0}=p(t,e)||{};if(null==u)return{};const g=b(m),v={x:n,y:i},w=y(r),x=d(w),E=await s.getDimensions(u),P="y"===w,R=P?"top":"left",S=P?"bottom":"right",T=P?"clientHeight":"clientWidth",z=a.reference[x]+a.reference[w]-v[w]-a.floating[x],L=v[w]-a.reference[w],A=await(null==s.getOffsetParent?void 0:s.getOffsetParent(u));let O=A?A[T]:0;O&&await(null==s.isElement?void 0:s.isElement(A))||(O=l.floating[T]||a.floating[x]);const _=z/2-L/2,k=O/2-E[x]/2-1,C=o(g[R],k),D=o(g[S],k),B=C,$=O-E[x]-D,F=O/2-E[x]/2+_,H=c(B,F,$),N=!f.arrow&&null!=h(r)&&F!=H&&a.reference[x]/2-(F<B?C:D)-E[x]/2<0,M=N?F<B?F-B:F-$:0;return{[w]:v[w]+M,data:{[w]:H,centerOffset:F-H-M,...N&&{alignmentOffset:M}},reset:N}}}))({element:this.arrowEl,padding:this.arrowPadding}));const n="absolute"===this.strategy?t=>et.getOffsetParent(t,it):et.getOffsetParent;nt(this.anchorEl,this.popup,{placement:this.placement,middleware:t,strategy:this.strategy,platform:{...et,getOffsetParent:n}}).then((({x:t,y:e,middlewareData:o,placement:n})=>{const i="rtl"===getComputedStyle(this).direction,r={top:"bottom",right:"left",bottom:"top",left:"right"}[n.split("-")[0]];if(this.setAttribute("data-current-placement",n),Object.assign(this.popup.style,{left:`${t}px`,top:`${e}px`}),!this.arrow)return;const a=o.arrow.x,s=o.arrow.y;let l="",c="",p="",f="";if("start"===this.arrowPlacement){const t="number"==typeof a?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";l="number"==typeof s?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"",c=i?t:"",f=i?"":t}else if("end"===this.arrowPlacement){const t="number"==typeof a?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";c=i?"":t,f=i?t:"",p="number"==typeof s?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:""}else"center"===this.arrowPlacement?(f="number"==typeof a?"calc(50% - var(--arrow-size-diagonal))":"",l="number"==typeof s?"calc(50% - var(--arrow-size-diagonal))":""):(f="number"==typeof a?`${a}px`:"",l="number"==typeof s?`${s}px`:"");Object.assign(this.arrowEl.style,{top:l,right:c,bottom:p,left:f,[r]:"calc(var(--arrow-size-diagonal) * -1)"})})),requestAnimationFrame((()=>this.updateSafeArea())),this.emitter.dispatch("reposition")}render(){return e.x` <slot name="anchor" @slotchange="${this.handleAnchorChange}"></slot> <span part="safe-area" class="${t.H({"popup-safe-area":!0,"popup-safe-area--visible":this.safeArea&&this.active})}"></span> <div part="popup" class="${t.H({popup:!0,"popup--active":this.active,"popup--fixed":"fixed"===this.strategy,"popup--has-arrow":this.arrow})}"> <slot></slot> ${this.arrow?e.x`<div part="arrow" class="popup--arrow" role="presentation"></div>`:""} </div> `}}ct.styles=at,t._([t.Q(".popup")],ct.prototype,"popup",void 0),t._([t.Q(".popup--arrow")],ct.prototype,"arrowEl",void 0),t._([t.n()],ct.prototype,"anchor",void 0),t._([t.n({type:Boolean,reflect:!0})],ct.prototype,"active",void 0),t._([t.n({reflect:!0})],ct.prototype,"placement",void 0),t._([t.n({reflect:!0})],ct.prototype,"strategy",void 0),t._([t.n({type:Number})],ct.prototype,"distance",void 0),t._([t.n({type:Number})],ct.prototype,"skidding",void 0),t._([t.n({type:Boolean})],ct.prototype,"arrow",void 0),t._([t.n({attribute:"arrow-placement"})],ct.prototype,"arrowPlacement",void 0),t._([t.n({attribute:"arrow-padding",type:Number})],ct.prototype,"arrowPadding",void 0),t._([t.n({type:Boolean})],ct.prototype,"flip",void 0),t._([t.n({attribute:"flip-fallback-placements",converter:{fromAttribute:t=>t.split(" ").map((t=>t.trim())).filter((t=>""!==t))}})],ct.prototype,"flipFallbackPlacements",void 0),t._([t.n({attribute:"flip-fallback-strategy"})],ct.prototype,"flipFallbackStrategy",void 0),t._([t.n({type:Object})],ct.prototype,"flipBoundary",void 0),t._([t.n({attribute:"flip-padding",type:Number})],ct.prototype,"flipPadding",void 0),t._([t.n({type:Boolean})],ct.prototype,"shift",void 0),t._([t.n({type:Object})],ct.prototype,"shiftBoundary",void 0),t._([t.n({attribute:"shift-padding",type:Number})],ct.prototype,"shiftPadding",void 0),t._([t.n({attribute:"auto-size"})],ct.prototype,"autoSize",void 0),t._([t.n()],ct.prototype,"sync",void 0),t._([t.n({type:Object})],ct.prototype,"autoSizeBoundary",void 0),t._([t.n({attribute:"auto-size-padding",type:Number})],ct.prototype,"autoSizePadding",void 0),t._([t.n({attribute:"safe-area",type:Boolean})],ct.prototype,"safeArea",void 0);let pt=class extends ct{};return pt=t._([t.e("rpl-popper")],pt),{P:st}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");
SML.dm("FagDXDzk",["GlDbwxoG"],(async o=>{var e,t,n;!function(o){o.AddRemovalReason="mod-add-removal-reason",o.IgnoreReports="mod-ignore-reports",o.UnignoreReports="mod-unignore-reports",o.Distinguish="mod-distinguish",o.Undistinguish="mod-undistinguish",o.Sticky="mod-sticky",o.Unsticky="mod-unsticky",o.Lock="mod-lock",o.Unlock="mod-unlock",o.ApproveContent="mod-approve-content",o.RemoveContent="mod-remove-content",o.RemoveContentAsSpam="mod-remove-spam-content",o.ConfirmRemoval="mod-confirm-removal",o.RemoveContentMenu="mod-remove-content-menu",o.MarkNsfw="mod-mark-nsfw",o.UnmarkNsfw="mod-unmark-nsfw",o.MarkSpoiler="mod-mark-spoiler",o.UnmarkSpoiler="mod-unmark-spoiler",o.AdjustCrowdControl="mod-adjust-crowd-control",o.OpenEditPostFlairModal="mod-open-edit-post-flair-modal",o.SnoozeReporter="mod-snooze-reporter",o.UnsnoozeReporter="mod-unsnooze-reporter",o.UpdateHighlightedPost="mod-update-highlighted-post",o.RemoveHighlightedPost="mod-remove-highlighted-post",o.ApproveContentOptimistic="mod-approve-content-optimistic",o.RemoveContentOptimistic="mod-remove-content-optimistic",o.ConfirmRemovalOptimistic="mod-confirm-removal-optimistic",o.RemoveContentAsSpamOptimistic="mod-remove-spam-optimistic",o.ShareToModChat="mod-share-to-mod-chat",o.ViewChatThread="view-chat-thread"}(e||(e={})),function(o){o.Distinguish="admin-distinguish",o.Undistinguish="admin-undistinguish"}(t||(t={})),function(o){o.Dismissed="Dismissed",o.Ignored="Ignored",o.Reported="Reported"}(n||(n={}));const i=o=>o.startsWith("t1_");return{get A(){return t},get M(){return e},get R(){return n},a:()=>o.b({source:"post",action:"click",noun:"restore_reports"}),b:()=>o.b({source:"comment",action:"click",noun:"restore_reports"}),c:()=>o.b({source:"comment",action:"click",noun:"ignore_reports"}),d:(e,t,n)=>o.b({source:"removal_reasons",action:"click",noun:"submit"},{mod_action:{removalreason:e},action_info:{reason:t},subreddit:{id:n?.subredditId},post:{id:n?.postId??""},comment:{id:n?.commentId}}),e:()=>o.b({source:"removal_reasons",action:"click",noun:"cancel"}),g:t=>{switch(t){case o.fx.ApproveComment:case o.fx.ApproveLink:return e.ApproveContent;case o.fx.RemoveComment:case o.fx.RemoveLink:return e.RemoveContent;case o.fx.SpamComment:case o.fx.SpamLink:return e.RemoveContentAsSpam;case o.fx.AddRemovalReason:return e.AddRemovalReason;default:return e.ApproveContent}},h:(e,t)=>o.b({source:"moderator",action:"highlight",noun:"post"},{post:{id:e},...t?{action_info:{page_type:t}}:{}}),p:()=>o.b({source:"post",action:"click",noun:"ignore_reports"}),r:e=>{const{authorId:t,subredditId:n,postId:r,commentId:s,subredditName:m,thingId:d,action:a,noun:c="removal_reasons_flow",type:p,reason:u,isLocked:l,sendAs:v,notificationMethod:h}=e;return o.b({source:"moderator",action:a,noun:c},{user:{id:t},subreddit:{id:n,name:m},post:{id:r??""},comment:{id:s},action_info:{source_name:"removal_reasons",type:p,reason:u},mod_action:{removalreason:{is_locked:l,send_as:v,notify:h}},...d&&(g=d,g.startsWith("t3_"))&&{post:{id:d}},...d&&i(d)&&{comment:{id:d}}});var g},u:(e,t)=>o.b({source:"moderator",action:"unhighlight",noun:"post"},{post:{id:e},...t?{action_info:{page_type:t}}:{}})}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DWhQjF7E.js",import.meta.url,"DWhQjF7E");SML.di("./DhQW5pQL.js",import.meta.url,"DhQW5pQL");
SML.dm("GGn-LX5b",["GlDbwxoG","s_Igk1Yn","DWhQjF7E","DhQW5pQL"],(async(a,r,e,t)=>{var o;!function(a){a.PRIMARY="primary",a.BRAND="brand"}(o||(o={}));const i={[o.PRIMARY]:"switch-input-primary",[o.BRAND]:"switch-input-brand"};var c;!function(a){a.ON="faceplate-switch-input:on",a.OFF="faceplate-switch-input:off"}(c||(c={}));let n=class extends e.C{constructor(){super(...arguments),this.appearance=o.PRIMARY}static get styles(){return[super.styles,r.i`.switch-input-primary{--checked-color-background-default:var(--color-switch-input-background-checked);--checked-color-background-hover:var(--color-switch-input-background-checked-hover)}.switch-input-brand{--checked-color-background-default:var(--color-brand-background);--checked-color-background-hover:var(--color-brand-background-hover)}.outer{background:var(--color-switch-input-background-default);border-radius:var(--radius-full);box-shadow:var(--elevation-switch-input-default-inset);height:var(--size-switch-input-h);vertical-align:middle;width:var(--size-switch-input-w);padding:var(--line-md);box-sizing:border-box;position:relative;display:flex;align-items:center;flex-shrink:0;transition:background-color .3s;contain:strict}.knob{--knob-size:calc(var(--size-switch-input-h) - (var(--line-md) * 2));--knob-size-active:calc((36 / 28) * var(--knob-size));--translate-checked:calc(
            var(--size-switch-input-w) - var(--knob-size) - (var(--line-md) * 2)
          );background:var(--color-global-white);border-radius:var(--radius-full);filter:drop-shadow(0 1px 4px rgba(0, 0, 0, .15));display:flex;align-items:center;justify-content:center;height:var(--knob-size);position:absolute;transform:translateX(0);transition-duration:.3s;transition-property:transform,width;width:var(--knob-size)}.knob:dir(rtl){--translate-checked:calc(
            -1 * (var(--size-switch-input-w) - var(--knob-size) - (var(--line-md) * 2))
          )}:host(:active:not([aria-disabled=true])) .knob{width:var(--knob-size-active)}:host([checked]) .knob{transform:translateX(var(--translate-checked))}:host([checked]:active:not([aria-disabled=true])) .knob{transform:translateX(calc(var(--translate-checked) - (var(--knob-size-active) - var(--knob-size))))}:host([checked]:active:not([aria-disabled=true])) .knob:dir(rtl){transform:translateX(calc(var(--translate-checked) + (var(--knob-size-active) - var(--knob-size))))}label{margin-inline-start:var(--spacer-xs)}:host([checked]) .outer{background:var(--checked-color-background-default)}:host([faceplate-validity=invalid]) .outer{background:var(--color-danger-content)}:host(:focus-visible) .outer{outline:1px auto var(--color-global-focus)}:host(:hover) .outer{background:var(--color-switch-input-background-default-hover)}:host([checked]:hover) .outer{background:var(--checked-color-background-hover)}:host([aria-disabled=true]){opacity:1}:host([aria-disabled=true]) .outer{background-color:var(--color-switch-input-background-disabled);box-shadow:none}:host([checked][aria-disabled=true]) .outer{background-color:var(--color-switch-input-background-checked-disabled);box-shadow:none}:host([aria-disabled=true][checked]:active) .outer{background:var(--color-switch-input-background-checked-disabled);box-shadow:none}:host([aria-disabled=true]) .knob{background-color:var(--color-switch-input-background-handle-disabled);box-shadow:none}:host([aria-disabled=true]) label{opacity:.5}svg{opacity:0;color:var(--color-global-black);transition:opacity .3s}:host([checked]) svg{opacity:1}`]}render(){return r.x` <span class="${i[this.appearance||o.PRIMARY]} outer"> <span class="knob"> ${t.c({attributes:{"aria-hidden":"true"},size:r.I.ExtraSmall})} </span> </span> ${super.render()} `}toggle(){this.checked=!this.checked,this.dispatchEvent(a.c(this.checked?c.ON:c.OFF)),super.handleInteraction()}handleInteraction(){this.toggle()}};return a._([a.n({type:String})],n.prototype,"appearance",void 0),n=a._([a.e("faceplate-switch-input")],n),{get F(){return n},get S(){return o}}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("HYbNa5uQ",["s_Igk1Yn"],(async e=>{const{svg:t}=e.g();return{E:"scroll-to-comments-complete",a:e=>{let t=!1;const o=()=>{t||(t=!0,e(),window.removeEventListener("scroll",r),window.removeEventListener("scrollend",o),clearTimeout(s),clearTimeout(n))};let n;const r=()=>{clearTimeout(n),n=setTimeout(o,100)};"onscrollend"in window?window.addEventListener("scrollend",o,{once:!0}):window.addEventListener("scroll",r);const s=setTimeout(o,1e3)},e:e.m(t`<path d="M9.544 8.272L6.072 4.8h2.82a.9.9 0 000-1.8H3.9a.9.9 0 00-.9.9v4.992a.9.9 0 001.8 0v-2.82l3.472 3.472a.898.898 0 001.272 0 .898.898 0 000-1.272zm.912 3.456l3.472 3.472h-2.82a.9.9 0 000 1.8H16.1a.9.9 0 00.9-.9v-4.992a.9.9 0 00-1.8 0v2.82l-3.472-3.472a.898.898 0 00-1.272 0 .898.898 0 000 1.272z"></path>`,"0 0 20 20","expand-left"),s:async function(e){const t=document.querySelector("shreddit-comments-page-tools, comment-body-header"),o=document.querySelector("nav")?.offsetHeight??0,n=document.getElementById("pdp-seeker-mweb-return-to-results")?.offsetHeight??0,r=document.querySelector("shreddit-comment-tree");if(!t||!r)return;await r.updateComplete;const s=t.offsetTop;await requestAnimationFrame((()=>{window.scrollTo({top:s-(o+n),behavior:e})}))}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("I6Px4IX3",["GlDbwxoG","s_Igk1Yn","CC2wUKE8"],(async(e,a,t)=>{let p=class extends(t.W(a.s)){constructor(){super(...arguments),this.pages=0,this.for=void 0}get pageIndex(){return super.pageIndex}set pageIndex(e){super.pageIndex=e}get pageNames(){return super.pageNames}set pageNames(e){super.pageNames=e}static get styles(){return a.i`:host{display:block}.page{display:none}.active{display:block}`}render(){if(this.pages<1)return;const{pageNames:p}=this;return a.x` <div aria-roledescription="carousel"> ${t.d(this.pages).map((t=>a.x` <div role="tabpanel" class="${e.H({page:!0,active:t===this.pageIndex})}"> <slot name="${p?p[t-1]:`page-${t}`}"></slot> </div> `))} </div> `}pageIndexChangedCallback(e){super.pageIndexChangedCallback(e),this.requestUpdate("pageIndex",e)}};return e._([e.n({type:Number})],p.prototype,"pages",void 0),e._([e.n({type:Number,attribute:"pageindex"})],p.prototype,"pageIndex",null),e._([e.n({converter:e.I,attribute:"pagenames"})],p.prototype,"pageNames",null),e._([e.n({type:String})],p.prototype,"for",void 0),p=e._([e.e("faceplate-tabpanel")],p),{get F(){return p}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("JGPlyfIr",["GlDbwxoG","s_Igk1Yn"],(async(e,t)=>{const r=1e4,s=e=>{const t=performance.getEntriesByName(e,"mark");return t.length>0?t.at(-1):null};class o{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}let i=null,n=null;const m=()=>(n||(i=new o,n=new PerformanceObserver((e=>{i.resolve(e),i=new o})),n.observe({entryTypes:["mark"]})),i.promise),a=async(e,t=1e4)=>{const r=s(e);if(r)return r;const o=new Promise(((r,s)=>{setTimeout((()=>{s(new Error(`Timeout waiting for performance mark '${e}' after ${t}ms`))}),t)}));return Promise.race([(async()=>{for(;;){const t=await m();for(const r of t.getEntries())if(r.name===e&&"mark"===r.entryType)return r}})(),o])};const c=async({setTimestamp:t,options:s})=>{const o=s?.timeout??r,i=await a(e.b_,o),n=await a(e.b$,o),m=e.w()===e.ah.PostDetail,c=e.g(),l=document.querySelector("shreddit-composer, shreddit-simple-composer");if(m&&c&&l){const r=await a(e.c0,o);t("composer_complete_ms",r.startTime),t("comment_complete_ms",Math.max(n.startTime,i.startTime,r.startTime))}else t("comment_complete_ms",Math.max(i.startTime,n.startTime));return Promise.resolve()},l=async({setTimestamp:t,setAttribute:s,options:o})=>{const i=o?.timeout??r,n=await a(e.c2,i),m=await a(e.c3,i);return t("post_vote_complete_ms",m.startTime),t("post_content_complete_ms",n.startTime),t("post_complete_ms",Math.max(n.startTime,m.startTime)),s("post_content_media_type",n.detail?.mediaType??e.c1.UNKNOWN),Promise.resolve()},p={elements:[{selector:"shreddit-post",checker:l},{selector:'faceplate-partial[name^="TopComments_"], shreddit-comment-tree',checker:c,options:{onlyInViewport:!1}}],timestamps:e.c4,attributes:e.c5},u={elements:[{selector:"shreddit-post",checker:l},{selector:'faceplate-partial[name^="TopCommentsPermalink_"], shreddit-comment-tree',checker:c,options:{onlyInViewport:!1}}],timestamps:e.c4,attributes:e.c5},h={[e.ah.PostDetail]:p,[e.ah.SingleCommentThread]:u};let d=class extends t.s{constructor(){super(),this.name="",this.timestamps={},this.trackedAttributes={},this.elementConfigs=new Map}connectedCallback(){super.connectedCallback();const t=document.querySelector("shreddit-app");t?.isNavigationControllerRestore||e.c6()||t?.isBot||(this.name?(this.registerElements(),this.startTracking()):console.error("CUJ Tracker: Unable to determine config name"))}registerElements(){const e=h[this.name];e?e.elements.forEach((e=>{this.addElement(e.selector,e.checker,"options"in e?e.options:void 0)})):console.error(`CUJ Tracker: No configuration found for config name "${this.name}"`)}async startTracking(){const t=await this.getElementsToTrack();if(!t.length)return void console.error("CUJ Tracker: No elements to track");const r=t.map((e=>this.createReadinessPromise(e)));try{await Promise.all(r),this.onCUJReady()}catch(t){e.f(this,e.b({source:e.c8,action:e.c9,noun:e.ca.PDP},{status:e.c7.FAIL,failure_reason:t instanceof Error?t.message:String(t)})),console.error("Some elements failed to become ready:",t)}}addElement(e,t,s){const o={element:document.querySelector(e),checker:t,timeout:r,onlyInViewport:!0,...s};return this.elementConfigs.set(e,o),this}createReadinessPromise(e){const t=this.elementConfigs.get(e);if(!t)throw new Error(`Element ${e} not registered for CUJ reporting`);const r=new Promise(((r,s)=>{setTimeout((()=>{s(new Error(`Element ${e} readiness timeout after ${t.timeout}ms`))}),t.timeout+300)})),s=t.checker({setTimestamp:(e,t)=>{this.timestamps[e]=t},setAttribute:(e,t)=>{this.trackedAttributes[e]=t},options:{timeout:t.timeout}});return Promise.race([s,r])}convertHighPrecisionTimestampToInt(e){return Math.round(e)}getAdjustedTimestamps(e){const t=e?e.startTime:0;return Object.fromEntries(Object.entries(this.timestamps).filter((([,e])=>void 0!==e)).map((([e,r])=>[e,this.convertHighPrecisionTimestampToInt(r-t)])))}getTimeToComplete(e){return Math.max(...Object.values(e))}onCUJReady(){const t=s("InternalNavigationStart"),r=this.getAdjustedTimestamps(t),o=this.getTimeToComplete(r),i=!!t;e.f(this,e.b({source:e.c8,action:e.c9,noun:e.ca.PDP},{status:e.c7.SUCCESS,pdp_metrics:{time_to_complete_ms:o,web_pdp_metrics:{is_hybrid_nav:i,...r,...this.trackedAttributes}}}))}async getElementsToTrack(){return new Promise((e=>{requestAnimationFrame((()=>{const t=Array.from(this.elementConfigs.keys()).filter((e=>{const t=document.querySelector(e);if(!t)return!1;const r=this.elementConfigs.get(e);return!!r&&function(e,t={}){const{checkInViewport:r=!0,requireVisible:s=!1}=t,o=e.getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight,n=window.innerWidth||document.documentElement.clientWidth;let m=!0;if(r){const e=o.bottom>0&&o.right>0&&o.top<i&&o.left<n;m=m&&e}if(s){const t=window.getComputedStyle(e),r=o.width>0&&o.height>0&&"none"!==t.display&&"hidden"!==t.visibility&&"0"!==t.opacity;m=m&&r}return m}(t,{checkInViewport:r.onlyInViewport,requireVisible:r.requireVisible??!1})}));e(t)}))}))}};e._([e.n({type:String,attribute:"name"})],d.prototype,"name",void 0),d=e._([e.e("cuj-tracker")],d)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("LLQHLjSk",["GlDbwxoG","s_Igk1Yn"],(async(t,e)=>{let r=class extends e.s{constructor(){super(...arguments),this.source="nav"}static get styles(){return[t.t]}createRenderRoot(){return this}render(){return e.x`<slot></slot> <ac-track trigger="view" san="${this.source}|view|advertise"></ac-track>`}};t._([t.n({type:String,attribute:"source"})],r.prototype,"source",void 0),r=t._([t.e("advertise-button")],r)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./FaYkg4Io.js",import.meta.url,"FaYkg4Io");
SML.dm("MX9FaClF",["GlDbwxoG","s_Igk1Yn","CC2wUKE8","FaYkg4Io"],(async(e,t,i,o)=>{const s={Neutral:"neutral",Inverted:"inverted",Primary:"primary"};class n extends e.R{constructor(){super(...arguments),this.contentSlotRef=e.U(),this.defaultSlotRef=e.U(),this.bodyRef=e.U(),this.popperRef=e.U(),this.interactionController=new i._(this,{isInteractedWith:e=>e.open,hoverDelayStart:t=>e.bK(getComputedStyle(t).getPropertyValue("--show-delay")),hoverDelayEnd:t=>e.bK(getComputedStyle(t).getPropertyValue("--hide-delay"))}),this.appearance=s.Neutral,this.content="",this.placement=o.P.Top,this.disabled=!1,this.distance=4,this.open=!1,this.skidding=0,this.trigger="hover focus",this.hoist=!1,this.noAnimate=!1,this.eventUsedMap=new WeakMap,this.handleDocumentKeyDown=e=>{"Escape"===e.key&&(e.stopPropagation(),this.hide())},this.handleDocumentClick=e=>{if(!(e.target instanceof HTMLElement)||this.hidden)return;this.eventUsedMap.has(e)||i.$(this,e.target)||this.hide()}}disconnectedCallback(){document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("click",this.handleDocumentClick)}willUpdate(e){e.has("open")&&this.hasUpdated&&this.handleOpenChange(),e.has("disabled")&&this.handleDisabledChange(),(e.has("content")||e.has("distance")||e.has("hoist")||e.has("placement")||e.has("skidding"))&&this.handleOptionsChange()}firstUpdated(){this.bodyRef.value&&(this.bodyRef.value.hidden=!this.open),this.open&&(document.addEventListener("keydown",this.handleDocumentKeyDown),document.addEventListener("click",this.handleDocumentClick),this.popperRef.value&&(this.popperRef.value.active=!0,this.popperRef.value.reposition()))}startInteraction(e){this.eventUsedMap.set(e,!0),this.show()}finishInteraction(e){this.eventUsedMap.set(e,!0),this.hide()}async handleOpenChange(){if(!this.disabled&&this.contentSlotRef.value&&this.bodyRef.value&&this.popperRef.value)if(this.open){this.emitter.dispatch("show"),document.addEventListener("keydown",this.handleDocumentKeyDown),document.addEventListener("click",this.handleDocumentClick),await e.bL(this.bodyRef.value),this.bodyRef.value.hidden=!1,this.popperRef.value.active=!0;const{keyframes:t,options:i}=e.bM(this,"tooltip.show");await e.bN(this.popperRef.value.popup,t,i),this.popperRef.value.reposition(),this.emitter.dispatch("after-show")}else{this.emitter.dispatch("hide"),document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("click",this.handleDocumentClick),await e.bL(this.bodyRef.value);const{keyframes:t,options:i}=e.bM(this,"tooltip.hide");await e.bN(this.popperRef.value.popup,t,i),this.popperRef.value.active=!1,this.bodyRef.value.hidden=!0,this.emitter.dispatch("after-hide")}}async handleOptionsChange(){this.hasUpdated&&this.popperRef.value&&(await this.updateComplete,this.popperRef.value.reposition())}handleDisabledChange(){this.disabled&&this.open&&this.hide()}async show(){if(!this.open)return this.open=!0,e.bO(this,this.emitter.eventId("after-show"))}async hide(){if(this.open)return this.open=!1,e.bO(this,this.emitter.eventId("after-hide"))}render(){return t.x` <rpl-popper part="popper" exportparts="
          popup:popper--popup,
          arrow:popper--arrow
        " class="${e.H({tooltip:!0,"tooltip--open":this.open})}" placement="${this.placement}" distance="${this.distance}" skidding="${this.skidding}" strategy="${this.hoist?"fixed":"absolute"}" flip shift arrow safe-area @mouseenter="${this.interactionController.handleMouseEnter}" @mouseleave="${this.interactionController.handleMouseLeave}" @mousedown="${this.interactionController.handleMouseDown}" @mouseup="${this.interactionController.handleMouseUp}" @focusin="${this.interactionController.handleFocus}" @focusout="${this.interactionController.handleBlur}" ${e.V(this.popperRef)}> <slot slot="anchor" aria-describedby="tooltip" @click="${this.interactionController.handleClick}" ${e.V(this.defaultSlotRef)}></slot> <div part="body" id="tooltip" class="tooltip-body" role="tooltip" aria-live="${this.open?"polite":"off"}" ${e.V(this.bodyRef)}> <slot name="content" ${e.V(this.contentSlotRef)}>${this.content}</slot> <slot name="shortcut"></slot> </div> </rpl-popper> `}}return e._([e.n({type:String,reflect:!0})],n.prototype,"appearance",void 0),e._([e.n()],n.prototype,"content",void 0),e._([e.n()],n.prototype,"placement",void 0),e._([e.n({type:Boolean,reflect:!0})],n.prototype,"disabled",void 0),e._([e.n({type:Number})],n.prototype,"distance",void 0),e._([e.n({type:Boolean,reflect:!0})],n.prototype,"open",void 0),e._([e.n({type:Number})],n.prototype,"skidding",void 0),e._([e.n()],n.prototype,"trigger",void 0),e._([e.n({type:Boolean})],n.prototype,"hoist",void 0),e._([e.n({type:Boolean,attribute:"no-animate"})],n.prototype,"noAnimate",void 0),e.bJ("tooltip.show",{keyframes:[{visibility:"visible",opacity:0,scale:.8},{opacity:1,scale:1}],options:{duration:150,easing:"ease"}}),e.bJ("tooltip.hide",{keyframes:[{scale:1},{opacity:0,scale:.8}],options:{duration:150,easing:"ease"}}),{T:n,a:s}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./9SPCVmFT.js",import.meta.url,"9SPCVmFT");SML.di("./DBv0KuLp.js",import.meta.url,"DBv0KuLp");
SML.dm("NlvEu5RR",["GlDbwxoG","s_Igk1Yn","9SPCVmFT","DBv0KuLp"],(async(e,i,t)=>{const r=e=>{switch(e){case t.R.Spoiler:return `${"View spoiler"}`;case t.R.NsfwAndSpoiler:return `${"View NSFW content & spoilers"}`;default:return `${"View NSFW content"}`;}};let s=class extends i.s{constructor(){super(),this.blurred=!0,this.isNsfwAllowed=!0,this.blurRadius=40,this.mode=t.M.Slot,this.isCrosspost=!1,this.isRichtextContent=!1,this.hasMetadata=!1,this._windowEvents=new e.E(this,(()=>window)),this.handleNsfwEvent=e=>{if("xpromo/view/nsfw_blur"===e.SAN){this.isNsfwAllowed=!1;const e=this.querySelector('div[slot="revealed"]');e&&this.removeChild(e)}},this._windowEvents.define(e.bw,this.handleNsfwEvent)}static get styles(){return[e.t,i.i`.outer{width:100%;overflow:hidden;z-index:0;position:relative}.overlay{cursor:pointer;position:absolute;width:100%;height:100%;top:0;left:0;z-index:1;display:flex;justify-content:center;align-items:center}.inner.blurred{display:block;pointer-events:none;background:rgba(0,0,0,.8)}.legacy-button{background:rgba(0,0,0,.07);border:1px solid #fff;color:#fff;padding:10px 20px;position:absolute;text-transform:uppercase;cursor:pointer}`]}renderOverlay(s){const n=this.reason?e.Y({appearance:"media",size:e.a7.Small,shape:"pill",children:r(this.reason)}):i.x``;return this.reason===t.R.Spoiler&&this.blurred?i.x`${o({content:n})}`:this.isNsfwAllowed&&this.blurred&&s?o({content:n}):""}render(){const r=this.isRichtextContent&&this.blurred,s=this.reason===t.R.NSFW||this.reason===t.R.NsfwAndSpoiler;return i.x` <div class="${e.H({outer:!0,"xs:rounded-t-[16px]":!!this.reason&&!this.isCrosspost&&this.blurred,"xs:rounded-b-[16px]":!!this.reason&&!this.isCrosspost&&(r||!this.hasMetadata)&&this.blurred,"h-[88px]":r,"h-full":!r})}" @click="${this.handleClick}"> ${this.renderOverlay(s)} <span class="${e.H({inner:!0,blurred:this.blurRadius>0&&this.blurred})}" style="${i.o({filter:this.blurred&&this.blurRadius>0&&`blur(${this.blurRadius}px)`||"none"})}" aria-hidden="${Boolean(this.blurred)}" aria-live="polite"> ${this.mode===t.M.Slot&&this.blurred?i.x` <slot name="blurred"></slot> `:i.x` <slot name="revealed"></slot> `} </span> ${this.blurred?i.x`<div class="absolute top-0 left-0 w-full h-full bg-scrim"></div>`:""} </div> `}handleClick(){const e=this.reason===t.R.NSFW||this.reason===t.R.NsfwAndSpoiler;(this.reason===t.R.Spoiler&&this.blurred||this.blurred&&e)&&(this.isNsfwAllowed||this.reason===t.R.Spoiler)&&(this.blurred=!1)}};e._([e.N()],s.prototype,"blurred",void 0),e._([e.N()],s.prototype,"isNsfwAllowed",void 0),e._([e.n({type:Number,attribute:"blur-radius"})],s.prototype,"blurRadius",void 0),e._([e.n({type:String})],s.prototype,"reason",void 0),e._([e.n({type:String})],s.prototype,"mode",void 0),e._([e.n({type:Boolean,attribute:"is-crosspost"})],s.prototype,"isCrosspost",void 0),e._([e.n({type:Boolean,attribute:"is-richtext-content"})],s.prototype,"isRichtextContent",void 0),e._([e.n({type:Boolean,attribute:"has-metadata"})],s.prototype,"hasMetadata",void 0),s=e._([e.e("shreddit-blurred-container")],s);const o=({content:e})=>i.x`<div data-ignore-click-interception class="overlay">${e}</div>`;return{get S(){return s}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");
SML.dm("OimaI6pY",["GlDbwxoG"],(async e=>{const n={source:"post",action:"click",noun:"ad"},o="client_ad",t={[e.bX.IMPRESSION]:{source:o,action:"view",noun:"ad"},[e.bX.CLICK]:{source:o,action:"click",noun:"ad"},[e.bX.VIDEO_VIEWABLE_IMPRESSION]:{source:o,action:"view",noun:"video"},[e.bX.VIDEO_VIEWABLE_WATCHED_6_SECS]:{source:o,action:"view",noun:"video"},[e.bX.VIDEO_VIEWABLE_WATCHED_15_SECS]:{source:o,action:"view",noun:"video"},[e.bX.GROUP_M_VIEWABLE]:{source:o,action:"group_m_viewable",noun:"ad"},[e.bX.COMMENTS_VIEW]:{source:o,action:"view",noun:"comments"},[e.bX.UPVOTE]:{source:o,action:"upvote",noun:"ad"},[e.bX.DOWNVOTE]:{source:o,action:"downvote",noun:"ad"},[e.bX.COMMENT]:{source:o,action:"submit",noun:"comment"},[e.bX.COMMENT_UPVOTE]:{source:o,action:"upvote",noun:"comment"},[e.bX.COMMENT_DOWNVOTE]:{source:o,action:"downvote",noun:"comment"},[e.bX.VIDEO_FULLY_VIEWABLE_IMPRESSION]:{source:o,action:"fully_view",noun:"video"},[e.bX.VIDEO_PLAYED_WITH_SOUND]:{source:o,action:"watch_with_sound",noun:"video"},[e.bX.VIDEO_PLAYED_EXPANDED]:{source:o,action:"watch_expanded",noun:"video"},[e.bX.VIDEO_GROUP_M_VIEWABLE]:{source:o,action:"watch_group_m",noun:"video"},[e.bX.VIDEO_WATCHED_25]:{source:o,action:"watch_percentage",noun:"video"},[e.bX.VIDEO_WATCHED_50]:{source:o,action:"watch_percentage",noun:"video"},[e.bX.VIDEO_WATCHED_75]:{source:o,action:"watch_percentage",noun:"video"},[e.bX.VIDEO_WATCHED_95]:{source:o,action:"watch_percentage",noun:"video"},[e.bX.VIDEO_WATCHED_100]:{source:o,action:"watch_percentage",noun:"video"},[e.bX.VIDEO_STARTED]:{source:o,action:"watch_percentage",noun:"video"},[e.bX.VIDEO_WATCHED_3_SECS]:{source:o,action:"watch_seconds",noun:"video"},[e.bX.VIDEO_WATCHED_5_SECS]:{source:o,action:"watch_seconds",noun:"video"},[e.bX.VIDEO_WATCHED_10_SECS]:{source:o,action:"watch_seconds",noun:"video"},[e.bX.VENDOR_FULLY_IN_VIEW]:{source:o,action:"vendor_fully_in_view",noun:"ad"},[e.bX.VENDOR_FULLY_IN_VIEW_5_SECS]:{source:o,action:"vendor_fully_in_view",noun:"ad"},[e.bX.VENDOR_FULLY_IN_VIEW_15_SECS]:{source:o,action:"vendor_fully_in_view",noun:"ad"},[e.bX.VIEWABLE_IMPRESSION]:{source:o,action:"viewable",noun:"ad"},[e.bX.UNLOAD]:{source:o,action:"unload",noun:"ad"},[e.bX.GALLERY_ITEM_IMPRESSION]:{source:o,action:"view",noun:"gallery_item"},[e.bX.ENGAGED_CLICK]:{source:o,action:"engaged_click",noun:"ad"},[e.bX.PRODUCT_IMPRESSION]:{source:o,action:"view",noun:"product"},[e.bX.PRODUCT_CLICK]:{source:o,action:"click",noun:"product"},[e.bX.LEAD_GENERATION]:{source:o,action:"submit",noun:"lead"}},c=n=>n.placement===e.a8.FEED,i=n=>n.placement===e.a8.COMMENTS_PAGE||n.placement===e.a8.COMMENT_TREES,a=({post:n,placement:o})=>n&&i(n)&&n.isPdpCombined?e.a8.COMMENTS_PAGE:o||n?.placement,s=e=>{const n=e.closest("shreddit-ad-post")||e.closest("shreddit-comments-page-ad")||e.closest("ad-event-tracker")||e.closest("shreddit-sidebar-ad");if(n)return n;{const n=e.getRootNode(),o=n instanceof ShadowRoot?n.host:null;return"SHREDDIT-SIDEBAR-AD"===o?.tagName||"SHREDDIT-COMMENTS-PAGE-AD"===o?.tagName?o:null}};function r(n){n&&e.$.setItem(e.a0.AdEvents,JSON.stringify(n))}function d(n){n&&e.$.setItem(e.a0.AdUserTargeting,JSON.stringify(n))}var u=Object.freeze({__proto__:null,AdStorageController:class{constructor(e){this.host=e}getParentAdPost(){const e=this.host.closest("ad-event-tracker");return e||null}storeAdDataInStorage(){const e=this.getParentAdPost();e&&(r({impressionId:e.impressionId,adEvents:e.adEvents,clickRedirectUrl:e.outboundLinkUrl,encryptedTrackingPayload:e.encryptedTrackingPayload,additionalEventMetadata:e.additionalEventMetadata}),e.adUserTargeting&&d(e.adUserTargeting))}}});return{A:"ad-engaged-click",B:"brand-unsafe-post-view",H:"hide-btf-sidebar-ad",L:"lead-gen-submission",P:t,S:"show-btf-sidebar-ad",a:function({el:n,outboundUrl:o,clickLocation:t,galleryIndex:c}){const i=s(n),a=i?.placement||("placement"in n?n.placement:void 0),r=i?.id||n?.id||("postId"in n?n?.postId:""),d=i?.impressionId||("impressionId"in n?n?.impressionId:""),u=e.c("observe-ad-click",{postId:r,impressionId:d,outboundUrl:o,galleryIndex:c,clickLocation:t});n.dispatchEvent(u),e.$.isAvailable()&&(e.$.setItem(e.a0.LastClickedAdId,r),e.$.setItem(e.a0.ImpressionId,d),e.$.setItem(e.a0.AdPlacement,a||""))},b:d,c:a,d:i,e:{source:"post",action:"view",noun:"ad"},f:function(n){const o=e.$.getItem(e.a0.AdEvents);if(null===o)return null;let t;try{t=JSON.parse(o)}catch{return null}return t.impressionId!==n?null:(e.$.removeItem(e.a0.AdEvents),t)},g:s,h:function(){const n=e.$.getItem(e.a0.AdUserTargeting);if(null===n)return null;let o;try{o=JSON.parse(n)}catch{return null}return e.$.removeItem(e.a0.AdUserTargeting),o},i:c,get j(){return u},s:r,t:function({el:o,clickLocation:t,galleryIndex:i}){try{const r=s(o),d=r?.placement||("placement"in o?o?.placement:void 0),u=r?.postId||("postId"in o?o?.postId:""),_=r?.impressionId||("impressionId"in o?o?.impressionId:""),l=r?r.querySelector(`[click-location=${e.v.MEDIA}]`):o.querySelector(`[click-location=${e.v.MEDIA}]`);let E;l&&(E=l.getBoundingClientRect());const I=e.ci();e.f(o,(({postId:o,adMedia:t,impressionId:i,post:s,clickLocation:r=e.v.UNKNOWN,galleryIndex:d,page_request_id:u,placement:_})=>{const l={post:{id:o,subreddit_id:s?.subredditId,author_id:s?.authorId,promoted:!0},ad_click:{location:r},ad_metadata:{impression_id:i,placement:a({post:s,placement:_})},feed:e.ek(),action_info:{page_request_id:u}};return s&&c(s)&&(l.action_info||(l.action_info={}),l.action_info.position=s.feedIndex,l.screen||(l.screen={}),l.screen={},l.screen.view_type=e.el(s.viewType)),s?.galleryItems&&(l.gallery={position:d,num_items:s.galleryItems.length}),s?.countryCode&&(l.geo={country_code:s.countryCode}),t&&(l.media={height:Math.round(t?.height),width:Math.round(t?.width)}),e.b(n,l)})({postId:u,impressionId:_,post:r,adMedia:E,clickLocation:t,galleryIndex:i||0,page_request_id:I,placement:d}))}catch(e){const n="Sentry"in window?window.Sentry:void 0;n?.captureException&&(e.message&&(e.message=`post/click/ad exception: ${e.message}`),n.captureException(e))}}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./DK2EuOAl.js",import.meta.url,"DK2EuOAl");SML.di("./B4wbfaco.js",import.meta.url,"B4wbfaco");SML.di("./CDFmhs-S.js",import.meta.url,"CDFmhs-S");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./Do2tmTAb.js",import.meta.url,"Do2tmTAb");SML.di("./DzMpUNmB.js",import.meta.url,"DzMpUNmB");SML.di("./B9x9AfW9.js",import.meta.url,"B9x9AfW9");SML.di("./Ct5172UI.js",import.meta.url,"Ct5172UI");SML.di("./B5aCBAWI.js",import.meta.url,"B5aCBAWI");SML.di("./MX9FaClF.js",import.meta.url,"MX9FaClF");SML.di("./FaYkg4Io.js",import.meta.url,"FaYkg4Io");
SML.dm("PXgk0x6D",["GlDbwxoG","s_Igk1Yn","CC2wUKE8","Do2tmTAb","DzMpUNmB","B9x9AfW9","Ct5172UI","DK2EuOAl","B4wbfaco","CDFmhs-S","B5aCBAWI","MX9FaClF","FaYkg4Io"],(async(e,t,r,a,o,s,i)=>{const n=t.s;var d,l;!function(e){e.ICON="icon",e.TEXT="text",e.ICON_AND_TEXT="icon_and_text"}(d||(d={}));class p extends n{constructor(){super(...arguments),this.withoutTooltip=!1,this.dropdownHeaderText="",this.selectedItemDisplayType=d.TEXT,this.disabled=!1,this.isEntityFilterEnabled=!1,this.useStrongTextColor=!1,this.isDropdownOpen=!1,this.onDropdownClose=()=>{this.isDropdownOpen=!1,this.tooltip?.hide?.()},this.onDropdownOpen=()=>{this.isDropdownOpen=!0},this.onClickDropdownItem=e=>{this.onSelectDropdownItem(e)},this.onKeyUpDropdownItem=e=>{"Enter"===e.key&&(this.onSelectDropdownItem(e),this.dropdownMenu?.close())},this.renderDropdownMenu=(o,s,i)=>{const n=this.isEntityFilterEnabled?e.Y({appearance:"bordered",attributes:{"aria-expanded":this.isDropdownOpen?"true":"false","aria-label":this.buttonAriaLabel||this.getAriaLabel(s),id:this.triggerId,disabled:this.disabled},selected:this.isDropdownOpen,size:e.a7.Small,leadingIcon:a.f({size:t.I.Small})}):r.u({appearance:"plain",attributes:{"aria-expanded":this.isDropdownOpen?"true":"false","aria-label":this.buttonAriaLabel||this.getAriaLabel(s),className:this.disabled?"":this.useStrongTextColor?"text-neutral-content":"text-neutral-content-weak",id:this.triggerId,disabled:this.disabled},children:o,selected:this.isDropdownOpen,size:e.a7.Small}),d=t.x` <faceplate-tracker class="block" source="${this.telemetrySource}" action="click" noun="sorting"> ${n} </faceplate-tracker>`;return t.x`<faceplate-dropdown-menu class="nd:hidden" .onopen="${this.onDropdownOpen}" .onclose="${this.onDropdownClose}" ?disabled="${this.disabled}"> ${this.withoutTooltip?d:this.wrapWithTooltip(d)} <faceplate-menu slot="menu" class="overflow-y-auto max-h-[50vh]" hidden @keyup="${this.onKeyUpDropdownItem}" @click="${this.onClickDropdownItem}"> ${this.dropdownHeaderText?t.x`<div class="font-semibold m-md mb-xs">${this.dropdownHeaderText}</div>`:""} ${i} </faceplate-menu> </faceplate-dropdown-menu>`}}static get styles(){return[e.t]}connectedCallback(){super.connectedCallback(),this.mutationObserver=new MutationObserver((e=>{e.forEach((e=>{const t=e.target;"FACEPLATE-MENU"===t.nodeName&&t.hasAttribute("hidden")&&this.isDropdownOpen&&this.onDropdownClose()}))})),this.mutationObserver.observe(this.shadowRoot,{attributes:!0,attributeFilter:["hidden"],childList:!1,characterData:!1,subtree:!0})}disconnectedCallback(){super.disconnectedCallback(),this.mutationObserver?.disconnect()}fireOffSortEvents(t,r){var a,o;r&&(this.sortEvent&&this.dispatchEvent(e.c(this.sortEvent,{selected:r,event:t})),this.telemetrySource&&e.f(this,(a=this.telemetrySource,o=r.toLowerCase(),e.b({source:a,action:"click",noun:o}))))}wrapWithTooltip(e){return t.x` <rpl-tooltip class="nd:hidden block" appearance="inverted" trigger="hover focus-visible" aria-label="${this.dropdownHeaderText}"> ${e} <slot slot="content" name="tooltip-content"></slot> </rpl-tooltip> `}getAriaLabel(e){return e?`${this.dropdownHeaderText}: ${e}`:this.dropdownHeaderText;}}e._([e.Q("rpl-tooltip")],p.prototype,"tooltip",void 0),e._([e.Q("faceplate-dropdown-menu")],p.prototype,"dropdownMenu",void 0),e._([e.Q("faceplate-tracker button")],p.prototype,"menuButton",void 0),e._([e.n({type:Boolean,attribute:"without-tooltip"})],p.prototype,"withoutTooltip",void 0),e._([e.n({type:String,attribute:"header-text"})],p.prototype,"dropdownHeaderText",void 0),e._([e.n({type:String,attribute:"button-aria-label"})],p.prototype,"buttonAriaLabel",void 0),e._([e.n({type:String,attribute:"selected-item-display-type"})],p.prototype,"selectedItemDisplayType",void 0),e._([e.n({type:String,attribute:"sort-event"})],p.prototype,"sortEvent",void 0),e._([e.n({type:String,attribute:"telemetry-source"})],p.prototype,"telemetrySource",void 0),e._([e.n({type:String,attribute:"trigger-id"})],p.prototype,"triggerId",void 0),e._([e.n({type:Boolean})],p.prototype,"disabled",void 0),e._([e.n({type:Boolean,attribute:"entity-filter-enabled"})],p.prototype,"isEntityFilterEnabled",void 0),e._([e.n({type:Boolean,attribute:"use-strong-text-color"})],p.prototype,"useStrongTextColor",void 0),e._([e.N()],p.prototype,"isDropdownOpen",void 0),function(e){e.ICON="icon",e.TEXT="text",e.ICON_AND_TEXT="icon_and_text"}(l||(l={}));let u=class extends p{constructor(){super(...arguments),this.setCurrentlySelectedItem=e=>{if(!e)return;const{innerText:r}=e;if(this.currentlySelectedItemLabel=r,this.selectedItemDisplayType===l.TEXT)this.currentlySelectedItem=r;else{const a=(this.querySelector('[slot="selected-item-icon-override"]')??e).querySelector("svg"),o=a?.getAttribute("icon-name")?.includes("fill");if(!a||o)return;const s=t.x`${a}`;this.selectedItemDisplayType===l.ICON?this.currentlySelectedItem=s:this.currentlySelectedItem=t.x`<span class="flex"><span class="flex items-center mr-xs">${s}</span><span>${r}</span></span>`}},this.toggleSelectedItemUI=e=>{const t=this.querySelector("li[rpl-selected]"),r=t?.querySelector('[role="menuitem"]');t?.removeAttribute("rpl-selected"),r?.setAttribute("aria-selected","false");const a=e?.querySelector('[role="menuitem"]');if(e?.setAttribute("rpl-selected",""),a?.setAttribute("aria-selected","true"),a&&r){const e=r?.className;r.className=a.className,a.className=e}},this.silentlySelectItemByValue=e=>{const t=this.querySelector(`[value="${e}"]`);if(t){const e=t?.querySelector("li");this.setCurrentlySelectedItem(e),this.toggleSelectedItemUI(e)}},this.onSelectDropdownItem=e=>{const t=e.target,r=t?.closest("li");this.setCurrentlySelectedItem(r),this.toggleSelectedItemUI(r);const a=t?.closest("data")?.getAttribute("value")||void 0;this.fireOffSortEvents(e,a)}}connectedCallback(){super.connectedCallback(),requestAnimationFrame((()=>{const e=this.querySelector('[slot="selected-item"]');this.setCurrentlySelectedItem(e)}))}render(){return this.renderDropdownMenu(this.currentlySelectedItem,this.currentlySelectedItemLabel,t.x` <slot name="dropdown-items"></slot>`)}};e._([e.N()],u.prototype,"currentlySelectedItem",void 0),u=e._([e.e("shreddit-sort-dropdown")],u);const{svg:c}=t.g(),h=t.m(c`<path d="M15.22 8.6c-.6-3.51-2.68-6.21-4.76-7.47a.912.912 0 00-.93 0C7.59 2.3 5.37 4.89 4.76 8.61c-2.77 2.65-4.02 4.46-3.57 7.32.17 1.08 1.14 1.9 2.27 1.9h3.18c.61.72 1.53 1.17 2.51 1.17h1.71c.98 0 1.9-.44 2.51-1.17h3.18c1.12 0 2.1-.82 2.27-1.9.45-2.87-.8-4.67-3.59-7.33h-.01zM2.97 15.65c-.24-1.53.15-2.65 1.66-4.33.1 1.83.55 3.45 1.06 4.71H3.46c-.24 0-.45-.17-.49-.38zm6.18 1.55c-.57 0-1.09-.32-1.33-.81-.64-1.31-1.41-3.37-1.41-5.78 0-3.71 1.84-6.34 3.6-7.63 1.81 1.35 3.6 4.16 3.6 7.63 0 2.41-.77 4.47-1.41 5.78-.24.49-.77.81-1.33.81H9.15zm7.88-1.55c-.03.21-.25.38-.49.38h-2.23c.51-1.26.96-2.88 1.06-4.71 1.51 1.69 1.9 2.8 1.66 4.33z"></path><path d="M10 8.35c-.91 0-1.65.74-1.65 1.65 0 .91.74 1.65 1.65 1.65.91 0 1.65-.74 1.65-1.65 0-.91-.74-1.65-1.65-1.65z"></path>`,"0 0 20 20","best"),{svg:m}=t.g(),N=t.m(m`<path d="M17.1 11.03h-3.3V8.98h1.17a1.328 1.328 0 00.94-2.27l-5.27-5.28c-.34-.34-.94-.34-1.27 0L4.09 6.71c-.38.38-.49.95-.29 1.45.21.5.69.82 1.23.82H6.2v2.05H2.9a1.9 1.9 0 00-1.9 1.9v2.6c0 1.82 1.48 3.3 3.3 3.3h11.4c1.82 0 3.3-1.48 3.3-3.3v-2.6a1.9 1.9 0 00-1.9-1.9zM10 3.34l3.83 3.84H12v7.85c0 1.1-.9 2-2 2s-2-.9-2-2V7.18H6.17L10 3.34zM2.8 15.52v-2.6c0-.06.04-.1.1-.1h3.3v2.2c0 .74.22 1.42.58 2H4.3c-.83 0-1.5-.67-1.5-1.5zm14.4 0c0 .83-.67 1.5-1.5 1.5h-2.48c.36-.58.58-1.26.58-2v-2.2h3.3c.05 0 .1.04.1.1v2.6z"></path>`,"0 0 20 20","top"),{svg:g}=t.g(),T=t.m(g`<path d="M18.366 12.282a1.25 1.25 0 00-1.16-.775h-2.352V9.663c0-.637-.203-1.244-.546-1.747.04-.064.085-.126.114-.198a1.252 1.252 0 00-.271-1.368L8.498.697a.663.663 0 00-.938 0L1.907 6.35a1.25 1.25 0 00-.271 1.368c.194.471.65.775 1.16.775h2.352v1.844c0 .643.214 1.252.563 1.758-.042.065-.102.114-.132.188a1.252 1.252 0 00.27 1.368l5.654 5.653a.663.663 0 00.938 0l5.653-5.653c.36-.36.467-.897.27-1.368h.002zM4.11 6.693l3.919-3.919 3.919 3.92H9.11v3.756a1.083 1.083 0 01-2.163 0V6.693H4.11zm7.863 10.533l-3.92-3.919h2.838V9.55a1.083 1.083 0 012.163 0v3.757h2.838l-3.92 3.92z"></path>`,"0 0 20 20","controversial",!0),{svg:I}=t.g(),v=t.m(I`<path d="M14.7 3.8c.83 0 1.5.67 1.5 1.5v9.4c0 .83-.67 1.5-1.5 1.5H5.3c-.83 0-1.5-.67-1.5-1.5V5.3c0-.83.67-1.5 1.5-1.5h9.4zm0-1.8H5.3C3.48 2 2 3.48 2 5.3v9.4C2 16.52 3.48 18 5.3 18h9.4c1.82 0 3.3-1.48 3.3-3.3V5.3C18 3.48 16.52 2 14.7 2zm-1.3 3.1c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm-6.82 0c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm6.82 6.82c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm-6.82 0c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zM10 8.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z"></path>`,"0 0 20 20","dice"),{svg:R}=t.g(),S=t.m(R`<path d="M17.536 2.465a5.006 5.006 0 00-7.072 0 4.98 4.98 0 00-1.458 3.503 1.934 1.934 0 00-.437-.023 1.903 1.903 0 00-1.388.759l-5.457 7.319c-.925 1.24-.806 2.87.288 3.965a3.015 3.015 0 002.14.908c.631 0 1.268-.205 1.826-.621l7.317-5.457a1.9 1.9 0 00.761-1.386 1.892 1.892 0 00-.022-.44 4.982 4.982 0 003.502-1.458 5.006 5.006 0 000-7.07zm-5.316 8.91l-7.318 5.457c-.633.474-1.249.25-1.617-.117-.366-.366-.589-.983-.117-1.616l5.457-7.32.15-.01L9.867 8.86l-2.162 2.162 1.273 1.272 2.162-2.162 1.091 1.09-.01.152zm4.043-3.112c-1.209 1.209-3.316 1.209-4.525 0a3.204 3.204 0 010-4.525 3.18 3.18 0 012.263-.938c.855 0 1.658.333 2.263.938a3.204 3.204 0 010 4.525z"></path>`,"0 0 20 20","author"),{svg:E}=t.g(),f=t.m(E`<path d="M10 19c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9zm0-16.2c-3.97 0-7.2 3.23-7.2 7.2s3.23 7.2 7.2 7.2 7.2-3.23 7.2-7.2-3.23-7.2-7.2-7.2z"></path><path d="M10 14.5c-2.48 0-4.5-2.02-4.5-4.5S7.52 5.5 10 5.5s4.5 2.02 4.5 4.5-2.02 4.5-4.5 4.5zm0-7.2c-1.49 0-2.7 1.21-2.7 2.7 0 1.49 1.21 2.7 2.7 2.7 1.49 0 2.7-1.21 2.7-2.7 0-1.49-1.21-2.7-2.7-2.7z"></path>`,"0 0 20 20","live"),D=(t,r)=>{switch(t){case e.g2.Top:return r===e.g2.Top?"Top (Default)":"Top";case e.g2.New:return r===e.g2.New?"New (Default)":"New";case e.g2.Controversial:return r===e.g2.Controversial?"Controversial (Default)":"Controversial";case e.g2.Old:return r===e.g2.Old?"Old (Default)":"Old";case e.g2.Random:return r===e.g2.Random?"Random (Default)":"Random";case e.g2.Qa:return r===e.g2.Qa?"Q&A (Default)":"Q&A";case e.g2.Live:return r===e.g2.Live?"Live (Default)":"Live";default:return "Best";}},L=t=>{switch(t){case e.g2.Confidence:return h();case e.g2.Top:return N();case e.g2.New:return s.n();case e.g2.Controversial:return T();case e.g2.Old:return i.a();case e.g2.Random:return v();case e.g2.Qa:return S();case e.g2.Live:return f();default:return h()}},b=[e.g2.Blank,e.g2.Random,e.g2.Live],k=[e.g2.Confidence,e.g2.Top,e.g2.New,e.g2.Controversial,e.g2.Old,e.g2.Random,e.g2.Qa,e.g2.Live,e.g2.Blank];let O=class extends p{constructor(){super(...arguments),this.currentSort=e.g2.Confidence,this.suggestedSort=void 0,this.postId="",this.subredditId="",this.disableOptions=b.join(","),this.onSelectDropdownItem=(e,t)=>{t&&(this.currentSort=t,this.fireOffSortEvents(e,t))},this.setSuggestedSort=async t=>{const r=t?e.g2.Blank:this.currentSort,{data:a}=await e.B({operation:e.C.SetSuggestedSort,variables:{input:{sort:r,subredditId:this.subredditId,postId:`t3_${this.postId}`}}});if(a?.setSuggestedSort?.ok){if(this.suggestedSort=r,this.telemetrySource){const a=t?"clear_suggested_sort":"set_suggested_sort";e.f(this,e.b({source:this.telemetrySource,action:"click",noun:a},{action_info:{reason:r,page_type:e.ah.PostDetail}}))}const a=t?"Suggested sort has been cleared":"Suggested sort has been set";this.dispatchFaceplateAlertEvent(e.X.success,a)}else{const r=t?"There was an error clearing the suggested sort":"There was an error setting the suggested sort";this.dispatchFaceplateAlertEvent(e.X.error,r)}},this.renderSuggestedSortOptions=()=>this.isCurrentSuggestedSort?e.Y({appearance:"plain",attributes:{onclick:()=>this.setSuggestedSort(!0),className:"text-12 font-semi bold"},size:e.a7.Small,children:"Clear default sort"}):t.x` <rpl-tooltip appearance="inverted" class="nd:hidden">${e.Y({appearance:"plain",attributes:{onclick:()=>this.setSuggestedSort(),className:"text-12 font-semi bold"},size:e.a7.Small,children:"Set as Default"})}<span slot="content">${"Set as the default sort for this post for all visitors"}</span></rpl-tooltip>`,this.renderDropdownItems=()=>t.x`${(({html:e,listItemRenderer:t,selectedSort:r,suggestedCommentSort:a,disableOptions:o,onclick:s})=>Object.values(k).map((i=>o.includes(i)?e``:e` <data value="${i}"> ${t({label:D(i,a),selected:i===r,leadingIcon:L(i),attributes:{role:"menuitem",onclick:e=>s&&s(e,i)}})} </data> `)))({html:t.x,listItemRenderer:o.l,selectedSort:this.currentSort,suggestedCommentSort:this.suggestedSort,disableOptions:this.disableOptions.split(","),onclick:(e,t)=>this.onSelectDropdownItem(e,t)})}`}get isCurrentSuggestedSort(){return!(!this.suggestedSort||this.suggestedSort===e.g2.Blank)&&this.currentSort===this.suggestedSort}dispatchFaceplateAlertEvent(t,r){const a=e.c("faceplate-alert",{level:t,message:r});this.dispatchEvent(a)}render(){const r=D(this.currentSort,this.suggestedSort);return t.x`<div class="flex items-center justify-between"> ${this.renderDropdownMenu(r,r,this.renderDropdownItems())}${this.currentSort===e.g2.Confidence||this.currentSort===e.g2.Blank?"":this.renderSuggestedSortOptions()} </div>`}};return e._([e.n({type:String,attribute:"sort"})],O.prototype,"currentSort",void 0),e._([e.n({type:String,attribute:"suggested-sort"})],O.prototype,"suggestedSort",void 0),e._([e.n({type:String,attribute:"post-id"})],O.prototype,"postId",void 0),e._([e.n({type:String,attribute:"subreddit-id"})],O.prototype,"subredditId",void 0),e._([e.n({type:String,attribute:"disable-options"})],O.prototype,"disableOptions",void 0),O=e._([e.e("shreddit-sort-dropdown-with-suggested")],O),{get ShredditSortDropdown(){return u},get ShredditSortDropdownWithSuggested(){return O}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("QTT23FkH",["GlDbwxoG","s_Igk1Yn"],(async(e,t)=>{const o="wheel",n="touchmove",s="scroll-is-blocked";function l(e){e.preventDefault()}function d(e){e.stopPropagation()}class a extends e.b2{constructor(){super(...arguments),this.blockedSources=new Set([])}get shredditApp(){return document.querySelector("shreddit-app")}get isDebugEnabled(){return this.shredditApp?.hasAttribute("debug")}preventOverscrollOnBody(){document.body.classList.contains(s)||document.body.classList.add(s)}allowOverscrollOnBody(){document.body.classList.remove(s)}preventEventOnNode(e,t){t.addEventListener(e,l,{passive:!1})}allowEventOnNode(e,t){t.removeEventListener(e,l)}stopEventPropagationOnNode(e,t){t.addEventListener(e,d,{passive:!1})}allowEventPropagationOnNode(e,t){t.removeEventListener(e,d)}rafOrYOLO(e){requestAnimationFrame?requestAnimationFrame(e):e()}applyBlocking(){return new Promise((e=>{this.rafOrYOLO((()=>{const t=new Set,s=new Set;for(const e in a.CURRENT_SCROLL_BLOCKERS){const l=a.CURRENT_SCROLL_BLOCKERS[e];this.allowEventOnNode(o,l.targetNode),l.allowWheelEvents?this.allowEventPropagationOnNode(o,l.sourceNode):(this.preventEventOnNode(o,l.targetNode),this.stopEventPropagationOnNode(o,l.sourceNode),s.add(l.targetNode)),this.allowEventOnNode(n,l.targetNode),l.allowTouchEvents?this.allowEventPropagationOnNode(n,l.sourceNode):(this.preventEventOnNode(n,l.targetNode),this.stopEventPropagationOnNode(n,l.sourceNode),t.add(l.targetNode))}s.size>0?(this.preventOverscrollOnBody(),this.preventEventOnNode(o,document)):(this.allowOverscrollOnBody(),this.allowEventOnNode(o,document)),t.size>0?this.preventEventOnNode(n,document):this.allowEventOnNode(n,document),e()}))}))}async blockPageScrolling({allowTouchEvents:o,allowWheelEvents:n,source:s=this._host.tagName,sourceNode:l=this._host,targetNode:d=document}={}){a.CURRENT_SCROLL_BLOCKERS[s]||o&&n||(a.CURRENT_SCROLL_BLOCKERS[s]={allowTouchEvents:o,allowWheelEvents:n,sourceNode:l,targetNode:d},await this.applyBlocking(),this.blockedSources.add(s),this.isDebugEnabled&&this.shredditApp?.dispatchEvent(e.c("faceplate-alert",{name:"scroll-blocker-debug",level:e.X.debug,message:`Scrolling blocked for "${s}"`,content:t.x` <dl> <dt>Touch events allowed?</dt> <dd><code>${Boolean(o)}</code></dd> <dt>Wheel events allowed?</dt> <dd><code>${Boolean(n)}</code></dd> </dl> `})))}async unblockPageScrolling(t=this._host.tagName){a.CURRENT_SCROLL_BLOCKERS[t]&&(a.CURRENT_SCROLL_BLOCKERS[t].allowTouchEvents=!0,a.CURRENT_SCROLL_BLOCKERS[t].allowWheelEvents=!0,await this.applyBlocking(),delete a.CURRENT_SCROLL_BLOCKERS[t],this.blockedSources.delete(t),this.isDebugEnabled&&this.shredditApp?.dispatchEvent(e.c("faceplate-alert",{name:"scroll-blocker-debug",level:e.X.debug,message:`Scrolling unblocked for "${t}"`})))}hostDisconnected(){for(const e of this.blockedSources)this.unblockPageScrolling(e)}}return a.CURRENT_SCROLL_BLOCKERS={},{S:a}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("QkEG1nHt",["GlDbwxoG","s_Igk1Yn"],(async(t,i)=>{t.cW(i.i`#shreddit-media-lightbox .lightboxed-content{display:flex;align-items:center;justify-content:center;width:100%;height:100%}#shreddit-media-lightbox .non-lightboxed-content{display:none}#shreddit-media-lightbox .media-lightbox-img{max-height:none}#shreddit-media-lightbox::part(panel){max-width:100svw;max-height:100svh;width:100svw;height:100svh;border-radius:0}`);let e=class extends i.s{constructor(){super(...arguments),this._isConnected=!1,this._push=t.dr,this._lightboxUrl=void 0,this.pubsub=new t.m(this),this.templateRef=t.U(),this.contentRef=t.U(),this._hideCloseButtonOnIdle=!1,this.disableAnimations=!1,this.isIdle=!1,this.lightboxOpenHandler=({element:t,attributes:i={}})=>{const e=i.permalink??window.location.href;try{const s=e.startsWith("http")?e:`${window.location.origin}${e}`;this._lightboxUrl=new URL(`${s}#lightbox`),this._push(this._lightboxUrl.href,{onForwardNav:()=>this.showModal({element:t,attributes:i}),onBackNav:()=>this.dialog?.hide()})}catch(s){this.showModal({element:t,attributes:i}),window.Sentry?.captureException?.(`shreddit-media-lightbox: Error parsing permalink ${e}`,s)}},this.showModal=({element:i,attributes:e={}})=>{if(this.dialog?.open)return;const{hideCloseButtonOnIdle:s,onAfterClose:o}=e;this._hideCloseButtonOnIdle=s??!1,this._onAfterClose=o,this._originalParent=i,this._originalParentHeight=i.offsetHeight||i.parentElement?.offsetHeight,this.dialog?.showModal(),this.pubsub.publish(t.T.LightboxOpened)},this.onAfterShow=()=>{const t=document.createElement("div");t.style.height=`${this._originalParentHeight}px`,this.contentRef?.value?.replaceChildren(...(this._originalParent?.children || [])),this._originalParent?.appendChild(t),this._startIdleTimer(),this.isIdle=!1},this.lightboxCloseHandler=()=>{this.dialog?.open&&this.dialog?.hide()},this.onDialogHide=()=>{this.pubsub.publish(t.T.LightboxClosed),this.contentRef?.value?.children&&this._originalParent&&(this._originalParent.replaceChildren(...this.contentRef.value.children),this.contentRef.value.innerHTML=""),this._originalParent=void 0,this._hideCloseButtonOnIdle=!1,this._idleTimeout=void 0,this.isIdle=!1;const i=window.navigation?.currentEntry?.url!==this._lightboxUrl?.href;window.navigation?.canGoBack&&!i&&(this._lightboxUrl=void 0,window.navigation.back())},this.onAfterHide=()=>{this._onAfterClose&&(this._onAfterClose(),this._onAfterClose=void 0)},this._startIdleTimer=()=>{this._hideCloseButtonOnIdle&&(this._stopIdleTimer(),this._idleTimeout=window.setTimeout((()=>{this.isIdle=!0}),1500))}}static get styles(){return[t.t]}connectedCallback(){super.connectedCallback();Array.from(document.getElementsByTagName("shreddit-media-lightbox")).some((t=>t._isConnected))||(this._isConnected=!0,this.pubsub.subscribe(t.T.LightboxOpen,this.lightboxOpenHandler,!1),this.pubsub.subscribe(t.T.LightboxClose,this.lightboxCloseHandler,!1))}firstUpdated(){this.dialog&&this.disableAnimations&&function(i){const e={keyframes:[],options:{duration:0}};["dialog.show","dialog.hide","dialog.denyClose","dialog.overlay.show","dialog.overlay.hide"].forEach((s=>{t.fv(i,s,e)}))}(this.dialog)}disconnectedCallback(){super.disconnectedCallback(),this._isConnected&&(this.dialog?.open&&this.dialog?.hide(),this._isConnected=!1)}_stopIdleTimer(){window.clearTimeout(this._idleTimeout),this._idleTimeout=void 0,this.isIdle=!1}render(){if(this._isConnected){const e=i.x`<div data-testid="lightbox-template" class="relative h-full w-full" @mousemove="${this._startIdleTimer}" @click="${this._startIdleTimer}" @keydown="${this._startIdleTimer}" ${t.V(this.templateRef)}> <div data-testid="lightbox-template-content" class="h-full w-full max-h-dvh" ${t.V(this.contentRef)}></div> ${t.Y({size:t.a7.Large,appearance:"media",shape:"pill",attributes:{"data-testid":"close-button",className:"absolute top-sm right-sm z-10 duration-300 "+(this.isIdle?"opacity-0 invisible":"opacity-100"),"aria-label":"Close lightbox",onclick:()=>{this.dialog?.hide()}},children:i.c({size:i.I.Medium})})} </div>`;return i.x` <rpl-dialog dialog-id="${"shreddit-media-lightbox"}" @rpl-dialog:after-show="${this.onAfterShow}" @rpl-dialog:hide="${this.onDialogHide}" @rpl-dialog:after-hide="${this.onAfterHide}" .litTemplateChildren="${e}"> </rpl-dialog> `}return""}};t._([t.n({type:Boolean,attribute:"disable-animations"})],e.prototype,"disableAnimations",void 0),t._([t.N()],e.prototype,"isIdle",void 0),t._([t.Q("rpl-dialog")],e.prototype,"dialog",void 0),e=t._([t.e("shreddit-media-lightbox")],e);let s=class extends i.s{constructor(){super(...arguments),this.pubsub=new t.m(this),this.handleInteraction=i=>{t.i(i)&&this.openLightbox()},this.handleTrigger=({postId:t})=>{t===this.postId&&this.openLightbox()},this.openLightbox=()=>{this.pubsub.publish(t.T.LightboxOpen,{element:this,attributes:{permalink:this.permalink}})}}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(t.T.TriggerLightboxOpen,this.handleTrigger,!1)}render(){return i.x`<slot @click="${this.handleInteraction}" @keypress="${this.handleInteraction}"></slot>`}};s.styles=[i.i`:host{cursor:pointer}`,t.t],t._([t.n({type:String,attribute:"post-id"})],s.prototype,"postId",void 0),t._([t.n({type:String,attribute:"permalink"})],s.prototype,"permalink",void 0),s=t._([t.e("shreddit-media-lightbox-listener")],s)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("R9fABxJD",["GlDbwxoG","s_Igk1Yn"],(async(t,o)=>{let e=class extends o.s{constructor(){super(...arguments),this.isDesktop=!1,this.isLoggedIn=!1,this.isFollowed=!1,this.trackingSource="profile",this.isCompactVariant=!1,this.pubsub=new t.m(this),this.isDisabled=!1,this.onFollowStateChanged=({followed:t,userId:o})=>{this.redditorId===o&&(this.isFollowed=t)},this.toggleLoadingState=()=>{const t=this.querySelector(this.isFollowed?".unfollow-button":".follow-button");if(!t)return;const o=t.querySelector(".loading-icon"),e=t.querySelector(".button-leading-icon")?.parentElement;o?.classList.toggle("hidden"),e?.classList.toggle("hidden"),this.isDesktop&&!this.isCompactVariant||t.querySelector(".button-text")?.classList.toggle("hidden")}}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick),this.pubsub.subscribe(t.T.ProfileFollowStateChanged,this.onFollowStateChanged,!1)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick)}async onClick(){if(this.redditorId&&this.isLoggedIn){if(this.isDisabled)return;this.isDisabled=!0,this.toggleLoadingState();const o={input:{accountId:this.redditorId,state:this.isFollowed?t.aq.None:t.aq.Followed}};try{const e=await t.B({operation:t.C.UpdateProfileFollowState,variables:o});this.toggleLoadingState(),e.data.updateProfileFollowState?.ok&&!e.data.updateProfileFollowState?.errors&&this.pubsub.publish(t.T.ProfileFollowStateChanged,{followed:!this.isFollowed,userId:this.redditorId})}catch(t){window.Sentry?.captureError?.(t),this.toggleLoadingState()}this.isDisabled=!1}}render(){return o.x`<slot name="button-${this.isFollowed?"unfollow":"follow"}"></slot>`}};e.styles=[t.t],t._([t.n({type:Boolean,attribute:"is-desktop"})],e.prototype,"isDesktop",void 0),t._([t.n({type:Boolean,attribute:"is-logged-in"})],e.prototype,"isLoggedIn",void 0),t._([t.n({type:Boolean,attribute:"is-followed"})],e.prototype,"isFollowed",void 0),t._([t.n({type:String,attribute:"redditor-id"})],e.prototype,"redditorId",void 0),t._([t.n({type:String,attribute:"tracking-source"})],e.prototype,"trackingSource",void 0),t._([t.n({type:Boolean,attribute:"is-compact-variant"})],e.prototype,"isCompactVariant",void 0),e=t._([t.e("follow-button")],e)}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("S5oUweHp",["s_Igk1Yn"],(async a=>{const{svg:l}=a.g();return{c:a.m(l`<path d="M9.39 14.632a1.185 1.185 0 01-.598-1.044 1.213 1.213 0 01.598-1.051c.183-.109.384-.164.603-.164.224 0 .428.055.615.164a1.198 1.198 0 01.601 1.051c0 .223-.053.427-.16.611a1.157 1.157 0 01-.44.433 1.229 1.229 0 01-.616.157c-.219 0-.42-.052-.604-.157zm-.165-3.364l-.25-6.058h2.082l-.252 6.058h-1.58zM10.002 19c-.845 0-1.69-.322-2.334-.965l-5.702-5.702a3.304 3.304 0 010-4.666l5.701-5.702a3.303 3.303 0 014.668 0l5.701 5.702a3.304 3.304 0 010 4.666l-5.701 5.702A3.292 3.292 0 019.998 19H10zm0-16.2c-.384 0-.768.145-1.06.437L3.237 8.94a1.502 1.502 0 000 2.122l5.703 5.702a1.501 1.501 0 002.12 0l5.703-5.702a1.502 1.502 0 000-2.122l-5.702-5.702a1.496 1.496 0 00-1.06-.438H10z"></path>`,"0 0 20 20","caution")}}));
SML.dm("TC9gnkab",[],(async()=>{var t,T,S;return function(t){t.MODERATOR="moderator",t.COMMUNITY_STATUS="community_status"}(t||(t={})),function(t){t.VIEW="view",t.CLICK="click"}(T||(T={})),function(t){t.STATUS_EDIT="status_edit",t.STATUS_CANCEL="status_cancel",t.STATUS_CREATE="status_create",t.STATUS_DELETE="status_delete",t.STATUS_LINK="status_link",t.STATUS_DISPLAY="status_display",t.STATUS_SUB_LINK="subreddit_link"}(S||(S={})),{get A(){return T},get N(){return S},get S(){return t}}}));

SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./DfxFL9aq.js",import.meta.url,"DfxFL9aq");SML.di("./CU4mObWU.js",import.meta.url,"CU4mObWU");
SML.dm("U1hr4IL6",["GlDbwxoG","s_Igk1Yn","CC2wUKE8","DfxFL9aq","CU4mObWU"],(async(e,t,a,i)=>{var n=t.i`${e.Z}:host{display:contents}`;let l=class extends e.R{constructor(){super(...arguments),this.nonSyncedPropNames=["variant","litTemplateChildren","overlayBlur","dialogId","dialogClassName","blocking","disableCacheContents","noAnimate"],this.isTouchOnly=new a.cQ(this,"(pointer: coarse)"),this.isLargeWidth=new a.cQ(this,"(width >= 640px)"),this.dialogRef=e.U(),this.panelRef=e.U(),this.overlayRef=e.U(),this.open=!1,this.overlayBlur=!0,this.dialogId="",this.dialogClassName="",this.label="",this.blocking=!1,this.noAnimate=!1,this.disableCacheContents=!1,this.openState="normal",this.dataPersistent=!1,this.expandable=!1,this.redispatchableEventNames=[]}setElementRef(t){(t instanceof e.hO||t instanceof i.R)&&(this.elementRef&&this.elementRef.removeEventListener(`${this.tagName.toLowerCase()}:internal-update`,this.handleInternalSync),this.elementRef=t,this.elementRef.addEventListener(`${this.tagName.toLowerCase()}:internal-update`,this.handleInternalSync))}get rplBottomSheet(){return this.elementRef instanceof i.R?this.elementRef:void 0}get rplDialog(){return this.elementRef instanceof e.hO?this.elementRef:void 0}get portalContainer(){if(!this.elementRef)throw new Error("[RPLDialogSheet]: The .portalContainer is not available until after the component has rendered.");return this.elementRef.portalContainer}get portalShadowRoot(){if(!this.elementRef)throw new Error("[RPLDialogSheet]: The .portalShadowRoot is not available until after the component has rendered.");return this.elementRef.portalShadowRoot}set litTemplateChildren(e){this._litTemplateChildren=e,this.elementRef&&e&&(this.elementRef.litTemplateChildren=e)}get litTemplateChildren(){return this._litTemplateChildren}async expand(){return this.rplBottomSheet?.expand()}async collapse(){return this.rplBottomSheet?.collapse()}async showModal(){return this.elementRef?.showModal()}checkFocus(){return this.elementRef?.checkFocus()}async show(){return this.elementRef?.show()}async hide(){return this.elementRef?.hide()}get currentVariant(){if(this.forceVariant)return this.forceVariant;const{isTouchOnly:e,isLargeWidth:t}=this;return e.matches&&!t.matches?"bottom-sheet":"dialog"}handleInternalSync(e){const t=e;t.stopImmediatePropagation();for(const e of t.detail)!this.nonSyncedPropNames.includes(e.key)&&e.key in this&&e.newValue!==this[e.key]&&(this[e.key]=e.newValue)}renderDialog(){return t.x`<rpl-dialog .eventNamespaceOverride="${this.tagName.toLowerCase()}" .dialogRef="${this.dialogRef}" .panelRef="${this.panelRef}" .overlayRef="${this.overlayRef}" .litTemplateChildren="${this.litTemplateChildren}" .open="${this.open}" .overlayBlur="${this.overlayBlur}" .dialogId="${this.dialogId}" .dialogClassName="${this.dialogClassName}" .label="${this.label}" .blocking="${this.blocking}" .disableCacheContents="${this.disableCacheContents}" .noAnimate="${this.noAnimate}" .dataPersistent="${this.dataPersistent}" .redispatchableEventNames="${this.redispatchableEventNames}" @rpl-dialog-sheet:internal-sync="${this.handleInternalSync}" ${e.V(this.setElementRef)}> <slot></slot> </rpl-dialog>`}renderBottomSheet(){return t.x`<rpl-bottom-sheet .eventNamespaceOverride="${this.tagName.toLowerCase()}" .dialogRef="${this.dialogRef}" .panelRef="${this.panelRef}" .overlayRef="${this.overlayRef}" .litTemplateChildren="${this.litTemplateChildren}" .open="${this.open}" .overlayBlur="${this.overlayBlur}" .dialogId="${this.dialogId}" .dialogClassName="${this.dialogClassName}" .label="${this.label}" .blocking="${this.blocking}" .disableCacheContents="${this.disableCacheContents}" .noAnimate="${this.noAnimate}" .openState="${this.openState}" .dockable="${!1}" .expandable="${this.expandable}" .dataPersistent="${this.dataPersistent}" .redispatchableEventNames="${this.redispatchableEventNames}" @rpl-dialog-sheet:internal-sync="${this.handleInternalSync}" ${e.V(this.setElementRef)}> <slot></slot> </rpl-bottom-sheet>`}render(){return"dialog"===this.currentVariant?this.renderDialog():this.renderBottomSheet()}};l.styles=n,e._([e.n({type:String,reflect:!0,attribute:"force-variant"})],l.prototype,"forceVariant",void 0),e._([e.n({type:Boolean,reflect:!0})],l.prototype,"open",void 0),e._([e.n({type:Boolean,reflect:!0,attribute:"overlay-blur"})],l.prototype,"overlayBlur",void 0),e._([e.n({reflect:!0,attribute:"dialog-id"})],l.prototype,"dialogId",void 0),e._([e.n({reflect:!0,attribute:"dialog-classname"})],l.prototype,"dialogClassName",void 0),e._([e.n({reflect:!0})],l.prototype,"label",void 0),e._([e.n({type:Boolean})],l.prototype,"blocking",void 0),e._([e.n({type:Boolean,attribute:"no-animate"})],l.prototype,"noAnimate",void 0),e._([e.n({type:Boolean,reflect:!0,attribute:"disable-cache-contents"})],l.prototype,"disableCacheContents",void 0),e._([e.n({type:String,reflect:!0,attribute:"open-state"})],l.prototype,"openState",void 0),e._([e.n({type:Boolean,reflect:!0,attribute:"data-persistent"})],l.prototype,"dataPersistent",void 0),e._([e.n({type:Boolean,reflect:!0})],l.prototype,"expandable",void 0),e._([e.n({attribute:"redispatchable-event-names",type:Array})],l.prototype,"redispatchableEventNames",void 0),e._([e.N()],l.prototype,"litTemplateChildren",null),l=e._([e.e("rpl-dialog-sheet")],l)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DSgcmNT3.js",import.meta.url,"DSgcmNT3");SML.di("./C-d7BR1A.js",import.meta.url,"C-d7BR1A");SML.di("./FagDXDzk.js",import.meta.url,"FagDXDzk");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");SML.di("./CJ4Bucp-.js",import.meta.url,"CJ4Bucp-");SML.di("./fnKkpEwQ.js",import.meta.url,"fnKkpEwQ");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./DNASVThB.js",import.meta.url,"DNASVThB");SML.di("./Baruuhvw.js",import.meta.url,"Baruuhvw");SML.di("./B49dh6xU.js",import.meta.url,"B49dh6xU");
SML.dm("UW8poupv",["GlDbwxoG","s_Igk1Yn","DSgcmNT3","C-d7BR1A","FagDXDzk","D-MAMWlw","CJ4Bucp-","fnKkpEwQ","CC2wUKE8","DNASVThB","B49dh6xU","Baruuhvw"],(async(t,e,a,i,s,o,n,r,d,l,h)=>{let c=class extends e.s{constructor(){super(...arguments),this.buttonAppearance="secondary",this.buttonSize=t.a7.Small,this.showFullButtons=!1,this.screeenReaderContent="",this.thingId="",this.smartEscalationsTracking=!1,this.isLargerThanSmallWindow=!0,this._handleModActionClick=e=>{this.dataModAction===s.M.AddRemovalReason&&e.stopPropagation(),this.dataModAction&&(this.dispatchEvent(t.c(this.dataModAction)),e.target&&this.noun&&t.f(e.target,t.b({source:"moderator",action:"click",noun:this.noun})))},this.mediaWatcher=null,this.handleMediaChange=t=>{this.isLargerThanSmallWindow=t.matches},this.renderWithTooltip=()=>e.x`<faceplate-tooltip appearance="inverted" position="top"> ${this.renderButton()} <slot name="text"></slot> </faceplate-tooltip>`,this.renderButton=()=>{const a=d.aj()?r.c:t.Y,i=this.smartEscalationsTracking?e.x`<ac-track trigger="click" target="prev" san="moderator|click|remove" data-faceplate-tracking-context="${JSON.stringify({action_info:{source_name:"smart-escalations"},...(this.thingId&&l.c(this.thingId) && {post:{id:this.thingId}}),...(this.thingId&&l.d(this.thingId) && {comment:{id:this.thingId}})})}"></ac-track>`:"";return e.x`${a({appearance:this.buttonAppearance,attributes:{onclick:this._handleModActionClick,className:"relative",slot:"trigger","aria-label":this.screeenReaderContent},size:this.buttonSize,children:this.showFullButtons&&this.isLargerThanSmallWindow?e.x` <span> ${i} <slot name="text"></slot> </span> `:"",leadingIcon:this.showFullButtons&&this.isLargerThanSmallWindow?"":e.x` <span class="flex justify-center items-center"> <slot name="icon"></slot> </span> `})} ${i}`}}connectedCallback(){super.connectedCallback(),this.showFullButtons&&(this.mediaWatcher=window.matchMedia("(min-width: 768px)"),this.mediaWatcher.addEventListener("change",this.handleMediaChange))}disconnectedCallback(){super.disconnectedCallback(),this.mediaWatcher?.removeEventListener("change",this.handleMediaChange)}render(){return this.showFullButtons?this.renderButton():this.renderWithTooltip()}};c.styles=[t.t],t._([t.n({type:String,attribute:"data-mod-action"})],c.prototype,"dataModAction",void 0),t._([t.n({type:String,attribute:"event-noun"})],c.prototype,"noun",void 0),t._([t.n({type:String,attribute:"button-appearance"})],c.prototype,"buttonAppearance",void 0),t._([t.n({type:String,attribute:"button-size"})],c.prototype,"buttonSize",void 0),t._([t.n({type:Boolean,attribute:"show-full-buttons"})],c.prototype,"showFullButtons",void 0),t._([t.n({type:String,attribute:"screen-reader-content"})],c.prototype,"screeenReaderContent",void 0),t._([t.n({type:String,attribute:"thing-id"})],c.prototype,"thingId",void 0),t._([t.n({type:Boolean,attribute:"smart-escalations-tracking"})],c.prototype,"smartEscalationsTracking",void 0),t._([t.N()],c.prototype,"isLargerThanSmallWindow",void 0),c=t._([t.e("mod-action-button")],c);let m=class extends e.s{constructor(){super(...arguments),this.iconOnly=!1,this.pubsub=new t.m(this),this.handleCommentUpdate=({commentId:t,action:e,value:a})=>{if(t===this.thingId)switch(e){case i.C.addRemovalReason:this.hasRemovalReason=Boolean(a);break;case i.C.approve:case i.C.approveOptimistic:this.hasRemovalReason=!0,this.isRemoved=!1;break;case i.C.remove:case i.C.removeAsSpam:case i.C.removeOptimistic:case i.C.removeAsSpamOptimistic:case i.C.confirmRemovalOptimistic:this.hasRemovalReason=!1,this.isRemoved=!0}},this.handlePostUpdate=({postId:t,action:e,value:a})=>{if(t===this.thingId)switch(e){case o.a.addRemovalReason:this.hasRemovalReason=Boolean(a);break;case o.a.approve:case o.a.approveOptimistic:this.hasRemovalReason=!0,this.isRemoved=!1;break;case o.a.remove:case o.a.removeAsSpam:case o.a.removeOptimistic:case o.a.removeAsSpamOptimistic:case o.a.confirmRemovalOptimistic:this.isRemoved=!0,this.hasRemovalReason=!1}},this.updateModVerdict=t=>{const e=this.closest('[slot="mod-verdict"]');t&&this.isRemoved?e?.setAttribute("show-removal-reason-cta",""):e?.removeAttribute("show-removal-reason-cta")},this.shouldShowCta=()=>{const t=this.isRemoved?n.M.REMOVED:n.M.UNMODERATED;return n.s(t,!!this.hasRemovalReason,!!this.isContentSpamFilteredPost,this.isProfilePost)}}connectedCallback(){super.connectedCallback();const e=h.g(this);this.resizeObserver=new ResizeObserver((t=>{for(const e of t)e.contentRect.width<500?this.iconOnly=!0:this.iconOnly=!1})),e&&this.resizeObserver.observe(e),this.pubsub.subscribe(t.T.CommentUpdated,this.handleCommentUpdate),this.pubsub.subscribe(t.T.PostUpdated,this.handlePostUpdate),this.updateModVerdict(!this.hasRemovalReason)}disconnectedCallback(){super.disconnectedCallback();const t=h.g(this);t&&this.resizeObserver.unobserve(t),this.resizeObserver.disconnect()}updated(t){super.updated(t),t.has("hasRemovalReason")&&this.updateModVerdict(!this.hasRemovalReason)}render(){return this.hasRemovalReason||!this.shouldShowCta()?e.A:e.x` <mod-action-button screen-reader-content="${"Add removal reason"}" data-mod-action="${s.M.AddRemovalReason}" button-appearance="secondary" ?show-full-buttons="${!0}"> <span slot="icon" class="flex justify-center"> ${a.a({attributes:{"aria-hidden":"true"},size:e.I.Small})} </span> <span slot="text" class="flex"> ${this.iconOnly?a.a({attributes:{"aria-hidden":"true"},size:e.I.Small}):"Add removal reason"} </span> </mod-action-button> `;}};m.styles=[t.t],t._([t.n({type:String,attribute:"thing-id"})],m.prototype,"thingId",void 0),t._([t.n({type:Boolean,attribute:"has-removal-reason"})],m.prototype,"hasRemovalReason",void 0),t._([t.N()],m.prototype,"iconOnly",void 0),t._([t.n({type:Boolean,attribute:"is-removed"})],m.prototype,"isRemoved",void 0),t._([t.n({type:Boolean,attribute:"is-content-spam-filtered-post"})],m.prototype,"isContentSpamFilteredPost",void 0),t._([t.n({type:Boolean,attribute:"is-profile-post"})],m.prototype,"isProfilePost",void 0),m=t._([t.e("responsive-add-removal-reason-cta")],m)}));
SML.di("./FagDXDzk.js",import.meta.url,"FagDXDzk");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");
SML.dm("UWmwcM6M",["FagDXDzk","GlDbwxoG"],(async(a,o)=>{var r;!function(a){a.approve="approve",a.remove="remove",a.confirmRemoval="confirm_removal"}(r||(r={}));const t={[a.M.ApproveContent]:r.approve,[a.M.ConfirmRemoval]:r.confirmRemoval,[a.M.RemoveContent]:r.remove};let e=o.B;return{get A(){return r},M:class{async modBulkApprove(a){const{data:r}=await e({operation:o.C.ModBulkApprove,variables:{input:{ids:a}}});return r.modApproveBulk}async modBulkRemove(a,r=!1){const{data:t}=await e({operation:o.C.ModBulkRemove,variables:{input:{ids:a,isSpam:r}}});return t.modRemoveBulk}async modBulkRemoveAsSpam(a){const{data:r}=await e({operation:o.C.ModBulkRemove,variables:{input:{ids:a,isSpam:!0}}});return r.modRemoveBulk}async modBulkIgnore(a){const{data:r}=await e({operation:o.C.ModBulkIgnore,variables:{input:{ids:a}}});return r.modIgnoreBulk}async modBulkLock(a){const{data:r}=await e({operation:o.C.ModBulkLock,variables:{input:{ids:a}}});return r.modLockBulk}async modBulkMarkNSFW(a){const{data:r}=await e({operation:o.C.ModBulkMarkNSFW,variables:{input:{ids:a}}});return r.modMarkNsfwBulk}async modBulkMarkSpoiler(a){const{data:r}=await e({operation:o.C.ModBulkMarkSpoiler,variables:{input:{ids:a}}});return r.modMarkSpoilerBulk}async modBulkUnignore(a){const{data:r}=await e({operation:o.C.ModBulkUnignore,variables:{input:{ids:a}}});return r.modUnignoreBulk}async modBulkUnlock(a){const{data:r}=await e({operation:o.C.ModBulkUnlock,variables:{input:{ids:a}}});return r.modUnlockBulk}async modBulkUnmarkNSFW(a){const{data:r}=await e({operation:o.C.ModBulkUnmarkNSFW,variables:{input:{ids:a}}});return r.modUnmarkNsfwBulk}async modBulkUnmarkSpoiler(a){const{data:r}=await e({operation:o.C.ModBulkUnmarkSpoiler,variables:{input:{ids:a}}});return r.modUnmarkSpoilerBulk}async modBulkUpdatePostFlair(a,r,t,n){const{data:i}=await e({operation:o.C.ModBulkUpdatePostFlair,variables:{input:{postIds:a,cssClassId:r,flairTemplateId:t,text:n}}});return i.modUpdatePostFlairBulk}},S:t}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./XfvXsee4.js",import.meta.url,"XfvXsee4");SML.di("./Codm-qGC.js",import.meta.url,"Codm-qGC");SML.di("./CZ7YNHqf.js",import.meta.url,"CZ7YNHqf");SML.di("./Du8UC0gt.js",import.meta.url,"Du8UC0gt");SML.di("./Co1JScDL.js",import.meta.url,"Co1JScDL");SML.di("./DdoeBlGT.js",import.meta.url,"DdoeBlGT");SML.di("./BUDNGNBQ.js",import.meta.url,"BUDNGNBQ");SML.di("./CuKkkr9D.js",import.meta.url,"CuKkkr9D");SML.di("./HYbNa5uQ.js",import.meta.url,"HYbNa5uQ");SML.di("./DwHTSY-I.js",import.meta.url,"DwHTSY-I");SML.di("./DBgqsMtO.js",import.meta.url,"DBgqsMtO");SML.di("./DMa5Y6a9.js",import.meta.url,"DMa5Y6a9");SML.di("./BTgalZoS.js",import.meta.url,"BTgalZoS");SML.di("./C_OcidZ-.js",import.meta.url,"C_OcidZ-");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");SML.di("./Ccw0cO_g.js",import.meta.url,"Ccw0cO_g");SML.di("./CykCcTkJ.js",import.meta.url,"CykCcTkJ");SML.di("./DAqoOXDQ.js",import.meta.url,"DAqoOXDQ");SML.di("./CsGy0MYm.js",import.meta.url,"CsGy0MYm");SML.di("./BGOkDHmz.js",import.meta.url,"BGOkDHmz");SML.di("./DoY_u8JV.js",import.meta.url,"DoY_u8JV");
SML.dm("WQnubpt7",["GlDbwxoG","s_Igk1Yn","CC2wUKE8","XfvXsee4","Codm-qGC","Co1JScDL","DdoeBlGT","BUDNGNBQ","HYbNa5uQ","DwHTSY-I","CZ7YNHqf","Du8UC0gt","CuKkkr9D","DBgqsMtO","DMa5Y6a9","BTgalZoS","C_OcidZ-","DRM-oTYq","Ccw0cO_g","CykCcTkJ","DAqoOXDQ","CsGy0MYm","BGOkDHmz","DoY_u8JV"],(async(e,t,i,o,r,n,s,a,l,d)=>{function h(e,t){const{html:o}=e,r=function(e){const t={bg:"",border:""};if(e.isSctReplacementEnabled&&e.isCurrentPermalink)return{bg:"bg-neutral-background-highlighted-strong",border:"border-0 border-s border-solid border-neutral-background-gilded"};if(e.isPdpSeekerM1LO)return t;if(e.isHighlighted)return{bg:"bg-orangered-500 bg-opacity-[0.07]",border:"border-0 border-s border-solid border-global-orangered"};if(m(e))return{bg:"bg-yellow-200 bg-opacity-[0.07]",border:"border-0 border-s border-solid border-global-gold"};return t}(e),n=`Thread for ${e.author}'s comment`,s=e.ariaLabel||n;return o` <details role="article" ?open="${!e.collapsed}" @toggle="${e.handleToggle}" aria-label="${s}" tabindex="0"> <summary class="${i.n("grid grid-cols-[24px_minmax(0,1fr)]",!e.isPdpSeekerM1LO&&"xs:grid-cols-[32px_minmax(0,1fr)]",c(e)?"mt-[1px]":"")}" @click="${e.handleSummaryClick}" aria-label="${`Metadata for ${e.author}'s comment`}"> ${e.collapsed?e.uncollapseButton:o`<div class="relative"> ${c(e)?o` <div class="absolute top-[2px] start-[16px] end-0 h-full ${r.bg} pointer-events-none"></div>`:""} ${o`<slot name="commentAvatar"></slot>`} </div>`} <div class="flex relative ${c(e)?`${r.bg} rounded-tr-[0.5rem] mt-[2px] mb-[-2px]`:""}"> ${o`<slot name="commentMeta" @click="${e.handleCommentMetaSlotClick}" id="comment-meta"></slot>`} </div> </summary> <div class="${i.n("grid grid-cols-[24px_1fr] relative",!e.isPdpSeekerM1LO&&"xs:grid-cols-[32px_1fr]")}"> ${function(e){if(!e.hasMoreLink&&!e.hasRenderedComments)return"";const t=e.isPdpSeekerM1LO?"xs:w-lg":"xs:w-xl";return e.html` <div class="absolute top-0 start-0 bottom-0 w-lg ${t} flex justify-center items-center z-0 cursor-pointer group mb-sm" @mouseenter="${e.onThreadLineMouseEnter}" @mouseleave="${e.onThreadLineMouseLeave}" @click="${e.handleToggle}" aria-hidden="true"> <div data-testid="main-thread-line" class="w-[1px] h-full group-hover:bg-tone-2 ${e.isThreadLineHovered?"bg-tone-2":"bg-tone-4"}"></div> </div> `}(e)} <div class="contents"> <div class="${c(e)?"relative pointer-events-none":""}"> ${c(e)?o`<div class="absolute h-full w-[11.5px] xs:w-[15.5px] end-0 ${r.bg} ${r.border}"></div>`:""} </div> <div class="min-w-0 ${c(e)?r.bg:""}"> ${o`<slot @click="${e.handleContentSlotClick}"></slot>`} ${o`<slot name="comment-edit"></slot>`} ${function(e){if(e.isCommentDeleted||e.isInEditMode)return"";return e.html` <div class="relative"> ${e.html`<slot name="comment"></slot>`} </div> `}(e)} </div> </div> <div class="contents"> ${function(e){return"at-fold"!==e.currentTreePosition&&e.hasRenderedComments}(e)?e.collapseButton:o`<div></div>`} <div class="min-w-0 ${c(e)?`rounded-ee-[0.5rem] relative pe-sm pb-2xs mb-[1px] ${r.bg}`:""}"> ${c(e)?o` <div class="absolute top-0 start-[-12.5px] w-[11.5px] xs:start-[-16.5px] xs:w-[15.5px] h-full pointer-events-none ${r.bg} ${r.border} ${e.isSctReplacementEnabled&&e.isCurrentPermalink?"rounded-bl-[0.5rem]":""}"></div> `:""} ${o`<slot name="actionRow"></slot>`} ${o`<slot name="awardsRow"></slot>`} </div> </div> <div class="contents"> <div></div> <div class="min-w-0">${o`<slot name="next-reply"></slot>`}</div> </div> <div id="comment-children" class="contents ${e.isThreadLineHovered?"[&>.threadline>*]:border-tone-2":"[&>.threadline>*]:border-tone-4"}"> ${function(e){const{html:t,currentTreePosition:i,hasMoreLink:o,hasRenderedComments:r}=e;if(!o&&!r)return t``;if("at-fold"!==i)return t``;return t` ${u(e,{isLastRenderedNode:!0,isComment:!1})} ${t`<slot name="more-comments-permalink"></slot>`} `}(e)} ${t} </div> </div> <ac-call trigger="init" delay="10000" target="closest(shreddit-comment)" method="maybeScheduleReloadPolling"></ac-call> </details> `;}function m(e){return e.awardCount>0}function c(e){return e.isSctReplacementEnabled?e.isCurrentPermalink:!e.isPdpSeekerM1LO&&(e.isHighlighted||m(e))}function u(e,{isLastRenderedNode:t,isComment:i}){const o="box-border h-md border-0 border-tone-4 border-solid border-b-[1px] "+(t?"cursor-pointer":""),r=`${o} w-[calc(50%+0.5px)] border-s-[1px] rounded-es-[12px]`,n=`${o} w-xs absolute end-[-8px]`;return e.html` <div class="threadline flex justify-end align-start relative${t?" bg-neutral-background":" pointer-events-none"}" aria-hidden="true"> <div @mouseenter="${t?e.onThreadLineMouseEnter:void 0}" @mouseleave="${t?e.onThreadLineMouseLeave:void 0}" @click="${t?e.handleToggle:void 0}" class="${r}" data-testid="branch-line"></div> ${i?"":e.html`<div @mouseenter="${t?e.onThreadLineMouseEnter:void 0}" @mouseleave="${t?e.onThreadLineMouseLeave:void 0}" @click="${t?e.handleToggle:void 0}" class="${n}"></div>`} </div> `}var p;!function(e){e.TEXT="text",e.IMAGE="image",e.GIPHY="giphy"}(p||(p={})),SML.di("./DcXkdIZe.js",import.meta.url,"DcXkdIZe"),SML.di("./9IMUCX2X.js",import.meta.url,"9IMUCX2X"),SML.di("./WOXr9GNv.js",import.meta.url,"WOXr9GNv");const g=["post_detail/click/collapse_comment","post_detail/click/expand_comment","post_detail/click/reply_comment","post_detail/click/upvote_comment","post_detail/click/downvote_comment","post_detail/click/comment_image","comment/click/load_more_comments","comment/consume/comment","comment/consume/collapsed_comment","comment/view/comment","comment/view/collapsed_comment","comment/click/report","comment/click/ignore_reports","comment/click/restore_reports"],T=["FACEPLATE-IMG",...e.bd,"IMG"],b='div[slot="comment"]',v="none",E="text-neutral-content-strong bg-neutral-background overflow-visible";let y=class extends t.s{get _rplHovercards(){return this.querySelectorAll('[slot="commentAvatar"] rpl-hovercard > div:not([slot="content"]), [slot="commentMeta"] rpl-hovercard > div:not([slot="content"])')}getProps(){return{ariaLabel:this.ariaLabel,author:this.author,awardCount:this.awardCount,collapsed:this.collapsed,currentTreePosition:this.currentTreePosition,collapseButton:this.renderCollapseButton(),handleCommentMetaSlotClick:this.handleCommentMetaSlotClick,handleContentSlotClick:this.handleContentSlotClick,handleSummaryClick:this.handleSummaryClick,handleToggle:this.handleToggle,hasMoreLink:this.hasMoreLink,hasRenderedComments:this.hasRenderedComments,html:t.x,isCommentDeleted:this.isCommentDeleted,isHighlighted:this.isHighlighted,isInEditMode:this.isInEditMode,isPdpSeekerM1LO:this.isPdpSeekerM1LO,isThreadLineHovered:this.isThreadLineHovered,onThreadLineMouseEnter:this.onThreadLineMouseEnter,onThreadLineMouseLeave:this.onThreadLineMouseLeave,thingId:this.thingId,uncollapseButton:this.renderUncollapseButton(),withHotkeys:this.withHotkeys,isSctReplacementEnabled:this.isSctReplacementEnabled,isCurrentPermalink:this.isCurrentPermalink}}static get styles(){return[e.t,e.J(":host {\n  display: block;\n}\n:host([is-chosen-mq-comment]) slot[name='comment']::slotted(*) {\n  background-color: var(--color-neutral-background-selected);\n  padding-block: 8px;\n  margin-bottom: 4px;\n}\ndetails {\n  position: relative;\n}\ndetails > summary {\n  list-style: none;\n  padding-bottom: 2px;\n}\ndetails > summary:focus {\n  outline: none;\n}\ndetails > summary::-webkit-details-marker {\n  display: none;\n}\n.summary-flex {\n  display: flex;\n  margin-right: 0;\n  flex-direction: row;\n  align-items: center;\n}\nsummary > *,\n.summary-flex > * {\n  white-space: nowrap;\n}\nsummary > *,\n.summary-flex > * {\n  white-space: nowrap;\n}\n.contents {\n  padding-left: 1.75rem;\n  line-height: 1.0625rem;\n}\n:host([updateAnimation~='light']) {\n  animation: realtimeFade 3s;\n  animation-timing-function: ease-out;\n}\n:host([updateAnimation~='dark']) {\n  animation: realtimeFadeNight 3s;\n  animation-timing-function: ease-out;\n}\n@keyframes realtimeFade {\n  from {\n    background-color: #fff2bd;\n    border: 1px solid #dbaf00;\n  }\n  to {\n    background-color: #f0f5f9;\n    border: 1px solid transparent;\n  }\n}\n@keyframes realtimeFadeNight {\n  from {\n    background-color: #665505;\n    border: 1px solid #382d03;\n  }\n  to {\n    background-color: #030303;\n    border: 1px solid #343536;\n  }\n}\n")]}constructor(){super(),this.thingId="",this.avatar="",this.author="",this.parentId="",this.postId="",this.score="",this.awardCount=0,this.isAuthorDeleted=!1,this.isCommentDeleted=!1,this.isInEditMode=!1,this.depth=0,this.permalink="",this.parentPermalink="",this.isUserOP=!1,this.isHighlighted=!1,this.reloadUrl="",this.isCurrentPermalink=!1,this.contentType=p.TEXT,this.isTranslatable=!1,this.isTranslationFetched=!1,this.isCommentTranslated=!1,this.previousActionsFeature=!1,this.isSctReplacementEnabled=!1,this.collapsed=!1,this.isChosenMqComment=!1,this.updateAnimation=void 0,this.ariaLabel=null,this.isPdpSeekerM1=!1,this.isPdpSeekerM1LO=!1,this.withHotkeys=!1,this.recordTTCI=!1,this.replyPermalink="",this.updateState=void 0,this.observer=null,this.targetElement=null,this.consumeTimeoutId=void 0,this._outboundLinkTrackingController=new s.O(this,(()=>({pageType:e.w(),postId:this.postId,commentId:this.thingId}))),this.pubsub=new e.m(this),this._events=new e.E(this),this._awardController=new n.A(this,{getThingId:()=>this.thingId,onAward:()=>this.awardCount++}),this.currentTreePosition=null,this.handleHovercardTriggerClick=e=>{e.metaKey||e.preventDefault()},this.onHotkeysFocus=e=>{this.shadowRoot?.querySelector("details")?.focus(e)},this.handleObserverIntersection=t=>{t.forEach((t=>{if(t.isIntersecting){if(this.isTranslatable&&this.isTranslationV2Enabled){const t=document.querySelector(`shreddit-post[id*="${this.postId}"]`);d.o.comment(this,{id:this.thingId,parent_id:this.parentId,post_id:this.postId,score:parseInt(this.score,10)||void 0,type:"comment",created_timestamp:e.cs(this.created),content_type:this.contentType,translation_state:this.isCommentTranslated,translation_language:t?.translationLanguage})}const t={comment_id:this.thingId,comment_parent_id:this.parentId,comment_depth:this.depth};this.entityFilterId&&(t.entity_filter_id=this.entityFilterId),this.dispatchEvent(e.c("comments-viewed-event",{detail:t})),this.consumeTimeoutId=setTimeout((()=>{this.dispatchEvent(e.c("comments-consumed-event",{detail:t}))}),i.al)}else clearTimeout(this.consumeTimeoutId)}))},this.handleCommentEvents=t=>{if(!(e=>g.includes(e.SAN))(t))return;const i=t.detail;i.comment?.id||(i.comment={...i.comment,id:this.thingId,parent_id:this.parentId,post_id:this.postId,score:parseInt(this.score,10)||void 0,type:"comment",created_timestamp:e.cs(this.created),content_type:this.contentType===p.TEXT?void 0:this.contentType},"comment/click/report"===e.aY(i)&&(i.thingId=this.thingId,i.permalink=this.permalink))},this.handleSummaryClick=e=>{e.fromCommentMeta&&"A"!==e.target.tagName&&!e.target.closest("a")&&e.preventDefault()},this.handleCommentMetaSlotClick=e=>{e.fromCommentMeta="commentMeta"!==e.target.slot},this.handleMoreButtonClick=t=>{this.pubsub.publish(e.T.TriggerCommentBlockingAuth,{source:a.C.Button}),e.f(this,i.b9());const o=t.currentTarget;o?.addEventListener("faceplate-response",(()=>{const e=new MutationObserver((t=>{t.some((e=>Array.from(e.removedNodes).some((e=>e===o))))&&(this.updateChildren(),e.disconnect())}));e.observe(this,{childList:!0})}))},this.handleContentSlotClick=t=>{if(t.target&&this.contentType!==p.TEXT){const o=t.target.tagName;T.includes(o)&&e.f(this,i.ba())}},this.handleReload=e=>{e.stopPropagation(),this.reload()},this.handleCommentCreated=({parentThingId:t,body:i})=>{if(t!==this.thingId)return;if(!i)return;const o=e.b5(i).find((e=>"shreddit-comment"===e.tagName.toLowerCase()));o&&(o.setAttribute("slot","children"),o.setAttribute("depth",(this.depth+1).toString()),o.removeAttribute("class"),this.append(o),this.updateChildren())},this.convertCommentToDeleted=({commentId:e})=>{this.thingId===e&&(this.hideCommentActionRow(),this.hideOpIcon(),this.replaceCommentAuthorWithDeletedText(),this.hideCommentContent())},this.hideOpIcon=()=>{const e=this.querySelector('div[slot="commentMeta"] > span > .comment-op-icon-js');e&&(e.style.display=v)},this.hideCommentActionRow=()=>{const e=this.querySelector("shreddit-comment-action-row");e&&(e.style.display=v)},this.replaceCommentAuthorWithDeletedText=()=>{const e=this.querySelector('div[slot="commentMeta"] .author-name-meta');e&&e.replaceWith(this.getDeletedAuthorHTML())},this.hideCommentContent=()=>{const e=this.querySelector(b);e&&(e.style.display=v)},this.hasRenderedComments=!1,this.hasMoreLink=!1,this._children=null,this.unsubscribeFaceplateRequestListeners=[],this.isThreadLineHovered=!1,this.onThreadLineMouseEnter=()=>{this.isThreadLineHovered=!0,this.requestUpdate()},this.onThreadLineMouseLeave=()=>{this.isThreadLineHovered=!1,this.requestUpdate()},this.addEventListener("faceplate-track",this.handleCommentEvents),this.addEventListener("reload-shreddit-comment",this.handleReload),this._events.define("click",(e=>{const t=e.composedPath().find((e=>e.hasAttribute?.("data-more-comments-partial-id")));t&&t.querySelectorAll("icon-load").forEach((e=>e.classList.add("animate-spin")))}))}get hasAwardedTreatment(){return this.awardCount>0}get isCommentHighlighted(){return this.isSctReplacementEnabled?this.isCurrentPermalink:this.isHighlighted||this.hasAwardedTreatment}getReplyPermalink(){const e=new URL(location.origin+this.permalink);return e.searchParams.set("reply",this.thingId),e.searchParams.set(s.b.ForceLegacySCT,"1"),e.href.substring(e.origin.length)}setVisibility(e=Number.POSITIVE_INFINITY,t){const i=this.querySelector("shreddit-comment[is-chosen-mq-comment]")||this.closest("shreddit-comment[is-chosen-mq-comment]"),o=e-(this.depth+1);this.replyPermalink=0===o?this.getReplyPermalink():"";const r=!!i&&"number"==typeof t&&this.depth>=e&&this.depth<=t,n=this.currentTreePosition;this.currentTreePosition=i&&"number"==typeof t?!r&&this.depth<t?"hidden-above-fold":this.depth<e-1?"above-fold":this.depth===e-1?"at-fold":"below-fold":o>0?"above-fold":0===o?"at-fold":"below-fold",null!==n&&n===this.currentTreePosition||(this.style.display="below-fold"===this.currentTreePosition?"none":"",this.ariaHidden="below-fold"===this.currentTreePosition?"true":"false",this.updateChildren())}async setInitialVisibility(){customElements.get("shreddit-comment-tree")||(await window.customElements.whenDefined("shreddit-comment-tree"));const e=this.closest("shreddit-comment-tree");let t=e?.visibilityDetails;null===t&&e?.depthUpdated&&(t=await e.depthUpdated),this.setVisibility(t?.maxVisibleDepth,t?.minVisibleDepth)}connectedCallback(){super.connectedCallback(),this.initObserver(),this.setInitialVisibility(),this.isUserOP&&this.pubsub.subscribe(e.T.CommentDeleted,this.convertCommentToDeleted),this.pubsub.subscribe(e.T.CommentCreated,this.handleCommentCreated),this.addEventListener(i.bb,this.resetToReadMode),this.addEventListener(i.bc,this.resetToReadMode),this.addEventListener("comment-animation-trigger",this.handleTriggerAnimation),this._rplHovercards?.forEach((e=>{e.addEventListener("click",this.handleHovercardTriggerClick)})),this.recordTTCI&&e.dJ()&&requestAnimationFrame((()=>{const t=e.dK(performance.now());t&&e.f(this,t)}))}async scrollToFocusedComment(){this.updateComplete.then((async()=>{await requestAnimationFrame((()=>{l.a((()=>{window.dispatchEvent(e.c(l.E))}));const t=document.querySelector("nav")?.offsetHeight??0,i=document.getElementById("pdp-seeker-mweb-return-to-results")?.offsetHeight??0,o=document.querySelector("shreddit-comments-page-tools, comment-body-header"),r=this.querySelector('[slot="actionRow"]');if(!r||!o)return;const n=r.getBoundingClientRect().bottom,s=o.getBoundingClientRect().top;Math.abs(n-s)<window.innerHeight-(t+i)?l.s("instant"):r.scrollIntoView({behavior:"instant",block:"center"})}))}))}firstUpdated(){this.querySelector(b)?.addEventListener("click",this.handleContentSlotClick),this.isChosenMqComment&&this.updateComplete.then((()=>{setTimeout((()=>{const e=document.getElementById("mod-queue-pdp-panel");if(!e)return;const t=this.getBoundingClientRect().top-48-window.innerHeight/2,i=document.getElementsByTagName("shreddit-comment-tree")[0]||this;e?.scrollTop>i?.getBoundingClientRect().top||e.scrollTo({top:t,behavior:"auto"})}),200)})),this.isSctReplacementEnabled&&this.isCurrentPermalink&&this.updateComplete.then((()=>this.scrollToFocusedComment()))}disconnectedCallback(){super.disconnectedCallback(),this.disconnectObserver(),this.clearConsumeTimeout(),this.removeEventListener(i.bb,this.resetToReadMode),this.removeEventListener(i.bc,this.resetToReadMode),this.removeEventListener("comment-animation-trigger",this.handleTriggerAnimation),this._rplHovercards?.forEach((e=>{e.removeEventListener("click",this.handleHovercardTriggerClick)}))}get shredditComposer(){return this.querySelector("shreddit-composer")}get shareButton(){return this.querySelector("[slot=actionRow]")?.querySelector("shreddit-comment-share-button")}get overlowMenuItemProps(){return this.querySelector("shreddit-overflow-menu")?.getMenuItemProps()}get commentActionRow(){return this.querySelector("shreddit-comment-action-row")}handleTriggerAnimation(e){this.updateState=e.detail,this.triggerRealtimeUpdateAnimation()}triggerRealtimeUpdateAnimation(){const t=e.a3();this.updateAnimation=t?"dark":"light",this.updateState=void 0,setTimeout((()=>{this.updateAnimation=void 0}),3e3)}clearConsumeTimeout(){this.consumeTimeoutId&&(clearTimeout(this.consumeTimeoutId),this.consumeTimeoutId=void 0)}maybeScheduleReloadPolling(){this.reloadPollingIntervalMs&&this.reloadPollingDurationMs&&this.reloadPollingDurationMs>0&&this.reload()}async reload({richTextMedia:t,includeTranslation:o}={}){if(!this.reloadUrl||!this.parentNode)return!1;const r=new URL(location.origin+this.reloadUrl);t&&r.searchParams.set("richTextMedia",t),o&&r.searchParams.set("includeTranslation","true"),this.reloadPollingDurationMs&&this.reloadPollingIntervalMs&&r.searchParams.set(i.bd,(this.reloadPollingDurationMs-(this.reloadPollingIntervalMs+100)).toString()),this.slot&&r.searchParams.set("slot",this.slot);const n=this.parentNode,s=document.createElement("faceplate-partial");s.setAttribute("loading",e.q.Programmatic),s.setAttribute("src",r.href.substring(r.origin.length)),s.setAttribute("slot","children");const a=this.slot;s.slot=a,n.insertBefore(s,this),this.slot="";const l=this.querySelector('[slot="actionRow"]'),d="SHREDDIT-COMMENT-ACTION-ROW"===l?.tagName?l:l?.querySelector("shreddit-comment-action-row"),h=d?.isCommentComposerActive??!1;s.appendChild(this);const m=this.querySelectorAll(":scope > [slot^=children]");e.eZ(s),await s.load();const c=n.querySelector(`shreddit-comment[thingid=${this.thingId}]`);if(!0===h&&null!=l){const e=c?.querySelector('[slot="actionRow"]');e?.replaceWith(l)}if(m.length>0){for(const e of m)c?.appendChild(e);c&&(c.slot=a,c.updateChildren())}return!0}initObserver(){this.targetElement=this.querySelector('div[slot="comment"]'),this.targetElement&&(this.observer=new IntersectionObserver(this.handleObserverIntersection,{root:null,threshold:.5}),this.observer.observe(this.targetElement))}addTranslationToggledObserver(e){this.targetElement=this.querySelector(e),this.targetElement&&this.observer&&this.observer.observe(this.targetElement)}disconnectObserver(){this.observer&&(this.clearConsumeTimeout(),this.observer.disconnect())}handleToggle(e){!e.target.open!==this.collapsed&&this.handleCollapse()}handleCollapse(){this.collapsed=!this.collapsed,e.f(this,this.collapsed?i.be():i.bf())}resetToReadMode(){this.removeAttribute("edit-mode"),this.querySelector("shreddit-comment-action-row")?.classList.remove("hidden");let t=`${i.bg}?commentId=${this.thingId}`;this.isCommentTranslated&&(t=e.bU(t,"isTranslated","true"));const o=e.eX("faceplate-partial",{id:`comment-${this.thingId}-edit-partial`,src:t,loading:e.q.Programmatic}),r=e.eX("faceplate-shimmer",{class:"h-[100px] w-full hidden",shape:"pill"});o.appendChild(r),this.querySelector(`[slot="comment-${this.thingId}-edit"]`)?.replaceWith(o)}renderCollapseButton(){const n=i.n("flex justify-center self-start py-[2px] bg-neutral-background relative",this.isPdpSeekerM1?"mt-[2px]":"mt-[6px]");return t.x` <div class="${n}"> ${e.Y({appearance:"plain",attributes:{onclick:this.handleCollapse,className:i.n(E,this.isCommentHighlighted?"!w-md h-md relative z-1":"w-md h-md"),"aria-expanded":this.collapsed?"false":"true","aria-label":"Toggle Comment Thread","aria-controls":"comment-children"},leadingIcon:this.collapsed?o.a({size:t.I.Small}):r.s({size:t.I.Small}),size:e.a7.Small})} </div> `}renderUncollapseButton(){return t.x` <div class="flex justify-center"> ${e.Y({appearance:"plain",attributes:{onclick:this.handleCollapse,className:i.n(E,"w-lg xs:w-xl h-xl xs:h-[40px]")},leadingIcon:o.a({size:t.I.Small}),size:e.a7.Small})} </div> `}getDeletedAuthorHTML(){const e=document.createElement("div");e.classList.add("flex","flex-row","items-center","overflow-hidden");const t=document.createElement("faceplate-tracker");t.setAttribute("source","post_detail"),t.setAttribute("action","click"),t.setAttribute("noun","comment_deleted_author"),t.classList.add("contents");const o=document.createElement("span");return o.classList.add("truncate","font-bold","hover:no-underline"),o.classList.add("text-neutral-content-strong","text-12"),o.innerText=i.C(),t.appendChild(o),e.appendChild(t),e}renderCommentBody(){return this.isCommentDeleted||this.isInEditMode?"":t.x` <div class="relative"> <slot name="comment"></slot> </div> `}renderChildren(e,{forceUpdate:t}={}){if(this._children&&!t)return"above-fold"===this.currentTreePosition||"hidden-above-fold"===this.currentTreePosition?this._children:[];const i=Array.from(this.querySelectorAll(':scope > [slot^="children"]'));if(this.hasRenderedComments=i.some((e=>"shreddit-comment"===e.tagName.toLowerCase())),this.hasMoreLink=i.some((e=>"shreddit-comment"!==e.tagName.toLowerCase())),"above-fold"!==this.currentTreePosition&&"hidden-above-fold"!==this.currentTreePosition)return[];this.unsubscribeFaceplateRequestListeners.forEach((e=>e())),this.unsubscribeFaceplateRequestListeners=[];const o=[];this._children=[];for(let e=0;e<i.length;e++){const t=i[e],r="shreddit-comment"===t.tagName.toLowerCase(),n="faceplate-partial"===t.tagName.toLowerCase();o.push(r);const s=`children-${this.thingId}-${e}`;t.slot=s,n&&(t.addEventListener("faceplate-request",this.handleMoreButtonClick),this.unsubscribeFaceplateRequestListeners.push((()=>{t.removeEventListener("faceplate-request",this.handleMoreButtonClick)})))}return this._children=function(e,t){const{html:i,currentTreePosition:o}=e;if("above-fold"!==o&&"hidden-above-fold"!==o)return[];const r=[];for(let o=0;o<t.length;o++){const n=o===t.length-1,s=t[o],a=`children-${e.thingId}-${o}`;r.push(u(e,{isLastRenderedNode:n,isComment:s})),r.push(i`<slot name="${a}"></slot>`)}return r}(e,o),this._children}updateChildren(){this.renderChildren(this.getProps(),{forceUpdate:!0}),this.requestUpdate()}render(){const e=this.renderChildren(this.getProps());return"hidden-above-fold"===this.currentTreePosition?e:h(this.getProps(),e)}};return e._([e.n({type:String})],y.prototype,"thingId",void 0),e._([e.n({type:String})],y.prototype,"avatar",void 0),e._([e.n({type:String})],y.prototype,"author",void 0),e._([e.n({type:String})],y.prototype,"created",void 0),e._([e.n({type:String})],y.prototype,"parentId",void 0),e._([e.n({type:String})],y.prototype,"postId",void 0),e._([e.n({type:String})],y.prototype,"score",void 0),e._([e.n({type:Number,attribute:"award-count",reflect:!0})],y.prototype,"awardCount",void 0),e._([e.n({type:Boolean,attribute:"is-author-deleted"})],y.prototype,"isAuthorDeleted",void 0),e._([e.n({type:Boolean,attribute:"is-comment-deleted"})],y.prototype,"isCommentDeleted",void 0),e._([e.n({type:Boolean,attribute:"edit-mode"})],y.prototype,"isInEditMode",void 0),e._([e.n({type:Number})],y.prototype,"depth",void 0),e._([e.n({type:String})],y.prototype,"permalink",void 0),e._([e.n({type:String,attribute:"parent-permalink"})],y.prototype,"parentPermalink",void 0),e._([e.n({type:Boolean,attribute:"is-user-op"})],y.prototype,"isUserOP",void 0),e._([e.n({type:Boolean,attribute:"is-highlighted"})],y.prototype,"isHighlighted",void 0),e._([e.n({type:String,attribute:"reload-url"})],y.prototype,"reloadUrl",void 0),e._([e.n({type:Boolean,attribute:"is-current-permalink"})],y.prototype,"isCurrentPermalink",void 0),e._([e.n({type:String,attribute:"content-type"})],y.prototype,"contentType",void 0),e._([e.n({type:Boolean,attribute:"is-translatable"})],y.prototype,"isTranslatable",void 0),e._([e.n({type:Boolean,attribute:"is-translation-fetched"})],y.prototype,"isTranslationFetched",void 0),e._([e.n({type:Boolean,attribute:"is-comment-translated",reflect:!0})],y.prototype,"isCommentTranslated",void 0),e._([e.n({type:Boolean,attribute:"is-translation-v2-enabled"})],y.prototype,"isTranslationV2Enabled",void 0),e._([e.n({type:String,attribute:"moderation-verdict"})],y.prototype,"moderationVerdict",void 0),e._([e.n({type:Boolean,attribute:"previous-actions-feature"})],y.prototype,"previousActionsFeature",void 0),e._([e.n({type:Boolean,attribute:"sct-replacement-enabled"})],y.prototype,"isSctReplacementEnabled",void 0),e._([e.n({type:Number,attribute:"reload-polling-interval-ms"})],y.prototype,"reloadPollingIntervalMs",void 0),e._([e.n({type:Number,attribute:"reload-polling-duration-ms"})],y.prototype,"reloadPollingDurationMs",void 0),e._([e.n({type:Boolean,reflect:!0})],y.prototype,"collapsed",void 0),e._([e.n({type:Boolean,attribute:"is-chosen-mq-comment"})],y.prototype,"isChosenMqComment",void 0),e._([e.n({type:String,reflect:!0})],y.prototype,"updateAnimation",void 0),e._([e.n({type:String})],y.prototype,"ariaLabel",void 0),e._([e.n({type:String,attribute:"entity-filter-id",reflect:!0})],y.prototype,"entityFilterId",void 0),e._([e.n({type:Boolean,attribute:"is-pdp-seeker-m1"})],y.prototype,"isPdpSeekerM1",void 0),e._([e.n({type:Boolean,attribute:"is-pdp-seeker-m1-lo"})],y.prototype,"isPdpSeekerM1LO",void 0),e._([e.n({type:Boolean,attribute:"with-hotkeys"})],y.prototype,"withHotkeys",void 0),e._([e.n({type:Boolean,attribute:"record-ttci"})],y.prototype,"recordTTCI",void 0),e._([e.n({type:String,attribute:"reply-permalink",reflect:!0})],y.prototype,"replyPermalink",void 0),e._([e.N()],y.prototype,"updateState",void 0),y=e._([e.e("shreddit-comment")],y),{get C(){return p}}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("Wj1K4cGE",["s_Igk1Yn"],(async c=>{const{svg:s}=c.g();return{b:c.m(s`<path d="M10 1c-4.96 0-9 4.04-9 9s4.04 9 9 9 9-4.04 9-9-4.04-9-9-9zm7.2 9c0 .27-.02.54-.05.8h-2.97c-.1 2.33-.63 4.38-1.41 5.84-.75.31-1.56.5-2.42.54.87-.53 2.06-2.85 2.22-6.38H7.41c.16 3.54 1.35 5.85 2.22 6.38a7 7 0 01-2.42-.54c-.78-1.46-1.31-3.52-1.41-5.84H2.83c-.03-.26-.05-.53-.05-.8s.02-.54.05-.8H5.8c.1-2.33.63-4.38 1.41-5.84.75-.31 1.56-.5 2.42-.54-.87.53-2.06 2.85-2.22 6.38h5.16c-.16-3.54-1.35-5.85-2.22-6.38a7 7 0 012.42.54c.78 1.46 1.31 3.52 1.41 5.84h2.97c.03.26.05.53.05.8z"></path>`,"0 0 20 20","browser-fill")}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("XfvXsee4",["s_Igk1Yn"],(async a=>{const{svg:m}=a.g();return{a:a.m(m`<path d="M10 1a9 9 0 100 18 9 9 0 000-18zm0 16.2a7.2 7.2 0 117.2-7.2 7.208 7.208 0 01-7.2 7.2zm.9-8.1H14v1.8h-3.1V14H9.1v-3.1H6V9.1h3.1V6h1.8v3.1z"></path>`,"0 0 20 20","add-circle")}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("YRJ6wR80",["s_Igk1Yn"],(async a=>{const{svg:c}=a.g();return{a:a.m(c`<path d="M18.75 14.536l-2.414-3.581A6.947 6.947 0 0017 8c0-3.86-3.14-7-6.999-7-3.859 0-6.999 3.14-6.999 7 0 1.057.242 2.056.664 2.955l-2.414 3.581c-.289.428-.33.962-.109 1.429.22.467.658.776 1.173.826l1.575.151.758 1.494a1.435 1.435 0 001.297.795c.482 0 .926-.234 1.198-.639l2.437-3.612c.14.008.28.021.423.021.143 0 .282-.013.423-.021l2.437 3.612c.272.405.716.639 1.198.639.031 0 .062 0 .094-.003a1.435 1.435 0 001.203-.791l.758-1.495 1.576-.151c.514-.05.952-.358 1.172-.826a1.434 1.434 0 00-.109-1.429h-.006zM10 2.8A5.205 5.205 0 0115.2 8c0 2.867-2.333 5.2-5.2 5.2A5.205 5.205 0 014.801 8c0-2.867 2.332-5.2 5.2-5.2zM5.982 17.09l-.937-1.846-1.974-.189 1.66-2.462a7.02 7.02 0 002.936 1.999L5.982 17.09zm10.947-2.035l-1.974.189-.937 1.846-1.685-2.499a7.013 7.013 0 002.936-1.999l1.66 2.462v.001z"></path>`,"0 0 20 20","award")}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("ZU4mPORS",["s_Igk1Yn"],(async a=>{const{svg:t}=a.g();return{t:a.m(t`<path d="M9.45 13.95a1.033 1.033 0 01-.71-.29 1.014 1.014 0 010-1.42 1.033 1.033 0 011.409 0 1 1 0 01-.699 1.71zm.689-9.9A4.987 4.987 0 007.111 5a.853.853 0 00-.1 1.313l.065.061a.832.832 0 001.085.026 2.987 2.987 0 011.752-.658c.8 0 1.245.371 1.245.9 0 .649-.331.94-1.059 1.351a2.772 2.772 0 00-1.333 1.481c-.058.14-.089.288-.093.439 0 .252.099.494.276.673a.89.89 0 00.665.266.913.913 0 00.661-.265.925.925 0 00.227-.422c0-.006.046-.261.046-.267.095-.479.365-.733 1.141-1.134a2.452 2.452 0 001.562-2.29c-.001-1.405-1.1-2.424-3.112-2.424zM13.376 16h2A4.626 4.626 0 0020 11.379V5.621A4.626 4.626 0 0015.379 1H4.621A4.626 4.626 0 000 5.621v5.758A4.626 4.626 0 004.621 16H7.5v-1.25H4.621a3.375 3.375 0 01-3.371-3.371V5.621A3.375 3.375 0 014.621 2.25h10.758a3.375 3.375 0 013.371 3.371v5.758a3.376 3.376 0 01-3.371 3.371h-2.5l-3.763 3.607.866.9L13.376 16z"></path>`,"0 0 20 20","topic-help-outline")}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./Dhnopfuf.js",import.meta.url,"Dhnopfuf");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("az2PUDKS",["GlDbwxoG","Dhnopfuf","s_Igk1Yn"],(async(e,t,a)=>{const s=t=>{if(!e.$.isAvailable())return!0;return e.$.getItem(e.a0.DevvitGamesSectionFeaturedGameSlug)!==t};let i=class extends a.s{constructor(){super(...arguments),this.lastUpdated=0,this.inline=!1,this.isBadgeActive=!1,this.featuredGameSlug="",this.badgeAllowed=!1,this.appearance="badge",this._onGameBadgeWrapperClick=()=>{this.isBadgeActive=!1,this.dispatchEvent(e.c("games-section-badge-wrapper-click"))}}willUpdate(e){super.willUpdate(e),e.has("featuredGameSlug")&&(this.isBadgeActive=Boolean(this.featuredGameSlug)&&this.badgeAllowed&&s(this.featuredGameSlug))}render(){const e=this.inline,s="label"===this.appearance;return a.x` <div class="${e?"":"relative"}" @click="${this._onGameBadgeWrapperClick}" @keydown="${this._onGameBadgeWrapperClick}"> <slot></slot> ${this.isBadgeActive?s?a.x`<rpl-badge class="${e?"":"absolute -top-2xs end-xs"}" appearance="${t.R.Alert}"> ${"NEW"} </rpl-badge>`:a.x` <rpl-badge class="${e?"":"absolute top-xs end-xs"}" appearance="${t.R.Alert}"></rpl-badge>`:a.A} </div>`;}};return i.styles=[e.t],e._([e.n({attribute:"last-updated",type:Number})],i.prototype,"lastUpdated",void 0),e._([e.n({type:Boolean})],i.prototype,"inline",void 0),e._([e.n({type:Boolean})],i.prototype,"isBadgeActive",void 0),e._([e.n({attribute:"featured-game-slug",type:String})],i.prototype,"featuredGameSlug",void 0),e._([e.n({type:Boolean})],i.prototype,"badgeAllowed",void 0),e._([e.n({type:String})],i.prototype,"appearance",void 0),i=e._([e.e("games-section-badge-wrapper")],i),{s}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("bZe6Ww5J",["GlDbwxoG","s_Igk1Yn"],(async(t,s)=>{const e=s.s,o=new DOMParser;let i=class extends e{constructor(){super(...arguments),this.userId="",this.subredditId="",this.pubsub=new t.m(this),this.onUpdateFlairEvent=({html:t,subredditId:s,userId:e,isEnabled:i})=>{if(this.userId===e&&this.subredditId===s){const s=t&&i,e=s?t:'<span class="hidden"></span>',d=o.parseFromString(e,"text/html").body.firstChild;d&&(this.shadowRoot?.querySelector("slot")?.assignedElements({flatten:!0})[0].replaceWith(d),s?this.showHost():this.hideHost())}}}static get styles(){return s.i`:host{--display:flex;display:var(--display);overflow:hidden}`}onSlotChanged(t){const s=t.target?.assignedElements({flatten:!0});s?.some((t=>"SPAN"===t.nodeName&&t.classList.contains("hidden")))&&this.hideHost()}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(t.T.CommunityAuthorFlairUpdated,this.onUpdateFlairEvent)}hideHost(){(this.shadowRoot?.host).style.setProperty("--display","none")}showHost(){(this.shadowRoot?.host).style.setProperty("--display","flex")}render(){return s.x`<slot @slotchange="${this.onSlotChanged}"></slot>`}};t._([t.n()],i.prototype,"userId",void 0),t._([t.n()],i.prototype,"subredditId",void 0),i=t._([t.e("author-flair-event-handler")],i)}));
SML.di("./CmuSTQMe.js",import.meta.url,"CmuSTQMe");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./DJYjNS4q.js",import.meta.url,"DJYjNS4q");SML.di("./BYIf08Dv.js",import.meta.url,"BYIf08Dv");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CUf8pLla.js",import.meta.url,"CUf8pLla");SML.di("./Cp7L3hA_.js",import.meta.url,"Cp7L3hA_");SML.di("./BUDNGNBQ.js",import.meta.url,"BUDNGNBQ");SML.di("./I6Px4IX3.js",import.meta.url,"I6Px4IX3");SML.di("./CXs0ue6m.js",import.meta.url,"CXs0ue6m");SML.di("./C88aLMqE.js",import.meta.url,"C88aLMqE");SML.di("./CcP9EA1F.js",import.meta.url,"CcP9EA1F");SML.di("./DPWYpq70.js",import.meta.url,"DPWYpq70");SML.di("./fnKkpEwQ.js",import.meta.url,"fnKkpEwQ");SML.di("./QTT23FkH.js",import.meta.url,"QTT23FkH");SML.di("./DNASVThB.js",import.meta.url,"DNASVThB");SML.di("./B7hVC8R1.js",import.meta.url,"B7hVC8R1");SML.di("./D2eAe0e-.js",import.meta.url,"D2eAe0e-");SML.di("./C38sKiaF.js",import.meta.url,"C38sKiaF");SML.di("./BTMXBfyY.js",import.meta.url,"BTMXBfyY");
SML.dm("dFDmG5xI",["GlDbwxoG","DJYjNS4q","CC2wUKE8","s_Igk1Yn","BUDNGNBQ","CmuSTQMe","BYIf08Dv","CUf8pLla","Cp7L3hA_","I6Px4IX3","CXs0ue6m","C88aLMqE","CcP9EA1F","DPWYpq70","fnKkpEwQ","QTT23FkH","DNASVThB","B7hVC8R1","D2eAe0e-","C38sKiaF","BTMXBfyY"],(async(e,t,s,i,o)=>{const n=t=>e.b({source:"onboarding",action:"view",noun:"upsell_unit"},{action_info:{page_type:t}}),r=()=>e.b({source:"onboarding",action:"click",noun:"upsell_unit"},{action_info:{type:"not_now"}}),a=()=>async function(t,s){await e.eF(t,s)}(e.eH.Dismiss,e.eG.BypassableXpromo);const l=new Set(e.eI.map((t=>e.aY({source:s.ao,action:s.ap,noun:t})))),h=e.W(t.W(i.s));let d=class extends h{get shredditSlotterElm(){return this.shadowRoot?.querySelector("shreddit-slotter")}get bottomSheet(){return this.shredditSlotterElm?.shadowRoot?.querySelector("#inline-auth-upsell-bottom-sheet-modal")}get isInlineRendered(){return this.shredditSlotterElm?.getAttribute("slot-name")===e.eJ.InlineAuthLandingExperienceXpromo}constructor(){super(),this.isOverlay=!1,this.events=new e.E(this),this._authFlowModalOpen=!1,this._cachedYScrollPosition=0,this.mounted=!1,this.pubSubController=new e.m(this),this.cacheCurrentScrollPosition=()=>{this.isInlineRendered&&(this._cachedYScrollPosition=window.scrollY||window.pageYOffset)},this.debouncedCacheCurrentScrollPosition=e.a6(this.cacheCurrentScrollPosition,300),this._handleDismissButtonClick=()=>{e.f(this,r()),this.bottomSheet?.close(),this._unmount()},this.onShredditSlotterNameChanged=this.events.define("shreddit-slotter-slot-name-changed",(e=>{this.onSlotterRouteChange(e.detail.slotName)})),this._onAuthFlowModalOpen=this.events.define(e.eK.Open,(()=>{this._authFlowModalOpen=!0,this.setIsOverlayAttr()})),this.onFaceplateTrack=this.events.define("faceplate-track",(e=>{e.SAN&&l.has(e.SAN)&&(this._authFlowModalOpen=!1,this.setIsOverlayAttr(),this.switchToInlineXpromo())})),this.pubSubController.subscribe(e.T.TriggerCommentBlockingAuth,(e=>this.openBottomSheet(e)),!1)}connectedCallback(){super.connectedCallback(),this.isObserved||this.enableObserver({threshold:.8}),document.addEventListener("scroll",this.debouncedCacheCurrentScrollPosition,{passive:!0})}disconnectedCallback(){super.disconnectedCallback(),this.isObserved&&this.disableObserver(),document.removeEventListener("scroll",this.debouncedCacheCurrentScrollPosition)}bindDismissButtonListener(){const e=this.shredditSlotterElm?.shadowRoot?.querySelector("#inline-auth-upsell-bottom-sheet-modal-close");e?.addEventListener("click",this._handleDismissButtonClick)}updated(e){super.updated(e);!0===e.get("isOverlay")&&this.onReturnFromOverlay()}onReturnFromOverlay(){setTimeout((()=>{window.scrollTo(0,this._cachedYScrollPosition)}),0)}_unmount(){this.remove()}switchToInlineXpromo(){this.shredditSlotterElm?.setAttribute("slot-name",e.eJ.InlineAuthLandingExperienceXpromo)}openBottomSheet({source:e}){this.triggerType===e&&this.bottomSheet?.show()}observerIsIntersectingCallback(){if(this.disableObserver(),this.mounted)return;this.mounted=!0,a();const t=e.w()??e.ah.Unknown;e.f(this,n(t))}setIsOverlayAttr(){const t=this.shredditSlotterElm?.getAttribute("slot-name");this.isOverlay=this._authFlowModalOpen||t!==e.eJ.InlineAuthLandingExperienceXpromo}onSlotterRouteChange(t){t===e.eJ.InlineAuthLandingExperienceXpromo&&this.bindDismissButtonListener(),this.setIsOverlayAttr()}renderAuthFlowTemplate(){const t=this.querySelector('template[slot="auth-flow"');return t instanceof HTMLTemplateElement?e.K(t):""}render(){return i.x` <div class="${"relative block -mt-3xl z-10 bg-neutral-background shadow-[0px_-40px_21px_var(--color-neutral-background)]"}">${super.render()} ${this.renderAuthFlowTemplate()}</div> `}};d.styles=[i.i`:host([is-overlay]){display:block;position:relative;z-index:100}`,e.t],e._([e.n({type:Boolean,attribute:"is-overlay",reflect:!0})],d.prototype,"isOverlay",void 0),e._([e.n({type:String,attribute:"trigger-type"})],d.prototype,"triggerType",void 0),d=e._([e.e("inline-auth-landing-experience-xpromo-shell")],d);const c=new Set(e.eI.map((t=>e.aY({source:s.ao,action:s.ap,noun:t})))),u=e.W(i.s);let p=class extends u{constructor(){super(...arguments),this.isOverlay=!1,this.events=new e.E(this),this.isSlim=!1,this.delay=0,this.isVisible=!1,this.canBeShown=!1,this._authFlowModalOpen=!1,this.mounted=!1,this.pubSubController=new e.m(this),this._handleDismissButtonClick=()=>{e.f(this,r()),this._unmount()},this.onShredditSlotterNameChanged=this.events.define("shreddit-slotter-slot-name-changed",(e=>{this.onSlotterRouteChange(e.detail.slotName)})),this._onAuthFlowModalOpen=this.events.define(e.eK.Open,(()=>{this._authFlowModalOpen=!0,this.setIsOverlayAttr()})),this.onFaceplateTrack=this.events.define("faceplate-track",(e=>{e.SAN&&c.has(e.SAN)&&(this._authFlowModalOpen=!1,this.setIsOverlayAttr(),this.switchToInlineXpromo())})),this.hideOrShow=({source:e})=>{e===o.C.Scroll?this.isVisible=!0:e===o.C.Close&&(this.isVisible=!1)}}get shredditSlotterElm(){return this.shadowRoot?.querySelector("shreddit-slotter")}get wrapper(){return this.shadowRoot?.querySelector(".wrapper")}get isInlineRendered(){return this.shredditSlotterElm?.getAttribute("slot-name")===e.eJ.InlineAuthLandingExperienceXpromo}connectedCallback(){super.connectedCallback(),this.delay?setTimeout((()=>{this.canBeShown=!0}),this.delay):this.canBeShown=!0,this.pubSubController.subscribe(e.T.TriggerCommentBlockingAuth,this.hideOrShow,!1),this.isObserved||this.enableObserver({threshold:.8})}disconnectedCallback(){super.disconnectedCallback(),this.isObserved&&this.disableObserver()}bindButtonListener(){const e=this.shredditSlotterElm?.shadowRoot?.querySelector("#desktop-cbau-close-button");e?.addEventListener("click",this._handleDismissButtonClick)}updated(e){super.updated(e);if(!0===e.get("isOverlay")||e.has("isVisible")||e.has("canBeShown")){const e=this.shadowRoot.querySelector(".content");this.isVisible&&this.canBeShown?(e.classList.remove("fade-out","hidden"),e.classList.add("fade-in")):(e.classList.remove("fade-in"),e.classList.add("fade-out"))}}_unmount(){this.remove()}switchToInlineXpromo(){this.shredditSlotterElm?.setAttribute("slot-name",e.eJ.InlineAuthLandingExperienceXpromo)}observerIsIntersectingCallback(){if(this.disableObserver(),this.mounted)return;this.mounted=!0,a();const t=e.w()??e.ah.Unknown;e.f(this,n(t))}setIsOverlayAttr(){const t=this.shredditSlotterElm?.getAttribute("slot-name");this.isOverlay=this._authFlowModalOpen||t!==e.eJ.InlineAuthLandingExperienceXpromo}onSlotterRouteChange(t){t===e.eJ.InlineAuthLandingExperienceXpromo&&this.bindButtonListener(),this.setIsOverlayAttr()}renderAuthFlowTemplate(){const t=this.querySelector('template[slot="auth-flow"');return t instanceof HTMLTemplateElement?e.K(t):""}onAnimationEnd(){this.isVisible||this.shadowRoot?.querySelector(".content")?.classList.add("hidden")}render(){return i.x` <div class="content ${this.isOverlay?"":"wrapper sticky -ms-md -me-xs mt-[-65vh] bottom-0 z-[100] hidden"}" @animationend="${this.onAnimationEnd}"> <div class="${this.isOverlay?"":"container p-2xl pb-lg h-[auto] min-h-[65vh] justify-items-end relative flex items-end box-border"}"> <div class="w-100 h-100 absolute z-0 left-0 bottom-0 ${this.isOverlay?"hidden":"overlay"}"></div> <div class="relative z-10 max-w-100 bg-neutral-background-strong ${this.isSlim?"rounded-[12px] border-[1px] border-neutral-border border-solid":"rounded-4"} shadow-md mx-auto pointer-events-auto box-border"> ${this.renderAuthFlowTemplate()} </div> </div> </div>`}};p.styles=[i.i`:host{pointer-events:none}:host([is-overlay]){display:block;position:relative;z-index:100;pointer-events:all}@keyframes fadeInSlideUp{0%{display:none;opacity:0;transform:translateY(50px)}1%{display:block;opacity:0;transform:translateY(50px)}100%{display:block;opacity:1;transform:translateY(0)}}@keyframes fadeOutSlideDown{0%{display:block;opacity:1;transform:translateY(0)}99%{display:block;opacity:0;transform:translateY(50px)}100%{display:none;opacity:0;transform:translateY(50px)}}.fade-in{animation:fadeInSlideUp .8s ease forwards}.fade-out{animation:fadeOutSlideDown .8s ease forwards}.hidden{display:none}.wrapper{margin-top:-65vh}.container{min-height:65vh}.overlay{background:linear-gradient(0deg,var(--color-neutral-background) 10%,rgba(0,0,0,0) 100%)}`,e.t],e._([e.n({type:Boolean,attribute:"is-overlay",reflect:!0})],p.prototype,"isOverlay",void 0),e._([e.n({type:Boolean,attribute:"slim"})],p.prototype,"isSlim",void 0),e._([e.n({type:Number,attribute:"delay"})],p.prototype,"delay",void 0),e._([e.n({type:Boolean})],p.prototype,"isVisible",void 0),e._([e.n({type:Boolean})],p.prototype,"canBeShown",void 0),p=e._([e.e("auth-landing-experience-xpromo-cbau-wrapper")],p)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("dPq6CuSA",["GlDbwxoG","s_Igk1Yn"],(async(e,t)=>{let a=class extends t.s{constructor(){super(),this.label="",this.loadingCounter=0,this._events=new e.E(this),this._events.define("faceplate-request",(()=>this.loadingCounter++)),this._events.define("faceplate-response",(()=>this.loadingCounter--))}get busy(){return this.loadingCounter>0}render(){return t.x`<div aria-labelledby="${this.label}" aria-busy="${this.busy}" role="feed"> <slot></slot> </div>`}};return e._([e.n()],a.prototype,"label",void 0),e._([e.N()],a.prototype,"loadingCounter",void 0),a=e._([e.e("reddit-feed")],a),{R:class{constructor(){this.partial=null,this.loadAndReplaceContent=async({afterFailure:t,afterSuccess:a,wrapPartialElement:r=e=>e,src:i,target:n})=>{const s=document.createElement("faceplate-partial");s.setAttribute("loading",e.q.Programmatic),s.setAttribute("src",i),s.setAttribute("class","block min-h-screen xs:min-h-[20rem]");const l=document.createElement("shreddit-loading");s.appendChild(l);const o=this.partial??document.getElementById(n),c=`${o.getBoundingClientRect().height}px`;s.style.minHeight=c,o.insertAdjacentElement("beforebegin",r(s)),o.remove(),this.partial=s;try{const e=new Promise(((e,t)=>{const a=e=>{this.partial!==s&&(e.stopImmediatePropagation(),e.stopPropagation()),t()};s.addEventListener("faceplate-error",a,{once:!0}),s.addEventListener("faceplate-alert",a,{once:!0})}));await Promise.race([e,s.load()]),this.partial=null,a?.()}catch{if(this.partial!==s)return;t?.()}}}},get a(){return a}}}));
SML.di("./CZ7YNHqf.js",import.meta.url,"CZ7YNHqf");SML.di("./Du8UC0gt.js",import.meta.url,"Du8UC0gt");SML.di("./Dg8LS6-X.js",import.meta.url,"Dg8LS6-X");SML.di("./DBgqsMtO.js",import.meta.url,"DBgqsMtO");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./DMa5Y6a9.js",import.meta.url,"DMa5Y6a9");SML.di("./Ccw0cO_g.js",import.meta.url,"Ccw0cO_g");SML.di("./CykCcTkJ.js",import.meta.url,"CykCcTkJ");SML.di("./HYbNa5uQ.js",import.meta.url,"HYbNa5uQ");SML.di("./DAqoOXDQ.js",import.meta.url,"DAqoOXDQ");SML.di("./CsGy0MYm.js",import.meta.url,"CsGy0MYm");SML.di("./BGOkDHmz.js",import.meta.url,"BGOkDHmz");SML.di("./DoY_u8JV.js",import.meta.url,"DoY_u8JV");
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("f9XJizP5",["GlDbwxoG","s_Igk1Yn"],(async(s,e)=>{const i=s.a0.PaidUaBlockingModalData;let t=class extends e.s{constructor(){super(...arguments),this.sessionData={dialogShown:!1,sessionStartTime:void 0,isPaidUaSession:!1},this.timeThresholdReached=!1,this.handleCookieBannerHide=s=>{"data-protection-consent-sheet"===s.target.id&&(this.sessionData.dialogShown||this.hasReachedMaxScreenviews()||this.timeThresholdReached)&&this.showDialog()},this.hasReachedMaxScreenviews=()=>s.gB()>=2}static get styles(){return[s.t]}get dialog(){return this.querySelector("rpl-dialog")}connectedCallback(){super.connectedCallback(),this.loadSessionData(),this.isPaidUaSession()&&(document.addEventListener("rpl-dialog-sheet:hide",this.handleCookieBannerHide),this.sessionData.sessionStartTime||this.setSessionStartTime(),this.sessionData.dialogShown||this.hasReachedMaxScreenviews()?requestAnimationFrame((()=>{this.showDialogIfNotCookieBanner()})):this.startTimeTracking())}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("rpl-dialog-sheet:hide",this.handleCookieBannerHide),this.cleanup()}isPaidUaSession(){if(this.sessionData.isPaidUaSession)return!0;return!!new URLSearchParams(window.location.search).has("utm_source","UA")&&(this.sessionData.isPaidUaSession=!0,this.saveSessionData(),!0)}loadSessionData(){const s=sessionStorage.getItem(i);if(s)try{this.sessionData=JSON.parse(s)}catch{this.sessionData={dialogShown:!1,sessionStartTime:Date.now(),isPaidUaSession:this.isPaidUaSession()},this.saveSessionData()}}saveSessionData(){sessionStorage.setItem(i,JSON.stringify(this.sessionData))}showDialogIfNotCookieBanner(){document.querySelector("#data-protection-consent-dialog")||this.showDialog()}setSessionStartTime(){this.sessionData.sessionStartTime=Date.now(),this.saveSessionData()}startTimeTracking(){this.timeCheckInterval=setInterval((()=>{if(this.sessionData.dialogShown)return void this.stopTimeTracking();this.sessionData.sessionStartTime||this.setSessionStartTime();Date.now()-this.sessionData.sessionStartTime>=3e4&&(this.timeThresholdReached=!0,this.showDialogIfNotCookieBanner(),this.stopTimeTracking())}),1e3)}stopTimeTracking(){this.timeCheckInterval&&(clearInterval(this.timeCheckInterval),this.timeCheckInterval=void 0)}showDialog(){this.isPaidUaSession()&&(this.sessionData.dialogShown=!0,this.saveSessionData(),this.dialog?.showModal())}cleanup(){this.stopTimeTracking()}render(){return e.x`<slot></slot>`}};s._([s.N()],t.prototype,"sessionData",void 0),t=s._([s.e("paid-ua-blocking-modal")],t)}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");
SML.dm("fnKkpEwQ",["s_Igk1Yn","GlDbwxoG"],(async(e,t)=>{const a="plain",n="plain-weak",s="secondary",r="bordered",l="media",m="plain",o={[t.a7.ExtraSmall]:e.h.ExtraSmall,[t.a7.Small]:e.h.Small,[t.a7.Medium]:e.h.Medium,[t.a7.Large]:e.h.Medium},d={xs:"px-sm",sm:"px-sm",md:"px-sm",lg:"px-xs"},i={xs:"text-12",sm:"text-12",md:"text-12",lg:"text-14"},c={xs:"var(--size-button-sm-h)",sm:"var(--size-button-sm-h)",md:"var(--size-button-md-h)",lg:"var(--size-button-md-h)"},u={xs:"var(--font-button-sm)",sm:"var(--font-button-sm)",md:"var(--font-button-sm)",lg:"var(--font-button-md)"},b={[a]:"button-plain",[n]:"button-plain-weak",[s]:"button-secondary",[r]:"button-bordered-cab",[l]:"button-media-cab"},p=e=>{const{attributes:t,size:a,appearance:n,selected:s}=e;return[t?.className||"",a?`${i[a]}`:"",b[n??m],s?"button-activated":"","inline-flex items-center"].join(" ")};return{A:b,B:c,I:o,c:({attributes:a,children:n,size:s=t.a7.Medium,selected:r,appearance:l=m,leadingIcon:o,screenReaderContent:i,role:b})=>{let x=`flex ${t.ac[s]}`;n&&o&&(x+=" me-[var(--rem6)]");const{html:E,createElement:h}=e.g(),$=E`<span class="flex items-center"> ${o?E`<span class="${x}">${o}</span>`:void 0} ${n?E`<span> ${n} </span>`:void 0} </span> ${i?E`<faceplate-screen-reader-content> ${i} </faceplate-screen-reader-content>`:""}`,g=a?.href,v="bordered"===l?"border-sm":"border-md";return h(null!=g?"a":"button",{...a,role:b??a?.role,style:`height: ${c[s]}; font: ${u[s]}`,className:`button ${v} ${p({appearance:l,size:s,attributes:a,selected:r})}\n       ${d[s]}\n      `,rpl:!0},$)},g:p}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./B49dh6xU.js",import.meta.url,"B49dh6xU");SML.di("./UWmwcM6M.js",import.meta.url,"UWmwcM6M");SML.di("./C-d7BR1A.js",import.meta.url,"C-d7BR1A");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");
SML.dm("h0OvOyMW",["GlDbwxoG","s_Igk1Yn","B49dh6xU","UWmwcM6M","C-d7BR1A","D-MAMWlw"],(async(e,t,i,s,o,r)=>{let a=class extends t.s{constructor(){super(...arguments),this.isEnoughParentWidth=!1,this.removed=!1,this.thingId="",this.shouldIgnoreParentWidth=!1,this.pubsub=new e.m(this),this.minWidthToShowLabel=460,this.onCommentUpdateAction=e=>{if(e.commentId!==this.thingId)return;const{action:t}=e;switch(t){case o.C.approve:case o.C.approveOptimistic:this.removed=!1;break;case o.C.remove:case o.C.removeAsSpam:case o.C.confirmRemoval:case o.C.removeOptimistic:case o.C.removeAsSpamOptimistic:case o.C.confirmRemovalOptimistic:this.removed=!0}},this.onPostUpdateAction=e=>{if(e.postId!==this.thingId)return;const{action:t}=e;switch(t){case r.a.approve:case r.a.approveOptimistic:this.removed=!1;break;case r.a.remove:case r.a.removeAsSpam:case r.a.confirmRemoval:case r.a.removeOptimistic:case r.a.removeAsSpamOptimistic:case r.a.confirmRemovalOptimistic:this.removed=!0}},this.onAwardOnContentUpdateAction=e=>{if(e.awardOnContentId!==this.thingId)return;const{action:t}=e;switch(t){case s.A.approve:this.removed=!1;break;case s.A.remove:case s.A.confirmRemoval:this.removed=!0}}}connectedCallback(){this.initializeResizeObserver(),this.pubsub.subscribe(e.T.PostUpdated,this.onPostUpdateAction),this.pubsub.subscribe(e.T.CommentUpdated,this.onCommentUpdateAction),this.pubsub.subscribe(e.T.AwardOnContentUpdated,this.onAwardOnContentUpdateAction),super.connectedCallback()}disconnectedCallback(){this.resizeObserver?.disconnect(),super.disconnectedCallback()}initializeResizeObserver(){const e=i.g(this);e&&(this.resizeObserver=new ResizeObserver((e=>{for(const t of e){const e=t.contentRect.width>=this.minWidthToShowLabel;e!==this.isEnoughParentWidth&&(this.isEnoughParentWidth=e)}})),this.resizeObserver.observe(e))}render(){return t.x` <span class="inline-flex items-center gap-xs text-12 text-neutral-content w-full"> <div class="relative"> <slot name="verdict-indicator-avatar"></slot> <div aria-hidden="true" class="absolute bottom-0 -right-px flex justify-center items-center h-md w-md rounded-full border-solid border-md border-neutral-background scale-75 origin-bottom-right translate-y-px ${this.removed?"bg-red-200 text-red-700":"bg-kiwigreen-200 text-kiwigreen-700"}"> ${this.removed?t.c({size:t.I.ExtraSmall}):t.C({size:t.I.ExtraSmall})} </div> </div> ${this.shouldShowLabel?t.x`<slot name="verdict-indicator-label"></slot>`:""} </span> `}get shouldShowLabel(){return this.shouldIgnoreParentWidth||this.isEnoughParentWidth}};a.styles=[e.t],e._([e.N()],a.prototype,"isEnoughParentWidth",void 0),e._([e.n({type:Boolean,reflect:!0})],a.prototype,"removed",void 0),e._([e.n({type:String,attribute:"thing-id"})],a.prototype,"thingId",void 0),e._([e.n({type:Boolean,attribute:"ignore-parent-width"})],a.prototype,"shouldIgnoreParentWidth",void 0),a=e._([e.e("mod-verdict-indicator-component")],a)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");SML.di("./i17aYwuT.js",import.meta.url,"i17aYwuT");
SML.dm("hMhijB38",["GlDbwxoG","DRM-oTYq","i17aYwuT"],(async(i,a,r)=>{var t;!function(i){i.Forward="forward",i.Backward="backward"}(t||(t={}));const e=(r,t,e)=>i.b({source:"gallery",action:"view",noun:"media"},{...a.g(r),gallery:{num_items:e,position:t}}),n=(r,t,e,n)=>i.b({source:"gallery",action:"click",noun:t},{...a.g(r),gallery:{num_items:n,position:e}});return{get G(){return t},a:e,g:n,h:(a,o,d)=>{const m=n(a,o.detail.direction===r.C.FORWARDS?t.Forward:t.Backward,o.detail.prevPositionIndex,o.detail.num_items),s=e(a,o.detail.currPositionIndex,o.detail.num_items);d&&(m.ad_metadata={impression_id:d},s.ad_metadata={impression_id:d}),i.f(a,m),i.f(a,s)}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CU4mObWU.js",import.meta.url,"CU4mObWU");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./D0V62KWA.js",import.meta.url,"D0V62KWA");SML.di("./D6Xs8HU5.js",import.meta.url,"D6Xs8HU5");
SML.dm("i17aYwuT",["GlDbwxoG","s_Igk1Yn","CU4mObWU","CC2wUKE8","D0V62KWA","D6Xs8HU5"],(async(t,i,e,s,n,a)=>{let o=class extends i.s{constructor(){super(...arguments),this.appearance=a.P.PLAIN,this.autoplay=0,this.pages=0,this.pageIndex=0,this.isAnimationFinished=!1,this._currentAnimation=null,this.handleAutoplayInterruption=async t=>{this.cancelAnimation(t)},this.cancelAnimation=async t=>{const i=await this._autoplayPillContainer;if(i){const{children:e}=i;if(e[t]?.firstElementChild){const i=e[t]?.firstElementChild?.getAnimations().map((t=>(t.cancel(),t.ready)));i&&await Promise.all(i)}}},this.resetAnimations=async()=>{const t=await this._autoplayPillContainer;if(t){const{children:i}=t;for(let t=0;t<i.length;t++)this.cancelAnimation(t)}},this.animatePill=async()=>{this.isAnimationFinished=!1;try{await this.updateComplete,this._currentAnimation?.cancel();const t=[{backgroundColor:"var(--color-neutral-border-medium)",width:0,height:"var(--rem4)"},{backgroundColor:"var(--color-neutral-border-medium)",width:"100%",height:"var(--rem4)"}],i={duration:this.autoplay,fill:"forwards",iterations:1},{children:e}=await this._autoplayPillContainer,s=e?.[this.pageIndex]?.firstElementChild;this._currentAnimation=s?.animate(t,i),await(this._currentAnimation?.finished),this.isAnimationFinished=!0}catch(t){t instanceof DOMException&&"AbortError"===t.name||console.error(t)}},this.pauseAnimation=()=>{this._currentAnimation?.pause()},this.resumeAnimation=()=>{this._currentAnimation?.play()},this.render=()=>{if(0!==this.pages)return i.x` <div class="pagination-container"> <div class="${t.H({"pagination-controls":!0,plain:this.appearance===a.P.PLAIN,media:this.appearance===a.P.MEDIA,autoplay:this.autoplay})}"> <span id="autoplay-pill-container">${[...Array(this.pages).keys()].map(((e,s)=>i.x`<span class="${t.H({track:!0,"in-view":this.pageIndex===s})}"> <span class="${t.H({autoplayPill:!0,"in-view":this.pageIndex===s,viewed:s<this.pageIndex,plain:this.appearance===a.P.PLAIN,media:this.appearance===a.P.MEDIA})}"></span> </span>`))}</span> </div> </div> `}}static get styles(){return i.i`:host{display:block;box-sizing:border-box}.pagination-container{display:flex;justify-content:center}.track.in-view{height:var(--rem4,.25rem);border-radius:var(--rem2,.125rem)}.autoplayPill,.track{height:var(--rem2,.125rem);display:inline-block;border-radius:var(--rem2,.0625);width:100%}.autoplayPill{position:absolute}.track{background-color:var(--color-neutral-border);flex:1;margin:0 var(--rem2,.125rem);display:inline-block;position:relative}#autoplay-pill-container{display:flex;width:100%;align-items:center}.autoplayPill.viewed{background-color:var(--color-neutral-border-medium)}.pagination-controls.autoplay{width:90%}.pagination-controls.media.autoplay{position:absolute;bottom:var(--rem12,.75rem);z-index:2}.pagination-controls{display:flex;align-items:center;justify-content:center}.pagination-controls.plain .current-page-indicator{color:var(--color-media-onbackground)}.pagination-controls.media .current-page-indicator{color:var(--color-neutral-content)}`}updated(t){t.has("pageIndex")&&!this.isAnimationFinished&&this.handleAutoplayInterruption(t.get("pageIndex"))}};var r,l,h,d,c;t._([t.n({type:String,attribute:"appearance"})],o.prototype,"appearance",void 0),t._([t.n({type:Number})],o.prototype,"autoplay",void 0),t._([t.n({type:Number})],o.prototype,"pages",void 0),t._([t.n({type:Number,attribute:"page-index"})],o.prototype,"pageIndex",void 0),t._([t.N()],o.prototype,"isAnimationFinished",void 0),t._([t.dT("#autoplay-pill-container")],o.prototype,"_autoplayPillContainer",void 0),o=t._([t.e("faceplate-carousel-pagination")],o),function(t){t.OUTSIDE="outside",t.INSIDE="inside",t.OFF="off"}(r||(r={})),function(t){t.NEXT="next",t.BOTH="both",t.OFF="off"}(l||(l={})),function(t){t.INSIDE="inside",t.OUTSIDE="outside",t.OFF="off"}(h||(h={})),function(t){t.FORWARDS="forwards",t.BACKWARDS="backwards"}(d||(d={})),function(t){t.LEFT="left",t.CENTER="center",t.OFF="off"}(c||(c={}));let u=class extends i.s{constructor(){super(...arguments),this.navPlacement=h.OUTSIDE,this.paginationPlacement=r.OUTSIDE,this.autoplay="default",this.advanceAnimation=!1,this.numVisible=1,this.infinite=!1,this.inset=l.OFF,this.startIndex=0,this._pageIndex=0,this.pageCount=0,this.isCarouselInitialized=!1,this.hasBeenInteractedWith=!1,this._childCount=0,this._autoplayTimeoutId=null,this._isInsetBothAllowed=!1,this._lowerBoundOffset=0,this._upperBoundOffset=0,this._prevButtonHidden=!1,this._isNextButtonHidden=!1,this._gap=0,this._gapTotal=0,this._autoplayPaginationRef=t.U(),this._carouselListRef=t.U(),this._gesture=null,this.firstRender=!0,this.autoplayInProgress=!1,this.hidePrevButton=!1,this.hideNextButton=!1,this.emitter=s.r(this),this._animationStartTime=0,this._animationRemainingTime=0,this.generateAriaLiveMsg=({pageIndex:t,numVisible:i,pageCount:e})=>{const s=t*i+1;return i>1?`Items ${s} through ${s+i-1} of ${e}`:`Item ${s} of ${e}`},this.updated=async t=>{(t.has("numVisible")||t.has("infinite")||t.has("inset")||t.has("autoplay")||t.has("navPlacement")||t.has("paginationPlacement")||t.has("pageWidth"))&&((t.has("inset")||t.has("navPlacement"))&&(this.cachedDimensions=null),this.firstRender||this.resetAndInitialize()),(t.has("_pageIndex")||t.has("infinite"))&&this.toggleDisabledProgressButtons()},this.resetAndInitialize=()=>{this.resetCarousel(),this.initializeCarousel()},this.initializeResize=()=>{this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeObserver=new ResizeObserver((async()=>{if(!this.firstRender){this.cachedDimensions=null,await new Promise((t=>requestAnimationFrame(t)));const t=this.getCarouselDimensions();t&&await this.showFirstChild(t.width)}})),this.resizeObserver.observe(this)},this.intersectionCallback=t=>{t.forEach((t=>{t.target.style.visibility=t.isIntersecting?"visible":"hidden"}));const i=new CustomEvent("__TEST-ONLY_carousel-intersection");this.dispatchEvent(i)},this.initializeIntersectionObserver=()=>{if(this._intersectionObserver=new IntersectionObserver(this.intersectionCallback,{root:this._carouselListRef?.value}),this.carouselSlot.children)for(const t of Array.from(this.carouselSlot.children))this._intersectionObserver.observe(t)},this.onPaginationClick=t=>{this.goToPage(t.detail.pageIndex,!0)},this.initializeCarousel=()=>{if(this.isCarouselInitialized)return;const{children:t}=this.carouselSlot;this.setChildAndPageCount(t),this.handleAutoPlay(),this._isInsetBothAllowed=this._childCount>=3&&(this.inset===l.BOTH||this.alignment===c.CENTER),this.infinite&&this.cloneBoundElements({children:t});if(this.navPlacement===h.INSIDE&&this.paginationPlacement===r.INSIDE||!this.firstRender){const t=this.getCarouselDimensions();t&&this.showFirstChild(t.width)}this.firstRender=!1,this.isCarouselInitialized=!0,this.initListMutationObserver(),this.initializeVisibility(),this.initializeIntersectionObserver(),this.toggleDisabledProgressButtons(),this._paginationCounter?.[0]&&(this._paginationCounter[0].style.visibility=this.pageCount<=5?"hidden":"visible");const i=new CustomEvent("__TEST-ONLY_carousel-initialized");this.dispatchEvent(i)},this.showFirstChild=async t=>{!this.hasBeenInteractedWith&&this.startIndex&&(this._pageIndex=this.startIndex),await this.setChildDimensions(t),this.goToPage(this.pageIndex,!1);const i=new CustomEvent("__TEST-ONLY_carousel-children-ready",{bubbles:!0});this.dispatchEvent(i)},this.handleAutoPlay=async()=>{"off"===this.autoplay||isNaN(this._autoplaySpeed)||(this.autoplayInProgress&&this.clearAnimationTimeout(),this.autoplayInProgress=!0,(this.infinite||this._pageIndex<this.pageCount-1)&&(this._animationStartTime=Date.now(),this._autoplayPaginationRef?.value?.animatePill(),this._autoplayTimeoutId=setTimeout((async()=>{await this.slideForwards(),this.handleAutoPlay()}),this._autoplaySpeed)))},this.cachedDimensions=null,this.getCarouselDimensions=()=>{if(this.cachedDimensions)return this.cachedDimensions;const t=this._carouselListRef.value?.getBoundingClientRect();if(t){const{width:i}=t;return this.cachedDimensions={width:i,height:t.height},this.cachedDimensions}},this.calcChildWidth=t=>{if(this.pageWidth)return"string"==typeof this.pageWidth&&this.pageWidth.endsWith("%")?t*(parseInt(this.pageWidth)/100):this.pageWidth;let i=0;this._gapTotal=this._gap*(this.numVisible-1)||0,this.inset!==l.OFF&&(i=48*(this.inset===l.NEXT?1:2),this._gapTotal=this._gap*(this.inset===l.NEXT?this.numVisible:this.numVisible+1));return(t-this._gapTotal-i)/this.numVisible},this.setChildDimensions=async t=>{this._gap=parseInt(getComputedStyle(this.carouselSlot).getPropertyValue("gap"))||0;for(const i of Array.from(this.carouselSlot.children)){const{width:e}=i.getBoundingClientRect(),s=i;if(s.style.boxSizing="border-box",t){const i=this.calcChildWidth(t);i!==e&&(s.style.width="number"==typeof i?`${i}px`:i)}"100%"!==s.style.height&&(s.style.height="100%"),"hidden"!==s.style.overflow&&(s.style.overflow="hidden")}},this.prepareNextSlideVisibility=t=>{const i=this.carouselSlot.children.length;for(let e=t;e<Math.min(t+this.numVisible,i);e++)this.carouselSlot.children[e].style.visibility="visible"},this.handleTranslateXWithOffset=async({element:t,startIndex:i})=>{this.prepareNextSlideVisibility(i);let e="";const s=this.insetWidth(t);if(this._isInsetBothAllowed)switch(i){case 0:e="0px";break;case this.pageCount-1:e=this.isRTL?`calc(-1 * ${t.offsetLeft}px)`:`calc(-1 * (${t.offsetLeft}px - ${2*s}px - ${this._gap*this.numGaps}px))`;break;default:e=`calc(-1 * (${t.offsetLeft}px - ${s}px - ${this._gap}px))`}else{const i=getComputedStyle(this.carouselSlot),s=parseInt(i.paddingLeft||"0"),n=parseInt(i.paddingRight||"0"),a=this.carouselSlot.scrollWidth-(this.carouselSlot.clientWidth-n),o=t.offsetLeft===s?0:t.offsetLeft;e=-Math.min(o,a)+"px"}return this.carouselSlot.style.transform=`translateX(${e})`,await Promise.all(this.carouselSlot.getAnimations().map((t=>t.finished))).catch((t=>{t instanceof DOMException&&"AbortError"===t.name||console.error(t)}))},this.slideCarousel=async({isWithinBounds:t,direction:i,requestedIndex:e,allowAnimations:s,onSuccessfulSlide:n})=>{const{children:a}=this.carouselSlot,o=a.length,r=Math.max(1,Math.min(this.numVisible,o));let l=!1;if(this.firstRender||(this.carouselSlot.style.transitionDuration=`${s?this.animationDuration:0}ms`),t){let t=e*r+this._lowerBoundOffset;if(t+r>o){const i=e-1,s=t+r-o;t=Math.max(0,i*r+(r-s))}await this.handleTranslateXWithOffset({element:a[t],startIndex:t}),l=!0}else this.infinite&&(await this.handleInfiniteSlide({children:a,direction:i}),l=!0);l&&(this.hasBeenInteractedWith||(this.hasBeenInteractedWith=!0),n?.());const h=new CustomEvent("faceplate-carousel:slide",{detail:{prevPositionIndex:this._pageIndex,currPositionIndex:e,direction:i,num_items:this._childCount},bubbles:!0});this.dispatchEvent(h)},this.cloneBoundElements=({children:t})=>{let i=0;const e=this._childCount-1,s=this._isInsetBothAllowed?1:0;for(let i=0;i<this.numVisible+s;i++){const e=t[i]?.cloneNode(!0);e instanceof HTMLElement&&(e.dataset.fpUiCarouselMarker="true",e.id=Math.random().toString(16).slice(2),e.role="presentation",this.carouselSlot.append(e),++this._upperBoundOffset)}const n=this._isInsetBothAllowed?1:0;for(let s=0;s<this.numVisible+n;s++){const n=t[e-s+i++]?.cloneNode(!0);n instanceof HTMLElement&&(n.dataset.fpUiCarouselMarker="true",n.id=Math.random().toString(16).slice(2),n.role="presentation",this.carouselSlot.prepend(n),++this._lowerBoundOffset)}},this.handleInfiniteSlide=async({children:t,direction:i})=>{this.carouselSlot.style.transitionDuration="0s";let e=this._isInsetBothAllowed?1:0;i===d.BACKWARDS&&(e=t.length-this._upperBoundOffset),await this.handleTranslateXWithOffset({element:t[e],startIndex:e}),this.carouselSlot.style.transitionDuration=`${this.animationDuration}ms`;const s=i===d.BACKWARDS?e-this.numVisible:e+this.numVisible;await this.handleTranslateXWithOffset({element:t[s],startIndex:s})},this.setNavButtonVisibility=({type:t,hidden:i})=>{this.navPlacement!==h.OFF&&("next"===t?(this.hideNextButton=i,this._isNextButtonHidden=i):(this.hidePrevButton=i,this._prevButtonHidden=i))},this.toggleDisabledProgressButtons=()=>{if(!this.infinite){const t=0===this.pageIndex,i=this.pageIndex===Math.ceil(this._childCount/this.numVisible)-1,e=0===this._childCount;this.setNavButtonVisibility({type:"previous",hidden:e||t}),this.setNavButtonVisibility({type:"next",hidden:e||i})}},this.resetCarousel=()=>{this.resetChildren(),this.cancelAutoPlay(),this.resetDisabledProgressButtons(),this._pageIndex=0,this.pageCount=0,this.isCarouselInitialized=!1,this._isInsetBothAllowed=!1,this._lowerBoundOffset=0,this._upperBoundOffset=0;const t=new CustomEvent("__TEST-ONLY_carousel-reset");this.dispatchEvent(t)},this.resetChildren=()=>{const{children:t}=this.carouselSlot;let i=0;const e=t.length;for(let s=0;s<e;s++){const e=t[i];e instanceof HTMLElement&&e.dataset.fpUiCarouselMarker?e.remove():i++}},this.clearAnimationTimeout=t=>{"number"==typeof this._autoplayTimeoutId&&(window.clearTimeout(this._autoplayTimeoutId),this.autoplayInProgress=!1,t&&t())},this.cancelAutoPlay=()=>{this.clearAnimationTimeout(this._autoplayPaginationRef?.value?.resetAnimations)},this.onListItemKeydown=t=>{"ArrowLeft"===t.key?this.slideBackwards(t):"ArrowRight"===t.key&&this.slideForwards(t)},this.goToPage=(t,i)=>{if(t<0||t>=this.pageCount)return;let e=d.BACKWARDS;t>this._pageIndex&&(e=d.FORWARDS),this._pageIndex=t,this.slideCarousel({isWithinBounds:!0,direction:e,requestedIndex:t,allowAnimations:i})},this.swipeForwards=t=>{this.slideForwards(t),this.dispatchSwipeEvent(d.FORWARDS)},this.swipeBackwards=t=>{this.slideBackwards(t),this.dispatchSwipeEvent(d.BACKWARDS)},this.onInterruptedAutoplay=async t=>{await t(),this.handleAutoPlay()},this.slideHelper=async({navButtonDisabled:t,slide:i,e})=>{t||(this._autoplayTimeoutId&&e?this.onInterruptedAutoplay(i):await i())},this.slideForwards=async t=>{const i=this._pageIndex+1,e=i<this.pageCount;await this.slideHelper({navButtonDisabled:this._isNextButtonHidden,slide:async()=>{this._pageIndex=e?i:0,this.slideCarousel({isWithinBounds:e,direction:d.FORWARDS,requestedIndex:i,allowAnimations:!0})},e:t})},this.onKeyDown=(t,i)=>{"Enter"!==t.key&&"Space"!==t.key||(t.preventDefault(),i(t))},this.slideBackwards=async t=>{const i=this._pageIndex-1,e=i>=0;await this.slideHelper({navButtonDisabled:this._prevButtonHidden,slide:async()=>{this._pageIndex=e?i:this.pageCount-1,this.slideCarousel({isWithinBounds:e,direction:d.BACKWARDS,requestedIndex:i,allowAnimations:!0})},e:t})},this.onListItemFocusIn=()=>{this.autoplay&&"off"!==this.autoplay&&(this._animationRemainingTime=this._autoplaySpeed-(Date.now()-this._animationStartTime),this.clearAnimationTimeout(),this.autoplayInProgress=!1,this._autoplayPaginationRef?.value?.pauseAnimation())},this.onListItemBlur=()=>{this.autoplay&&"off"!==this.autoplay&&(this._autoplayPaginationRef?.value?.resumeAnimation(),setTimeout((async()=>{await this.slideForwards(),this.handleAutoPlay()}),this._animationRemainingTime))}}static get styles(){return i.i`:host{display:flex;position:relative;width:inherit;isolation:isolate;--carousel-gap:var(--spacer-xs, 0.5rem);--carousel-padding:0;--carousel-margin:0}.carousel-container{display:flex;height:auto;align-items:center;position:relative;width:100%}::slotted(:not([slot])){height:100%;display:grid;grid-auto-flow:column;transition:transform;transition-timing-function:ease-out;margin:var(--carousel-margin)!important;padding:var(--carousel-padding)!important;list-style:none;position:relative;gap:var(--carousel-gap)}::slotted([slot=nextButton]),::slotted([slot=prevButton]){display:inline-block}.content-nav-buttons{display:inline-block;position:relative;z-index:2}.content-nav-buttons.hide{visibility:hidden}.content-nav-buttons.start{position:absolute;inset-inline-start:var(--spacer-sm,.75rem)}.content-nav-buttons.outside.end{padding:0 var(--spacer-sm,.75rem)}.content-nav-buttons.inside{position:absolute;top:50%;transform:translateY(-50%)}.content-nav-buttons.inside.start{inset-inline-start:var(--spacer-xs,.5rem)}.content-nav-buttons.inside.end{inset-inline-end:var(--spacer-xs,.5rem)}#carousel-window{position:relative;overflow:hidden;contain:content;display:flex;flex-direction:column;height:100%;flex:1}#carousel-list{height:100%;overflow:hidden;position:relative}:host([pagination-placement=outside]) #pagination-container{padding-top:var(--spacer-xs,.5rem)}:host(:not([nav-placement])) #carousel-window,:host([nav-placement=outside]) #carousel-window{margin-inline-start:var(--rem56,3.5rem)}:host([pagination-placement=inside]) #pagination-container{position:absolute;bottom:var(--rem16,1rem);inset-inline:0;margin:0 auto;width:fit-content}.carousel-actions{position:absolute;inset-inline-end:var(--rem12,.5rem);display:inline-flex;align-items:center;gap:var(--rem12,.75rem)}.carousel-actions.top{top:var(--rem12,.5rem)}.carousel-actions.bottom{bottom:var(--rem16,.1rem)}.hidden{visibility:hidden}.visible{visibility:visible;transition:visibility ease-in}`}get pageIndex(){return this._pageIndex}get isRTL(){try{return this.matches(":dir(rtl)")}catch{return"rtl"===getComputedStyle(this).direction}}get carouselSlot(){return this._children.reduce(((t,i)=>i.assignedSlot&&"UL"===i.nodeName?i:t),document.createElement("ul"))}connectedCallback(){if(super.connectedCallback(),this._gesture=new e.T(this,{mouseSupport:!1}),this._gesture.on("swipeleft",this.isRTL?this.swipeBackwards:this.swipeForwards),this._gesture.on("swiperight",this.isRTL?this.swipeForwards:this.swipeBackwards),this.initializeResize(),this.isCarouselInitialized){const t=this._pageIndex;this.resetAndInitialize(),this._pageIndex!==t&&this.goToPage(t,!1)}}disconnectedCallback(){super.disconnectedCallback(),this._gesture?.destroy(),this.resizeObserver?.disconnect(),this._listMutationObserver?.disconnect(),this._intersectionObserver?.disconnect()}firstUpdated(){this.initializeCarousel()}async handleChildRemoval(){const{children:t}=this.carouselSlot;this.setChildAndPageCount(t),this._firstViewableIndex>this._childCount-1&&this.slideBackwards(),this._childCount||this.toggleDisabledProgressButtons();const i=new CustomEvent("__TEST-ONLY_carousel-children-reset");this.dispatchEvent(i)}get _firstViewableIndex(){return this.infinite?this.pageIndex*this.numVisible+this._lowerBoundOffset:this.pageIndex*this.numVisible}initListMutationObserver(){this._listMutationObserver&&this._listMutationObserver.disconnect(),this._listMutationObserver=new MutationObserver((t=>{for(const i of t)"childList"===i.type&&this.isCarouselInitialized&&(i.removedNodes.length>0?this.handleChildRemoval():i.addedNodes.length>0&&this.handleChildrenAddition())})),this.carouselSlot&&this._listMutationObserver.observe(this.carouselSlot,{childList:!0})}setChildAndPageCount(t){this._childCount=t.length,this.pageCount=Math.ceil(this._childCount/this.numVisible)}async handleChildrenAddition(){const t=this._childCount,{children:i}=this.carouselSlot;this.setChildAndPageCount(i);const e=this.getCarouselDimensions();e&&await this.setChildDimensions(e.width),this._childCount>t&&this.toggleDisabledProgressButtons()}get _autoplaySpeed(){switch(this.autoplay){case"off":return 0;case"default":return 5e3;default:return parseInt(this.autoplay)}}get animationDuration(){return this.advanceAnimation&&!window.matchMedia("(prefers-reduced-motion: reduce)").matches?250:0}get numInsets(){return this.inset===l.BOTH||this.alignment===c.CENTER?2:this.inset===l.NEXT||this.alignment===c.LEFT?1:0}get numGaps(){return this.numVisible+this.numInsets-1}insetWidth(t){const i=this.getCarouselDimensions();if(i){return(i.width-t.getBoundingClientRect().width*this.numVisible-this._gap*this.numGaps)/this.numInsets}return 0}resetDisabledProgressButtons(){this.setNavButtonVisibility({type:"next",hidden:!1}),this.setNavButtonVisibility({type:"previous",hidden:!1})}initializeVisibility(){for(const t of Array.from(this.carouselSlot.children))t.dataset.fpUiCarouselMarker||(t.style.visibility="hidden")}dispatchSwipeEvent(t){const i=new CustomEvent("faceplate-carousel:swipe",{detail:{currPositionIndex:this._pageIndex,direction:t},bubbles:!0});this.dispatchEvent(i)}render(){return i.x` <div class="carousel-container"> <div id="carousel-window"> <div id="carousel-list" ${t.V(this._carouselListRef)}> <slot @keydown="${this.onListItemKeydown}" @focusin="${this.onListItemFocusIn}" @focusout="${this.onListItemBlur}"></slot> <span class="carousel-actions top"> <slot name="paginationCounter"></slot> <slot name="closeButton"></slot> </span> <span class="carousel-actions bottom"> <slot name="addButton"></slot> </span> </div> <div id="pagination-container" class="${t.H({inside:this.paginationPlacement===r.INSIDE})}"> ${this.paginationPlacement===r.OFF?null:this._autoplaySpeed?i.x`<faceplate-carousel-pagination ${t.V(this._autoplayPaginationRef)} pages="${this.pageCount}" page-index="${this._pageIndex}" autoplay="${this._autoplaySpeed}" appearance="${this.paginationPlacement===r.INSIDE?a.P.MEDIA:a.P.PLAIN}"> </faceplate-carousel-pagination>`:i.x`<faceplate-pagination-indicator @pagination-click="${this.onPaginationClick}" .getPageLabels="${this.getPageLabels}" numbered current-page-label="${i.l(this.currentPageLabel)}" appearance="${this.paginationPlacement===r.INSIDE?a.P.MEDIA:a.P.PLAIN}" animation-duration="${this.animationDuration}" pages="${this.pageCount}" page-index="${this._pageIndex}" container-label="${i.l(this.paginationContainerLabel)}"></faceplate-pagination-indicator>`} </div> </div> <slot class="content-nav-buttons start ${t.H({hide:this.navPlacement===h.OFF||this.hidePrevButton,outside:this.navPlacement===h.OUTSIDE,inside:this.navPlacement===h.INSIDE})}" name="prevButton" @click="${this.slideBackwards}" @keydown="${t=>this.onKeyDown(t,this.slideBackwards)}"> </slot> <slot class="content-nav-buttons end ${t.H({hide:this.navPlacement===h.OFF||this.hideNextButton,outside:this.navPlacement===h.OUTSIDE,inside:this.navPlacement===h.INSIDE})}" name="nextButton" @click="${this.slideForwards}" @keydown="${t=>this.onKeyDown(t,this.slideForwards)}"> </slot> </div> <faceplate-screen-reader-content aria-live="polite" aria-atomic="true"> ${this.currentAriaLiveMsg??this.generateAriaLiveMsg({pageIndex:this.pageIndex,pageCount:this.pageCount,numVisible:this.numVisible})} </faceplate-screen-reader-content> `}};return u.navButton=({placement:e,progress:s,ariaLabel:n})=>{const a=s===d.FORWARDS?"Next Page":"Previous Page";return t.Y({appearance:e===h.INSIDE?"media":"secondary",size:t.a7.Small,leadingIcon:s===d.FORWARDS?i.ab({size:i.h.Small}):i.ac({size:i.h.Small}),attributes:{"aria-label":n??a}})},u.closeButton=({attributes:e})=>t.Y({appearance:"media",size:t.a7.Small,leadingIcon:i.ad({size:i.h.Small}),attributes:e}),u.addButton=({children:e,attributes:s})=>t.Y({appearance:"media",size:t.a7.Small,leadingIcon:i.ae({size:i.h.Small}),attributes:s,children:e}),u.paginationCounter=({attributes:t,pageIndex:i,pageCount:e})=>n.b({appearance:n.B.MEDIA,content:`${i+1} / ${e}`,attributes:t}),t._([t.n({type:String,attribute:"nav-placement",reflect:!0})],u.prototype,"navPlacement",void 0),t._([t.n({type:String,attribute:"pagination-placement",reflect:!0})],u.prototype,"paginationPlacement",void 0),t._([t.n({type:String})],u.prototype,"autoplay",void 0),t._([t.n({type:Boolean,attribute:"advance-animation"})],u.prototype,"advanceAnimation",void 0),t._([t.n({type:Number,attribute:"num-visible"})],u.prototype,"numVisible",void 0),t._([t.n({type:Boolean})],u.prototype,"infinite",void 0),t._([t.n({type:String})],u.prototype,"inset",void 0),t._([t.n({type:String,attribute:"pagination-counter-label"})],u.prototype,"paginationCounterLabel",void 0),t._([t.n({type:Number,attribute:"start-index"})],u.prototype,"startIndex",void 0),t._([t.n()],u.prototype,"getPageLabels",void 0),t._([t.n({type:String,attribute:"current-page-label"})],u.prototype,"currentPageLabel",void 0),t._([t.n({type:String,attribute:"current-aria-live-msg"})],u.prototype,"currentAriaLiveMsg",void 0),t._([t.n({type:String,attribute:"pagination-container-label"})],u.prototype,"paginationContainerLabel",void 0),t._([t.n({type:String,attribute:"page-width"})],u.prototype,"pageWidth",void 0),t._([t.n({type:String})],u.prototype,"alignment",void 0),t._([t.N()],u.prototype,"_pageIndex",void 0),t._([t.N()],u.prototype,"pageCount",void 0),t._([t.N()],u.prototype,"isCarouselInitialized",void 0),t._([t.N()],u.prototype,"hasBeenInteractedWith",void 0),t._([t.at({flatten:!0})],u.prototype,"_children",void 0),t._([t.at({slot:"paginationCounter",flatten:!0})],u.prototype,"_paginationCounter",void 0),t._([t.N()],u.prototype,"firstRender",void 0),t._([t.N()],u.prototype,"autoplayInProgress",void 0),t._([t.N()],u.prototype,"hidePrevButton",void 0),t._([t.N()],u.prototype,"hideNextButton",void 0),u=t._([t.e("faceplate-carousel")],u),{get C(){return d},get F(){return u},get I(){return l},get N(){return h},get P(){return r}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./B8B7_bfl.js",import.meta.url,"B8B7_bfl");
SML.dm("jOi_w9kT",["GlDbwxoG","s_Igk1Yn","B8B7_bfl"],(async(t,e,i)=>{class s{constructor(t,e,i,s,a,n,r,l,o,d){this.valueMissing=t,this.typeMismatch=e,this.patternMismatch=i,this.tooLong=s,this.tooShort=a,this.rangeUnderflow=n,this.rangeOverflow=r,this.stepMismatch=l,this.badInput=o,this.customError=d}}class a{constructor(t){this.submissionValue=null,this.constraintsSuffered={},this.customValidityMessage="",this.validityMessage="",this.validationAnchor=null,this.target=t,this.input=document.createElement("input"),this.input.className="faceplate-internal-input",this.input.tabIndex=-1,this.input.style.opacity="0",this.input.style.width="1px",this.input.style.height="100%",this.input.style.padding="0",this.input.style.border="0",this.input.style.pointerEvents="none",this.input.hidden=!0}_connect(t){t?(this._form=t,i.h.register(t,this.target)):this._form=void 0}_disconnect(){this._form&&(i.h.unregister(this._form,this.target),this._form=void 0)}getFormValue(){return this.submissionValue}setFormValue(t){this.submissionValue=t}get form(){return this._form}isSufferingFromItsConstraints(){for(const t in this.constraintsSuffered)if(this.constraintsSuffered[t])return!0;return!1}setValidity(t,e,i=null){if(t){const e=this.convertFlagsToValidityState(t);for(const i in t)this.constraintsSuffered[i]=e[i]}else this.constraintsSuffered={};const s=!!e&&this.isSufferingFromItsConstraints();if(t&&Object.prototype.hasOwnProperty.call(t,"customError")){const t=this.constraintsSuffered.customError&&e?e:"";this.customValidityMessage=t}else this.validationAnchor=i,this.validityMessage=s&&e?e:"";(this.validationAnchor||this.input).setCustomValidity(this.validationMessage),this.target.setAttribute("faceplate-validity",s?"invalid":"valid")}get willValidate(){return!(this.target.disabled||null===this.submissionValue)}convertFlagsToValidityState(t){return new s(!!t.valueMissing,!!t.typeMismatch,!!t.patternMismatch,!!t.tooLong,!!t.tooShort,!!t.rangeUnderflow,!!t.rangeOverflow,!!t.stepMismatch,!!t.badInput,!!t.customError)}get validity(){const t=this.constraintsSuffered;return this.convertFlagsToValidityState(t)}get validationMessage(){return this.customValidityMessage||this.validityMessage}dispatchInvalidEvent(){const t=new Event("invalid",{bubbles:!0,cancelable:!0});return this.target.dispatchEvent(t),t}checkValidity(){return!this.isSufferingFromItsConstraints()||(this.dispatchInvalidEvent(),!1)}reportValidity(){if(this.isSufferingFromItsConstraints()){if(!this.dispatchInvalidEvent().defaultPrevented){(this.validationAnchor||this.input).reportValidity()}return!1}return!0}}const n=t.gN(),r=new MutationObserver((t=>{for(const e of t){if("attributes"!==e.type||"disabled"!==e.attributeName||!(e.target instanceof HTMLFieldSetElement))continue;const t=n.getRegisteredElements(e.target);if(t)for(const i of t)i.formDisabledCallback&&i.formDisabledCallback(i.disabled||e.target.disabled)}}));function l(t){if(i.F in t)return t;class e extends t{constructor(){super(...arguments),this._internals=new a(this)}connectedCallback(){super.connectedCallback&&super.connectedCallback(),i.c(this).then((t=>{if(!t||!this.isConnected)return;this._internals._connect(t),this.formAssociatedCallback&&this.formAssociatedCallback(t);let e=this;for(;e.parentElement&&(e=e.parentElement,e!==t)&&!(e instanceof HTMLLegendElement);)if(e instanceof HTMLFieldSetElement){this._fieldSet=e;n.getRegisteredElements(e)||r.observe(e,{attributes:!0}),n.register(e,this);break}this.formDisabledCallback&&this.formDisabledCallback(this.disabled)}))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),this._internals._disconnect(),this.formAssociatedCallback&&this.formAssociatedCallback(null),this._fieldSet&&(n.unregister(this._fieldSet,this),this._fieldSet=void 0)}get value(){return this._internals.getFormValue()}set value(t){this._internals.setFormValue(t),this.syncInputValidity(!1)}get form(){return this._internals.form}get name(){return this.getAttribute("name")||""}get disabled(){return this.hasAttribute("disabled")||!(!this._fieldSet||!this._fieldSet.disabled)}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled"),this.formDisabledCallback&&this.formDisabledCallback(t||!(!this._fieldSet||!this._fieldSet.disabled))}get type(){return this.localName}get validity(){return this._internals.validity}get validationMessage(){return this._internals.validationMessage}get willValidate(){return this._internals.willValidate}checkValidity(){return this._internals.checkValidity()}reportValidity(){return this._internals.reportValidity()}setCustomValidity(t){this._internals.setValidity({customError:!!t},t)}syncInputValidity(t=!0){var e;const i=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("input:not(.faceplate-internal-input),textarea");if(!i)return;t&&this.setAttribute("faceplate-dirty","");let s={};if(this._internals.validity.customError){for(const t in i.validity)s[t]=i.validity[t];s.customError=!0}else s=i.validity;this._internals.setValidity(s,i.validationMessage||this._internals.validationMessage)}}return e[i.F]=!0,e}class o extends(l(e.s)){static get styles(){return e.i`:host{display:inline-block;position:relative}:host([aria-disabled=true]){cursor:not-allowed;opacity:.5}:host([faceplate-validity=invalid]){border-color:var(--color-danger-content)}.faceplate-internal-input{position:absolute;left:50%;bottom:0}`}get disabled(){return super.disabled}set disabled(t){super.disabled=t}constructor(){super(),this.ariaDisabled="false",this.addEventListener("focus",this.dispatchFocusin)}dispatchFocusin(){const t=new FocusEvent("focusin",{bubbles:!0});this.dispatchEvent(t)}render(){return e.x` ${this._internals.input} `}formDisabledCallback(t){this.ariaDisabled=t?"true":"false"}formResetCallback(){this.value=this.getAttribute("value"),this.removeAttribute("faceplate-dirty")}}t._([t.n({type:Boolean,reflect:!0})],o.prototype,"disabled",null),t._([t.n({type:String,attribute:"aria-disabled",reflect:!0})],o.prototype,"ariaDisabled",void 0);function d(t){return t<10?`0${t}`:t}return{F:class extends o{async firstUpdated(){const t=await i.c(this);t&&this.isConnected&&t.register(this)}},I:o,M:999,T:function(){return o},W:l,a:function(t){const[e,i,s]=t.split("-").map(Number);return new Date(e,i-1,s)},g:function(t){const[e,i,s]=Array.from(t).map((t=>parseInt(t?.value??"",10)));if(!s||!i||!e)return null;const a=new Date(e,i,0).getDate(),n=(new Date).getFullYear();return s<0||s>a||i<1||i>12||e<n-120||e>n-5?null:`${e}-${d(i)}-${d(s)}`}}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");
SML.dm("jTp_btYX",["s_Igk1Yn","DRM-oTYq"],(async(a,l)=>{const{svg:c}=a.g(),t=a.m(c`<g clip-path="url(#a)"><path d="M4.91 13h3.6c.83-2.68 3.27-4.65 6.18-4.78l-.47-.72 2.56-3.86c.47-.7-.04-1.64-.88-1.64H4C2.03 2 .59 3.87 1.1 5.78l3.31 12.3a.906.906 0 001.1.64.9.9 0 00.64-1.1l-1.24-4.61V13z"></path><path d="M15 10c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm3.2 5c0 .55-.15 1.07-.4 1.52l-4.32-4.32c.46-.25.97-.4 1.52-.4 1.76 0 3.2 1.44 3.2 3.2zm-6.4 0c0-.55.15-1.07.4-1.52l4.32 4.32c-.46.25-.97.4-1.52.4a3.21 3.21 0 01-3.2-3.2z"></path></g><defs><clipPath id="a"><path d="M0 0h20v20H0z"></path></clipPath></defs>`,"0 0 20 20","ignore-reports-fill"),{svg:e}=a.g(),h=a.m(e`<path d="M6.149 17.615a.9.9 0 11-1.738.466L3.04 13 1.105 5.777a3 3 0 012.898-3.776h11.885c.843 0 1.347.938.881 1.641l-2.557 3.859.475.716a6.795 6.795 0 00-1.916.367l-.718-1.083 2.452-3.7H4.002c-.515 0-.817.294-.952.47-.135.175-.34.544-.207 1.041l1.578 5.889h4.943a6.76 6.76 0 00-.862 1.8H4.906l1.243 4.614zM20 15a5 5 0 11-10.001-.001A5 5 0 0120 15zm-5-3.2c-.554 0-1.068.154-1.523.404l4.32 4.32A3.16 3.16 0 0018.201 15c0-1.765-1.436-3.2-3.2-3.2H15zm0 6.4a3.16 3.16 0 001.524-.404l-4.32-4.32A3.16 3.16 0 0011.8 15c0 1.764 1.436 3.2 3.2 3.2z"></path>`,"0 0 20 20","ignore-reports"),{svg:p}=a.g(),m=a.m(p`<path d="M12.227 2.8a1.812 1.812 0 011.289.534l3.15 3.15a1.81 1.81 0 01.534 1.289v4.454a1.811 1.811 0 01-.534 1.289l-3.15 3.15a1.81 1.81 0 01-1.289.534H7.773a1.811 1.811 0 01-1.289-.534l-3.15-3.15a1.812 1.812 0 01-.534-1.289V7.773a1.812 1.812 0 01.534-1.289l3.15-3.15A1.812 1.812 0 017.773 2.8h4.454zm0-1.8H7.773c-.96 0-1.882.382-2.562 1.061l-3.15 3.15A3.624 3.624 0 001 7.773v4.454c0 .96.382 1.882 1.061 2.562l3.15 3.15A3.624 3.624 0 007.773 19h4.454c.96 0 1.882-.382 2.562-1.061l3.15-3.15A3.624 3.624 0 0019 12.227V7.773c0-.96-.382-1.882-1.061-2.562l-3.15-3.15A3.624 3.624 0 0012.227 1zM9.389 14.78a1.164 1.164 0 01-.437-.433 1.24 1.24 0 010-1.222c.105-.182.256-.334.437-.441a1.2 1.2 0 011.215 0c.182.106.334.258.44.441a1.24 1.24 0 010 1.222 1.159 1.159 0 01-.44.433c-.188.105-.4.16-.615.157a1.2 1.2 0 01-.6-.157zm-.164-3.363l-.252-6.354h2.082l-.255 6.354H9.225z"></path>`,"0 0 20 20","spam");return{H:new Set([l.P.SubredditFeed,l.P.CommentsPage,l.P.ModQueue,l.P.ModQueueAll,l.P.ModLog]),a:t,i:h,s:m}}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("jzNEIPwx",["s_Igk1Yn"],(async a=>{const{svg:l}=a.g();return{p:a.m(l`<path d="M18.163 6.191a4.194 4.194 0 00-1.237-2.986l-.167-.167a4.197 4.197 0 00-2.986-1.236 4.194 4.194 0 00-2.986 1.237L8.835 4.99a6.267 6.267 0 00-2.708.116 6.276 6.276 0 00-2.798 1.611.902.902 0 00-.001 1.274l3.724 3.723-4.955 4.955a.898.898 0 00.636 1.536c.23 0 .46-.088.636-.264l4.955-4.955 3.644 3.644a.897.897 0 001.273-.001 6.25 6.25 0 001.727-5.499l1.958-1.953a4.197 4.197 0 001.236-2.986h.001z"></path>`,"0 0 20 20","pin-fill")}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CwgKrXUC.js",import.meta.url,"CwgKrXUC");SML.di("./dPq6CuSA.js",import.meta.url,"dPq6CuSA");SML.di("./BbX3H2B5.js",import.meta.url,"BbX3H2B5");SML.di("./Baruuhvw.js",import.meta.url,"Baruuhvw");SML.di("./CdFYkV-r.js",import.meta.url,"CdFYkV-r");
SML.dm("llsZe-17",["GlDbwxoG","s_Igk1Yn","CwgKrXUC","dPq6CuSA","CdFYkV-r","BbX3H2B5","Baruuhvw"],(async(e,t,a,o,r)=>{let n=class extends t.s{constructor(){super(...arguments),this.target="",this.path="",this.pdpCommentSearchInputSelector=e.cb.pdpCommentSearchInput,this.handleBackNavigation=async()=>{this.showCommentComposer();const t=new URL(location.href);t.searchParams.delete(r.S.Query),t.searchParams.delete(r.S.Pane),t.searchParams.delete(r.S.ConversationId),t.searchParams.delete(r.S.ImpressionId);const a=new URL(`${location.origin}${this.path}`);history.replaceState({},"",t.toString());const o=a.toString().substring(location.origin.length),n=new URLSearchParams(location.search).get(r.S.Sort),s=`/svc/shreddit/comments${o}?${new URLSearchParams({"inline-refresh":"true","render-mode":"partial",...(n ? {sort:n} : {})}).toString()}`;this.replaceContentController.loadAndReplaceContent({src:s,target:this.target,afterSuccess:()=>e.cc(this,{message:"Navigated to all comments successfully",options:{priority:e.S.assertive}}),afterFailure:()=>this.dispatchEvent(e.c("faceplate-alert",{level:e.X.error,cause:"uncategorized",message:"Failed to load the comments."}))})},this.replaceContentController=new o.R}showCommentComposer(){document.querySelector(this.pdpCommentSearchInputSelector)?.resetSearchInput()}render(){return t.x` <faceplate-tracker source="post" action="click" noun="view_all_comments"> <faceplate-tooltip appearance="inverted">${e.Y({appearance:"plain",size:e.a7.Small,shape:"pill",attributes:{className:"m-xs border-none","aria-label":"Back",onclick:this.handleBackNavigation,slot:"trigger",type:"button"},children:"All Comments",screenReaderContent:"Show all Comments tree",leadingIcon:a.a({size:t.I.Small})})} ${"Navigate to all comments"} </faceplate-tooltip> </faceplate-tracker>`;}};n.styles=[e.t],e._([e.n({type:String})],n.prototype,"target",void 0),e._([e.n({type:String})],n.prototype,"path",void 0),e._([e.n({type:String,attribute:"pdp-comment-search-input-selector"})],n.prototype,"pdpCommentSearchInputSelector",void 0),n=e._([e.e("pdp-comment-search-close")],n)}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("m5O0vt6a",["s_Igk1Yn"],(async a=>{const{svg:c}=a.g();return{n:a.m(c`<path d="M2.919 3.21a.9.9 0 10-1.273 1.272l1.627 1.627A6.902 6.902 0 003 8v3.184c0 .38-.087.762-.251 1.105l-.927 1.932A1.103 1.103 0 002.82 15.8h3.26A4.007 4.007 0 0010 19a4 4 0 003.69-2.473l1.955 1.955a.897.897 0 001.274 0 .898.898 0 000-1.272l-14-14zm7.08 13.99c-.93 0-1.721-.583-2.042-1.4h4.087A2.197 2.197 0 0110 17.2zm8.114-1.914a1.098 1.098 0 01-.274.286L5.193 2.925A6.966 6.966 0 0110 1c3.859 0 7 3.14 7 7v3.184c0 .38.087.762.25 1.105l.926 1.929c.165.348.14.746-.063 1.068z"></path>`,"0 0 20 20","notifications-off-fill")}}));
SML.di("./DhparPOY.js",import.meta.url,"DhparPOY");SML.di("./BH4VvyCw.js",import.meta.url,"BH4VvyCw");SML.di("./BIKD7jJv.js",import.meta.url,"BIKD7jJv");SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./bZe6Ww5J.js",import.meta.url,"bZe6Ww5J");SML.di("./DxA_--UQ.js",import.meta.url,"DxA_--UQ");SML.di("./llsZe-17.js",import.meta.url,"llsZe-17");SML.di("./DoC8T52C.js",import.meta.url,"DoC8T52C");SML.di("./DhiXEqBo.js",import.meta.url,"DhiXEqBo");SML.di("./BXmRkVEu.js",import.meta.url,"BXmRkVEu");SML.di("./C_IM__d6.js",import.meta.url,"C_IM__d6");SML.di("./PXgk0x6D.js",import.meta.url,"PXgk0x6D");SML.di("./DopQd8m2.js",import.meta.url,"DopQd8m2");SML.di("./DfxFL9aq.js",import.meta.url,"DfxFL9aq");SML.di("./CLJ5hH8v.js",import.meta.url,"CLJ5hH8v");SML.di("./BD7y3eDi.js",import.meta.url,"BD7y3eDi");SML.di("./HYbNa5uQ.js",import.meta.url,"HYbNa5uQ");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./WQnubpt7.js",import.meta.url,"WQnubpt7");SML.di("./XfvXsee4.js",import.meta.url,"XfvXsee4");SML.di("./Codm-qGC.js",import.meta.url,"Codm-qGC");SML.di("./CZ7YNHqf.js",import.meta.url,"CZ7YNHqf");SML.di("./DMa5Y6a9.js",import.meta.url,"DMa5Y6a9");SML.di("./Du8UC0gt.js",import.meta.url,"Du8UC0gt");SML.di("./Co1JScDL.js",import.meta.url,"Co1JScDL");SML.di("./BTgalZoS.js",import.meta.url,"BTgalZoS");SML.di("./DdoeBlGT.js",import.meta.url,"DdoeBlGT");SML.di("./BUDNGNBQ.js",import.meta.url,"BUDNGNBQ");SML.di("./CuKkkr9D.js",import.meta.url,"CuKkkr9D");SML.di("./DwHTSY-I.js",import.meta.url,"DwHTSY-I");SML.di("./C_OcidZ-.js",import.meta.url,"C_OcidZ-");SML.di("./DBgqsMtO.js",import.meta.url,"DBgqsMtO");SML.di("./Ccw0cO_g.js",import.meta.url,"Ccw0cO_g");SML.di("./CykCcTkJ.js",import.meta.url,"CykCcTkJ");SML.di("./DAqoOXDQ.js",import.meta.url,"DAqoOXDQ");SML.di("./CsGy0MYm.js",import.meta.url,"CsGy0MYm");SML.di("./BGOkDHmz.js",import.meta.url,"BGOkDHmz");SML.di("./DoY_u8JV.js",import.meta.url,"DoY_u8JV");SML.di("./dPq6CuSA.js",import.meta.url,"dPq6CuSA");SML.di("./CdFYkV-r.js",import.meta.url,"CdFYkV-r");SML.di("./B5upT-N6.js",import.meta.url,"B5upT-N6");SML.di("./BbX3H2B5.js",import.meta.url,"BbX3H2B5");SML.di("./DrrjN1Nt.js",import.meta.url,"DrrjN1Nt");SML.di("./B8B7_bfl.js",import.meta.url,"B8B7_bfl");SML.di("./jOi_w9kT.js",import.meta.url,"jOi_w9kT");SML.di("./C0I_JWye.js",import.meta.url,"C0I_JWye");SML.di("./Baruuhvw.js",import.meta.url,"Baruuhvw");SML.di("./B5aCBAWI.js",import.meta.url,"B5aCBAWI");SML.di("./C-d7BR1A.js",import.meta.url,"C-d7BR1A");SML.di("./FagDXDzk.js",import.meta.url,"FagDXDzk");SML.di("./DgY18AyY.js",import.meta.url,"DgY18AyY");SML.di("./BTMr9sPC.js",import.meta.url,"BTMr9sPC");SML.di("./BM-DpnLu.js",import.meta.url,"BM-DpnLu");SML.di("./jzNEIPwx.js",import.meta.url,"jzNEIPwx");SML.di("./CtbLRG6p.js",import.meta.url,"CtbLRG6p");SML.di("./CDFmhs-S.js",import.meta.url,"CDFmhs-S");SML.di("./MX9FaClF.js",import.meta.url,"MX9FaClF");SML.di("./FaYkg4Io.js",import.meta.url,"FaYkg4Io");SML.di("./DCovP8x6.js",import.meta.url,"DCovP8x6");SML.di("./BStJq-t0.js",import.meta.url,"BStJq-t0");SML.di("./CwgKrXUC.js",import.meta.url,"CwgKrXUC");SML.di("./GGn-LX5b.js",import.meta.url,"GGn-LX5b");SML.di("./DWhQjF7E.js",import.meta.url,"DWhQjF7E");SML.di("./DhQW5pQL.js",import.meta.url,"DhQW5pQL");SML.di("./DK2EuOAl.js",import.meta.url,"DK2EuOAl");SML.di("./B4wbfaco.js",import.meta.url,"B4wbfaco");SML.di("./Do2tmTAb.js",import.meta.url,"Do2tmTAb");SML.di("./DzMpUNmB.js",import.meta.url,"DzMpUNmB");SML.di("./B9x9AfW9.js",import.meta.url,"B9x9AfW9");SML.di("./Ct5172UI.js",import.meta.url,"Ct5172UI");SML.di("./CU4mObWU.js",import.meta.url,"CU4mObWU");SML.di("./2Pp2AIeo.js",import.meta.url,"2Pp2AIeo");SML.di("./OimaI6pY.js",import.meta.url,"OimaI6pY");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");SML.di("./DslEtuBZ.js",import.meta.url,"DslEtuBZ");
SML.dm("oww0sivi",["GlDbwxoG","DhparPOY","BH4VvyCw","BIKD7jJv","bZe6Ww5J","DxA_--UQ","llsZe-17","DoC8T52C","DhiXEqBo","BXmRkVEu","C_IM__d6","PXgk0x6D","DopQd8m2","DfxFL9aq","CLJ5hH8v","BD7y3eDi","HYbNa5uQ","s_Igk1Yn","DRM-oTYq","CC2wUKE8","WQnubpt7","XfvXsee4","Codm-qGC","CZ7YNHqf","DMa5Y6a9","Du8UC0gt","Co1JScDL","BTgalZoS","DdoeBlGT","BUDNGNBQ","CuKkkr9D","DwHTSY-I","C_OcidZ-","DBgqsMtO","Ccw0cO_g","CykCcTkJ","DAqoOXDQ","CsGy0MYm","BGOkDHmz","DoY_u8JV","dPq6CuSA","CdFYkV-r","B5upT-N6","BbX3H2B5","DrrjN1Nt","B8B7_bfl","jOi_w9kT","C0I_JWye","Baruuhvw","B5aCBAWI","C-d7BR1A","FagDXDzk","DgY18AyY","BTMr9sPC","BM-DpnLu","jzNEIPwx","CtbLRG6p","CDFmhs-S","MX9FaClF","FaYkg4Io","DCovP8x6","BStJq-t0","CwgKrXUC","GGn-LX5b","DWhQjF7E","DhQW5pQL","DK2EuOAl","B4wbfaco","Do2tmTAb","DzMpUNmB","B9x9AfW9","Ct5172UI","CU4mObWU","2Pp2AIeo","OimaI6pY","D-MAMWlw","DslEtuBZ"],(async E=>{E.g()&&SML.di("./Q0BDo2jF.js",import.meta.url,"Q0BDo2jF")}));
SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("p53_mOdF",["s_Igk1Yn"],(async t=>{const{svg:a}=t.g();return{t:t.m(a`<path d="M16.85 2h-5.47c-1.08 0-2.12.44-2.87 1.22L2.3 9.63a3.29 3.29 0 00.04 4.63l3.37 3.37a3.299 3.299 0 004.63.04l6.44-6.18c.79-.75 1.23-1.8 1.23-2.89V3.15c0-.64-.51-1.15-1.15-1.15h-.01zM13 8.75c-.97 0-1.75-.78-1.75-1.75s.78-1.75 1.75-1.75 1.75.78 1.75 1.75-.78 1.75-1.75 1.75z"></path>`,"0 0 20 20","tag-fill")}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");
SML.dm("pMLLCc4b",["GlDbwxoG"],(async e=>{const a="devplatform",r=a=>{switch(a){case e.ah.PostDetail:return"pdp";case e.ah.Profile:return"profile";case e.ah.Community:return"subreddit";case e.ah.Embed:return"embed";case e.ah.Home:case e.ah.Popular:case e.ah.All:case e.ah.CustomFeed:case e.ah.GeoCuratedFeed:case e.ah.UserPosts:case e.ah.ModQueue:case e.ah.ModQueueAll:case e.ah.SearchResults:return"feed";default:return""}};var t;!function(e){e.all="all",e.arena="arena",e.conversation="conversation",e.custom="custom",e.embed="embed",e.home="home",e.modQueue="mod_queue",e.modQueueAll="mod_queue_all",e.news="news",e.popular="popular",e.profile="profile",e.promotedSearchTrend="promoted_search_trend",e.read="read",e.search="search",e.subreddit="subreddit",e.user="user",e.watch="watch"}(t||(t={}));const o=a=>{switch(a){case e.ah.All:return t.all;case e.ah.ArenaFeed:return t.arena;case e.ah.Community:return t.subreddit;case e.ah.CustomFeed:case e.ah.GeoCuratedFeed:return t.custom;case e.ah.Embed:return t.embed;case e.ah.Home:return t.home;case e.ah.ModQueue:return t.modQueue;case e.ah.ModQueueAll:return t.modQueueAll;case e.ah.Popular:return t.popular;case e.ah.Profile:return t.profile;case e.ah.SearchResults:return t.search;case e.ah.UserPosts:return t.user;default:return""}};return{D:a,a:(e,a)=>{if(URL.canParse(e)){const r=new URL(e);return r.searchParams.set("entry_point",a),r.toString()}return e},c:e=>({source:a,action:e.action,noun:e.noun,devplatform_custom_post_info:{post_id:e.postId,subreddit_id:e.subredditId,block_type:e.blockType,presentation_context:e.pageType?r(e.pageType):"",feed_type:e.pageType?o(e.pageType):"",watermark:e.watermark,post_chrome:e.post_chrome},devplatform:{runtime:"web",installation_id:e.appInstallationId,app_id:e.appId,app_slug:e.appSlug,app_name:e.appSlug,app_version_number:e.appVersionNumber,public_api_version:e.appPublicApiVersion,internal_entry_point:e.internalEntryPoint||"",app_recommendation_criteria:e.appRecommendationCriteria||""},init_info:e.init_info,request:{user_agent:e.userAgent},post:e.post,definition:e.definition})}}));
SML.dm("rPGPQWBN",[],(async()=>{var n;!function(n){n.Collapsed="0",n.Expanded="1"}(n||(n={}));const e={[n.Collapsed]:"flex-nav-collapsed",[n.Expanded]:"flex-nav-expanded"},t=Object.values(n);return{F:"hui_flex_nav_expanded_state",a:{LeftSidebarContainer:"left-sidebar-container",ContainerDiv:"flex-left-nav-container",ContentsDiv:"flex-left-nav-contents",ButtonsContainer:"flex-nav-buttons",ExpandButton:"flex-nav-expand-button",CollapseButton:"flex-nav-collapse-button",SubgridContainer:"subgrid-container"},get b(){return n},c:e,i:n=>!!n&&t.includes(n)}}));

SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CU4mObWU.js",import.meta.url,"CU4mObWU");
SML.dm("wFIF_OFn",["GlDbwxoG","s_Igk1Yn","CU4mObWU"],(async(t,e,i)=>{const s="var(--bottom-sheet-max-height)";let o=class extends e.s{constructor(){super(...arguments),this.open=!1,this.blocking=!1,this.docked=!1,this.focusManager=new t.ay(this,this),this.inFocusTrap=!1,this._isModal=!1,this._isExpanded=!1,this._isExpandable=!1,this._isDockable=!1,this._gesture=new i.T(this,{mouseSupport:!1}),this._cachedHeight="auto",this._dockedHeight="auto",this._cachedHeightAtTouchStartPx=0,this._rafID=null,this._mutationObserver=void 0,this.show=t=>{this._isModal=!1,this._isExpanded=(t&&"expanded"in t&&t.expanded)??!1,this._isExpandable=t?.expandable??!1,this._isDockable=t?.dockable??!1,this.open=!0,this._isExpandable&&(this._gesture.on("panstart",this._onTouchStart),this._gesture.on("panmove",this._onTouchMove),this._gesture.on("panend",this._onTouchEnd)),this._isExpanded?this._content.style.height=s:""!==this._content.style.height&&"auto"!==this._content.style.height||(this._cachedHeight=this._content.clientHeight+"px",this._content.style.height=this._cachedHeight),this._dockedHeight=this._headerElements[0]?this._headerElements[0].clientHeight-1+"px":"auto",this._mutationObserver||this._connectMutationObserver()},this.showModal=e=>{if(this.open)throw new Error('The element already has an "open" attribute, and therefore cannot be opened modally');t.gT.add(this),this.show(e),this._isModal=!0,t.gU.add(this)},this.close=()=>{const e=t.c("faceplate-close");this.dispatchEvent(e),e.defaultPrevented||(this.open=!1,this._isExpanded=!1,this.inFocusTrap&&(t.gU.remove(this),t.gT.remove(this)),this._isExpandable&&(this._gesture.off("panstart",this._onTouchStart),this._gesture.off("panmove",this._onTouchMove),this._gesture.off("panend",this._onTouchEnd)),this._content.style.height=this._cachedHeight)},this.expand=()=>{if(this.open&&this._isExpandable&&!this._isExpanded){const e=t.c("faceplate-expand");if(this.dispatchEvent(e),e.defaultPrevented)return;this._cancelRAF(),this._content.style.height=s,this.docked=!1,this._isExpanded=!0}},this.collapse=()=>{if(this.open&&this._isExpandable&&this._isExpanded){const e=t.c("faceplate-collapse");if(this.dispatchEvent(e),e.defaultPrevented)return;this._cancelRAF(),this._content.style.height=this._cachedHeight,this.docked=!1,this._isExpanded=!1}},this.dock=()=>{if(!this.open||!this._isDockable||this.docked)return;const e=t.c("faceplate-dock");this.dispatchEvent(e),e.defaultPrevented||(this._cancelRAF(),this._content.style.height=this._dockedHeight,this.docked=!0)},this.undock=()=>{if(!this.open||!this._isDockable||!this.docked)return;const e=this._isExpandable&&this._isExpanded?s:this._cachedHeight,i=t.c("faceplate-undock");this.dispatchEvent(i),i.defaultPrevented||(this._cancelRAF(),this._content.style.height=e,this.docked=!1)},this.recalculateCachedHeight=()=>{const e=this._cachedHeight;this._content.style.height="auto";const i=this._content.clientHeight+"px";this._cachedHeight=i,this._isDockable&&this.docked?this._content.style.height=this._dockedHeight:this._isExpandable&&this._isExpanded?this._content.style.height=s:(this._content.style.height=e,window.requestAnimationFrame((()=>{this._content.style.height=i,this._cancelRAF()})));const o=t.c("__TEST-ONLY_bottom-sheet-recalculation",{cachedHeight:this._cachedHeight,dockedHeight:this._dockedHeight,expandedHeight:s});this.dispatchEvent(o)},this._onTouchStart=()=>{this._cancelRAF(),this._content.style.transitionDuration="0ms",this._cachedHeightAtTouchStartPx=this._content.clientHeight},this._onTouchMove=()=>{this._cancelRAF(),this._isExpanded&&(this._gesture.touchMoveY??0)<=0||(this._rafID=window.requestAnimationFrame((()=>{null!=this._gesture.touchMoveY&&(this._content.style.height=this._cachedHeightAtTouchStartPx-this._gesture.touchMoveY+"px")})))},this._onTouchEnd=()=>{if(this._cancelRAF(),this._content.style.transitionDuration="300ms",!this.open||null==this._gesture.touchMoveY)return;const t=this._gesture.touchMoveY>=this._gesture.thresholdY,e=this._gesture.touchMoveY<=-this._gesture.thresholdY;t?this._isExpanded?this.collapse():this._closeIfNotBlocked():e?this._isExpanded||this.expand():this._isExpanded?this._content.style.height=s:this._content.style.height=this._cachedHeight},this._cancelRAF=()=>{this._rafID&&(window.cancelAnimationFrame(this._rafID),this._rafID=null)},this._renderHandle=()=>this._isExpandable?e.x`<div id="handle" class="${this._isModal?"out":"in"}"></div>`:null,this._handleBackDropKeyUp=t=>{"Enter"===t.key&&this._closeIfNotBlocked()},this._closeIfNotBlocked=()=>{this.blocking||this.close()},this.render=()=>e.x` <div id="backdrop" part="backdrop" class="${this._isModal&&this.open?"blocker":""}" @click="${this._closeIfNotBlocked}" @keyup="${this._handleBackDropKeyUp}"></div> <div id="content" part="content" role="${e.l(this.open?"dialog":void 0)}" aria-label="${e.l(this.label??void 0)}" aria-modal="${e.l(this.open&&this._isModal?"true":void 0)}"> ${this._renderHandle()} <slot name="header"></slot> <slot></slot> </div> `}static get styles(){return e.i`:host{--bottom-sheet-max-height:85vh}@supports (height:95dvh){:host{--bottom-sheet-max-height:95dvh}}:host{position:fixed;bottom:0;inset-inline-start:0;opacity:0;transition-duration:.3s;transition-property:visibility,opacity;transition-timing-function:ease;visibility:hidden;pointer-events:none}:host([open]){opacity:1;z-index:2;visibility:visible}:host([open])>#content{pointer-events:auto;transform:translateY(0)}:host>#backdrop{position:fixed;--backdrop-position-value:-100%;inset-inline:var(--backdrop-position-value) var(--backdrop-position-value);top:var(--backdrop-position-value);bottom:var(--backdrop-position-value)}:host>#backdrop.blocker{background:var(--color-scrim);pointer-events:auto}:host>#content{align-items:center;background:var(--color-ui-modalbackground);bottom:0;border-start-start-radius:var(--rem12);border-start-end-radius:var(--rem12);box-shadow:var(--boxshadow-modal);box-sizing:border-box;display:flex;flex-direction:column;inset-inline-start:0;position:fixed;touch-action:none;transform:translateY(100%);transition-duration:.3s;transition-property:height,transform;transition-timing-function:ease;width:100vw;max-height:var(--bottom-sheet-max-height)}:host>slot:not([name]){align-items:center;display:flex;flex-direction:column;gap:var(--spacer-sm)}#handle{position:absolute;top:0;inset-inline-start:50%;transform:translateX(-50%);height:var(--rem4);width:var(--rem48);border-radius:var(--rem4)}#handle.in{top:var(--spacer-xs);background-color:var(--color-neutral-border)}#handle.out{top:calc(-1 * var(--spacer-xs));background-color:var(--color-global-white)}`}disconnectedCallback(){super.disconnectedCallback(),this._gesture.destroy(),t.gU.remove(this),t.gT.remove(this),this._mutationObserver?.disconnect()}_connectMutationObserver(){this._mutationObserver=new MutationObserver((()=>{window.requestAnimationFrame(this.recalculateCachedHeight)})),this._mutationObserver.observe(this,{characterData:!0,childList:!0,attributes:!1,subtree:!0})}};t._([t.n({type:Boolean,reflect:!0})],o.prototype,"open",void 0),t._([t.n({type:Boolean})],o.prototype,"blocking",void 0),t._([t.n({type:Boolean,reflect:!0})],o.prototype,"docked",void 0),t._([t.n({type:String,attribute:"ariaLabel"})],o.prototype,"label",void 0),t._([t.Q("#content")],o.prototype,"_content",void 0),t._([t.l({slot:"header"})],o.prototype,"_headerElements",void 0),o=t._([t.e("faceplate-bottom-sheet")],o)}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CU4mObWU.js",import.meta.url,"CU4mObWU");
SML.dm("wFIF_OFn",["GlDbwxoG","s_Igk1Yn","CU4mObWU"],(async(t,e,i)=>{const s="var(--bottom-sheet-max-height)";let o=class extends e.s{constructor(){super(...arguments),this.open=!1,this.blocking=!1,this.docked=!1,this.focusManager=new t.ay(this,this),this.inFocusTrap=!1,this._isModal=!1,this._isExpanded=!1,this._isExpandable=!1,this._isDockable=!1,this._gesture=new i.T(this,{mouseSupport:!1}),this._cachedHeight="auto",this._dockedHeight="auto",this._cachedHeightAtTouchStartPx=0,this._rafID=null,this._mutationObserver=void 0,this.show=t=>{this._isModal=!1,this._isExpanded=(t&&"expanded"in t&&t.expanded)??!1,this._isExpandable=t?.expandable??!1,this._isDockable=t?.dockable??!1,this.open=!0,this._isExpandable&&(this._gesture.on("panstart",this._onTouchStart),this._gesture.on("panmove",this._onTouchMove),this._gesture.on("panend",this._onTouchEnd)),this._isExpanded?this._content.style.height=s:""!==this._content.style.height&&"auto"!==this._content.style.height||(this._cachedHeight=this._content.clientHeight+"px",this._content.style.height=this._cachedHeight),this._dockedHeight=this._headerElements[0]?this._headerElements[0].clientHeight-1+"px":"auto",this._mutationObserver||this._connectMutationObserver()},this.showModal=e=>{if(this.open)throw new Error('The element already has an "open" attribute, and therefore cannot be opened modally');t.gT.add(this),this.show(e),this._isModal=!0,t.gU.add(this)},this.close=()=>{const e=t.c("faceplate-close");this.dispatchEvent(e),e.defaultPrevented||(this.open=!1,this._isExpanded=!1,this.inFocusTrap&&(t.gU.remove(this),t.gT.remove(this)),this._isExpandable&&(this._gesture.off("panstart",this._onTouchStart),this._gesture.off("panmove",this._onTouchMove),this._gesture.off("panend",this._onTouchEnd)),this._content.style.height=this._cachedHeight)},this.expand=()=>{if(this.open&&this._isExpandable&&!this._isExpanded){const e=t.c("faceplate-expand");if(this.dispatchEvent(e),e.defaultPrevented)return;this._cancelRAF(),this._content.style.height=s,this.docked=!1,this._isExpanded=!0}},this.collapse=()=>{if(this.open&&this._isExpandable&&this._isExpanded){const e=t.c("faceplate-collapse");if(this.dispatchEvent(e),e.defaultPrevented)return;this._cancelRAF(),this._content.style.height=this._cachedHeight,this.docked=!1,this._isExpanded=!1}},this.dock=()=>{if(!this.open||!this._isDockable||this.docked)return;const e=t.c("faceplate-dock");this.dispatchEvent(e),e.defaultPrevented||(this._cancelRAF(),this._content.style.height=this._dockedHeight,this.docked=!0)},this.undock=()=>{if(!this.open||!this._isDockable||!this.docked)return;const e=this._isExpandable&&this._isExpanded?s:this._cachedHeight,i=t.c("faceplate-undock");this.dispatchEvent(i),i.defaultPrevented||(this._cancelRAF(),this._content.style.height=e,this.docked=!1)},this.recalculateCachedHeight=()=>{const e=this._cachedHeight;this._content.style.height="auto";const i=this._content.clientHeight+"px";this._cachedHeight=i,this._isDockable&&this.docked?this._content.style.height=this._dockedHeight:this._isExpandable&&this._isExpanded?this._content.style.height=s:(this._content.style.height=e,window.requestAnimationFrame((()=>{this._content.style.height=i,this._cancelRAF()})));const o=t.c("__TEST-ONLY_bottom-sheet-recalculation",{cachedHeight:this._cachedHeight,dockedHeight:this._dockedHeight,expandedHeight:s});this.dispatchEvent(o)},this._onTouchStart=()=>{this._cancelRAF(),this._content.style.transitionDuration="0ms",this._cachedHeightAtTouchStartPx=this._content.clientHeight},this._onTouchMove=()=>{this._cancelRAF(),this._isExpanded&&(this._gesture.touchMoveY??0)<=0||(this._rafID=window.requestAnimationFrame((()=>{null!=this._gesture.touchMoveY&&(this._content.style.height=this._cachedHeightAtTouchStartPx-this._gesture.touchMoveY+"px")})))},this._onTouchEnd=()=>{if(this._cancelRAF(),this._content.style.transitionDuration="300ms",!this.open||null==this._gesture.touchMoveY)return;const t=this._gesture.touchMoveY>=this._gesture.thresholdY,e=this._gesture.touchMoveY<=-this._gesture.thresholdY;t?this._isExpanded?this.collapse():this._closeIfNotBlocked():e?this._isExpanded||this.expand():this._isExpanded?this._content.style.height=s:this._content.style.height=this._cachedHeight},this._cancelRAF=()=>{this._rafID&&(window.cancelAnimationFrame(this._rafID),this._rafID=null)},this._renderHandle=()=>this._isExpandable?e.x`<div id="handle" class="${this._isModal?"out":"in"}"></div>`:null,this._handleBackDropKeyUp=t=>{"Enter"===t.key&&this._closeIfNotBlocked()},this._closeIfNotBlocked=()=>{this.blocking||this.close()},this.render=()=>e.x` <div id="backdrop" part="backdrop" class="${this._isModal&&this.open?"blocker":""}" @click="${this._closeIfNotBlocked}" @keyup="${this._handleBackDropKeyUp}"></div> <div id="content" part="content" role="${e.l(this.open?"dialog":void 0)}" aria-label="${e.l(this.label??void 0)}" aria-modal="${e.l(this.open&&this._isModal?"true":void 0)}"> ${this._renderHandle()} <slot name="header"></slot> <slot></slot> </div> `}static get styles(){return e.i`:host{--bottom-sheet-max-height:85vh}@supports (height:95dvh){:host{--bottom-sheet-max-height:95dvh}}:host{position:fixed;bottom:0;inset-inline-start:0;opacity:0;transition-duration:.3s;transition-property:visibility,opacity;transition-timing-function:ease;visibility:hidden;pointer-events:none}:host([open]){opacity:1;z-index:2;visibility:visible}:host([open])>#content{pointer-events:auto;transform:translateY(0)}:host>#backdrop{position:fixed;--backdrop-position-value:-100%;inset-inline:var(--backdrop-position-value) var(--backdrop-position-value);top:var(--backdrop-position-value);bottom:var(--backdrop-position-value)}:host>#backdrop.blocker{background:var(--color-scrim);pointer-events:auto}:host>#content{align-items:center;background:var(--color-ui-modalbackground);bottom:0;border-start-start-radius:var(--rem12);border-start-end-radius:var(--rem12);box-shadow:var(--boxshadow-modal);box-sizing:border-box;display:flex;flex-direction:column;inset-inline-start:0;position:fixed;touch-action:none;transform:translateY(100%);transition-duration:.3s;transition-property:height,transform;transition-timing-function:ease;width:100vw;max-height:var(--bottom-sheet-max-height)}:host>slot:not([name]){align-items:center;display:flex;flex-direction:column;gap:var(--spacer-sm)}#handle{position:absolute;top:0;inset-inline-start:50%;transform:translateX(-50%);height:var(--rem4);width:var(--rem48);border-radius:var(--rem4)}#handle.in{top:var(--spacer-xs);background-color:var(--color-neutral-border)}#handle.out{top:calc(-1 * var(--spacer-xs));background-color:var(--color-global-white)}`}disconnectedCallback(){super.disconnectedCallback(),this._gesture.destroy(),t.gU.remove(this),t.gT.remove(this),this._mutationObserver?.disconnect()}_connectMutationObserver(){this._mutationObserver=new MutationObserver((()=>{window.requestAnimationFrame(this.recalculateCachedHeight)})),this._mutationObserver.observe(this,{characterData:!0,childList:!0,attributes:!1,subtree:!0})}};t._([t.n({type:Boolean,reflect:!0})],o.prototype,"open",void 0),t._([t.n({type:Boolean})],o.prototype,"blocking",void 0),t._([t.n({type:Boolean,reflect:!0})],o.prototype,"docked",void 0),t._([t.n({type:String,attribute:"ariaLabel"})],o.prototype,"label",void 0),t._([t.Q("#content")],o.prototype,"_content",void 0),t._([t.l({slot:"header"})],o.prototype,"_headerElements",void 0),o=t._([t.e("faceplate-bottom-sheet")],o)}));