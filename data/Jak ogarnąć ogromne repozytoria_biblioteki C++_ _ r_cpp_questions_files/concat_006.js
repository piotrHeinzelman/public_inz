SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("BcjH1zVs",["GlDbwxoG","s_Igk1Yn"],(async(e,t)=>{let i=class extends t.s{constructor(){super(...arguments),this.windowEvents=new e.E(this,(()=>window)),this.setupEls=()=>{this.search=this.querySelector("reddit-search-large"),this.secondaryButton=this.querySelector('[data-part="secondary"]'),this.campaignButton=this.querySelector('[data-part="campaign"]')},this.handleResize=function(e){let t;const i=()=>void 0!==t;function n(...n){i()||(t=window.requestAnimationFrame((()=>{e.apply(this,n),t=void 0})))}return n.cancel=()=>{void 0!==t&&(window.cancelAnimationFrame(t),t=void 0)},n.pending=i,n}((()=>{const{search:e,secondaryButton:t,campaignButton:i}=this,s=i?.firstElementChild,o=t?.firstElementChild;if(!e||!o||!s)return;d(t,i);const c=()=>0!==r(s).width&&r(e).right>r(s).left-n;c()&&(a(t),c()&&a(i))})),this._resize=this.windowEvents.define("resize",this.handleResize)}connectedCallback(){super.connectedCallback(),this.setupEls(),this.handleResize()}createRenderRoot(){return this}};i=e._([e.e("reddit-header-action-items")],i);const n=16,s=["hidden","xs:hidden","s:hidden","m:hidden","l:hidden","xl:hidden"],d=(...e)=>e.forEach((e=>e.classList.remove(...s))),a=(...e)=>e.forEach((e=>e.classList.add(...s))),r=e=>e.getBoundingClientRect()}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./FagDXDzk.js",import.meta.url,"FagDXDzk");
SML.dm("BvPhKy14",["GlDbwxoG","CC2wUKE8","D-MAMWlw","s_Igk1Yn","FagDXDzk"],(async(t,i,e,a)=>{let s=class extends a.s{constructor(){super(...arguments),this.pubsub=new t.m(this),this.postId="",this.class="",this.onPostUpdateAction=({postId:i,action:a,value:s})=>{const o=i;this.postId===o&&(a===e.a.distinguishAsMod?this.distinguishedAs=s?t.dC.Moderator:void 0:a===e.a.distinguishAsAdmin&&(this.distinguishedAs=s?t.dC.Admin:void 0))}}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(t.T.PostUpdated,this.onPostUpdateAction,!1)}get authorType(){return this.distinguishedAs===t.dC.Admin?"admin":this.distinguishedAs===t.dC.Moderator?"moderator":""}render(){const t=this.authorType,e=`font-semibold text-12 tracking-wide uppercase ${this.class} ${t}`;switch(t){case"moderator":return a.x`<span class="${i.n(e,"text-identity-moderator")}" aria-label="${"Post distinguished by moderator"}"> ${i.aY()} </span>`;case"admin":return a.x`<span class="${i.n(e,"text-identity-admin")}" aria-label="${"Post distinguished by admin"}"> ${i.aX()} </span>`;default:return a.A}}};return s.styles=[a.i`:host{display:contents}`,t.t],t._([t.n({type:String,attribute:"post-id"})],s.prototype,"postId",void 0),t._([t.n({type:String,attribute:"distinguished-as"})],s.prototype,"distinguishedAs",void 0),t._([t.n({type:String})],s.prototype,"class",void 0),s=t._([t.e("shreddit-distinguished-post-tags")],s),{get ShredditDistinguishedPostTags(){return s}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./BYIf08Dv.js",import.meta.url,"BYIf08Dv");SML.di("./B7hVC8R1.js",import.meta.url,"B7hVC8R1");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("C-y5yKRl",["GlDbwxoG","BYIf08Dv","B7hVC8R1","s_Igk1Yn","CC2wUKE8"],(async(o,e,a)=>{const r={[e.B.Back]:"secondary_cta",[e.B.Close]:"dismiss",[e.B.GetApp]:"primary_cta",[e.B.Login]:"secondary_cta",[e.B.Signup]:"secondary_cta",[e.B.DontShowAgain]:"dismiss"},n={[e.B.Login]:"primary_cta",[e.B.NotOver18]:"secondary_cta",[e.B.Over18]:"secondary_cta",[e.B.Back]:"dismiss"},t={[a.A.LOGIN]:"secondary_cta",[a.A.SIGNUP]:"secondary_cta",[a.A.OPEN_APP]:"primary_cta",[a.A.GOOGLE_SSO]:"primary_cta",[a.A.APPLE_SSO]:"primary_cta",[a.A.EMAIL]:"secondary_cta",[a.A.CLOSE]:"dismiss"},c="unknown";function _(e){return{name:"shreddit_xpromo_views",type:o.ag.Counter,value:1,labels:e}}function s(e){return{name:"shreddit_xpromo_clicks",type:o.ag.Counter,value:1,labels:e}}return{CSP_TARGET_BY_ACTION_INFO_TYPE:t,DESKTOP_XPROMO_TARGET_BY_MODAL_BUTTON_TEXT:n,XPROMO_TARGET_BY_MODAL_BUTTON_TEXT:r,getW3ReportsFromV2Event:function(e){const a=o.aY(e),i=o.aZ()===o.a_.Desktop,p=[];switch(a){case"global/view/screen":e.action_info?.trigger_type===o.a$.Initial&&p.push({name:"shreddit_page_views",type:o.ag.Counter,value:1});break;case"xpromo/view/app_selector":case"xpromo/view/bottom_bar":case"xpromo/view/marketplace_community_launch":case"xpromo/view/nsfw_blur":case"xpromo/view/top_button":case"xpromo/view/unrated_block":case"xpromo/view/viral_community":case"xpromo/view/ios_educational_deeplink":case"xpromo/view/lo_only_bottom_sheet":p.push(_({xpromo_name:e.noun}));break;case"xpromo/view/logged_in_action":p.push(_({xpromo_name:e.noun,target:e.action_info?.type||"other"}));break;case"xpromo/click/marketplace_community_launch":case"xpromo/dismiss/nsfw_blur":case"xpromo/click/nsfw_blur":case"xpromo/click/unrated_block":case"xpromo/click/app_selector":case"xpromo/click/viral_community":case"xpromo/click/ios_educational_deeplink":case"xpromo/click/lo_only_bottom_sheet":{const o=e?.popup?.button_text,a=i?n[o]||c:r[o]||c;a!==c&&p.push(s({target:a,xpromo_name:e.noun}));break}case"xpromo/click/logged_in_action":{const o=e.action_info?.type;p.push(s({xpromo_name:e.noun,target:t[o]||"other"}));break}case"xpromo/click/bottom_bar":case"xpromo/click/top_button":p.push(s({target:"primary_cta",xpromo_name:e.noun}));break;case"onboarding/click/login":case"onboarding/click/register":case"onboarding/click/signup_drawer":{const a=e.action_info?.type;a&&p.push({name:"shreddit_auth_flow_provider_clicks",type:o.ag.Counter,value:1,labels:{auth_flow:e.noun,provider:a}});break}case"onboarding/resolve/login":case"onboarding/resolve/one_tap":case"onboarding/resolve/register":case"onboarding/resolve/signup_drawer":{const a=e?.action_info?.reason,r=e?.action_info?.type;a&&r&&p.push({name:"shreddit_auth_flow_resolved_accounts",type:o.ag.Counter,value:1,labels:{auth_flow:e.noun,method:a,provider:r}});break}case"onboarding/dismiss/google_one_tap":{const a=e?.action_info?.reason;a&&p.push({name:"shreddit_google_one_tap_dismissed_moments",type:o.ag.Counter,value:1,labels:{reason:a}});break}}return p}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./fnKkpEwQ.js",import.meta.url,"fnKkpEwQ");SML.di("./DzMpUNmB.js",import.meta.url,"DzMpUNmB");SML.di("./BTfAALG-.js",import.meta.url,"BTfAALG-");SML.di("./DtcD-j6p.js",import.meta.url,"DtcD-j6p");SML.di("./DK2EuOAl.js",import.meta.url,"DK2EuOAl");SML.di("./wFIF_OFn.js",import.meta.url,"wFIF_OFn");SML.di("./DQ-2YbuL.js",import.meta.url,"DQ-2YbuL");SML.di("./B4wbfaco.js",import.meta.url,"B4wbfaco");SML.di("./Dy1394uh.js",import.meta.url,"Dy1394uh");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./9ZdgYdsr.js",import.meta.url,"9ZdgYdsr");SML.di("./DIbtn8u6.js",import.meta.url,"DIbtn8u6");SML.di("./B5aCBAWI.js",import.meta.url,"B5aCBAWI");SML.di("./CU4mObWU.js",import.meta.url,"CU4mObWU");SML.di("./DSgcmNT3.js",import.meta.url,"DSgcmNT3");SML.di("./DuMDg_pA.js",import.meta.url,"DuMDg_pA");SML.di("./YRJ6wR80.js",import.meta.url,"YRJ6wR80");SML.di("./BamxgHcE.js",import.meta.url,"BamxgHcE");SML.di("./C3V_tmXg.js",import.meta.url,"C3V_tmXg");SML.di("./CjqcW8YI.js",import.meta.url,"CjqcW8YI");SML.di("./k6T7mA5v.js",import.meta.url,"k6T7mA5v");SML.di("./8tELWdqF.js",import.meta.url,"8tELWdqF");SML.di("./D9vf8s3n.js",import.meta.url,"D9vf8s3n");SML.di("./p53_mOdF.js",import.meta.url,"p53_mOdF");SML.di("./BJSmnD7s.js",import.meta.url,"BJSmnD7s");SML.di("./DzK3xEza.js",import.meta.url,"DzK3xEza");SML.di("./BhFZ7wtj.js",import.meta.url,"BhFZ7wtj");SML.di("./CYLwRRPY.js",import.meta.url,"CYLwRRPY");SML.di("./CKtUor7l.js",import.meta.url,"CKtUor7l");SML.di("./jTp_btYX.js",import.meta.url,"jTp_btYX");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");SML.di("./BTMXBfyY.js",import.meta.url,"BTMXBfyY");SML.di("./CAd-sfst.js",import.meta.url,"CAd-sfst");SML.di("./BM-DpnLu.js",import.meta.url,"BM-DpnLu");SML.di("./Be8KYlVI.js",import.meta.url,"Be8KYlVI");SML.di("./Bvcfbv8-.js",import.meta.url,"Bvcfbv8-");SML.di("./DR8uYI_f.js",import.meta.url,"DR8uYI_f");SML.di("./jzNEIPwx.js",import.meta.url,"jzNEIPwx");SML.di("./BvOcWFza.js",import.meta.url,"BvOcWFza");SML.di("./Ds3iHAvh.js",import.meta.url,"Ds3iHAvh");SML.di("./Dpra1UnG.js",import.meta.url,"Dpra1UnG");SML.di("./B-rjeALe.js",import.meta.url,"B-rjeALe");SML.di("./C-lRMeGe.js",import.meta.url,"C-lRMeGe");SML.di("./S5oUweHp.js",import.meta.url,"S5oUweHp");SML.di("./ZU4mPORS.js",import.meta.url,"ZU4mPORS");SML.di("./BTMr9sPC.js",import.meta.url,"BTMr9sPC");SML.di("./DgY18AyY.js",import.meta.url,"DgY18AyY");SML.di("./DyIkawXc.js",import.meta.url,"DyIkawXc");SML.di("./C7Ws8ntA.js",import.meta.url,"C7Ws8ntA");SML.di("./Co1JScDL.js",import.meta.url,"Co1JScDL");SML.di("./BTgalZoS.js",import.meta.url,"BTgalZoS");SML.di("./Cjw2ByTc.js",import.meta.url,"Cjw2ByTc");SML.di("./FagDXDzk.js",import.meta.url,"FagDXDzk");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");SML.di("./BkqliFNc.js",import.meta.url,"BkqliFNc");SML.di("./BHxN-XG0.js",import.meta.url,"BHxN-XG0");SML.di("./CIi1v1l_.js",import.meta.url,"CIi1v1l_");SML.di("./8qD_qMhm.js",import.meta.url,"8qD_qMhm");SML.di("./DNASVThB.js",import.meta.url,"DNASVThB");SML.di("./DwHTSY-I.js",import.meta.url,"DwHTSY-I");SML.di("./C_OcidZ-.js",import.meta.url,"C_OcidZ-");SML.di("./BktidS9F.js",import.meta.url,"BktidS9F");SML.di("./Bvty6Dj7.js",import.meta.url,"Bvty6Dj7");SML.di("./CJ4Bucp-.js",import.meta.url,"CJ4Bucp-");SML.di("./DdoeBlGT.js",import.meta.url,"DdoeBlGT");SML.di("./CZ7YNHqf.js",import.meta.url,"CZ7YNHqf");SML.di("./DMa5Y6a9.js",import.meta.url,"DMa5Y6a9");SML.di("./C38sKiaF.js",import.meta.url,"C38sKiaF");SML.di("./CGzEIBwW.js",import.meta.url,"CGzEIBwW");
SML.dm("C88tx-Jk",["GlDbwxoG","s_Igk1Yn","fnKkpEwQ","DzMpUNmB","BTfAALG-","DtcD-j6p","Dy1394uh","CC2wUKE8","9ZdgYdsr","DK2EuOAl","wFIF_OFn","DQ-2YbuL","B4wbfaco","DIbtn8u6","B5aCBAWI","CU4mObWU","DSgcmNT3","DuMDg_pA","YRJ6wR80","BamxgHcE","C3V_tmXg","CjqcW8YI","k6T7mA5v","8tELWdqF","D9vf8s3n","p53_mOdF","BJSmnD7s","DzK3xEza","BhFZ7wtj","CYLwRRPY","CKtUor7l","jTp_btYX","DRM-oTYq","BTMXBfyY","CAd-sfst","BM-DpnLu","Be8KYlVI","Bvcfbv8-","DR8uYI_f","jzNEIPwx","BvOcWFza","Ds3iHAvh","Dpra1UnG","B-rjeALe","C-lRMeGe","S5oUweHp","ZU4mPORS","BTMr9sPC","DgY18AyY","DyIkawXc","C7Ws8ntA","Co1JScDL","BTgalZoS","Cjw2ByTc","FagDXDzk","D-MAMWlw","BkqliFNc","BHxN-XG0","CIi1v1l_","8qD_qMhm","DNASVThB","DwHTSY-I","C_OcidZ-","BktidS9F","Bvty6Dj7","CJ4Bucp-","DdoeBlGT","CZ7YNHqf","DMa5Y6a9","C38sKiaF","CGzEIBwW"],(async(e,t,i,n,o,a,s,r,d)=>{function l(e){const i=document.createElement("div");return t.B(e,i),Array.from(i.children)}class u extends t.s{constructor(){super(...arguments),this.isDesktopViewport=!1,this.isMobileViewport=!1,this.unpackedItems=new Set,this.resizeObserver=null,this.toggleMenuOpenState=e=>{this.getBottomSheet(e)?.open||this.getDropdownMenu(e)&&!this.getDropdownMenu(e)?.hidden?this.closeMenu(e):this.openMenu(e)},this.openMenu=async e=>{const t=this.getBottomSheet(e);t&&(await t.updateComplete,!1===t.open&&t.showModal());const i=this.getDropdownMenu(e);i&&(await i.updateComplete,i.hidden&&i.show())},this.closeMenu=async e=>{const t=this.getBottomSheet(e);t&&(await t.updateComplete,t.open&&t.close());const i=this.getDropdownMenu(e);i&&(await i.updateComplete,!1===i.hidden&&i.close())},this.unpackVisibleActions=async()=>{const e=new Set,i=this.shadowRoot?.getElementById("unpacked-actions");if(!i)return;i.innerHTML="";const n=new Map(this.getUnpackableMenuItems().map((e=>[e.id,e])));for(const e of n.values()){l(e.unpackedRender()).forEach((t=>{t.setAttribute("data-item-id",e.id),i.appendChild(t)}))}const o=Array.from(i.children).map((e=>e instanceof t.s?e.updateComplete:Promise.resolve()));await Promise.all(o);const a=i.clientWidth,s=i.getBoundingClientRect().left,r=Math.ceil(s+a),d=Array.from(i.querySelectorAll("[data-item-id]")),u=[];for(let e=d.length-1;e>=0;e--){const t=d[e],i=t.getAttribute("data-item-id"),o=n.get(i);if(!(Math.floor(this.getItemBoundingClientRect(o,t).right)>r))break;u.push(i)}d.forEach((t=>{const i=t.getAttribute("data-item-id");u.includes(i)?t.remove():e.add(i)})),function(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}(this.unpackedItems,e)||(this.unpackedItems=e)},this.getCloseHandler=t=>i=>{e.i(i)&&this.closeMenu(t)}}getMenus(){return[]}getMenuItems(){return[]}updateMenuBar(){this.unpackVisibleActions()}connectedCallback(){super.connectedCallback(),this.unpackVisibleActions(),this.resizeObserver=this.resizeObserver??new ResizeObserver(e.a6(this.unpackVisibleActions,100,{leading:!1,trailing:!0})),this.resizeObserver.observe(this,{box:"border-box"})}disconnectedCallback(){super.disconnectedCallback(),this.resizeObserver?.disconnect()}getDropdownMenu(e){return this.shadowRoot?.querySelector(`faceplate-dropdown-menu#${e}`)}getBottomSheet(e){return this.shadowRoot?.querySelector(`faceplate-bottom-sheet#${e}`)}shouldRenderMenu(e){const t=this.getMenuPackedItems(e),i=this.getMenus().find((t=>t.id===e))?.extraItemsSlotName,n=!!i&&this.slotHasAssignedNodes(i);return t.length>0||n}getUnpackableMenuItems(){return this.getMenuItems().filter((e=>e.shouldRender()&&!e.alwaysRenderPacked))}getMenuPackedItems(e){return this.getMenuItems().filter((t=>t.menuId===e&&t.shouldRender()&&!this.unpackedItems.has(t.id)))}getDropdownButtonHandler(t){return i=>{e.i(i)&&this.getBottomSheet(t)&&this.toggleMenuOpenState(t)}}slotHasAssignedNodes(e){const t=this.shadowRoot?.querySelector(`slot[name=${e}]`);return(t?.assignedNodes().length||0)>0}render(){return t.x` <div class="flex flex-row overflow-hidden whitespace-nowrap gap-2xs justify-between"> <div id="unpacked-actions" class="flex flex-row overflow-hidden whitespace-nowrap gap-2xs"></div> ${this.renderMenus()} <slot name="whitespace"></slot> </div> ${this.renderMenuExtraItemsSlots()} `}renderMenus(){const e=this.getMenus().filter((e=>this.shouldRenderMenu(e.id)));return t.x`${e.map((e=>this.isDesktopViewport?this.renderDropdownMenu(e):this.renderBottomSheetMenu(e)))}`}renderBottomSheetMenu(i){const n=this.getCloseHandler(i.id),o=this.getMenuPackedItems(i.id).map((e=>e.packedRender()));return t.x` ${this.renderDropdownMenuButton(i)} <faceplate-bottom-sheet id="${i.id}" data-ignore-click-interception> <faceplate-bottom-sheet-header slot="header" has-divider> ${i.bottomSheetHeaderLabel} <span slot="trailing"> ${e.Y({appearance:"secondary",attributes:{onclick:n,"aria-label":"Close actions menu",className:"close-btn"},leadingIcon:t.c({size:t.I.Small}),size:e.a7.Small})} </span> </faceplate-bottom-sheet-header> <div class="w-full max-h-[19rem] overflow-y-auto pb-md"> <faceplate-menu @click="${n}" @keyup="${n}"> ${o} ${i.extraItemsSlotName?t.x`<slot name="${i.extraItemsSlotName}"></slot>`:""} </faceplate-menu> </div> </faceplate-bottom-sheet> `;}renderDropdownMenu(e){const i=this.getMenuPackedItems(e.id).map((e=>e.packedRender()));return t.x` <faceplate-dropdown-menu id="${e.id}" position="bottom-end"> ${this.renderDropdownMenuButton(e)} <faceplate-menu slot="menu" class="whitespace-nowrap max-h-[25.5rem] overflow-y-auto nd:hidden" hidden> ${i} ${e.extraItemsSlotName?t.x`<slot name="${e.extraItemsSlotName}"></slot>`:""} </faceplate-menu> </faceplate-dropdown-menu> `}renderDropdownMenuButton(n){const o=this.getDropdownButtonHandler(n.id),a=i.c({appearance:"plain-weak",attributes:{onclick:o,className:"relative","aria-label":n.dropdownButtonLabel},leadingIcon:n.dropdownButtonIcon,size:e.a7.Small});if(n.trackingAttributes){const{source:e,action:i,noun:o}=n.trackingAttributes;return t.x` <faceplate-tracker source="${e}" action="${i}" noun="${o}"> ${a} </faceplate-tracker> `}return a}renderMenuExtraItemsSlots(){const e=this.getMenus().filter((e=>!!e.extraItemsSlotName)).filter((e=>!this.shouldRenderMenu(e.id)));return t.x`${e.map((e=>t.x`<slot name="${e.extraItemsSlotName}" class="hidden"></slot>`))}`}getItemBoundingClientRect(e,t){if(e?.boundingClientRectSelector){const i=t.querySelector(e?.boundingClientRectSelector);if(i)return i.getBoundingClientRect()}return t.getBoundingClientRect()}}u.styles=[e.t,t.i`:host{display:block;overflow:hidden;width:100%}`],e._([e.n({type:Boolean,attribute:"is-desktop-viewport"})],u.prototype,"isDesktopViewport",void 0),e._([e.n({type:Boolean,attribute:"is-mobile-viewport"})],u.prototype,"isMobileViewport",void 0),e._([e.N()],u.prototype,"unpackedItems",void 0);let c=class extends(s.W(u)){constructor(){super(...arguments),this.shouldIncludeModActions=!1,this.modMode=!1,this.primaryButtonAppearance="bordered"}updated(){this.updateMenuBar()}useIconsAndShortLabels(){return r.b_()&&this.isMobileViewport}get defaultActionsMenu(){return {id:"defaultActions",dropdownButtonIcon:a.o({size:t.I.Small}),dropdownButtonLabel:"Open user actions",bottomSheetHeaderLabel:"Options",trackingAttributes:{source:"post",action:"click",noun:"overflow-menu"},extraItemsSlotName:"post-actions-extra-items"};}get modMenu(){return {id:"modActions",dropdownButtonIcon:o.m({size:t.I.Small}),dropdownButtonLabel:"Moderator actions",bottomSheetHeaderLabel:"Moderator actions",trackingAttributes:{source:"moderator",action:"click",noun:"mod_shield_menu"},extraItemsSlotName:"mod-actions-extra-items"};}getMenus(){return[this.modMenu,this.defaultActionsMenu]}getMenuItems(){const e=this.getDefaultActions(),i=this.getModActions(),n=this.shouldIncludeModActions&&this.modMode;return[this.buildGenericMenuItem({postAction:i.addRemovalReason,menuId:this.modMenu.id,partialButtonProps:{appearance:this.primaryButtonAppearance},additionalEligibility:()=>this.shouldIncludeModActions}),this.buildGenericMenuItem({postAction:i.approve,menuId:this.modMenu.id,partialButtonProps:{appearance:this.primaryButtonAppearance},additionalEligibility:()=>this.shouldIncludeModActions}),this.buildGenericMenuItem({postAction:i.remove,menuId:this.modMenu.id,partialButtonProps:{appearance:this.primaryButtonAppearance},additionalEligibility:()=>this.shouldIncludeModActions}),this.buildShareToModChatMenuItem({postAction:i.shareToModChat,menuId:this.modMenu.id,additionalEligibility:()=>this.shouldIncludeModActions}),this.buildGenericMenuItem({postAction:e.comments,menuId:this.defaultActionsMenu.id}),this.buildGenericMenuItem({postAction:e.award,menuId:this.defaultActionsMenu.id}),this.buildShareMenuItem({shareAction:e.share,copyLinkAction:e.copyLink,crosspostAction:e.crosspost,embedAction:e.embed,menuId:this.defaultActionsMenu.id}),this.buildGenericMenuItem({postAction:e.edit,menuId:this.defaultActionsMenu.id}),this.buildGenericMenuItem({postAction:i.removeAsSpam,menuId:this.modMenu.id,alwaysRenderPacked:!this.modMode,additionalEligibility:()=>this.shouldIncludeModActions}),this.buildGenericMenuItem({postAction:i.editPostFlairMod,menuId:this.modMenu.id,alwaysRenderPacked:!this.modMode,additionalEligibility:()=>this.shouldIncludeModActions}),this.buildGenericMenuItem({postAction:i.lock,menuId:this.modMenu.id,alwaysRenderPacked:!this.modMode,additionalEligibility:()=>this.shouldIncludeModActions}),this.buildGenericMenuItem({postAction:i.sticky,menuId:this.modMenu.id,alwaysRenderPacked:!this.modMode,additionalEligibility:()=>this.shouldIncludeModActions}),this.buildGenericMenuItem({postAction:i.highlight,menuId:this.modMenu.id,alwaysRenderPacked:!this.modMode,additionalEligibility:()=>this.shouldIncludeModActions}),this.buildGenericMenuItem({postAction:i.nsfwTagMod,menuId:this.modMenu.id,alwaysRenderPacked:!this.modMode,additionalEligibility:()=>this.shouldIncludeModActions}),this.buildGenericMenuItem({postAction:i.spoilerTagMod,menuId:this.modMenu.id,alwaysRenderPacked:!this.modMode,additionalEligibility:()=>this.shouldIncludeModActions}),this.buildGenericMenuItem({postAction:i.distinguishAsMod,menuId:this.modMenu.id,alwaysRenderPacked:!this.modMode,additionalEligibility:()=>this.shouldIncludeModActions}),this.buildGenericMenuItem({postAction:i.crowdControl,menuId:this.modMenu.id,alwaysRenderPacked:!this.modMode,additionalEligibility:()=>this.shouldIncludeModActions}),this.buildGenericMenuItem({postAction:e.editPostFlair,menuId:this.defaultActionsMenu.id,additionalEligibility:()=>!n}),this.buildGenericMenuItem({postAction:e.promotePost,menuId:this.defaultActionsMenu.id,alwaysRenderPacked:!0,partialButtonProps:{children:t.x``}}),this.buildGenericMenuItem({postAction:e.save,menuId:this.defaultActionsMenu.id}),this.pinToProfileMenuItem(e),this.buildGenericMenuItem({postAction:e.hide,menuId:this.defaultActionsMenu.id}),this.buildGenericMenuItem({postAction:e.report,menuId:this.defaultActionsMenu.id}),this.buildGenericMenuItem({postAction:e.delete,menuId:this.defaultActionsMenu.id}),this.buildGenericMenuItem({postAction:e.adminDistinguish,menuId:this.defaultActionsMenu.id}),this.buildGenericMenuItem({postAction:e.spoilerTag,menuId:this.defaultActionsMenu.id,additionalEligibility:()=>!n}),this.buildGenericMenuItem({postAction:e.nsfwTag,menuId:this.defaultActionsMenu.id,additionalEligibility:()=>!n}),this.buildGenericMenuItem({postAction:e.brandAffiliate,menuId:this.defaultActionsMenu.id}),this.buildGenericMenuItem({postAction:e.replyNotifs,menuId:this.defaultActionsMenu.id}),this.buildGenericMenuItem({postAction:e.aboutThisAd,menuId:this.defaultActionsMenu.id,alwaysRenderPacked:!0})]}renderDropdownMenu(e){return super.renderDropdownMenu(e)}buildGenericMenuItem({postAction:o,menuId:a,alwaysRenderPacked:s,additionalEligibility:r,partialListItemProps:d,partialButtonProps:l}){const{id:u,label:c,shortLabel:E,disabled:T,href:M,target:h,onClick:p,leadingIconRenderer:I,trackingAttributes:D,isUserEligible:R}=o;return{id:u,menuId:a,packedRender:()=>m(n.l({label:t.x`${c}`,leadingIcon:I({}),size:n.L.Small,href:M||void 0,onClick:p,disabled:!!T,...d,attributes:{"data-testid":u}}),D),unpackedRender:()=>m(i.c({appearance:"plain-weak",attributes:{onclick:p,className:"relative shrink-0",href:M||void 0,target:h,disabled:!!T,"data-testid":u},size:e.a7.Small,leadingIcon:this.useIconsAndShortLabels()?I({size:t.I.Small}):void 0,children:this.useIconsAndShortLabels()?null==E?void 0:t.x`${E}`:t.x`${c}`,...l}),D),shouldRender:()=>R()&&(!r||r()),alwaysRenderPacked:s}}buildShareMenuItem({shareAction:o,copyLinkAction:a,crosspostAction:s,embedAction:r,menuId:l}){return{id:o.id,menuId:l,unpackedRender:()=>m(this.isDesktopViewport?this.renderShareDropdown({handleShareClick:o.onClick,size:e.a7.Small,appearance:"plain-weak"}):i.c({appearance:"plain-weak",attributes:{onclick:o.onClick,className:"relative shrink-0","data-testid":o.id},size:e.a7.Small,leadingIcon:this.useIconsAndShortLabels()?o.leadingIconRenderer({size:t.I.Small}):void 0,children:this.useIconsAndShortLabels()?void 0:t.x`${o.label}`}),o.trackingAttributes),packedRender:()=>this.isDesktopViewport?t.x` ${m(n.l({attributes:{className:d.b,"data-testid":a.id},leadingIcon:a.leadingIconRenderer({}),label:t.x`${a.label}`,onClick:a.onClick}),a.trackingAttributes)} ${this.isCrosspostable&&s.isUserEligible()&&this.isDesktopViewport?m(n.l({attributes:{className:d.c,"data-testid":s.id},leadingIcon:s.leadingIconRenderer({}),label:t.x`${s.label}`,onClick:s.onClick}),s.trackingAttributes):""} ${this.isEmbeddable&&r.isUserEligible()&&this.isDesktopViewport?m(n.l({attributes:{className:d.E,tabindex:"0","data-testid":r.id},leadingIcon:r.leadingIconRenderer({}),label:t.x`${r.label}`,onClick:r.onClick}),r.trackingAttributes):""} `:m(n.l({leadingIcon:o.leadingIconRenderer({}),label:`${o.label}`,onClick:o.onClick,attributes:{"data-testid":o.id}}),o.trackingAttributes),shouldRender:o.isUserEligible}}buildShareToModChatMenuItem({postAction:o,menuId:a,additionalEligibility:s}){const{id:r,onClick:d,leadingIconRenderer:l,trackingAttributes:u,isUserEligible:c}=o;return {id:r,menuId:a,packedRender:()=>m(t.x`<reddit-chat-anchor> <a href="https://chat.reddit.com/room/!lKfTYc3TTlSC4-lBD_Namg:reddit.com" class="no-underline"> ${n.l({label:"",leadingIcon:l({}),size:n.L.Small,onClick:d,attributes:{"data-testid":r}})}</a></reddit-chat-anchor>`,u),unpackedRender:()=>m(t.x` <faceplate-tracker source="moderator" action="click" noun="${this.modContentDiscussionContext?.eventContext?.noun}" data-faceplate-tracking-context="${JSON.stringify({subreddit:{id:this.modContentDiscussionContext?.eventContext?.subredditId,name:this.modContentDiscussionContext?.eventContext?.subredditName},post:{id:this.modContentDiscussionContext?.eventContext?.postId},...(this.modContentDiscussionContext?.eventContext?.roomId && {chat:{id:this.modContentDiscussionContext?.eventContext?.roomId}}),...(this.modContentDiscussionContext?.eventContext?.commentId && {comment:{id:this.modContentDiscussionContext?.eventContext?.commentId}})})}"> <reddit-chat-anchor> <a href="https://chat.reddit.com/room/!lKfTYc3TTlSC4-lBD_Namg:reddit.com" class="no-underline"> <div class="relative"> ${i.c({appearance:"plain-weak",attributes:{onclick:d,className:"relative shrink-0","data-testid":r},size:e.a7.Small,leadingIcon:l({size:t.I.Small})})} </div> </a></reddit-chat-anchor></faceplate-tracker>`,u),shouldRender:()=>c()&&(!s||s()),alwaysRenderPacked:!1};}pinToProfileMenuItem(e){return this.buildGenericMenuItem({postAction:e.pinToProfile,menuId:this.defaultActionsMenu.id})}};function m(e,i){return i?t.x` <faceplate-tracker class="nd:visible contents" source="${i.source}" action="${i.action}" noun="${i.noun}"> ${e} </faceplate-tracker> `:e}return e._([e.n({type:Boolean,attribute:"should-include-mod-actions"})],c.prototype,"shouldIncludeModActions",void 0),e._([e.n({type:Boolean,attribute:"mod-mode"})],c.prototype,"modMode",void 0),e._([e.n({type:String,attribute:"primary-button-appearance"})],c.prototype,"primaryButtonAppearance",void 0),c=e._([e.e("unpacking-overflow-menu")],c),{get UnpackingOverflowMenu(){return c}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("CCpWedFj",["GlDbwxoG","CC2wUKE8","s_Igk1Yn"],(async(e,t,r)=>{let a=class extends r.s{constructor(){super(...arguments),this.siteKey="",this.execute=async()=>{try{const e=this.getConfig();if(!e||!this.recaptchaController)return!1;this.recaptchaController.config.siteKey!==e.siteKey&&(this.recaptchaController.destroy(),this.recaptchaController=new t.aQ({siteKey:e.siteKey}));const r=await this.recaptchaController.loadAndGenerateTokenSafe(e.pageType);if(r){const e=await this.sendToken(r);if(!e)throw new Error("Failed to transport reputation recaptcha token");if(e.errors&&e.errors.length>0)throw new Error(e.errors[0].message||"Failed to transport reputation recaptcha token");if(!1===e.data?.createCaptchaToken?.ok)throw new Error("Failed to transport reputation recaptcha token")}return!0}catch(e){return e instanceof Error&&window.Sentry?.captureException(e),!1}}}connectedCallback(){super.connectedCallback(),this.siteKey&&(this.recaptchaController=new t.aQ({siteKey:this.siteKey})),window.addEventListener("afterRoute",this.execute),this.execute()}disconnectedCallback(){window.removeEventListener("afterRoute",this.execute),this.recaptchaController?.destroy(),super.disconnectedCallback()}async getToken(e){const{siteKey:r}=this;let a=this.recaptchaController,n=!1;a&&a.config.siteKey===r||(a=new t.aQ({siteKey:r}),n=!0);try{const t=await a.generateTokenSafe(e);if(!t)throw new Error("Failed to generate reCAPTCHA token");return t}finally{n&&a.destroy()}}async sendToken(t){return e.B({operation:e.C.CreateCaptchaToken,variables:{input:{token:t}}})}getPageType(){return e.w()}getConfig(){const{siteKey:e}=this;if(!e)return null;const t=this.getPageType();return t?{pageType:t,siteKey:e}:null}};e._([e.n({type:String,attribute:"site-key"})],a.prototype,"siteKey",void 0),a=e._([e.e("reputation-recaptcha")],a);var n=Object.freeze({__proto__:null,get ReputationRecaptcha(){return a}});return{get i(){return n}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./DBtvA_IR.js",import.meta.url,"DBtvA_IR");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DQ-2YbuL.js",import.meta.url,"DQ-2YbuL");SML.di("./wFIF_OFn.js",import.meta.url,"wFIF_OFn");SML.di("./CU4mObWU.js",import.meta.url,"CU4mObWU");SML.di("./B4wbfaco.js",import.meta.url,"B4wbfaco");SML.di("./BKWigrHj.js",import.meta.url,"BKWigrHj");SML.di("./FaYkg4Io.js",import.meta.url,"FaYkg4Io");SML.di("./EI0o9e89.js",import.meta.url,"EI0o9e89");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./CXKmVoy4.js",import.meta.url,"CXKmVoy4");SML.di("./CDFmhs-S.js",import.meta.url,"CDFmhs-S");SML.di("./MX9FaClF.js",import.meta.url,"MX9FaClF");SML.di("./DzMpUNmB.js",import.meta.url,"DzMpUNmB");SML.di("./DtcD-j6p.js",import.meta.url,"DtcD-j6p");SML.di("./Dy1394uh.js",import.meta.url,"Dy1394uh");SML.di("./DSgcmNT3.js",import.meta.url,"DSgcmNT3");SML.di("./DuMDg_pA.js",import.meta.url,"DuMDg_pA");SML.di("./YRJ6wR80.js",import.meta.url,"YRJ6wR80");SML.di("./BamxgHcE.js",import.meta.url,"BamxgHcE");SML.di("./C3V_tmXg.js",import.meta.url,"C3V_tmXg");SML.di("./CjqcW8YI.js",import.meta.url,"CjqcW8YI");SML.di("./k6T7mA5v.js",import.meta.url,"k6T7mA5v");SML.di("./8tELWdqF.js",import.meta.url,"8tELWdqF");SML.di("./D9vf8s3n.js",import.meta.url,"D9vf8s3n");SML.di("./p53_mOdF.js",import.meta.url,"p53_mOdF");SML.di("./BJSmnD7s.js",import.meta.url,"BJSmnD7s");SML.di("./DzK3xEza.js",import.meta.url,"DzK3xEza");SML.di("./BhFZ7wtj.js",import.meta.url,"BhFZ7wtj");SML.di("./CYLwRRPY.js",import.meta.url,"CYLwRRPY");SML.di("./CKtUor7l.js",import.meta.url,"CKtUor7l");SML.di("./jTp_btYX.js",import.meta.url,"jTp_btYX");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");SML.di("./BTMXBfyY.js",import.meta.url,"BTMXBfyY");SML.di("./CAd-sfst.js",import.meta.url,"CAd-sfst");SML.di("./BM-DpnLu.js",import.meta.url,"BM-DpnLu");SML.di("./Be8KYlVI.js",import.meta.url,"Be8KYlVI");SML.di("./Bvcfbv8-.js",import.meta.url,"Bvcfbv8-");SML.di("./DR8uYI_f.js",import.meta.url,"DR8uYI_f");SML.di("./jzNEIPwx.js",import.meta.url,"jzNEIPwx");SML.di("./BvOcWFza.js",import.meta.url,"BvOcWFza");SML.di("./Ds3iHAvh.js",import.meta.url,"Ds3iHAvh");SML.di("./Dpra1UnG.js",import.meta.url,"Dpra1UnG");SML.di("./B-rjeALe.js",import.meta.url,"B-rjeALe");SML.di("./C-lRMeGe.js",import.meta.url,"C-lRMeGe");SML.di("./S5oUweHp.js",import.meta.url,"S5oUweHp");SML.di("./ZU4mPORS.js",import.meta.url,"ZU4mPORS");SML.di("./BTMr9sPC.js",import.meta.url,"BTMr9sPC");SML.di("./DgY18AyY.js",import.meta.url,"DgY18AyY");SML.di("./DyIkawXc.js",import.meta.url,"DyIkawXc");SML.di("./C7Ws8ntA.js",import.meta.url,"C7Ws8ntA");SML.di("./Co1JScDL.js",import.meta.url,"Co1JScDL");SML.di("./BTgalZoS.js",import.meta.url,"BTgalZoS");SML.di("./Cjw2ByTc.js",import.meta.url,"Cjw2ByTc");SML.di("./FagDXDzk.js",import.meta.url,"FagDXDzk");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");SML.di("./BkqliFNc.js",import.meta.url,"BkqliFNc");SML.di("./BHxN-XG0.js",import.meta.url,"BHxN-XG0");SML.di("./fnKkpEwQ.js",import.meta.url,"fnKkpEwQ");SML.di("./CIi1v1l_.js",import.meta.url,"CIi1v1l_");SML.di("./9ZdgYdsr.js",import.meta.url,"9ZdgYdsr");SML.di("./B5aCBAWI.js",import.meta.url,"B5aCBAWI");SML.di("./C38sKiaF.js",import.meta.url,"C38sKiaF");SML.di("./CGzEIBwW.js",import.meta.url,"CGzEIBwW");SML.di("./DK2EuOAl.js",import.meta.url,"DK2EuOAl");SML.di("./DNASVThB.js",import.meta.url,"DNASVThB");SML.di("./8qD_qMhm.js",import.meta.url,"8qD_qMhm");SML.di("./DwHTSY-I.js",import.meta.url,"DwHTSY-I");SML.di("./C_OcidZ-.js",import.meta.url,"C_OcidZ-");SML.di("./BktidS9F.js",import.meta.url,"BktidS9F");SML.di("./Bvty6Dj7.js",import.meta.url,"Bvty6Dj7");SML.di("./CJ4Bucp-.js",import.meta.url,"CJ4Bucp-");SML.di("./DdoeBlGT.js",import.meta.url,"DdoeBlGT");SML.di("./CZ7YNHqf.js",import.meta.url,"CZ7YNHqf");SML.di("./DMa5Y6a9.js",import.meta.url,"DMa5Y6a9");
SML.dm("CJv_r4sy",["GlDbwxoG","DBtvA_IR","s_Igk1Yn","DQ-2YbuL","wFIF_OFn","CU4mObWU","B4wbfaco","BKWigrHj","FaYkg4Io","EI0o9e89","CC2wUKE8","CXKmVoy4","CDFmhs-S","MX9FaClF","DzMpUNmB","DtcD-j6p","Dy1394uh","DSgcmNT3","DuMDg_pA","YRJ6wR80","BamxgHcE","C3V_tmXg","CjqcW8YI","k6T7mA5v","8tELWdqF","D9vf8s3n","p53_mOdF","BJSmnD7s","DzK3xEza","BhFZ7wtj","CYLwRRPY","CKtUor7l","jTp_btYX","DRM-oTYq","BTMXBfyY","CAd-sfst","BM-DpnLu","Be8KYlVI","Bvcfbv8-","DR8uYI_f","jzNEIPwx","BvOcWFza","Ds3iHAvh","Dpra1UnG","B-rjeALe","C-lRMeGe","S5oUweHp","ZU4mPORS","BTMr9sPC","DgY18AyY","DyIkawXc","C7Ws8ntA","Co1JScDL","BTgalZoS","Cjw2ByTc","FagDXDzk","D-MAMWlw","BkqliFNc","BHxN-XG0","fnKkpEwQ","CIi1v1l_","9ZdgYdsr","B5aCBAWI","C38sKiaF","CGzEIBwW","DK2EuOAl","DNASVThB","8qD_qMhm","DwHTSY-I","C_OcidZ-","BktidS9F","Bvty6Dj7","CJ4Bucp-","DdoeBlGT","CZ7YNHqf","DMa5Y6a9"],(async(E,T,D)=>{let _=class extends T.ShredditPostOverflowMenu{get eligibleActions(){return[this.getDefaultActions().showFewer].filter((E=>E.isUserEligible()))}renderOverflowMenuItems(){return D.x`${this.eligibleActions.map(this.renderMenuItem)}`}render(){return this.eligibleActions.length?super.render():D.x``}};return _=E._([E.e("recommendation-context-overflow-menu")],_),{get RecommendationContextOverflowMenu(){return _}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./C38sKiaF.js",import.meta.url,"C38sKiaF");SML.di("./CPBi7rr2.js",import.meta.url,"CPBi7rr2");SML.di("./rPGPQWBN.js",import.meta.url,"rPGPQWBN");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");
SML.dm("Ce9d1EzB",["GlDbwxoG","C38sKiaF","CPBi7rr2","rPGPQWBN","s_Igk1Yn","CC2wUKE8"],(async(a,r,e,i,t)=>{var n;!function(a){a.LEFT="left",a.RIGHT="right",a.BOTTOM="bottom"}(n||(n={}));let l=class extends t.s{constructor(){super(...arguments),this.leftSidebar=null,this.rightSidebar=null,this.bottomBar=null,this.handleNavigationClick=(r,e)=>{if(r.preventDefault(),r.stopPropagation(),e===n.LEFT&&s(this.leftSidebar))return this.leftSidebar.focusContents();let i;switch(e){case n.LEFT:i=this.leftSidebar;break;case n.BOTTOM:i=this.bottomBar?.portalContainer||this.bottomBar;break;case n.RIGHT:default:i=this.rightSidebar}if(i){const r=a.aQ(i);r?r.focus():i.focus()}}}connectedCallback(){super.connectedCallback(),this.leftSidebar=document.getElementById(i.a.LeftSidebarContainer),this.rightSidebar=document.getElementById("right-sidebar-container"),this.bottomBar=document.getElementById("email-capture-bottom-sheet")}render(){return t.x`${this.leftSidebar?t.x`${r.a({attributes:{href:"#left-sidebar-container",onclick:a=>this.handleNavigationClick(a,n.LEFT),className:"sr-only focus:not-sr-only hidden m:inline-block"},children:"Skip to Navigation"})} `:""}${this.rightSidebar?t.x`${r.a({attributes:{href:"#right-sidebar-container",onclick:a=>this.handleNavigationClick(a,n.RIGHT),className:"sr-only focus:not-sr-only hidden m:inline-block"},children:"Skip to Right Sidebar"})} `:""} ${this.bottomBar?t.x`${r.a({attributes:{href:"#bottom-bar-container",onclick:a=>this.handleNavigationClick(a,n.BOTTOM),className:"sr-only focus:not-sr-only hidden m:inline-block"},children:"Skip to Bottom Bar"})} `:""}`;}};l.styles=[a.t],l=a._([a.e("reddit-skip-to-sidebar")],l);const s=a=>a instanceof e.F;return{get RedditSkipToSidebar(){return l}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./DQ-2YbuL.js",import.meta.url,"DQ-2YbuL");SML.di("./wFIF_OFn.js",import.meta.url,"wFIF_OFn");SML.di("./B4wbfaco.js",import.meta.url,"B4wbfaco");SML.di("./BKWigrHj.js",import.meta.url,"BKWigrHj");SML.di("./CXKmVoy4.js",import.meta.url,"CXKmVoy4");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./DzMpUNmB.js",import.meta.url,"DzMpUNmB");SML.di("./DtcD-j6p.js",import.meta.url,"DtcD-j6p");SML.di("./Dy1394uh.js",import.meta.url,"Dy1394uh");SML.di("./DRM-oTYq.js",import.meta.url,"DRM-oTYq");SML.di("./CU4mObWU.js",import.meta.url,"CU4mObWU");SML.di("./FaYkg4Io.js",import.meta.url,"FaYkg4Io");SML.di("./EI0o9e89.js",import.meta.url,"EI0o9e89");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./CDFmhs-S.js",import.meta.url,"CDFmhs-S");SML.di("./MX9FaClF.js",import.meta.url,"MX9FaClF");SML.di("./DSgcmNT3.js",import.meta.url,"DSgcmNT3");SML.di("./DuMDg_pA.js",import.meta.url,"DuMDg_pA");SML.di("./YRJ6wR80.js",import.meta.url,"YRJ6wR80");SML.di("./BamxgHcE.js",import.meta.url,"BamxgHcE");SML.di("./C3V_tmXg.js",import.meta.url,"C3V_tmXg");SML.di("./CjqcW8YI.js",import.meta.url,"CjqcW8YI");SML.di("./k6T7mA5v.js",import.meta.url,"k6T7mA5v");SML.di("./8tELWdqF.js",import.meta.url,"8tELWdqF");SML.di("./D9vf8s3n.js",import.meta.url,"D9vf8s3n");SML.di("./p53_mOdF.js",import.meta.url,"p53_mOdF");SML.di("./BJSmnD7s.js",import.meta.url,"BJSmnD7s");SML.di("./DzK3xEza.js",import.meta.url,"DzK3xEza");SML.di("./BhFZ7wtj.js",import.meta.url,"BhFZ7wtj");SML.di("./CYLwRRPY.js",import.meta.url,"CYLwRRPY");SML.di("./CKtUor7l.js",import.meta.url,"CKtUor7l");SML.di("./jTp_btYX.js",import.meta.url,"jTp_btYX");SML.di("./BTMXBfyY.js",import.meta.url,"BTMXBfyY");SML.di("./CAd-sfst.js",import.meta.url,"CAd-sfst");SML.di("./BM-DpnLu.js",import.meta.url,"BM-DpnLu");SML.di("./Be8KYlVI.js",import.meta.url,"Be8KYlVI");SML.di("./Bvcfbv8-.js",import.meta.url,"Bvcfbv8-");SML.di("./DR8uYI_f.js",import.meta.url,"DR8uYI_f");SML.di("./jzNEIPwx.js",import.meta.url,"jzNEIPwx");SML.di("./BvOcWFza.js",import.meta.url,"BvOcWFza");SML.di("./Ds3iHAvh.js",import.meta.url,"Ds3iHAvh");SML.di("./Dpra1UnG.js",import.meta.url,"Dpra1UnG");SML.di("./B-rjeALe.js",import.meta.url,"B-rjeALe");SML.di("./C-lRMeGe.js",import.meta.url,"C-lRMeGe");SML.di("./S5oUweHp.js",import.meta.url,"S5oUweHp");SML.di("./ZU4mPORS.js",import.meta.url,"ZU4mPORS");SML.di("./BTMr9sPC.js",import.meta.url,"BTMr9sPC");SML.di("./DgY18AyY.js",import.meta.url,"DgY18AyY");SML.di("./DyIkawXc.js",import.meta.url,"DyIkawXc");SML.di("./C7Ws8ntA.js",import.meta.url,"C7Ws8ntA");SML.di("./Co1JScDL.js",import.meta.url,"Co1JScDL");SML.di("./BTgalZoS.js",import.meta.url,"BTgalZoS");SML.di("./Cjw2ByTc.js",import.meta.url,"Cjw2ByTc");SML.di("./FagDXDzk.js",import.meta.url,"FagDXDzk");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");SML.di("./BkqliFNc.js",import.meta.url,"BkqliFNc");SML.di("./BHxN-XG0.js",import.meta.url,"BHxN-XG0");SML.di("./fnKkpEwQ.js",import.meta.url,"fnKkpEwQ");SML.di("./CIi1v1l_.js",import.meta.url,"CIi1v1l_");SML.di("./9ZdgYdsr.js",import.meta.url,"9ZdgYdsr");SML.di("./B5aCBAWI.js",import.meta.url,"B5aCBAWI");SML.di("./C38sKiaF.js",import.meta.url,"C38sKiaF");SML.di("./CGzEIBwW.js",import.meta.url,"CGzEIBwW");SML.di("./DK2EuOAl.js",import.meta.url,"DK2EuOAl");SML.di("./DNASVThB.js",import.meta.url,"DNASVThB");SML.di("./8qD_qMhm.js",import.meta.url,"8qD_qMhm");SML.di("./DwHTSY-I.js",import.meta.url,"DwHTSY-I");SML.di("./C_OcidZ-.js",import.meta.url,"C_OcidZ-");SML.di("./BktidS9F.js",import.meta.url,"BktidS9F");SML.di("./Bvty6Dj7.js",import.meta.url,"Bvty6Dj7");SML.di("./CJ4Bucp-.js",import.meta.url,"CJ4Bucp-");SML.di("./DdoeBlGT.js",import.meta.url,"DdoeBlGT");SML.di("./CZ7YNHqf.js",import.meta.url,"CZ7YNHqf");SML.di("./DMa5Y6a9.js",import.meta.url,"DMa5Y6a9");
SML.dm("DBtvA_IR",["GlDbwxoG","s_Igk1Yn","DzMpUNmB","DtcD-j6p","Dy1394uh","DRM-oTYq","DQ-2YbuL","wFIF_OFn","B4wbfaco","BKWigrHj","CXKmVoy4","CU4mObWU","FaYkg4Io","EI0o9e89","CC2wUKE8","CDFmhs-S","MX9FaClF","DSgcmNT3","DuMDg_pA","YRJ6wR80","BamxgHcE","C3V_tmXg","CjqcW8YI","k6T7mA5v","8tELWdqF","D9vf8s3n","p53_mOdF","BJSmnD7s","DzK3xEza","BhFZ7wtj","CYLwRRPY","CKtUor7l","jTp_btYX","BTMXBfyY","CAd-sfst","BM-DpnLu","Be8KYlVI","Bvcfbv8-","DR8uYI_f","jzNEIPwx","BvOcWFza","Ds3iHAvh","Dpra1UnG","B-rjeALe","C-lRMeGe","S5oUweHp","ZU4mPORS","BTMr9sPC","DgY18AyY","DyIkawXc","C7Ws8ntA","Co1JScDL","BTgalZoS","Cjw2ByTc","FagDXDzk","D-MAMWlw","BkqliFNc","BHxN-XG0","fnKkpEwQ","CIi1v1l_","9ZdgYdsr","B5aCBAWI","C38sKiaF","CGzEIBwW","DK2EuOAl","DNASVThB","8qD_qMhm","DwHTSY-I","C_OcidZ-","BktidS9F","Bvty6Dj7","CJ4Bucp-","DdoeBlGT","CZ7YNHqf","DMa5Y6a9"],(async(e,t,E,r,T,i)=>{let o=class extends(T.W(t.s)){constructor(){super(...arguments),this.shouldRenderFollowMenuItem=!1,this.shouldSsrReportAction=!1,this.closeMenu=()=>{this.bottomSheet?.close(),this.dropdownMenu?.hide(),setTimeout((()=>{this.shadowRoot?.getElementById("overflow-trigger")?.focus({preventScroll:!0})}))},this.handleKeyUp=e=>{"Enter"!==e.key&&"Space"!==e.key||this.closeMenu()},this.onFeedbackTooltipClosed=()=>{this.isDesktopViewport?this.dropdownMenu?.show():this.bottomSheet?.showModal()},this.openBottomSheet=()=>{e.f(this,i.z(this.postViewContext)),this.bottomSheet?.showModal(),this.onMenuOpened?.()},this.handleDevvitSlotChange=e=>{e.target.assignedElements().forEach((e=>{"hr"!==e.tagName.toLowerCase()&&e.setAttribute("role","menuitem")}))},this.renderMenuItem=e=>{if("report"===e.id&&this.shouldSsrReportAction)return t.x`<slot name="report-action"></slot>`;const{label:r,onClick:T,href:i,target:o,trackingAttributes:a,leadingIconRenderer:s,description:n,disabled:D}=e;return function(e,E){return E?t.x` <faceplate-tracker class="nd:visible contents" source="${E.source}" action="${E.action}" noun="${E.noun}"> ${e} </faceplate-tracker> `:e}(E.l({attributes:{id:`post-overflow-${e.id}`,role:"menuitem"},label:t.x`${r}`,leadingIcon:s({}),size:E.L.Small,href:i||void 0,anchorAttributes:{target:o},onClick:T,disabled:D,description:n}),a)}}get dropdownMenu(){return this.shadowRoot?.querySelector("rpl-dropdown")}get bottomSheet(){return this.shadowRoot?.querySelector("faceplate-bottom-sheet")}renderActionSheet(){return t.x` <faceplate-bottom-sheet id="post-overflow-menu-bottom-sheet"> <faceplate-bottom-sheet-header slot="header" has-divider> ${"Options"} <span slot="trailing"> ${e.Y({appearance:"secondary",attributes:{onclick:this.closeMenu,"aria-label":"Close actions menu"},leadingIcon:t.c({size:t.I.Small}),size:e.a7.Small})} </span> </faceplate-bottom-sheet-header> <div @click="${this.closeMenu}" @keyup="${this.handleKeyUp}" class="w-full max-h-[19rem] overflow-y-auto pb-md"> ${this.renderOverflowMenuItems()} </div> </faceplate-bottom-sheet> `;}get overflowActions(){const e=this.getDefaultActions();return [...(this.shouldRenderFollowMenuItem ? [e.follow] : []),e.startEndAma,e.showFewer,e.amaCollaborators,e.edit,e.editPostFlair,e.save,e.promotePost,e.pinToProfile,e.hide,e.translationSetting,e.languageAndTranslations,e.recommendationContext,e.showLanguageLinks,this.shouldSsrReportAction?(E="report",{id:E,label:"",leadingIconRenderer:()=>t.x``,isUserEligible:()=>!0,onClick:()=>{}}):e.report,e.delete,e.adminDistinguish,e.spoilerTag,e.nsfwTag,e.brandAffiliate,e.replyNotifs,e.aboutThisAd,e.premiumUpsell].filter((e=>e.isUserEligible()));var E}renderOverflowMenuItems(){return t.x` ${this.overflowActions.map(this.renderMenuItem)} <slot name="devvit-context-actions" @slotchange="${this.handleDevvitSlotChange}"></slot> `}renderOverflowMenuButton(){return e.Y({appearance:"plain",attributes:{id:"overflow-trigger",onclick:this.openBottomSheet,"aria-label":"Open user actions"},leadingIcon:r.o({size:t.I.Small}),size:e.a7.Small});}renderDropdownMenu(){return t.x` <rpl-dropdown placement="bottom-end"> ${this.renderOverflowMenuButton()} <faceplate-menu @click="${this.closeMenu}" @keyup="${this.handleKeyUp}" slot="content" class="whitespace-nowrap max-h-[25.5rem] overflow-y-auto rounded-1"> ${this.renderOverflowMenuItems()} </faceplate-menu> </rpl-dropdown> `}render(){const E=t.x` <div data-post-click-location="${e.eU.OVERFLOW_BUTTON}"> ${this.isDesktopViewport?this.renderDropdownMenu():t.x`${this.renderOverflowMenuButton()} ${this.renderActionSheet()}`} </div> `;return this.i18nFeedbackCoachmarkEligible?t.x`<feedback-tooltip-overflow-menu @feedback-tooltip-closed="${this.onFeedbackTooltipClosed}"> ${E} </feedback-tooltip-overflow-menu>`:E}};return o.styles=[e.t],e._([e.n({type:Boolean,attribute:"i18n-feedback-coachmark-eligible"})],o.prototype,"i18nFeedbackCoachmarkEligible",void 0),e._([e.n({type:Boolean,attribute:"should-render-follow-menu-item",reflect:!0})],o.prototype,"shouldRenderFollowMenuItem",void 0),e._([e.n({type:Boolean,attribute:"should-ssr-report-action"})],o.prototype,"shouldSsrReportAction",void 0),o=e._([e.e("shreddit-post-overflow-menu")],o),{get ShredditPostOverflowMenu(){return o}}}));
SML.dm("DWuToIrb",[],(async()=>{function t(t){return function(t){return!!t}(t)&&("string"==typeof t.type||"symbol"==typeof t.type)}class e extends Error{constructor(t){super("AbortError"+(t?`: ${t}`:"")),this.name="AbortError"}}function n(t){return t instanceof Error&&"AbortError"===t.name}class i extends Error{constructor(t){super("InvalidStateError"+(t?`: ${t}`:"")),this.name="InvalidStateError"}}function r(e){return t(e)&&function(t){return t.hasOwnProperty("signal")}(e)&&function(t){return function(t){return"object"==typeof t}(t)&&"boolean"==typeof t.aborted&&"function"==typeof t.addEventListener}(e.signal)}function o(t,e){if(r(t)&&t.signal.aborted&&e instanceof Error&&n(e))return!0}const s=Symbol.for("@opennetwork/environment/events/target/listeners"),a=Symbol.for("@opennetwork/environment/events/target/listeners/ignore"),c=Symbol.for("@opennetwork/environment/events/target/listeners/match"),u=Symbol.for("@opennetwork/environment/events/target/listeners/this"),h=Symbol.for("@opennetwork/environment/events/descriptor");function l(t,e,n){const i=function(t){return function(t){return!!t}(t)&&!0===t[h]}(n)?n:void 0;return n=>i?i===n:(!e||e===n.callback)&&t===n.type}function d(t){return"function"==typeof t}const f=Symbol.for("@virtualstate/navigation/event-target/descriptors");class g{[f]=[];[a]=new WeakSet;get[s](){return[...this[f]??[]]}[c](t){const e=this[s],n=[...new Set([...e??[],...this[f]??[]])].filter((e=>e.type===t||"*"===e.type)).filter((t=>!this[a]?.has(t))),i="string"==typeof t?this[`on${t}`]:void 0;return"function"==typeof i&&d(i)&&n.push({type:t,callback:i,[h]:!0}),n}addEventListener(t,e,n){const i={...n,isListening:()=>!!this[f]?.find(l(t,e)),descriptor:{[h]:!0,...n,type:t,callback:e},timestamp:Date.now()};i.isListening()||this[f]?.push(i.descriptor)}removeEventListener(t,e,n){if(!d(e))return;const i=this[s]??this[f]??[],r=i.findIndex(l(t,e,n));if(-1===r)return;const o=this[f]?.findIndex(l(t,e,n))??-1;-1!==o&&this[f]?.splice(o,1);const c=i[r];c&&this[a]?.add(c)}hasEventListener(t,e){if(e&&!d(e))return!1;return(this[f]?.findIndex(l(t,e))??-1)>-1}}class p extends g{[u];constructor(t=void 0){super(),this[u]=t}async dispatchEvent(n){const i=this[c]?.(n.type)??[];if(r(n)&&n.signal.aborted)throw new e;const s=t(a=n)&&!1!==a.parallel;var a;const h=[];for(let t=0;t<i.length;t+=1){const e=i[t],a=(async()=>{e.once&&this.removeEventListener(e.type,e.callback,e),await e.callback.call(this[u]??this,n)})();if(s)h.push(a);else{try{await a}catch(t){o(n,t)||await Promise.reject(t)}if(r(n)&&n.signal.aborted)return}}if(h.length){const t=(await Promise.allSettled(h)).filter((t=>"rejected"===t.status));if(t.length){let e=t;if(r(n)&&n.signal.aborted&&(e=e.filter((t=>!o(n,t.reason)))),1===e.length)throw await Promise.reject(e[0].reason),e[0].reason;if(e.length>1)throw new AggregateError(e.map((({reason:t})=>t)))}}}}const y={EventTarget:p,AsyncEventTarget:p,SyncEventTarget:p}.EventTarget;class v extends p{constructor(...t){super();{!function(t){if("function"!=typeof t)throw new Error("Could not load EventTarget implementation")}(y);const{dispatchEvent:e}=new y(...t);this.dispatchEvent=e}}}class m extends v{addEventListener(t,e,n){return function(t){if("function"!=typeof t)throw new Error("Please us the function variant of event listener")}(e),super.addEventListener(t,e,"boolean"==typeof n?{once:n}:n)}removeEventListener(t,e,n){return function(t){if("function"!=typeof t)throw new Error("Please us the function variant of event listener")}(e),super.removeEventListener(t,e)}}const w="crypto"in globalThis&&"function"==typeof globalThis.crypto.randomUUID?globalThis.crypto.randomUUID.bind(globalThis.crypto):()=>Array.from({length:5},(()=>`${Math.random()}`.replace(/^0\./,""))).join("-").replace(".",""),b=Symbol.for("@virtualstate/navigation/getState"),E=Symbol.for("@virtualstate/navigation/entry/navigationType"),S=Symbol.for("@virtualstate/navigation/entry/knownAs"),k=Symbol.for("@virtualstate/navigation/entry/setState");function x(t){return"number"==typeof t||"boolean"==typeof t||"symbol"==typeof t||"bigint"==typeof t||"string"==typeof t}function T(t){return!(!t&&!x(t))}class L extends m{#t;#e;get index(){return"number"==typeof this.#t?this.#t:this.#t()}key;id;url;sameDocument;get[E](){return this.#n.navigationType}get[S](){const t=new Set(this.#n[S]);return t.add(this.id),t}#n;get[s](){return[...super[s]??[],...this.#n[s]??[]]}constructor(t){super(),this.#n=t,this.key=t.key||w(),this.id=w(),this.url=t.url??void 0,this.#t=t.index,this.sameDocument=t.sameDocument??!0,this.#e=t.state??void 0}[b](){return this.#n?.getState?.(this)}getState(){let t=this.#e;if(!T(t)){const e=this[b]();T(e)&&(t=this.#e=e)}return void 0===t||x(t)?t:("function"==typeof t&&(console.warn("State passed to Navigation.navigate was a function, this may be unintentional"),console.warn("Unless a state value is primitive, with a standard implementation of Navigation"),console.warn("your state value will be serialized and deserialized before this point, meaning"),console.warn("a function would not be usable.")),{...t})}[k](t){this.#e=t}}function P(t){let e,n;const i=new Promise(((t,i)=>{e=t,n=i}));return I(e),I(n),{resolve:e,reject:n,promise:t?i.catch(t):i}}function I(t){if(!t)throw new Error("Value not provided")}const U="undefined"!=typeof AbortController?AbortController:void 0;if(!U)throw new Error("AbortController expected to be available or polyfilled");const R=U;function j(t){return O(t)&&"function"==typeof t.then}function C(t,e="Expected value"){if(!t)throw new Error(e)}function D(t){return"rejected"===t.status}function O(t){return!!t}const N=Symbol.for("@virtualstate/navigation/rollback"),A=Symbol.for("@virtualstate/navigation/unset"),F=Symbol.for("@virtualstate/navigation/transition/parentEventTarget"),q=Symbol.for("@virtualstate/navigation/transition/deferred/finished"),M=Symbol.for("@virtualstate/navigation/transition/deferred/committed"),$=Symbol.for("@virtualstate/navigation/transition/navigationType"),B=Symbol.for("@virtualstate/navigation/transition/entries/initial"),H=Symbol.for("@virtualstate/navigation/transition/entries/finished"),V=Symbol.for("@virtualstate/navigation/transition/index/initial"),W=Symbol.for("@virtualstate/navigation/transition/index/finished"),z=Symbol.for("@virtualstate/navigation/transition/entry"),K=Symbol.for("@virtualstate/navigation/transition/isCommitted"),_=Symbol.for("@virtualstate/navigation/transition/isFinished"),J=Symbol.for("@virtualstate/navigation/transition/isRejected"),G=Symbol.for("@virtualstate/navigation/transition/known"),Y=Symbol.for("@virtualstate/navigation/transition/promises"),Q=Symbol.for("@virtualstate/navigation/intercept"),X=Symbol.for("@virtualstate/navigation/transition/isOngoing"),Z=Symbol.for("@virtualstate/navigation/transition/isPending"),tt=Symbol.for("@virtualstate/navigation/transition/isAsync"),et=Symbol.for("@virtualstate/navigation/transition/wait"),nt=Symbol.for("@virtualstate/navigation/transition/promise/resolved"),it=Symbol.for("@virtualstate/navigation/transition/rejected"),rt=Symbol.for("@virtualstate/navigation/transition/commit"),ot=Symbol.for("@virtualstate/navigation/transition/finish"),st=Symbol.for("@virtualstate/navigation/transition/start"),at=Symbol.for("@virtualstate/navigation/transition/start/deadline"),ct=Symbol.for("@virtualstate/navigation/transition/error"),ut=Symbol.for("@virtualstate/navigation/transition/finally"),ht=Symbol.for("@virtualstate/navigation/transition/abort"),lt=Symbol.for("@virtualstate/navigation/transition/intercept/options/commit"),dt=Symbol.for("@virtualstate/navigation/transition/commit/isManual");class ft extends v{finished;committed;from;navigationType;[tt]=!1;[lt];#n;[q]=P();[M]=P();get[Z](){return!!this.#i.size}get[$](){return this.#n[$]}get[B](){return this.#n[B]}get[V](){return this.#n[V]}get[dt](){return!(!this[lt]?.includes("after-transition")&&!this[lt]?.includes("manual"))}[H];[W];[K]=!1;[_]=!1;[J]=!1;[X]=!1;[G]=new Set;[z];#i=new Set;#r=!1;#o=new R;get signal(){return this.#o.signal}get[Y](){return this.#i}constructor(t){super(),this[lt]=[],this[q]=t[q]??this[q],this[M]=t[M]??this[M],this.#n=t;const n=this.finished=this[q].promise,i=this.committed=this[M].promise;n.catch((t=>t)),i.catch((t=>t)),this.from=t.from,this.navigationType=t.navigationType,this[H]=t[H],this[W]=t[W];const r=t[G];if(r)for(const t of r)this[G].add(t);this[z]=t[z],this.addEventListener(rt,this.#s,{once:!0}),this.addEventListener(ot,this.#a,{once:!0}),this.addEventListener(rt,this.#c,{once:!0}),this.addEventListener(ot,this.#u,{once:!0}),this.addEventListener(ct,this.#h,{once:!0}),this.addEventListener(ht,(()=>{if(!this[_])return this[it](new e)})),this.addEventListener("*",this[z].dispatchEvent.bind(this[z])),this.addEventListener("*",t[F].dispatchEvent.bind(t[F]))}rollback=t=>{if(this.#r)throw new i("Rollback invoked multiple times: Please raise an issue at https://github.com/virtualstate/navigation with the use case where you want to use a rollback multiple times, this may have been unexpected behaviour");return this.#r=!0,this.#n.rollback(t)};#c=()=>{this[K]=!0};#u=()=>{this[_]=!0};#a=()=>{this[q].resolve(this[z])};#s=()=>{this.signal.aborted||this[M].resolve(this[z])};#h=t=>this[it](t.error);[nt]=(...t)=>{for(const e of t)this.#i.delete(e)};[it]=async t=>{if(this[J])return;this[J]=!0,this[ht]();const e=this[$];if(("string"==typeof e||e===N)&&(await this.dispatchEvent({type:"navigateerror",error:t,get message(){return t instanceof Error?t.message:`${t}`}}),e!==N&&!((r=t)instanceof Error&&"InvalidStateError"===r.name||n(t))))try{await(this.rollback()?.finished)}catch(r){throw new i("Failed to rollback, please raise an issue at https://github.com/virtualstate/navigation/issues")}var r;this[M].reject(t),this[q].reject(t)};[Q]=t=>{const e=this,n=function(){if(!t)return;if(j(t))return t;if("function"==typeof t)return t();const{handler:n,commit:i}=t;i&&"string"==typeof i&&e[lt].push(i);if("function"!=typeof n)return;return n()}();if(this[X]=!0,!n)return;this[tt]=!0;const i=n.then((()=>({status:"fulfilled",value:void 0}))).catch((async t=>(await this[it](t),{status:"rejected",reason:t})));this.#i.add(i)};[et]=async()=>{if(!this.#i.size)return this[z];try{const t=[...this.#i],e=(await Promise.all(t)).filter((t=>"rejected"===t.status));if(e.length){if(1===e.length)throw e[0].reason;if("undefined"!=typeof AggregateError)throw new AggregateError(e.map((({reason:t})=>t)));throw new Error}return this[nt](...t),this[Z]?this[et]():this[z]}catch(t){throw await this.#h(t),await Promise.reject(t)}finally{await this[ot]()}};[ht](){this.#o.signal.aborted||(this.#o.abort(),this.dispatchEvent({type:ht,transition:this,entry:this[z]}))}[ot]=async()=>{this[_]||await this.dispatchEvent({type:ot,transition:this,entry:this[z],intercept:this[Q]})}}function gt(t){const e=function(){try{if("undefined"!=typeof window&&window.location)return window.location.href}catch{}}()??"https://html.spec.whatwg.org/";return new URL((t??"").toString(),e)}class pt{type;from;navigationType;constructor(t,e){if(this.type=t,!e)throw new TypeError("init required");if(!e.from)throw new TypeError("from required");this.from=e.from,this.navigationType=e.navigationType??void 0}}class yt{type;canIntercept;canTransition;destination;downloadRequest;formData;hashChange;info;signal;userInitiated;navigationType;constructor(t,e){if(this.type=t,!e)throw new TypeError("init required");if(!e.destination)throw new TypeError("destination required");if(!e.signal)throw new TypeError("signal required");this.canIntercept=e.canIntercept??!1,this.canTransition=e.canIntercept??!1,this.destination=e.destination,this.downloadRequest=e.downloadRequest,this.formData=e.formData,this.hashChange=e.hashChange??!1,this.info=e.info,this.signal=e.signal,this.userInitiated=e.userInitiated??!1,this.navigationType=e.navigationType??"push"}commit(){throw new Error("Not implemented")}intercept(t){throw new Error("Not implemented")}preventDefault(){throw new Error("Not implemented")}reportError(t){throw new Error("Not implemented")}scroll(){throw new Error("Not implemented")}transitionWhile(t){return this.intercept(t)}}const vt=Symbol.for("@virtualstate/navigation/formData"),mt=Symbol.for("@virtualstate/navigation/downloadRequest"),wt=Symbol.for("@virtualstate/navigation/canIntercept"),bt=Symbol.for("@virtualstate/navigation/userInitiated"),Et=Symbol.for("@virtualstate/navigation/originalEvent");function St(){}function kt(t){const{commit:e,currentIndex:n,options:r,known:o,currentEntry:s,transition:a,transition:{[B]:c,[z]:u,[Q]:h},reportError:l}=t;let{transition:{[$]:d}}=t,f=[...c];const g=new Set(o);let p=-1,y=n;if(d===N){const{index:t}=r??{index:void 0};if("number"!=typeof t)throw new i("Expected index to be provided for rollback");p=t,y=t}else"traverse"===d||"reload"===d?(p=function(t,e){const n=e.index;return-1!==n?n:-1}(0,u),y=p):"replace"===d?-1===n?(d="push",p=n+1,y=p):(p=n,y=n):(p=n+1,y=p);if("number"!=typeof p||-1===p)throw new i("Could not resolve next index");if(!u.url)throw console.trace({navigationType:d,entry:u,options:r}),new i("Expected entry url");const v={url:u.url,key:u.key,index:p,sameDocument:u.sameDocument,getState:()=>u.getState()};let m=!1;const w=gt(s?.url),b=new URL(v.url);if(w.hash!==b.hash){const t=new URL(w.toString());t.hash="";const e=new URL(b.toString());e.hash="",m=t.toString()===e.toString()}let E;const{resolve:S,promise:k}=function(){let t,e,n=!1,i="pending";const r=new Promise(((r,o)=>{t=t=>{i="fulfilled",n=!0,r(t)},e=t=>{i="rejected",n=!0,o(t)}}));return C(t),C(e),{get settled(){return n},get status(){return i},resolve:t,reject:e,promise:r}}();function x(){C(E,"Expected contextToCommit"),S(e(E))}const T=new R,L=new yt("navigate",{signal:T.signal,info:void 0,...r,canIntercept:r?.[wt]??!0,formData:r?.[vt]??void 0,downloadRequest:r?.[mt]??void 0,hashChange:m,navigationType:r?.navigationType??("string"==typeof d?d:"replace"),userInitiated:r?.[bt]??!1,destination:v}),P=r?.[Et],I=a[ht].bind(a);if(P){const t=P;L.intercept=function(e){return t.preventDefault(),h(e)},L.preventDefault=function(){return t.preventDefault(),I()}}else L.intercept=h,L.preventDefault=I;L.transitionWhile=L.intercept,L.commit=x,l&&(L.reportError=l),L.scroll=St,P&&(L.originalEvent=P);const U=new pt("currententrychange",{from:s,navigationType:L.navigationType});let j=[],D=[],O=[];const A=c.map((t=>t.key));if(d===N){const{entries:t}=r??{entries:void 0};if(!t)throw new i("Expected entries to be provided for rollback");f=t,f.forEach((t=>g.add(t)));const e=f.map((t=>t.key));D=c.filter((t=>!e.includes(t.key))),O=f.filter((t=>!A.includes(t.key)))}else if("replace"===d||"traverse"===d||"reload"===d){f[v.index]=u,"traverse"!==d&&j.push(u),"replace"===d&&(f=f.slice(0,v.index+1));const t=f.map((t=>t.key));D=c.filter((e=>!t.includes(e.key))),A.includes(u.id)&&(O=[u])}else if("push"===d){let t=!1;if(f[v.index]&&(f=f.slice(0,v.index),t=!0),f.push(u),O=[u],t){const t=f.map((t=>t.key));D=c.filter((e=>!t.includes(e.key)))}}let F;return g.add(u),(j.length||O.length||D.length)&&(F={updatedEntries:j,addedEntries:O,removedEntries:D}),E={entries:f,index:y,known:g,entriesChange:F},{entries:f,known:g,index:y,currentEntryChange:U,destination:v,navigate:L,navigationType:d,waitForCommit:k,commit:x,abortController:T}}function xt(e){if("undefined"!=typeof CustomEvent&&"string"==typeof e.type){if(e instanceof CustomEvent)return e;const{type:n,detail:i,...r}=e,o=new CustomEvent(n,{detail:i??r});return Object.assign(o,r),function(e,n){if(!t(e))throw new Error("Expected event");if(void 0!==n&&e.type!==n)throw new Error(`Expected event type ${String(n)}, got ${e.type.toString()}`)}(o,e.type),o}return e}const Tt=Symbol.for("@virtualstate/navigation/setOptions"),Lt=Symbol.for("@virtualstate/navigation/setEntries"),Pt=Symbol.for("@virtualstate/navigation/setCurrentIndex"),It=Symbol.for("@virtualstate/navigation/setCurrentKey"),Ut=Symbol.for("@virtualstate/navigation/getState"),Rt=Symbol.for("@virtualstate/navigation/setState"),jt=Symbol.for("@virtualstate/navigation/disposeState");class Ct extends m{#l=0;#d=[];#f=new Set;#g=-1;#p;#y=new WeakSet;#v="";#m=void 0;#n=void 0;get canGoBack(){return!!this.#d[this.#g-1]}get canGoForward(){return!!this.#d[this.#g+1]}get currentEntry(){return-1===this.#g?(this.#m||(this.#m=new L({getState:this[Ut],navigationType:"push",index:-1,sameDocument:!1,url:this.#v.toString()})),this.#m):this.#d[this.#g]}get transition(){const t=this.#p;return t?.signal.aborted?void 0:t}constructor(t={}){super(),this[Tt](t)}[Tt](t){this.#n=t,this.#v=gt(t?.baseURL),this.#d=[],t.entries&&this[Lt](t.entries),t.currentKey?this[It](t.currentKey):"number"==typeof t.currentIndex&&this[Pt](t.currentIndex)}[It](t){const e=this.#d.findIndex((e=>e.key===t));-1!==e&&(this.#g=e)}[Pt](t){t<=-1||t>=this.#d.length||(this.#g=t)}[Lt](t){this.#d=t.map((({key:t,url:e,navigationType:n,state:i,sameDocument:r},o)=>{return new L({getState:this[Ut],navigationType:(s=n,"reload"===s||"push"===s||"replace"===s||"traverse"===s?n:"push"),sameDocument:r??!0,index:o,url:e,key:t,state:i});var s})),-1===this.#g&&this.#d.length&&(this.#g=0)}[Ut]=t=>this.#n?.getState?.(t)??void 0;[Rt]=t=>this.#n?.setState?.(t);[jt]=t=>this.#n?.disposeState?.(t);back(t){if(!this.canGoBack)throw new i("Cannot go back");const e=this.#d[this.#g-1];return this.#w("traverse",this.#b(e,{...t,navigationType:"traverse"}))}entries(){return[...this.#d]}forward(t){if(!this.canGoForward)throw new i;const e=this.#d[this.#g+1];return this.#w("traverse",this.#b(e,{...t,navigationType:"traverse"}))}goTo(t,e){return this.traverseTo(t,e)}traverseTo(t,e){const n=this.#d.find((e=>e.key===t));if(n)return this.#w("traverse",this.#b(n,{...e,navigationType:"traverse"}));throw new i}#E=t=>{const e=this.currentEntry?.url;return!e||(n=new URL(e),i=new URL(t),n.origin===i.origin);var n,i};navigate(t,e){let n=this.#v;this.currentEntry?.url&&(n=this.currentEntry?.url);const i=new URL(t,n).toString();let r="push";"push"!==e?.history&&"replace"!==e?.history||(r=e?.history);const o=this.#S({getState:this[Ut],url:i,...e,sameDocument:this.#E(i),navigationType:r});return this.#w(r,o,void 0,e)}#b=(t,e)=>this.#S({...t,getState:this[Ut],index:t?.index??void 0,state:e?.state??t?.getState(),navigationType:t?.[E]??("string"==typeof e?.navigationType?e.navigationType:"replace"),...e,get[S](){return t?.[S]},get[s](){return t?.[s]}});#S=t=>{const e=new L({...t,index:t.index??(()=>this.#d.indexOf(e))});return e};#w=(t,e,n,r)=>{if(e===this.currentEntry)throw new i;if(this.#d.findIndex((t=>t.id===e.id))>-1)throw new i;return this.#k(t,e,n,r)};#k=(t,e,n,i)=>{const r=n??new ft({from:e,navigationType:"string"==typeof t?t:"replace",rollback:t=>this.#x(r,t),[$]:t,[B]:[...this.#d],[V]:this.#g,[G]:[...this.#f],[z]:e,[F]:this}),{finished:o,committed:s}=r;return this.#T(r),(()=>this.#L(t,e,r,i))().catch((t=>{})),{committed:s,finished:o}};#T=t=>{this.#y.add(t)};#L=(t,e,n,i)=>{try{return this.#l+=1,this.#P(t,e,n,i)}finally{this.#l-=1}};#x=(t,e)=>{const n=t[B],i=t[V],r=n[i],o=r?this.#b(r,e):void 0,s={...e,index:i,known:new Set([...this.#f,...n]),navigationType:o?.[E]??"replace",entries:n},a=o?N:A,c=o??this.#S({getState:this[Ut],navigationType:"replace",index:s.index,sameDocument:!0,...e});return this.#w(a,c,void 0,s)};#P=(t,e,n,r)=>{let o=t;const s=Dt();s&&e.sameDocument&&"string"==typeof o&&s?.mark?.(`same-document-navigation:${e.id}`);let a=!1,c=!1;const{currentEntry:u}=this;this.#p?.finished?.catch((t=>t)),this.#p?.[q]?.promise?.catch((t=>t)),this.#p?.[M]?.promise?.catch((t=>t)),this.#p?.[ht](),this.#p=n;const h=n.dispatchEvent({type:st,transition:n,entry:e}),l=({entries:t,index:e,known:i})=>{n.signal.aborted||(this.#d=t,i&&(this.#f=new Set([...this.#f,...i])),this.#g=e,this[Rt](this.currentEntry))},d=async t=>{if(c)return;c=!0,l(t);const{entriesChange:i}=t,r=[n.dispatchEvent(xt({type:rt,transition:n,entry:e}))];i&&r.push(this.dispatchEvent(xt({type:"entrieschange",...i}))),await Promise.all(r)},f=async()=>{if(await h,"number"!=typeof r?.index||!r.entries)throw new i;const t=this.entries(),n=t.map((t=>t.key)),o=r.entries.map((t=>t.key)),s=t.filter((t=>!o.includes(t.key))),c=r.entries.filter((t=>!n.includes(t.key)));return await d({entries:r.entries,index:r.index,known:r.known,entriesChange:s.length||c.length?{removedEntries:s,addedEntries:c,updatedEntries:[]}:void 0}),await this.dispatchEvent(xt({type:"currententrychange"})),a=!0,e},g=()=>{if(t===A)return f();const i=kt({currentEntry:u,currentIndex:this.#g,options:r,transition:n,known:this.#f,commit:d,reportError:n[it]}),s=new Promise(queueMicrotask);let c=[];const h=function*(t){const i=new Promise(queueMicrotask),{currentEntryChange:r,navigate:s,waitForCommit:c,commit:h,abortController:l}=t,d=l.abort.bind(l);if(n.signal.addEventListener("abort",d,{once:!0}),"string"==typeof o||o===N){const t=u?.dispatchEvent(xt({type:"navigatefrom",intercept:n[Q],transitionWhile:n[Q]}));t&&(yield t)}"string"==typeof o&&(yield n.dispatchEvent(s));n[dt]||h();yield c,e.sameDocument&&(yield n.dispatchEvent(r));a=!0,"string"==typeof o&&(yield e.dispatchEvent(xt({type:"navigateto",intercept:n[Q],transitionWhile:n[Q]})));yield p(),n[Y].size||(yield i);yield n.dispatchEvent({type:at,transition:n,entry:e}),yield n[et](),n.signal.removeEventListener("abort",d),yield n[ot](),"string"==typeof o&&(yield n.dispatchEvent(xt({type:"finish",intercept:n[Q],transitionWhile:n[Q]})),yield n.dispatchEvent(xt({type:"navigatesuccess",intercept:n[Q],transitionWhile:n[Q]})))}(i)[Symbol.iterator](),l={[Symbol.iterator]:()=>({next:()=>h.next()})};async function g(){const t=[...c];if(t.length){c=[];const e=(await Promise.all(t)).filter(D);if(1===e.length)throw await Promise.reject(e[0]);if(e.length)throw new AggregateError(e,e[0].reason?.message)}else n[X]||await s}return async function t(){for(const e of l){if(j(e)&&c.push(Promise.allSettled([e]).then((([t])=>t))),n[dt]||a&&n[tt])return g().then(t);if(n.signal.aborted)break}if(c.length)return g()}().then((()=>n[X]?void 0:s)).then((()=>e))},p=async()=>this.#I();return Promise.allSettled([(()=>{try{return g()}catch(t){return Promise.reject(t)}})()]).then((async([t])=>{"rejected"===t.status&&await n.dispatchEvent({type:ct,error:t.reason,transition:n,entry:e}),await p(),await n.dispatchEvent({type:ut,transition:n,entry:e}),await n[et](),this.#p===n&&(this.#p=void 0),e.sameDocument&&"string"==typeof o&&(s.mark(`same-document-navigation-finish:${e.id}`),s.measure(`same-document-navigation:${e.url}`,`same-document-navigation:${e.id}`,`same-document-navigation-finish:${e.id}`))})).then((()=>e))};#I=async()=>{for(const t of this.#f){if(-1!==this.#d.findIndex((e=>e.key===t.key)))continue;this.#f.delete(t);const e=xt({type:"dispose",entry:t});this[jt](t),await t.dispatchEvent(e),await this.dispatchEvent(e)}};reload(t){const{currentEntry:e}=this;if(!e)throw new i;const n=this.#b(e,t);return this.#w("reload",n,void 0,t)}updateCurrentEntry(t){const{currentEntry:e}=this;if(!e)throw new i("Expected current entry");e[k](t.state),this[Rt](e);const n=new pt("currententrychange",{from:e,navigationType:void 0}),r=xt({type:"entrieschange",addedEntries:[],removedEntries:[],updatedEntries:[e]});return Promise.all([this.dispatchEvent(n),this.dispatchEvent(r)])}}function Dt(){return"undefined"!=typeof performance?performance:{now:()=>Date.now(),mark(){},measure(){}}}const Ot=await async function(){const{stringify:t,parse:e}=await Promise.resolve().then((function(){return be}));return{stringify:t,parse:e}}().catch((function(){const t=JSON.stringify.bind(JSON),e=JSON.parse.bind(JSON);return{stringify:t,parse:e}})),Nt=()=>Ot;const At=Symbol.for("@virtualstate/navigation/location/checkChange"),Ft=Symbol.for("@virtualstate/navigation/location/awaitFinished"),qt=Symbol.for("@virtualstate/navigation/location/transitionURL"),Mt=Symbol.for("@virtualstate/navigation/location/url");class $t{#n;#U;constructor(t){this.#n=t,this.#U=t.navigation;const e=()=>{this.#R=void 0,this.#v=void 0};this.#U.addEventListener("navigate",(()=>{const t=this.#U.transition;t&&function(t){return M in t}(t)&&t[M].promise.then(e,e)})),this.#U.addEventListener("currententrychange",e)}#j=new WeakMap;#R;#v;get[Mt](){if(this.#R)return this.#R;const{currentEntry:t}=this.#U;if(!t)return this.#v=gt(this.#n.baseURL),this.#v;const e=this.#j.get(t);if(e)return e;const n=new URL(t.url??"https://html.spec.whatwg.org/");return this.#j.set(t,n),n}get hash(){return this[Mt].hash}set hash(t){this.#C("hash",t)}get host(){return this[Mt].host}set host(t){this.#C("host",t)}get hostname(){return this[Mt].hostname}set hostname(t){this.#C("hostname",t)}get href(){return this[Mt].href}set href(t){this.#C("href",t)}get origin(){return this[Mt].origin}get pathname(){return this[Mt].pathname}set pathname(t){this.#C("pathname",t)}get port(){return this[Mt].port}set port(t){this.#C("port",t)}get protocol(){return this[Mt].protocol}set protocol(t){this.#C("protocol",t)}get search(){return this[Mt].search}set search(t){this.#C("search",t)}#C=(t,e)=>{const n=this[Mt].toString();let i;"href"===t?i=new URL(e,n):(i=new URL(n),i[t]=e);const r=i.toString();n!==r&&this.#D(i,(()=>this.#U.navigate(r)))};replace(t){return this.#D(t,(t=>this.#U.navigate(t.toString(),{history:"replace"})))}reload(){return this.#O(this.#U.reload())}assign(t){return this.#D(t,(t=>this.#U.navigate(t.toString())))}[qt](t,e){return this.#D(t,e)}#D=async(t,e)=>{const n=this.#R="string"==typeof t?new URL(t,this[Mt].toString()):t;try{await this.#O(e(n))}finally{this.#R===n&&(this.#R=void 0)}};[Ft](t){return this.#O(t)}#O=async t=>{if(this.#v=void 0,!t)return;const{committed:e,finished:n}=t;await Promise.all([e||Promise.resolve(void 0),n||Promise.resolve(void 0)])};#N=()=>{const t=this[Mt],e=t.toString(),n=this.#U.currentEntry?.url;if(e!==n)return this.#D(t,(()=>this.#U.navigate(e)))};[At](){return this.#N()}}const Bt=Symbol.for("@virtualstate/navigation/history/state");class Ht extends $t{#n;#U;constructor(t){super(t),this.#n=t,this.#U=t.navigation}get length(){return this.#U.entries().length}scrollRestoration="manual";get state(){const t=this.#U.currentEntry?.getState();return"string"==typeof t||"number"==typeof t||"boolean"==typeof t?t:this.#n[Bt]??void 0}back(){const t=this.#U.entries()[(this.#U.currentEntry?.index??-1)-1],e=t?.url;if(!e)throw new i("Cannot go back");return this[qt](e,(()=>this.#U.back()))}forward(){const t=this.#U.entries()[(this.#U.currentEntry?.index??-1)+1],e=t?.url;if(!e)throw new i("Cannot go forward");return this[qt](e,(()=>this.#U.forward()))}go(t){if("number"!=typeof t||0===t||isNaN(t))return this[Ft](this.#U.reload());const e=this.#U.entries(),{currentEntry:n}=this.#U;if(!n)throw new Error(`Could not go ${t}`);const i=e[n.index+t];if(!i)throw new Error(`Could not go ${t}`);const r=i.key;return this[Ft](this.#U.traverseTo(r))}replaceState(t,e,n){return n?this[qt](n,(e=>this.#U.navigate(e.toString(),{state:t,history:"replace"}))):this.#U.updateCurrentEntry({state:t})}pushState(t,e,n){return n?this[qt](n,(e=>this.#U.navigate(e.toString(),{state:t}))):this.#U.updateCurrentEntry({state:t})}}const Vt="undefined"==typeof window?void 0:window,Wt="undefined"==typeof self?void 0:self,zt="__@virtualstate/navigation/key",Kt="__@virtualstate/navigation/meta";function _t(t){return O(t)&&!0===t[Kt]}function Jt(t){return O(t)&&_t(t[zt])}function Gt(t,e=te.limit){let n=t.entries();return"number"==typeof e&&(n=n.slice(-e)),n.map((({id:t,key:e,url:n,sameDocument:i})=>({id:t,key:e,url:n,sameDocument:i})))}function Yt(t,e,n=te.limit){return{[Kt]:!0,currentIndex:e.index,key:e.key,entries:Gt(t,n),state:e.getState()}}function Qt(t,e,n=te.limit){return{[zt]:Yt(t,e,n)}}function Xt(t,e,n,i,r){!function(){if("undefined"==typeof sessionStorage)return;try{const i=(e=Qt(t,n,r),Nt().stringify(e));sessionStorage.setItem(n.key,i)}catch{}var e}()}function Zt(t,e){return function(){const n=function(){const e=t.originalState??function(){try{return t.state}catch{return}}();return O(e)?e:void 0}();return Jt(n)?n[zt].key!==e.key?void 0:n[zt].state:void 0}()??function(){if("undefined"==typeof sessionStorage)return;try{const n=sessionStorage.getItem(e.key);if(!n)return;const i=(t=n,Nt().parse(t));if(!Jt(i))return;return i[zt].state}catch{return}var t}()}const te=Object.freeze({persist:!0,persistState:!0,history:!0,limit:50,patch:!0,interceptEvents:!0});function ee(t){return O(t)&&"function"==typeof t[Lt]&&"function"==typeof t[It]}function ne(t,e){e.addEventListener("click",(n=>{if(n.target?.ownerDocument===e.document){const e=ie(n);O(e)&&function(e,n){!function(){if(0!==(i=e).button||i.defaultPrevented||i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)return;var i;C(e);const r={history:"auto",[bt]:!0,[mt]:n.download,[Et]:e};t.navigate(n.href,r)}()}(n,e)}})),e.addEventListener("submit",(n=>{if(n.target?.ownerDocument===e.document){const e=re(n);O(e)&&function(e,n){!function(){if(e.defaultPrevented)return;const i=e.submitter&&"formMethod"in e.submitter&&e.submitter.formMethod?e.submitter.formMethod:n.method;if("dialog"===i)return;const r=e.submitter&&"formAction"in e.submitter&&e.submitter.formAction?e.submitter.formAction:n.action;let o;try{o=new FormData(n)}catch{o=new FormData(void 0)}const s="get"===i?new URLSearchParams([...o].map((([t,e])=>e instanceof File?[t,e.name]:[t,e]))):void 0,a="post"===i?o:void 0,c=new URL(r,t.currentEntry.url);s&&(c.search=s.toString());const u=e;C(u);const h={history:"auto",[bt]:!0,[vt]:a,[Et]:u};t.navigate(c.href,h)}()}(n,e)}}))}function ie(t){return ce(oe(t),"a[href]:not([data-navigation-ignore])")}function re(t){return ce(oe(t),"form:not([data-navigation-ignore])")}function oe(t){if(!t.composedPath)return t.target;return t.composedPath()[0]??t.target}function se(t,e,n){!function(){if(function(t){try{Object.defineProperty(t,"navigation",{value:n})}catch(t){}if(!t.history)try{Object.defineProperty(t,"history",{value:e})}catch(t){}}(t),t!==Vt)return;if(Wt)try{Object.defineProperty(Wt,"navigation",{value:n})}catch(t){}if("undefined"!=typeof globalThis)try{Object.defineProperty(globalThis,"navigation",{value:n})}catch(t){}}(),function(){if(!t.PopStateEvent)return;const e=t.PopStateEvent.prototype;if(!e)return;const n=Object.getOwnPropertyDescriptor(e,"state");Object.defineProperty(e,"state",{...n,get(){const t=n.get.call(this);return Jt(t)?t[zt].state:t}}),Object.defineProperty(e,"originalState",{...n})}(),function(){if(e instanceof Ht)return;const t=new Ht({navigation:n}),i=t.pushState.bind(t),r=t.replaceState.bind(t),o=t.go.bind(t),s=t.back.bind(t),a=t.forward.bind(t),c=Object.getPrototypeOf(e),u={pushState:{...Object.getOwnPropertyDescriptor(c,"pushState"),value:i},replaceState:{...Object.getOwnPropertyDescriptor(c,"replaceState"),value:r},go:{...Object.getOwnPropertyDescriptor(c,"go"),value:o},back:{...Object.getOwnPropertyDescriptor(c,"back"),value:s},forward:{...Object.getOwnPropertyDescriptor(c,"forward"),value:a}};Object.defineProperties(c,u);const h=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),"state");Object.defineProperty(e,"state",{...h,get:()=>t.state}),Object.defineProperty(e,"originalState",{...h})}()}function ae(t=te){const{persist:e,persistState:n,history:r,limit:o,patch:s,interceptEvents:a,window:c=Vt,navigation:u}={...te,...t},h=e||n,l=c??Vt,d=t.history&&"boolean"!=typeof t.history?t.history:function(t=Vt){if(void 0!==t)return t.history}(l);if(!d)return function(t){const e=[{key:w()}],n=t??new Ct({entries:e}),i=new Ht({navigation:n});return{navigation:n,history:i,apply(){ee(t)&&!n.entries().length&&t[Lt](e)}}}();C(l,"window required when using polyfill with history, this shouldn't be seen");const f=d?.state;let g={[Kt]:!0,currentIndex:-1,entries:[],key:"",state:void 0};Jt(f)&&(g=f[zt]);let p=g.entries;const y=!(!c&&!r||!d);if(!p.length){let t,e;l.location?.href&&(t=l.location.href),Jt(f)||_t(f)||(e=f);const n=w();p=[{key:n,state:e,url:t}],g.key=n,g.currentIndex=0}const v={entries:p,currentIndex:g?.currentIndex,currentKey:g?.key,getState(t){if(y)return Zt(d,t)},setState(t){y&&t.sameDocument&&Xt(m,0,t,0,o)},disposeState(t){y&&function(t,e){e&&"undefined"!=typeof sessionStorage&&sessionStorage.removeItem(t.key)}(t,h)}},m=u??new Ct(v),b=d?.pushState.bind(d),E=d?.replaceState.bind(d),S=d?.go.bind(d);return{navigation:m,history:d,apply(){if(ee(m)&&m[Tt](v),y){const t=new Set,r=new Set;m.addEventListener("navigate",(t=>{t.destination.sameDocument||t.intercept({commit:"after-transition",async handler(){queueMicrotask((()=>{t.signal.aborted||function(){if(O(t.originalEvent)){const e=ie(t.originalEvent);if(e)return function(t){const e=t.cloneNode();e.setAttribute("data-navigation-ignore","1"),e.click()}(e);{const e=re(t.originalEvent);if(e)return function(t){const e=t.cloneNode();e.setAttribute("data-navigation-ignore","1"),e.submit()}(e)}}location.href=t.destination.url}()}))}})})),m.addEventListener("currententrychange",(({navigationType:e,from:n})=>{const{currentEntry:i}=m;if(!i)return;const{key:s,url:a}=i;if(r.delete(s)||!i?.sameDocument)return;const c=Qt(m,i,o);switch(e||"replace"){case"push":return b(c,"",a);case"replace":return E(c,"",a);case"traverse":const e=i.index-n.index;return t.add(s),S(e)}})),l.addEventListener("popstate",(s=>{const{state:a,originalState:c}=s,u=c??a;if(!Jt(u))return;const{[zt]:{key:h}}=u;if(t.delete(h))return;let l;r.add(h);try{l=m.traverseTo(h).committed}catch(t){if(t instanceof i&&!e)return;throw t}(e||n)&&l.then((t=>{const e=Qt(m,t,o);E(e,"",t.url)})).catch((()=>{}))}))}if(a&&ne(m,l),s&&se(l,d,m),!d.state){const t=Qt(m,m.currentEntry,o);E(t,"",m.currentEntry.url)}}}}function ce(t,e){let n=t?t.matches instanceof Function?t:t.parentElement:void 0;for(;n;){if(n.matches(e))return C(n),n;n=n.parentElement??n.getRootNode()?.host}return}if("undefined"!=typeof window&&window.navigation){!function(t){if(!t)throw new Error("Expected Navigation")}(window.navigation)}const ue="object"==typeof self?self:globalThis,he=t=>((t,e)=>{const n=(e,n)=>(t.set(n,e),e),i=r=>{if(t.has(r))return t.get(r);const[o,s]=e[r];switch(o){case 0:case-1:return n(s,r);case 1:{const t=n([],r);for(const e of s)t.push(i(e));return t}case 2:{const t=n({},r);for(const[e,n]of s)t[i(e)]=i(n);return t}case 3:return n(new Date(s),r);case 4:{const{source:t,flags:e}=s;return n(new RegExp(t,e),r)}case 5:{const t=n(new Map,r);for(const[e,n]of s)t.set(i(e),i(n));return t}case 6:{const t=n(new Set,r);for(const e of s)t.add(i(e));return t}case 7:{const{name:t,message:e}=s;return n(new ue[t](e),r)}case 8:return n(BigInt(s),r);case"BigInt":return n(Object(BigInt(s)),r)}return n(new ue[o](s),r)};return i})(new Map,t)(0),le="",{toString:de}={},{keys:fe}=Object,ge=t=>{const e=typeof t;if("object"!==e||!t)return[0,e];const n=de.call(t).slice(8,-1);switch(n){case"Array":return[1,le];case"Object":return[2,le];case"Date":return[3,le];case"RegExp":return[4,le];case"Map":return[5,le];case"Set":return[6,le]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},pe=([t,e])=>0===t&&("function"===e||"symbol"===e),ye=(t,{json:e,lossy:n}={})=>{const i=[];return((t,e,n,i)=>{const r=(t,e)=>{const r=i.push(t)-1;return n.set(e,r),r},o=i=>{if(n.has(i))return n.get(i);let[s,a]=ge(i);switch(s){case 0:{let e=i;switch(a){case"bigint":s=8,e=i.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+a);e=null;break;case"undefined":return r([-1],i)}return r([s,e],i)}case 1:{if(a)return r([a,[...i]],i);const t=[],e=r([s,t],i);for(const e of i)t.push(o(e));return e}case 2:{if(a)switch(a){case"BigInt":return r([a,i.toString()],i);case"Boolean":case"Number":case"String":return r([a,i.valueOf()],i)}if(e&&"toJSON"in i)return o(i.toJSON());const n=[],c=r([s,n],i);for(const e of fe(i))!t&&pe(ge(i[e]))||n.push([o(e),o(i[e])]);return c}case 3:return r([s,i.toISOString()],i);case 4:{const{source:t,flags:e}=i;return r([s,{source:t,flags:e}],i)}case 5:{const e=[],n=r([s,e],i);for(const[n,r]of i)(t||!pe(ge(n))&&!pe(ge(r)))&&e.push([o(n),o(r)]);return n}case 6:{const e=[],n=r([s,e],i);for(const n of i)!t&&pe(ge(n))||e.push(o(n));return n}}const{message:c}=i;return r([s,{name:a,message:c}],i)};return o})(!(e||n),!!e,new Map,i)(t),i},{parse:ve,stringify:me}=JSON,we={json:!0,lossy:!0};var be=Object.freeze({__proto__:null,parse:t=>he(ve(t)),stringify:t=>me(ye(t,we))});return{applyPolyfill:function(t=te){const{apply:e,navigation:n}=ae(t);return e(),n}}}));

SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./C38sKiaF.js",import.meta.url,"C38sKiaF");SML.di("./CTwJH_ps.js",import.meta.url,"CTwJH_ps");SML.di("./CLcwsfQZ.js",import.meta.url,"CLcwsfQZ");SML.di("./OimaI6pY.js",import.meta.url,"OimaI6pY");SML.di("./CC2wUKE8.js",import.meta.url,"CC2wUKE8");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");SML.di("./FagDXDzk.js",import.meta.url,"FagDXDzk");SML.di("./DBgqsMtO.js",import.meta.url,"DBgqsMtO");SML.di("./Ccw0cO_g.js",import.meta.url,"Ccw0cO_g");SML.di("./CykCcTkJ.js",import.meta.url,"CykCcTkJ");SML.di("./HYbNa5uQ.js",import.meta.url,"HYbNa5uQ");SML.di("./DAqoOXDQ.js",import.meta.url,"DAqoOXDQ");SML.di("./CsGy0MYm.js",import.meta.url,"CsGy0MYm");SML.di("./BGOkDHmz.js",import.meta.url,"BGOkDHmz");SML.di("./DoY_u8JV.js",import.meta.url,"DoY_u8JV");
SML.dm("KVXCiZQR",["GlDbwxoG","s_Igk1Yn","C38sKiaF","CLcwsfQZ","OimaI6pY","CTwJH_ps","CC2wUKE8","D-MAMWlw","FagDXDzk","DBgqsMtO","Ccw0cO_g","CykCcTkJ","HYbNa5uQ","DAqoOXDQ","CsGy0MYm","BGOkDHmz","DoY_u8JV"],(async(t,e,i,s,r)=>{const n=s.W(e.s);let o=class extends n{constructor(){super(...arguments),this.impressionId="0",this.isBTFPlacement=!1,this.isBlank=!1,this.url="",this.randomHouseAdIndex=0,this.adEvents=[],this.outboundLinkUrl="",this.placement=t.a8.SIDEBARS,this.isLargeBanner=!1,this.hasBrandUnsafeContent=!1,this.showBrandSafeContent=!1,this.visible=!0,this.serverSideRendered=!1,this.adType=t.eo.DISPLAY,this._brandUnsafePostIds=new Set,this.handleVideoMediaClick=()=>{r.s({impressionId:this.impressionId,adEvents:this.adEvents,clickRedirectUrl:this.outboundLinkUrl})},this.checkNeighboringSidebarAd=()=>{if(this.isBTFPlacement){const t=this.previousElementSibling;"DSA-TRANSPARENCY-MODAL-PROVIDER"===t?.tagName&&this.hideBTFSidebarAd()}},this.hideBTFSidebarAd=()=>{!this.isBlank&&this.isBTFPlacement&&(this.style.display="none")},this.showBTFSidebarAd=()=>{!this.isBlank&&this.isBTFPlacement&&(this.style.display="block")},this.setBrandUnsafeView=t=>{if(this.hasBrandUnsafeContent&&this.isLargeBanner)return;const{postId:e,isInView:i}=t.detail;i?this._brandUnsafePostIds.add(e):this._brandUnsafePostIds.has(e)&&!i&&this._brandUnsafePostIds.delete(e),this.hasBrandUnsafeContent=this._brandUnsafePostIds.size>0}}static get styles(){return[t.t]}connectedCallback(){super.connectedCallback(),this.enableAdObserver({postElement:this,events:s.e(this.adEvents),postId:this.postId,impressionId:this.impressionId,adType:this.adType}),window.addEventListener(r.B,this.setBrandUnsafeView),window.addEventListener(r.H,this.hideBTFSidebarAd),window.addEventListener(r.S,this.showBTFSidebarAd),this.checkInitialLoadForBrandSafety(),this.checkNeighboringSidebarAd(),this.videoMediaClickTracker?.addEventListener("click",this.handleVideoMediaClick)}disconnectedCallback(){this.videoMediaClickTracker?.removeEventListener("click",this.handleVideoMediaClick),window.removeEventListener(r.B,this.setBrandUnsafeView),window.removeEventListener(r.H,this.hideBTFSidebarAd),window.removeEventListener(r.S,this.showBTFSidebarAd),super.disconnectedCallback()}updated(t){t.has("hasBrandUnsafeContent")&&(this.visible=!1,setTimeout((()=>{this.showBrandSafeContent=this.hasBrandUnsafeContent,this.visible=!0}),250))}get videoMediaClickTracker(){return this.serverSideRendered&&this.adType===t.eo.VIDEO?this.querySelector(`click-location-tracker[click-location="${t.v.MEDIA}"]`):null}checkInitialLoadForBrandSafety(){const e=document.querySelectorAll("shreddit-post[is-not-brand-safe]");for(let i=0;i<e.length;i++){const s=e[i];if(!s.isPostInViewport)break;this.setBrandUnsafeView(t.c(r.B,{postId:s.id,isInView:!0}))}}trackAdClick(){this.outboundClickHandler()}outboundClickHandler(){t.$.isAvailable()&&(t.$.setItem(t.a0.LastClickedAdId,this.postId),t.$.setItem(t.a0.ImpressionId,this.impressionId),t.$.setItem(t.a0.AdPlacement,this.placement))}get contentExists(){return!!(this.serverSideRendered?this.shadowRoot?.hasChildNodes:this.querySelector('[slot="sidebar-content"]'))}renderAdSidebarContent(){return e.x` <article class="transition-opacity ease-in-out duration-250 m-0 ${this.visible?"opacity-100":"opacity-0"}"> <slot name="promoted-label"></slot> <shreddit-dynamic-ad-link outbound-link-override="${e.l(this.outboundLinkUrl?void 0:this.url)}" target="_blank" @click="${this.trackAdClick}" post-id="${this.postId}" click-location="${t.v.MEDIA}" impression-id="${this.impressionId}" encrypted-tracking-payload="${e.l(this.encryptedTrackingPayload)}"> <div class="flex justify-center"> <slot name="sidebar-content"></slot> </div> </shreddit-dynamic-ad-link> </article> `}renderHouseSidebarContent(){const t="m-0 border-none border-0 p-0 transition-opacity ease-in-out duration-250 "+(this.visible?"opacity-100":"opacity-0");return e.x` ${i.a({attributes:{href:this.houseAdHref,target:"_blank",className:t},suppressVisitedStyle:!0,underline:"none",children:e.x` <article> <div class="h-[32px]"></div> <div class="flex justify-center"> <img alt="brand safe sidebar ad" class="w-[300px] flex rounded-2" slot="sidebar-content" src="${this.houseAdImage}"> </div> </article>`})}`}renderContent(){return this.showBrandSafeContent?this.renderHouseSidebarContent():this.serverSideRendered?e.x`<div class="transition-opacity ease-in-out duration-250 ${this.visible?"opacity-100":"opacity-0"}"> <slot></slot> </div>`:this.renderAdSidebarContent()}render(){return e.x`${!this.isBlank&&this.contentExists?this.renderContent():null}`}};t._([t.n({type:String})],o.prototype,"id",void 0),t._([t.n({type:String,attribute:"post-id"})],o.prototype,"postId",void 0),t._([t.n({type:String,attribute:"house-ad-image"})],o.prototype,"houseAdImage",void 0),t._([t.n({type:String,attribute:"house-ad-href"})],o.prototype,"houseAdHref",void 0),t._([t.n({type:String,attribute:"impression-id"})],o.prototype,"impressionId",void 0),t._([t.n({type:Boolean,attribute:"is-btf-placement"})],o.prototype,"isBTFPlacement",void 0),t._([t.n({type:Boolean,attribute:"is-blank"})],o.prototype,"isBlank",void 0),t._([t.n({type:Boolean,attribute:"is-media-only",reflect:!0})],o.prototype,"isMediaOnly",void 0),t._([t.n({type:String})],o.prototype,"url",void 0),t._([t.n({type:Number})],o.prototype,"randomHouseAdIndex",void 0),t._([t.n({type:Array,attribute:"ad-events",reflect:!0})],o.prototype,"adEvents",void 0),t._([t.n({type:String,attribute:"outbound-link-url",reflect:!0})],o.prototype,"outboundLinkUrl",void 0),t._([t.n({type:String,attribute:"author-id"})],o.prototype,"authorId",void 0),t._([t.n({type:String,attribute:"placement"})],o.prototype,"placement",void 0),t._([t.n({type:String,attribute:"subreddit-id"})],o.prototype,"subredditId",void 0),t._([t.n({type:Boolean,attribute:"is-large-banner"})],o.prototype,"isLargeBanner",void 0),t._([t.n({type:Boolean})],o.prototype,"hasBrandUnsafeContent",void 0),t._([t.n({type:Boolean})],o.prototype,"showBrandSafeContent",void 0),t._([t.n({type:Boolean})],o.prototype,"visible",void 0),t._([t.n({type:String,attribute:"encrypted-tracking-payload"})],o.prototype,"encryptedTrackingPayload",void 0),t._([t.n({type:Boolean,attribute:"server-side-rendered"})],o.prototype,"serverSideRendered",void 0),t._([t.n({type:String,attribute:"ad-type"})],o.prototype,"adType",void 0),t._([t.n({type:String,attribute:"ads-correlation-id"})],o.prototype,"adsCorrelationId",void 0),o=t._([t.e("shreddit-sidebar-ad")],o);var a=Object.freeze({__proto__:null,get ShredditSidebarAd(){return o}});return{get i(){return a}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");
SML.dm("Up_QFaEA",["GlDbwxoG","s_Igk1Yn"],(async(e,t)=>{let r=class extends t.s{announce(t){const r=t.message,n=t.options?.priority||e.S.polite,s=document.createElement("faceplate-screen-reader-content");s.setAttribute("aria-live",n),s.setAttribute("aria-atomic","true");const a=document.createElement("span");a.innerText=r,s.appendChild(a),this.replaceChildren(s)}render(){return t.x`<slot></slot>`}};return r.styles=[t.i`:host{position:fixed}`,e.t],r=e._([e.e("screen-reader-alert-outlet")],r),{get ScreenReaderAlertOutlet(){return r}}}));
SML.di("./GlDbwxoG.js",import.meta.url,"GlDbwxoG");SML.di("./D-MAMWlw.js",import.meta.url,"D-MAMWlw");SML.di("./s_Igk1Yn.js",import.meta.url,"s_Igk1Yn");SML.di("./FagDXDzk.js",import.meta.url,"FagDXDzk");
SML.dm("d2Pe2_Gj",["GlDbwxoG","D-MAMWlw","s_Igk1Yn","FagDXDzk"],(async(t,s,e)=>{const i="hidden";let o=class extends e.s{constructor(){super(...arguments),this.thingId="",this.pubsub=new t.m(this),this.onPostUpdateAction=t=>{if(t.postId!==this.thingId)return;const{action:e,value:i}=t;switch(e){case s.a.lock:this.updateStatusIconVisibility("lock-status",i);break;case s.a.sticky:case s.a.updateHighlightedPost:this.updateStatusIconVisibility("stickied-status",i)}}}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(t.T.PostUpdated,this.onPostUpdateAction)}updateStatusIconVisibility(t,s){const e=this.getStatusIconElement(t),i=this.getSeparatorIconElement();e&&(s?this.showIcon(e):this.hideIcon(e)),i&&(s?this.showIcon(i):this.hideIcon(i))}getStatusIconElement(t){return(this.shadowRoot?.querySelector("slot")?.assignedElements()||[]).map((t=>"svg"===t.tagName.toLowerCase()?t:t.querySelector("svg"))).find((s=>s?.getAttribute("class")?.includes(t)))}getSeparatorIconElement(){return(this.shadowRoot?.querySelector("slot")?.assignedElements()||[]).find((t=>t.getAttribute("class")?.includes("separator")))}showIcon(t){t.classList.remove(i)}hideIcon(t){t.classList.add(i)}render(){return e.x`<slot></slot>`}};return o.styles=[t.t],t._([t.n({type:String,attribute:"thing-id"})],o.prototype,"thingId",void 0),o=t._([t.e("shreddit-status-icons")],o),{get ShredditStatusIcons(){return o}}}));